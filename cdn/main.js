var Ko=Object.defineProperty;var Yo=(Fe,Ie,Oe)=>Ie in Fe?Ko(Fe,Ie,{enumerable:!0,configurable:!0,writable:!0,value:Oe}):Fe[Ie]=Oe;var be=(Fe,Ie,Oe)=>(Yo(Fe,typeof Ie!="symbol"?Ie+"":Ie,Oe),Oe),wn=(Fe,Ie,Oe)=>{if(!Ie.has(Fe))throw TypeError("Cannot "+Oe)};var t=(Fe,Ie,Oe)=>(wn(Fe,Ie,"read from private field"),Oe?Oe.call(Fe):Ie.get(Fe)),c=(Fe,Ie,Oe)=>{if(Ie.has(Fe))throw TypeError("Cannot add the same private member more than once");Ie instanceof WeakSet?Ie.add(Fe):Ie.set(Fe,Oe)},N=(Fe,Ie,Oe,Si)=>(wn(Fe,Ie,"write to private field"),Si?Si.call(Fe,Oe):Ie.set(Fe,Oe),Oe);var fi=(Fe,Ie,Oe,Si)=>({set _(gn){N(Fe,Ie,gn,Oe)},get _(){return t(Fe,Ie,Si)}}),k=(Fe,Ie,Oe)=>(wn(Fe,Ie,"access private method"),Oe);(async()=>{(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))w(i);new MutationObserver(i=>{for(const D of i)if(D.type==="childList")for(const b of D.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&w(b)}).observe(document,{childList:!0,subtree:!0});function O(i){const D={};return i.integrity&&(D.integrity=i.integrity),i.referrerPolicy&&(D.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?D.credentials="include":i.crossOrigin==="anonymous"?D.credentials="omit":D.credentials="same-origin",D}function w(i){if(i.ep)return;i.ep=!0;const D=O(i);fetch(i.href,D)}})();const Fe=document.querySelectorAll(".drawer"),Ie=document.querySelectorAll(".drawer__dialog"),Oe=document.querySelectorAll('[data-role="drawer"]');Oe.forEach(f=>f.addEventListener("click",Si)),Fe.forEach(f=>f.addEventListener("click",Si)),Ie.forEach(f=>f.addEventListener("click",O=>{O.stopPropagation()}));function Si(){Fe.forEach(f=>f.classList.toggle("drawer_show")),Oe.forEach(f=>f.classList.toggle("toggler_show"))}const gn=document.querySelectorAll('[data-role="drop-down"]'),Qa=document.querySelectorAll(".drop-down");gn.forEach(f=>f.addEventListener("click",Ja));function Ja(){const f=document.querySelector(this.dataset.target);Qa.forEach(O=>{O.id!==f.id&&O.classList.remove("drop-down_open")}),f.classList.toggle("drop-down_open")}const Za=document.getElementById("js-modal-area"),to=document.querySelectorAll(".MODAL"),eo=document.querySelectorAll('[data-role="modal"]'),io=document.querySelectorAll(".MODAL__dialog");to.forEach(f=>{ro(),document.getElementById("js-modal-area").appendChild(f)}),eo.forEach(f=>{f.addEventListener("click",so)}),io.forEach(f=>f.addEventListener("click",no));function so(){document.querySelector(this.dataset.target).classList.toggle("MODAL_open")}function no(f){f.stopPropagation()}function ro(){if(!Za){const f=document.createElement("div");f.setAttribute("id","js-modal-area"),f.style.zIndex="100",f.style.position="relative",document.body.appendChild(f)}}function ao(){const f=document.querySelector('[data-role="modal-open"]');f&&f.dataset.errors!="{}"&&document.querySelector(f.dataset.target).classList.add("MODAL_open")}window.onload=ao,document.addEventListener("DOMContentLoaded",function(){const f=document.getElementById("agreement-box"),O=document.getElementById("agreement-check"),w=document.getElementById("agree_chk_id");if(w&&f){let i=function(b,_){let nt;return function(...z){const P=()=>{clearTimeout(nt),b(...z)};clearTimeout(nt),nt=setTimeout(P,_)}},D=function(){Math.abs(f.scrollHeight-f.clientHeight-f.scrollTop)<=1&&w.disabled&&(w.disabled=!1,O.classList.remove("check-disabled"),O.classList.add("check-enabled"),w.classList.add("check-enabled"))};w.disabled=!0,f.addEventListener("scroll",i(D,100)),window.addEventListener("load",D)}}),document.addEventListener("DOMContentLoaded",function(){const f="noantisocial",O="edelivery",w=document.getElementById("confirmButton");if(w){let i=function(){const b=document.getElementById(f).checked,_=document.getElementById(O).checked;w.disabled=!(b&&_)},D=function(b,_,nt,z,P,F,tt){const j=document.getElementById(b),C=document.getElementById(_),q=document.getElementById(nt),$=document.getElementById(z),et=document.getElementById(P),ut=document.getElementById(F),st=document.getElementById(tt);$.disabled=!0,et.disabled=!0;function I(){let V=!(C.clientHeight<q.scrollHeight)||C.scrollHeight-C.scrollTop<=C.clientHeight+1;$.disabled=!V}j.addEventListener("shown.bs.modal",function(){I(),C.addEventListener("scroll",I)}),$.addEventListener("click",function(){this.disabled||(ut.style.display="none",et.disabled=!1,st.classList.remove("check-disabled"),st.classList.add("check-enabled"),et.classList.remove("check-disabled"),et.classList.add("check-enabled"))}),et.addEventListener("change",i)};w.disabled=!0,D("noantisocialModal","noantisocialBox","noantisocialItem","noantisocialButton",f,"noantisocialText","noantisocialLabel"),D("edeliveryModal","edeliveryBox","edeliveryItem","edeliveryButton",O,"edeliveryText","edeliveryLabel"),i()}}),document.querySelectorAll(".password__toggler").forEach(f=>f.addEventListener("click",oo));function oo(){const f=document.querySelector(this.dataset.target);f.type=f.type==="password"?"text":"password"}const lo=document.querySelectorAll(".format_num"),ho=document.querySelectorAll(".format_date"),co=document.querySelectorAll(".format_datetime"),Ei="--";lo.forEach(f=>{if(f.textContent){let O;f.classList.contains("format_area")&&(O={minimumFractionDigits:2});const w=Number(f.textContent).toLocaleString(void 0,O);f.innerHTML=isNaN(parseFloat(f.textContent))?f.textContent:w}}),ho.forEach(f=>{if(f.textContent){let O=f.textContent.replaceAll(`
`,"").replaceAll(" ","").split("/");f.innerHTML=`${O[0]??(O[0]=Ei)}`,f.innerHTML+='<span class="format_unit">\u5E74 </span>',f.innerHTML+=`${O[1]??(O[1]=Ei)}`,f.innerHTML+='<span class="format_unit">\u6708 </span>',f.innerHTML+=`${O[2]??(O[2]=Ei)}`,f.innerHTML+='<span class="format_unit">\u65E5</span>'}}),co.forEach(f=>{if(f.textContent){let O=new Date(f.textContent);O!="Invalid Date"?(f.innerHTML=O.getFullYear(),f.innerHTML+='<span class="format_unit">\u5E74 </span>',f.innerHTML+=O.getMonth()+1,f.innerHTML+='<span class="format_unit">\u6708 </span>',f.innerHTML+=O.getDate(),f.innerHTML+='<span class="format_unit">\u65E5 </span>',f.innerHTML+=`${O.getHours()}:${O.getMinutes()<10?"0":""}${O.getMinutes()}`):(f.innerHTML=`${Ei}`,f.innerHTML+='<span class="format_unit">\u5E74 </span>',f.innerHTML+=`${Ei}`,f.innerHTML+='<span class="format_unit">\u6708 </span>',f.innerHTML+=`${Ei}`,f.innerHTML+='<span class="format_unit">\u65E5 </span>',f.innerHTML+=`${Ei}`)}});const uo=document.querySelectorAll('[data-role="auth-menu"'),mr=document.querySelector(".main-header__auth-menu"),vr=document.querySelector(".main-header__auth-bg");mr&&vr&&(uo.forEach(f=>f.addEventListener("click",br)),vr.addEventListener("click",br));function br(){mr.classList.toggle("main-header__auth-menu_open")}const Ar=document.querySelectorAll('[data-role="toggle-section"]'),po=document.querySelectorAll(".toggle-section__item");Ar.forEach(f=>f.addEventListener("click",go));function go(){po.forEach(f=>f.classList.remove("toggle-section__item_show")),Ar.forEach(f=>f.classList.remove("toggle-btn__item_active")),document.querySelector(this.dataset.target).classList.add("toggle-section__item_show"),this.classList.add("toggle-btn__item_active"),window.scrollTo({top:window.scrollY+document.querySelector(".fund-detail__thumbnail").getBoundingClientRect().bottom-57})}document.querySelectorAll(".schedule__status").forEach(f=>{if(f.dataset){const O=new Date,w=new Date(f.dataset.start),i=new Date(f.dataset.end);w!=="Invalid Date"&&i!=="Invalid Date"?O>i?(f.classList.remove("schedule__status_yet"),f.classList.add("schedule__status_complete")):w<=O&&O<=i&&(f.classList.remove("schedule__status_yet"),f.classList.add("schedule__status_current")):console.log("invalid date!",`
 start: ${w}`,`
end: ${i}`)}else console.log(f.dataset)});var Oi=function(){return Oi=Object.assign||function(f){for(var O,w=1,i=arguments.length;w<i;w++)for(var D in O=arguments[w])Object.prototype.hasOwnProperty.call(O,D)&&(f[D]=O[D]);return f},Oi.apply(this,arguments)};function yr(f,O,w){if(w||arguments.length===2)for(var i,D=0,b=O.length;D<b;D++)!i&&D in O||(i||(i=Array.prototype.slice.call(O,0,D)),i[D]=O[D]);return f.concat(i||Array.prototype.slice.call(O))}function wr(f){return Array.prototype.slice.call(f)}function xr(f,O){var w=Math.floor(f);return w===O||w+1===O?f:O}function _r(){return Date.now()}function fn(f,O,w){if(O="data-keen-slider-"+O,w===null)return f.removeAttribute(O);f.setAttribute(O,w||"")}function Ms(f,O){return O=O||document,typeof f=="function"&&(f=f(O)),Array.isArray(f)?f:typeof f=="string"?wr(O.querySelectorAll(f)):f instanceof HTMLElement?[f]:f instanceof NodeList?wr(f):[]}function es(f){f.raw&&(f=f.raw),f.cancelable&&!f.defaultPrevented&&f.preventDefault()}function is(f){f.raw&&(f=f.raw),f.stopPropagation&&f.stopPropagation()}function Sr(){var f=[];return{add:function(O,w,i,D){O.addListener?O.addListener(i):O.addEventListener(w,i,D),f.push([O,w,i,D])},input:function(O,w,i,D){this.add(O,w,function(b){return function(_){_.nativeEvent&&(_=_.nativeEvent);var nt=_.changedTouches||[],z=_.targetTouches||[],P=_.detail&&_.detail.x?_.detail:null;return b({id:P?P.identifier?P.identifier:"i":z[0]?z[0]?z[0].identifier:"e":"d",idChanged:P?P.identifier?P.identifier:"i":nt[0]?nt[0]?nt[0].identifier:"e":"d",raw:_,x:P&&P.x?P.x:z[0]?z[0].screenX:P?P.x:_.pageX,y:P&&P.y?P.y:z[0]?z[0].screenY:P?P.y:_.pageY})}}(i),D)},purge:function(){f.forEach(function(O){O[0].removeListener?O[0].removeListener(O[2]):O[0].removeEventListener(O[1],O[2],O[3])}),f=[]}}}function mn(f,O,w){return Math.min(Math.max(f,O),w)}function ei(f){return(f>0?1:0)-(f<0?1:0)||+f}function Er(f){var O=f.getBoundingClientRect();return{height:xr(O.height,f.offsetHeight),width:xr(O.width,f.offsetWidth)}}function $e(f,O,w,i){var D=f&&f[O];return D==null?w:i&&typeof D=="function"?D():D}function ti(f){return Math.round(1e6*f)/1e6}function fo(f){var O,w,i,D,b,_;function nt(j){_||(_=j),z(!0);var C=j-_;C>i&&(C=i);var q=D[w];if(q[3]<C)return w++,nt(j);var $=q[2],et=q[4],ut=q[0],st=q[1]*(0,q[5])(et===0?1:(C-$)/et);if(st&&f.track.to(ut+st),C<i)return F();_=null,z(!1),P(null),f.emit("animationEnded")}function z(j){O.active=j}function P(j){O.targetIdx=j}function F(){var j;j=nt,b=window.requestAnimationFrame(j)}function tt(){var j;j=b,window.cancelAnimationFrame(j),z(!1),P(null),_&&f.emit("animationStopped"),_=null}return O={active:!1,start:function(j){if(tt(),f.track.details){var C=0,q=f.track.details.position;w=0,i=0,D=j.map(function($){var et,ut=Number(q),st=(et=$.earlyExit)!==null&&et!==void 0?et:$.duration,I=$.easing,V=$.distance*I(st/$.duration)||0;q+=V;var W=i;return i+=st,C+=V,[ut,$.distance,W,i,$.duration,I]}),P(f.track.distToIdx(C)),F(),f.emit("animationStarted")}},stop:tt,targetIdx:null}}function mo(f){var O,w,i,D,b,_,nt,z,P,F,tt,j,C,q,$=1/0,et=[],ut=null,st=0;function I(Tt){Nt(st+Tt)}function V(Tt){var Pt=W(st+Tt).abs;return ot(Pt)?Pt:null}function W(Tt){var Pt=Math.floor(Math.abs(ti(Tt/w))),Et=ti((Tt%w+w)%w);Et===w&&(Et=0);var at=ei(Tt),bt=nt.indexOf(yr([],nt,!0).reduce(function(Rt,Ut){return Math.abs(Ut-Et)<Math.abs(Rt-Et)?Ut:Rt})),kt=bt;return at<0&&Pt++,bt===_&&(kt=0,Pt+=at>0?1:-1),{abs:kt+Pt*_*at,origin:bt,rel:kt}}function H(Tt,Pt,Et){var at;if(Pt||!Dt())return Q(Tt,Et);if(!ot(Tt))return null;var bt=W(Et??st),kt=bt.abs,Rt=Tt-bt.rel,Ut=kt+Rt;at=Q(Ut);var Kt=Q(Ut-_*ei(Rt));return(Kt!==null&&Math.abs(Kt)<Math.abs(at)||at===null)&&(at=Kt),ti(at)}function Q(Tt,Pt){if(Pt==null&&(Pt=ti(st)),!ot(Tt)||Tt===null)return null;Tt=Math.round(Tt);var Et=W(Pt),at=Et.abs,bt=Et.rel,kt=Et.origin,Rt=Ct(Tt),Ut=(Pt%w+w)%w,Kt=nt[kt],re=Math.floor((Tt-(at-bt))/_)*w;return ti(Kt-Ut-Kt+nt[Rt]+re+(kt===_?w:0))}function ot(Tt){return At(Tt)===Tt}function At(Tt){return mn(Tt,P,F)}function Dt(){return D.loop}function Ct(Tt){return(Tt%_+_)%_}function Nt(Tt){var Pt;Pt=Tt-st,et.push({distance:Pt,timestamp:_r()}),et.length>6&&(et=et.slice(-6)),st=ti(Tt);var Et=wt().abs;if(Et!==ut){var at=ut!==null;ut=Et,at&&f.emit("slideChanged")}}function wt(Tt){var Pt=Tt?null:function(){if(_){var Et=Dt(),at=Et?(st%w+w)%w:st,bt=(Et?st%w:st)-b[0][2],kt=0-(bt<0&&Et?w-Math.abs(bt):bt),Rt=0,Ut=W(st),Kt=Ut.abs,re=Ut.rel,_e=b[re][2],ce=b.map(function(he,me){var jt=kt+Rt;(jt<0-he[0]||jt>1)&&(jt+=(Math.abs(jt)>w-1&&Et?w:0)*ei(-jt));var oe=me-re,Ce=ei(oe),se=oe+Kt;Et&&(Ce===-1&&jt>_e&&(se+=_),Ce===1&&jt<_e&&(se-=_),tt!==null&&se<tt&&(jt+=w),j!==null&&se>j&&(jt-=w));var Se=jt+he[0]+he[1],ne=Math.max(jt>=0&&Se<=1?1:Se<0||jt>1?0:jt<0?Math.min(1,(he[0]+jt)/he[0]):(1-jt)/he[0],0);return Rt+=he[0]+he[1],{abs:se,distance:D.rtl?-1*jt+1-he[0]:jt,portion:ne,size:he[0]}});return Kt=At(Kt),re=Ct(Kt),{abs:At(Kt),length:i,max:q,maxIdx:F,min:C,minIdx:P,position:st,progress:Et?at/w:st/i,rel:re,slides:ce,slidesLength:w}}}();return O.details=Pt,f.emit("detailsChanged"),Pt}return O={absToRel:Ct,add:I,details:null,distToIdx:V,idxToDist:H,init:function(Tt){if(function(){if(D=f.options,b=(D.trackConfig||[]).map(function(bt){return[$e(bt,"size",1),$e(bt,"spacing",0),$e(bt,"origin",0)]}),_=b.length){w=ti(b.reduce(function(bt,kt){return bt+kt[0]+kt[1]},0));var Et,at=_-1;i=ti(w+b[0][2]-b[at][0]-b[at][2]-b[at][1]),nt=b.reduce(function(bt,kt){if(!bt)return[0];var Rt=b[bt.length-1],Ut=bt[bt.length-1]+(Rt[0]+Rt[2])+Rt[1];return Ut-=kt[2],bt[bt.length-1]>Ut&&(Ut=bt[bt.length-1]),Ut=ti(Ut),bt.push(Ut),(!Et||Et<Ut)&&(z=bt.length-1),Et=Ut,bt},null),i===0&&(z=0),nt.push(ti(w))}}(),!_)return wt(!0);var Pt;(function(){var Et=f.options.range,at=f.options.loop;tt=P=at?$e(at,"min",-1/0):0,j=F=at?$e(at,"max",$):z;var bt=$e(Et,"min",null),kt=$e(Et,"max",null);bt!==null&&(P=bt),kt!==null&&(F=kt),C=P===-1/0?P:f.track.idxToDist(P||0,!0,0),q=F===$?F:H(F,!0,0),kt===null&&(j=F),$e(Et,"align",!1)&&F!==$&&b[Ct(F)][2]===0&&(q-=1-b[Ct(F)][0],F=V(q-st)),C=ti(C),q=ti(q)})(),Pt=Tt,Number(Pt)===Pt?I(Q(At(Tt))):wt()},to:Nt,velocity:function(){var Tt=_r(),Pt=et.reduce(function(Et,at){var bt=at.distance,kt=at.timestamp;return Tt-kt>200||(ei(bt)!==ei(Et.distance)&&Et.distance&&(Et={distance:0,lastTimestamp:0,time:0}),Et.time&&(Et.distance+=bt),Et.lastTimestamp&&(Et.time+=kt-Et.lastTimestamp),Et.lastTimestamp=kt),Et},{distance:0,lastTimestamp:0,time:0});return Pt.distance/Pt.time||0}}}function vo(f){var O,w,i,D,b,_,nt,z;function P(ut){return 2*ut}function F(ut){return mn(ut,nt,z)}function tt(ut){return 1-Math.pow(1-ut,3)}function j(){return i?f.track.velocity():0}function C(){et();var ut=f.options.mode==="free-snap",st=f.track,I=j();D=ei(I);var V=f.track.details,W=[];if(I||!ut){var H=q(I),Q=H.dist,ot=H.dur;if(ot=P(ot),Q*=D,ut){var At=st.idxToDist(st.distToIdx(Q),!0);At&&(Q=At)}W.push({distance:Q,duration:ot,easing:tt});var Dt=V.position,Ct=Dt+Q;if(Ct<b||Ct>_){var Nt=Ct<b?b-Dt:_-Dt,wt=0,Tt=I;if(ei(Nt)===D){var Pt=Math.min(Math.abs(Nt)/Math.abs(Q),1),Et=function(kt){return 1-Math.pow(1-kt,1/3)}(Pt)*ot;W[0].earlyExit=Et,Tt=I*(1-Pt)}else W[0].earlyExit=0,wt+=Nt;var at=q(Tt,100),bt=at.dist*D;f.options.rubberband&&(W.push({distance:bt,duration:P(at.dur),easing:tt}),W.push({distance:-bt+wt,duration:500,easing:tt}))}f.animator.start(W)}else f.moveToIdx(F(V.abs),!0,{duration:500,easing:function(kt){return 1+--kt*kt*kt*kt*kt}})}function q(ut,st){st===void 0&&(st=1e3);var I=147e-9+(ut=Math.abs(ut))/st;return{dist:Math.pow(ut,2)/I,dur:ut/I}}function $(){var ut=f.track.details;ut&&(b=ut.min,_=ut.max,nt=ut.minIdx,z=ut.maxIdx)}function et(){f.animator.stop()}f.on("updated",$),f.on("optionsChanged",$),f.on("created",$),f.on("dragStarted",function(){i=!1,et(),O=w=f.track.details.abs}),f.on("dragChecked",function(){i=!0}),f.on("dragEnded",function(){var ut=f.options.mode;ut==="snap"&&function(){var st=f.track,I=f.track.details,V=I.position,W=ei(j());(V>_||V<b)&&(W=0);var H=O+W;I.slides[st.absToRel(H)].portion===0&&(H-=W),O!==w&&(H=w),ei(st.idxToDist(H,!0))!==W&&(H+=W),H=F(H);var Q=st.idxToDist(H,!0);f.animator.start([{distance:Q,duration:500,easing:function(ot){return 1+--ot*ot*ot*ot*ot}}])}(),ut!=="free"&&ut!=="free-snap"||C()}),f.on("dragged",function(){w=f.track.details.abs})}function bo(f){var O,w,i,D,b,_,nt,z,P,F,tt,j,C,q,$,et,ut,st,I=Sr();function V(wt){if(_&&z===wt.id){var Tt=ot(wt);if(P){if(!Q(wt))return H(wt);F=Tt,P=!1,f.emit("dragChecked")}if(et)return F=Tt;es(wt);var Pt=function(at){if(ut===-1/0&&st===1/0)return at;var bt=f.track.details,kt=bt.length,Rt=bt.position,Ut=mn(at,ut-Rt,st-Rt);if(kt===0)return 0;if(!f.options.rubberband)return Ut;if(Rt<=st&&Rt>=ut||Rt<ut&&w>0||Rt>st&&w<0)return at;var Kt=(Rt<ut?Rt-ut:Rt-st)/kt,re=D*kt,_e=Math.abs(Kt*re),ce=Math.max(0,1-_e/b*2);return ce*ce*at}(nt(F-Tt)/D*i);w=ei(Pt);var Et=f.track.details.position;(Et>ut&&Et<st||Et===ut&&w>0||Et===st&&w<0)&&is(wt),tt+=Pt,!j&&Math.abs(tt*D)>5&&(j=!0),f.track.add(Pt),F=Tt,f.emit("dragged")}}function W(wt){!_&&f.track.details&&f.track.details.length&&(tt=0,_=!0,j=!1,P=!0,z=wt.id,Q(wt),F=ot(wt),f.emit("dragStarted"))}function H(wt){_&&z===wt.idChanged&&(_=!1,f.emit("dragEnded"))}function Q(wt){var Tt=At(),Pt=Tt?wt.y:wt.x,Et=Tt?wt.x:wt.y,at=C!==void 0&&q!==void 0&&Math.abs(q-Et)<=Math.abs(C-Pt);return C=Pt,q=Et,at}function ot(wt){return At()?wt.y:wt.x}function At(){return f.options.vertical}function Dt(){D=f.size,b=At()?window.innerHeight:window.innerWidth;var wt=f.track.details;wt&&(ut=wt.min,st=wt.max)}function Ct(wt){j&&(is(wt),es(wt))}function Nt(){if(I.purge(),f.options.drag&&!f.options.disabled){var wt;wt=f.options.dragSpeed||1,nt=typeof wt=="function"?wt:function(Pt){return Pt*wt},i=f.options.rtl?-1:1,Dt(),O=f.container,function(){var Pt="data-keen-slider-clickable";Ms("[".concat(Pt,"]:not([").concat(Pt,"=false])"),O).map(function(Et){I.add(Et,"dragstart",is),I.add(Et,"mousedown",is),I.add(Et,"touchstart",is)})}(),I.add(O,"dragstart",function(Pt){es(Pt)}),I.add(O,"click",Ct,{capture:!0}),I.input(O,"ksDragStart",W),I.input(O,"ksDrag",V),I.input(O,"ksDragEnd",H),I.input(O,"mousedown",W),I.input(O,"mousemove",V),I.input(O,"mouseleave",H),I.input(O,"mouseup",H),I.input(O,"touchstart",W,{passive:!0}),I.input(O,"touchmove",V,{passive:!1}),I.input(O,"touchend",H),I.input(O,"touchcancel",H),I.add(window,"wheel",function(Pt){_&&es(Pt)});var Tt="data-keen-slider-scrollable";Ms("[".concat(Tt,"]:not([").concat(Tt,"=false])"),f.container).map(function(Pt){return function(Et){var at;I.input(Et,"touchstart",function(bt){at=ot(bt),et=!0,$=!0},{passive:!0}),I.input(Et,"touchmove",function(bt){var kt=At(),Rt=kt?Et.scrollHeight-Et.clientHeight:Et.scrollWidth-Et.clientWidth,Ut=at-ot(bt),Kt=kt?Et.scrollTop:Et.scrollLeft,re=kt&&Et.style.overflowY==="scroll"||!kt&&Et.style.overflowX==="scroll";if(at=ot(bt),(Ut<0&&Kt>0||Ut>0&&Kt<Rt)&&$&&re)return et=!0;$=!1,es(bt),et=!1}),I.input(Et,"touchend",function(){et=!1})}(Pt)})}}f.on("updated",Dt),f.on("optionsChanged",Nt),f.on("created",Nt),f.on("destroyed",I.purge)}function Ao(f){var O,w,i=null;function D(C,q,$){f.animator.active?_(C,q,$):requestAnimationFrame(function(){return _(C,q,$)})}function b(){D(!1,!1,w)}function _(C,q,$){var et=0,ut=f.size,st=f.track.details;if(st&&O){var I=st.slides;O.forEach(function(V,W){if(C)!i&&q&&z(V,null,$),P(V,null,$);else{if(!I[W])return;var H=I[W].size*ut;!i&&q&&z(V,H,$),P(V,I[W].distance*ut-et,$),et+=H}})}}function nt(C){return f.options.renderMode==="performance"?Math.round(C):C}function z(C,q,$){var et=$?"height":"width";q!==null&&(q=nt(q)+"px"),C.style["min-"+et]=q,C.style["max-"+et]=q}function P(C,q,$){if(q!==null){q=nt(q);var et=$?q:0;q="translate3d(".concat($?0:q,"px, ").concat(et,"px, 0)")}C.style.transform=q,C.style["-webkit-transform"]=q}function F(){O&&(_(!0,!0,w),O=null),f.on("detailsChanged",b,!0)}function tt(){D(!1,!0,w)}function j(){F(),w=f.options.vertical,f.options.disabled||f.options.renderMode==="custom"||(i=$e(f.options.slides,"perView",null)==="auto",f.on("detailsChanged",b),(O=f.slides).length&&tt())}f.on("created",j),f.on("optionsChanged",j),f.on("beforeOptionsChanged",function(){F()}),f.on("updated",tt),f.on("destroyed",F)}function yo(f,O){return function(w){var i,D,b,_,nt,z=Sr();function P(Q){var ot;fn(w.container,"reverse",(ot=w.container,window.getComputedStyle(ot,null).getPropertyValue("direction")!=="rtl"||Q?null:"")),fn(w.container,"v",w.options.vertical&&!Q?"":null),fn(w.container,"disabled",w.options.disabled&&!Q?"":null)}function F(){tt()&&et()}function tt(){var Q=null;if(_.forEach(function(At){At.matches&&(Q=At.__media)}),Q===i)return!1;i||w.emit("beforeOptionsChanged"),i=Q;var ot=Q?b.breakpoints[Q]:b;return w.options=Oi(Oi({},b),ot),P(),W(),H(),st(),!0}function j(Q){var ot=Er(Q);return(w.options.vertical?ot.height:ot.width)/w.size||1}function C(){return w.options.trackConfig.length}function q(Q){for(var ot in i=!1,b=Oi(Oi({},O),Q),z.purge(),D=w.size,_=[],b.breakpoints||[]){var At=window.matchMedia(ot);At.__media=ot,_.push(At),z.add(At,"change",F)}z.add(window,"orientationchange",V),z.add(window,"resize",I),tt()}function $(Q){w.animator.stop();var ot=w.track.details;w.track.init(Q??(ot?ot.abs:0))}function et(Q){$(Q),w.emit("optionsChanged")}function ut(Q,ot){if(Q)return q(Q),void et(ot);W(),H();var At=C();st(),C()!==At?et(ot):$(ot),w.emit("updated")}function st(){var Q=w.options.slides;if(typeof Q=="function")return w.options.trackConfig=Q(w.size,w.slides);for(var ot=w.slides,At=ot.length,Dt=typeof Q=="number"?Q:$e(Q,"number",At,!0),Ct=[],Nt=$e(Q,"perView",1,!0),wt=$e(Q,"spacing",0,!0)/w.size||0,Tt=Nt==="auto"?wt:wt/Nt,Pt=$e(Q,"origin","auto"),Et=0,at=0;at<Dt;at++){var bt=Nt==="auto"?j(ot[at]):1/Nt-wt+Tt,kt=Pt==="center"?.5-bt/2:Pt==="auto"?0:Pt;Ct.push({origin:kt,size:bt,spacing:wt}),Et+=bt}if(Et+=wt*(Dt-1),Pt==="auto"&&!w.options.loop&&Nt!==1){var Rt=0;Ct.map(function(Ut){var Kt=Et-Rt;return Rt+=Ut.size+wt,Kt>=1||(Ut.origin=1-Kt-(Et>1?0:1-Et)),Ut})}w.options.trackConfig=Ct}function I(){W();var Q=w.size;w.options.disabled||Q===D||(D=Q,ut())}function V(){I(),setTimeout(I,500),setTimeout(I,2e3)}function W(){var Q=Er(w.container);w.size=(w.options.vertical?Q.height:Q.width)||1}function H(){w.slides=Ms(w.options.selector,w.container)}w.container=(nt=Ms(f,document)).length?nt[0]:null,w.destroy=function(){z.purge(),w.emit("destroyed"),P(!0)},w.prev=function(){w.moveToIdx(w.track.details.abs-1,!0)},w.next=function(){w.moveToIdx(w.track.details.abs+1,!0)},w.update=ut,q(w.options)}}var wo=function(f,O,w){try{return function(i,D){var b,_={};return b={emit:function(nt){_[nt]&&_[nt].forEach(function(P){P(b)});var z=b.options&&b.options[nt];z&&z(b)},moveToIdx:function(nt,z,P){var F=b.track.idxToDist(nt,z);if(F){var tt=b.options.defaultAnimation;b.animator.start([{distance:F,duration:$e(P||tt,"duration",500),easing:$e(P||tt,"easing",function(j){return 1+--j*j*j*j*j})}])}},on:function(nt,z,P){P===void 0&&(P=!1),_[nt]||(_[nt]=[]);var F=_[nt].indexOf(z);F>-1?P&&delete _[nt][F]:P||_[nt].push(z)},options:i},function(){if(b.track=mo(b),b.animator=fo(b),D)for(var nt=0,z=D;nt<z.length;nt++)(0,z[nt])(b);b.track.init(b.options.initial||0),b.emit("created")}(),b}(O,yr([yo(f,{drag:!0,mode:"snap",renderMode:"precision",rubberband:!0,selector:".keen-slider__slide"}),Ao,bo,vo],w||[],!0))}catch(i){console.error(i)}};const xo=document.querySelectorAll('[data-role="slider-thumbnail"]'),Cr=document.getElementById("js-main-slider");function _o(f){return O=>{function w(){f.forEach(i=>{i.addEventListener("click",()=>{O.moveToIdx(Number(i.dataset.target)),f.forEach(D=>{D.dataset.target!=i.dataset.target?D.classList.remove("slider-thumbnail__img_active"):D.classList.add("slider-thumbnail__img_active")})})})}O.on("created",()=>{w()}),O.on("animationEnded",()=>{const i=O.track.details.rel;f.forEach(D=>{D.dataset.target==i?D.classList.add("slider-thumbnail__img_active"):D.classList.remove("slider-thumbnail__img_active")})})}}Cr&&new wo(Cr,{slides:{perView:1},defaultAnimation:{duration:0}},[_o(xo)]),document.querySelectorAll('[data-role="zengin-input"]').forEach(f=>{f.addEventListener("change",So)});function So(f){let O=f.target.value;if(O){const w=Eo(O);f.target.value=w}}function Eo(f){const O=/[^0-9A-Zｱｲｳｴｵｶｷｸｹｺｻｼｽｾｿﾀﾁﾂﾃﾄﾅﾆﾇﾈﾉﾊﾋﾌﾍﾎﾏﾐﾑﾒﾓﾔﾕﾖﾗﾘﾙﾚﾛﾜﾝﾞﾟ\(\)｢｣\/\-\.\\ ]/g,w=["\uFF70","\uFF67","\uFF68","\uFF69","\uFF6A","\uFF6B","\uFF6F","\uFF6C","\uFF6D","\uFF6E","\uFF08","\uFF09"],i=["-","\uFF71","\uFF72","\uFF73","\uFF74","\uFF75","\uFF82","\uFF94","\uFF95","\uFF96","(",")"];let D;return D=f.toUpperCase(),D=Co(D,"khsa"),w.forEach((b,_)=>{D=D.replaceAll(b,i[_])}),D=D.replace(O,""),D}function Co(f,O){var w,i,D,b,_,nt;if(w=["\uFF76\uFF9E","\uFF77\uFF9E","\uFF78\uFF9E","\uFF79\uFF9E","\uFF7A\uFF9E","\uFF7B\uFF9E","\uFF7C\uFF9E","\uFF7D\uFF9E","\uFF7E\uFF9E","\uFF7F\uFF9E","\uFF80\uFF9E","\uFF81\uFF9E","\uFF82\uFF9E","\uFF83\uFF9E","\uFF84\uFF9E","\uFF8A\uFF9E","\uFF8A\uFF9F","\uFF8B\uFF9E","\uFF8B\uFF9F","\uFF8C\uFF9E","\uFF8C\uFF9F","\uFF8D\uFF9E","\uFF8D\uFF9F","\uFF8E\uFF9E","\uFF8E\uFF9F","\uFF73\uFF9E","\uFF70","\uFF67","\uFF71","\uFF68","\uFF72","\uFF69","\uFF73","\uFF6A","\uFF74","\uFF6B","\uFF75","\uFF76","\uFF77","\uFF78","\uFF79","\uFF7A","\uFF7B","\uFF7C","\uFF7D","\uFF7E","\uFF7F","\uFF80","\uFF81","\uFF6F","\uFF82","\uFF83","\uFF84","\uFF85","\uFF86","\uFF87","\uFF88","\uFF89","\uFF8A","\uFF8B","\uFF8C","\uFF8D","\uFF8E","\uFF8F","\uFF90","\uFF91","\uFF92","\uFF93","\uFF6C","\uFF94","\uFF6D","\uFF95","\uFF6E","\uFF96","\uFF97","\uFF98","\uFF99","\uFF9A","\uFF9B","\uFF9C","\uFF66","\uFF9D","\uFF76","\uFF79","\uFF9C","\uFF72","\uFF74","\uFF9E","\uFF9F"],i=["\u30AC","\u30AE","\u30B0","\u30B2","\u30B4","\u30B6","\u30B8","\u30BA","\u30BC","\u30BE","\u30C0","\u30C2","\u30C5","\u30C7","\u30C9","\u30D0","\u30D1","\u30D3","\u30D4","\u30D6","\u30D7","\u30D9","\u30DA","\u30DC","\u30DD","\u30F4","\u30FC","\u30A1","\u30A2","\u30A3","\u30A4","\u30A5","\u30A6","\u30A7","\u30A8","\u30A9","\u30AA","\u30AB","\u30AD","\u30AF","\u30B1","\u30B3","\u30B5","\u30B7","\u30B9","\u30BB","\u30BD","\u30BF","\u30C1","\u30C3","\u30C4","\u30C6","\u30C8","\u30CA","\u30CB","\u30CC","\u30CD","\u30CE","\u30CF","\u30D2","\u30D5","\u30D8","\u30DB","\u30DE","\u30DF","\u30E0","\u30E1","\u30E2","\u30E3","\u30E4","\u30E5","\u30E6","\u30E7","\u30E8","\u30E9","\u30EA","\u30EB","\u30EC","\u30ED","\u30EF","\u30F2","\u30F3","\u30F5","\u30F6","\u30EE","\u30F0","\u30F1","\u309B","\u309C"],D=["\u304C","\u304E","\u3050","\u3052","\u3054","\u3056","\u3058","\u305A","\u305C","\u305E","\u3060","\u3062","\u3065","\u3067","\u3069","\u3070","\u3071","\u3073","\u3074","\u3076","\u3077","\u3079","\u307A","\u307C","\u307D","\u30F4","\u30FC","\u3041","\u3042","\u3043","\u3044","\u3045","\u3046","\u3047","\u3048","\u3049","\u304A","\u304B","\u304D","\u304F","\u3051","\u3053","\u3055","\u3057","\u3059","\u305B","\u305D","\u305F","\u3061","\u3063","\u3064","\u3066","\u3068","\u306A","\u306B","\u306C","\u306D","\u306E","\u306F","\u3072","\u3075","\u3078","\u307B","\u307E","\u307F","\u3080","\u3081","\u3082","\u3083","\u3084","\u3085","\u3086","\u3087","\u3088","\u3089","\u308A","\u308B","\u308C","\u308D","\u308F","\u3092","\u3093","\u304B","\u3051","\u308E","\u3090","\u3091","\u309B","\u309C"],b=w.length,O.match(/[ra]/)&&(f=f.replace(/[Ａ-ｚ]/g,function(z){return String.fromCharCode(parseInt(z.charCodeAt(0))-65248)})),O.match(/[RA]/)&&(f=f.replace(/[A-z]/g,function(z){return String.fromCharCode(parseInt(z.charCodeAt(0))+65248)})),O.match(/[na]/)&&(f=f.replace(/[０-９]/g,function(z){return String.fromCharCode(parseInt(z.charCodeAt(0))-65248)})),O.match(/[NA]/)&&(f=f.replace(/[0-9]/g,function(z){return String.fromCharCode(parseInt(z.charCodeAt(0))+65248)})),O.match(/s/)&&(f=f.replace(/　/g," ")),O.match(/S/)&&(f=f.replace(/ /g,"\u3000")),O.match(/k/))for(_=0;_<b;_++)nt=new RegExp(i[_],"g"),f=f.replace(nt,w[_]);if(O.match(/K/))for(O.match(/V/)||(f=f.replace(/ﾞ/g,"\u309B"),f=f.replace(/ﾟ/g,"\u309C")),_=0;_<b;_++)nt=new RegExp(w[_],"g"),f=f.replace(nt,i[_]);if(O.match(/h/))for(_=0;_<b;_++)nt=new RegExp(D[_],"g"),f=f.replace(nt,w[_]);if(O.match(/H/))for(O.match(/V/)||(f=f.replace(/ﾞ/g,"\u309B"),f=f.replace(/ﾟ/g,"\u309C")),_=0;_<b;_++)nt=new RegExp(w[_],"g"),f=f.replace(nt,D[_]);if(O.match(/c/))for(_=0;_<b;_++)nt=new RegExp(i[_],"g"),f=f.replace(nt,D[_]);if(O.match(/C/))for(_=0;_<b;_++)nt=new RegExp(D[_],"g"),f=f.replace(nt,i[_]);return f}document.querySelectorAll('[data-role="toggle-input--btn"]').forEach(f=>{f.addEventListener("click",O=>{const w=O.target.dataset.group;document.querySelectorAll(`[data-group="${w}"][data-role="toggle-input--value"], [data-group="${w}"][data-role="toggle-input--input"]`).forEach(i=>{i.classList.toggle("toggle-input_show")})})});const To=document.querySelectorAll('[data-role="resize-input"]'),Lo=document.querySelectorAll('[data-role="drop-input"]');document.querySelectorAll('[data-role="preview-img"]'),To.forEach(f=>{f.addEventListener("change",Ro)}),Lo.forEach(f=>{f.addEventListener("dragover",O=>O.preventDefault()),f.addEventListener("drop",ko)});function Tr(f,O){if(!f.type.match(Fo))throw new Error("invalid mime type");let w=new FileReader;w.onload=async()=>{const i=w.result,D=await Mo(i),b=await(await fetch(D)).blob();O.file=new File([b],"resize.jpeg",{type:"image/jpeg"}),Po(D,O.dataset.target)},w.readAsDataURL(f)}async function Mo(f){const O=await new Promise((b,_)=>{const nt=new Image;nt.onload=()=>{b(nt)},nt.onerror=()=>{_()},nt.src=f}),w=document.createElement("canvas");let i=O.naturalWidth,D=O.naturalHeight;for(;i*D>5e5;)i/=10,D/=10;return w.width=i,w.height=D,w.getContext("2d").drawImage(O,0,0,i,D),w.toDataURL("image/jpeg")}function Po(f,O){const w=document.querySelector(O),i=document.createElement("img");i.classList.add("preview-img"),i.onload=()=>{w.innerHTML=null,w.appendChild(i)},i.src=f}function ko(f){f.preventDefault();const O=f.dataTransfer.files[0];Tr(O,f.target.childNodes[1])}function Ro(f){const O=f.target.files[0];Tr(O,f.target)}const Fo=/^(image\/jpg|image\/jpeg|image\/png|image\/webp)$/,Io="modulepreload",Do=function(f){return"/"+f},Lr={},mi=function(f,O,w){let i=Promise.resolve();if(O&&O.length>0){const D=document.getElementsByTagName("link"),b=document.querySelector("meta[property=csp-nonce]"),_=(b==null?void 0:b.nonce)||(b==null?void 0:b.getAttribute("nonce"));i=Promise.all(O.map(nt=>{if(nt=Do(nt),nt in Lr)return;Lr[nt]=!0;const z=nt.endsWith(".css"),P=z?'[rel="stylesheet"]':"";if(w)for(let tt=D.length-1;tt>=0;tt--){const j=D[tt];if(j.href===nt&&(!z||j.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${nt}"]${P}`))return;const F=document.createElement("link");if(F.rel=z?"stylesheet":Io,z||(F.as="script",F.crossOrigin=""),F.href=nt,_&&F.setAttribute("nonce",_),document.head.appendChild(F),z)return new Promise((tt,j)=>{F.addEventListener("load",tt),F.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${nt}`)))})}))}return i.then(()=>f()).catch(D=>{const b=new Event("vite:preloadError",{cancelable:!0});if(b.payload=D,window.dispatchEvent(b),!b.defaultPrevented)throw D})};var No={976:(f,O,w)=>{var he,jt,Ii,Ce,Br,Se,zr,lt,s,r,d,m,l,x,A,S,u,o,h,n,a,g,M,y,X,jr,K,Ws,p,xn,J,_n,v,G,Y,ht,gt,xt,Ft,Sn,ie,ee,Ae,ve,Gr,fe,En;w.d(O,{AnnotationLayer:()=>ce,FreeTextAnnotationElement:()=>Ct,InkAnnotationElement:()=>bt,StampAnnotationElement:()=>re});var i=w(292),D=w(419),b=w(792);function _(ae){return Math.floor(Math.max(0,Math.min(1,ae))*255).toString(16).padStart(2,"0")}function nt(ae){return Math.max(0,Math.min(255,255*ae))}class z{static CMYK_G([B,T,rt,dt]){return["G",1-Math.min(1,.3*B+.59*rt+.11*T+dt)]}static G_CMYK([B]){return["CMYK",0,0,0,1-B]}static G_RGB([B]){return["RGB",B,B,B]}static G_rgb([B]){return B=nt(B),[B,B,B]}static G_HTML([B]){const T=_(B);return`#${T}${T}${T}`}static RGB_G([B,T,rt]){return["G",.3*B+.59*T+.11*rt]}static RGB_rgb(B){return B.map(nt)}static RGB_HTML(B){return`#${B.map(_).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([B,T,rt,dt]){return["RGB",1-Math.min(1,B+dt),1-Math.min(1,rt+dt),1-Math.min(1,T+dt)]}static CMYK_rgb([B,T,rt,dt]){return[nt(1-Math.min(1,B+dt)),nt(1-Math.min(1,rt+dt)),nt(1-Math.min(1,T+dt))]}static CMYK_HTML(B){const T=this.CMYK_RGB(B).slice(1);return this.RGB_HTML(T)}static RGB_CMYK([B,T,rt]){const dt=1-B,ft=1-T,St=1-rt,_t=Math.min(dt,ft,St);return["CMYK",dt,ft,St,_t]}}var P=w(284);const F=1e3,tt=9,j=new WeakSet;function C(ae){return{width:ae[2]-ae[0],height:ae[3]-ae[1]}}class q{static create(B){switch(B.data.annotationType){case i.AnnotationType.LINK:return new et(B);case i.AnnotationType.TEXT:return new ut(B);case i.AnnotationType.WIDGET:switch(B.data.fieldType){case"Tx":return new I(B);case"Btn":return B.data.radioButton?new H(B):B.data.checkBox?new W(B):new Q(B);case"Ch":return new ot(B);case"Sig":return new V(B)}return new st(B);case i.AnnotationType.POPUP:return new At(B);case i.AnnotationType.FREETEXT:return new Ct(B);case i.AnnotationType.LINE:return new Nt(B);case i.AnnotationType.SQUARE:return new wt(B);case i.AnnotationType.CIRCLE:return new Tt(B);case i.AnnotationType.POLYLINE:return new Pt(B);case i.AnnotationType.CARET:return new at(B);case i.AnnotationType.INK:return new bt(B);case i.AnnotationType.POLYGON:return new Et(B);case i.AnnotationType.HIGHLIGHT:return new kt(B);case i.AnnotationType.UNDERLINE:return new Rt(B);case i.AnnotationType.SQUIGGLY:return new Ut(B);case i.AnnotationType.STRIKEOUT:return new Kt(B);case i.AnnotationType.STAMP:return new re(B);case i.AnnotationType.FILEATTACHMENT:return new _e(B);default:return new $(B)}}}const me=class me{constructor(B,{isRenderable:T=!1,ignoreBorder:rt=!1,createQuadrilaterals:dt=!1}={}){c(this,he,!1);this.isRenderable=T,this.data=B.data,this.layer=B.layer,this.linkService=B.linkService,this.downloadManager=B.downloadManager,this.imageResourcesPath=B.imageResourcesPath,this.renderForms=B.renderForms,this.svgFactory=B.svgFactory,this.annotationStorage=B.annotationStorage,this.enableScripting=B.enableScripting,this.hasJSActions=B.hasJSActions,this._fieldObjects=B.fieldObjects,this.parent=B.parent,T&&(this.container=this._createContainer(rt)),dt&&this._createQuadrilaterals()}static _hasPopupData({titleObj:B,contentsObj:T,richText:rt}){return!!(B!=null&&B.str||T!=null&&T.str||rt!=null&&rt.str)}get hasPopupData(){return me._hasPopupData(this.data)}_createContainer(B){const{data:T,parent:{page:rt,viewport:dt}}=this,ft=document.createElement("section");ft.setAttribute("data-annotation-id",T.id),this instanceof st||(ft.tabIndex=F),ft.style.zIndex=this.parent.zIndex++,T.popupRef&&ft.setAttribute("aria-haspopup","dialog"),T.alternativeText&&(ft.title=T.alternativeText),T.noRotate&&ft.classList.add("norotate");const{pageWidth:St,pageHeight:_t,pageX:$t,pageY:qt}=dt.rawDims;if(!T.rect||this instanceof At){const{rotation:Bt}=T;return!T.hasOwnCanvas&&Bt!==0&&this.setRotation(Bt,ft),ft}const{width:Ot,height:Qt}=C(T.rect),Gt=i.Util.normalizeRect([T.rect[0],rt.view[3]-T.rect[1]+rt.view[1],T.rect[2],rt.view[3]-T.rect[3]+rt.view[1]]);if(!B&&T.borderStyle.width>0){ft.style.borderWidth=`${T.borderStyle.width}px`;const Bt=T.borderStyle.horizontalCornerRadius,Zt=T.borderStyle.verticalCornerRadius;if(Bt>0||Zt>0){const de=`calc(${Bt}px * var(--scale-factor)) / calc(${Zt}px * var(--scale-factor))`;ft.style.borderRadius=de}else if(this instanceof H){const de=`calc(${Ot}px * var(--scale-factor)) / calc(${Qt}px * var(--scale-factor))`;ft.style.borderRadius=de}switch(T.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:ft.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:ft.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:ft.style.borderBottomStyle="solid";break}const ue=T.borderColor||null;ue?(N(this,he,!0),ft.style.borderColor=i.Util.makeHexColor(ue[0]|0,ue[1]|0,ue[2]|0)):ft.style.borderWidth=0}ft.style.left=`${100*(Gt[0]-$t)/St}%`,ft.style.top=`${100*(Gt[1]-qt)/_t}%`;const{rotation:Lt}=T;return T.hasOwnCanvas||Lt===0?(ft.style.width=`${100*Ot/St}%`,ft.style.height=`${100*Qt/_t}%`):this.setRotation(Lt,ft),ft}setRotation(B,T=this.container){if(!this.data.rect)return;const{pageWidth:rt,pageHeight:dt}=this.parent.viewport.rawDims,{width:ft,height:St}=C(this.data.rect);let _t,$t;B%180===0?(_t=100*ft/rt,$t=100*St/dt):(_t=100*St/rt,$t=100*ft/dt),T.style.width=`${_t}%`,T.style.height=`${$t}%`,T.setAttribute("data-main-rotation",(360-B)%360)}get _commonActions(){const B=(T,rt,dt)=>{const ft=dt.detail[T],St=ft[0],_t=ft.slice(1);dt.target.style[rt]=z[`${St}_HTML`](_t),this.annotationStorage.setValue(this.data.id,{[rt]:z[`${St}_rgb`](_t)})};return(0,i.shadow)(this,"_commonActions",{display:T=>{const{display:rt}=T.detail,dt=rt%2===1;this.container.style.visibility=dt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:dt,noPrint:rt===1||rt===2})},print:T=>{this.annotationStorage.setValue(this.data.id,{noPrint:!T.detail.print})},hidden:T=>{const{hidden:rt}=T.detail;this.container.style.visibility=rt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:rt,noView:rt})},focus:T=>{setTimeout(()=>T.target.focus({preventScroll:!1}),0)},userName:T=>{T.target.title=T.detail.userName},readonly:T=>{T.target.disabled=T.detail.readonly},required:T=>{this._setRequired(T.target,T.detail.required)},bgColor:T=>{B("bgColor","backgroundColor",T)},fillColor:T=>{B("fillColor","backgroundColor",T)},fgColor:T=>{B("fgColor","color",T)},textColor:T=>{B("textColor","color",T)},borderColor:T=>{B("borderColor","borderColor",T)},strokeColor:T=>{B("strokeColor","borderColor",T)},rotation:T=>{const rt=T.detail.rotation;this.setRotation(rt),this.annotationStorage.setValue(this.data.id,{rotation:rt})}})}_dispatchEventFromSandbox(B,T){var dt;const rt=this._commonActions;for(const ft of Object.keys(T.detail))(dt=B[ft]||rt[ft])==null||dt(T)}_setDefaultPropertiesFromJS(B){if(!this.enableScripting)return;const T=this.annotationStorage.getRawValue(this.data.id);if(!T)return;const rt=this._commonActions;for(const[dt,ft]of Object.entries(T)){const St=rt[dt];if(St){const _t={detail:{[dt]:ft},target:B};St(_t),delete T[dt]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:B}=this.data;if(!B)return;const[T,rt,dt,ft]=this.data.rect;if(B.length===1){const[,{x:Zt,y:ue},{x:de,y:Ee}]=B[0];if(dt===Zt&&ft===ue&&T===de&&rt===Ee)return}const{style:St}=this.container;let _t;if(t(this,he)){const{borderColor:Zt,borderWidth:ue}=St;St.borderWidth=0,_t=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Zt}" stroke-width="${ue}">`],this.container.classList.add("hasBorder")}const $t=dt-T,qt=ft-rt,{svgFactory:Ot}=this,Qt=Ot.createElement("svg");Qt.classList.add("quadrilateralsContainer"),Qt.setAttribute("width",0),Qt.setAttribute("height",0);const Gt=Ot.createElement("defs");Qt.append(Gt);const Lt=Ot.createElement("clipPath"),Bt=`clippath_${this.data.id}`;Lt.setAttribute("id",Bt),Lt.setAttribute("clipPathUnits","objectBoundingBox"),Gt.append(Lt);for(const[,{x:Zt,y:ue},{x:de,y:Ee}]of B){const Le=Ot.createElement("rect"),Je=(de-T)/$t,Xe=(ft-ue)/qt,Ve=(Zt-de)/$t,ii=(ue-Ee)/qt;Le.setAttribute("x",Je),Le.setAttribute("y",Xe),Le.setAttribute("width",Ve),Le.setAttribute("height",ii),Lt.append(Le),_t==null||_t.push(`<rect vector-effect="non-scaling-stroke" x="${Je}" y="${Xe}" width="${Ve}" height="${ii}"/>`)}t(this,he)&&(_t.push("</g></svg>')"),St.backgroundImage=_t.join("")),this.container.append(Qt),this.container.style.clipPath=`url(#${Bt})`}_createPopup(){const{container:B,data:T}=this;B.setAttribute("aria-haspopup","dialog");const rt=new At({data:{color:T.color,titleObj:T.titleObj,modificationDate:T.modificationDate,contentsObj:T.contentsObj,richText:T.richText,parentRect:T.rect,borderStyle:0,id:`popup_${T.id}`,rotation:T.rotation},parent:this.parent,elements:[this]});this.parent.div.append(rt.render())}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(B,T=null){const rt=[];if(this._fieldObjects){const dt=this._fieldObjects[B];if(dt)for(const{page:ft,id:St,exportValues:_t}of dt){if(ft===-1||St===T)continue;const $t=typeof _t=="string"?_t:null,qt=document.querySelector(`[data-element-id="${St}"]`);if(qt&&!j.has(qt)){(0,i.warn)(`_getElementsByName - element not allowed: ${St}`);continue}rt.push({id:St,exportValue:$t,domElement:qt})}return rt}for(const dt of document.getElementsByName(B)){const{exportValue:ft}=dt,St=dt.getAttribute("data-element-id");St!==T&&j.has(dt)&&rt.push({id:St,exportValue:ft,domElement:dt})}return rt}show(){var B;this.container&&(this.container.hidden=!1),(B=this.popup)==null||B.maybeShow()}hide(){var B;this.container&&(this.container.hidden=!0),(B=this.popup)==null||B.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const B=this.getElementsToTriggerPopup();if(Array.isArray(B))for(const T of B)T.classList.add("highlightArea");else B.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:B,data:{id:T}}=this;this.container.addEventListener("dblclick",()=>{var rt;(rt=this.linkService.eventBus)==null||rt.dispatch("switchannotationeditormode",{source:this,mode:B,editId:T})})}};he=new WeakMap;let $=me;class et extends ${constructor(T,rt=null){super(T,{isRenderable:!0,ignoreBorder:!!(rt!=null&&rt.ignoreBorder),createQuadrilaterals:!0});c(this,jt);c(this,Ce);c(this,Se);this.isTooltipOnly=T.data.isTooltipOnly}render(){const{data:T,linkService:rt}=this,dt=document.createElement("a");dt.setAttribute("data-element-id",T.id);let ft=!1;return T.url?(rt.addLinkAttributes(dt,T.url,T.newWindow),ft=!0):T.action?(this._bindNamedAction(dt,T.action),ft=!0):T.attachment?(k(this,Ce,Br).call(this,dt,T.attachment,T.attachmentDest),ft=!0):T.setOCGState?(k(this,Se,zr).call(this,dt,T.setOCGState),ft=!0):T.dest?(this._bindLink(dt,T.dest),ft=!0):(T.actions&&(T.actions.Action||T.actions["Mouse Up"]||T.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(dt,T),ft=!0),T.resetForm?(this._bindResetFormAction(dt,T.resetForm),ft=!0):this.isTooltipOnly&&!ft&&(this._bindLink(dt,""),ft=!0)),this.container.classList.add("linkAnnotation"),ft&&this.container.append(dt),this.container}_bindLink(T,rt){T.href=this.linkService.getDestinationHash(rt),T.onclick=()=>(rt&&this.linkService.goToDestination(rt),!1),(rt||rt==="")&&k(this,jt,Ii).call(this)}_bindNamedAction(T,rt){T.href=this.linkService.getAnchorUrl(""),T.onclick=()=>(this.linkService.executeNamedAction(rt),!1),k(this,jt,Ii).call(this)}_bindJSAction(T,rt){T.href=this.linkService.getAnchorUrl("");const dt=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const ft of Object.keys(rt.actions)){const St=dt.get(ft);St&&(T[St]=()=>{var _t;return(_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:rt.id,name:ft}}),!1})}T.onclick||(T.onclick=()=>!1),k(this,jt,Ii).call(this)}_bindResetFormAction(T,rt){const dt=T.onclick;if(dt||(T.href=this.linkService.getAnchorUrl("")),k(this,jt,Ii).call(this),!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),dt||(T.onclick=()=>!1);return}T.onclick=()=>{var Qt;dt==null||dt();const{fields:ft,refs:St,include:_t}=rt,$t=[];if(ft.length!==0||St.length!==0){const Gt=new Set(St);for(const Lt of ft){const Bt=this._fieldObjects[Lt]||[];for(const{id:Zt}of Bt)Gt.add(Zt)}for(const Lt of Object.values(this._fieldObjects))for(const Bt of Lt)Gt.has(Bt.id)===_t&&$t.push(Bt)}else for(const Gt of Object.values(this._fieldObjects))$t.push(...Gt);const qt=this.annotationStorage,Ot=[];for(const Gt of $t){const{id:Lt}=Gt;switch(Ot.push(Lt),Gt.type){case"text":{const Zt=Gt.defaultValue||"";qt.setValue(Lt,{value:Zt});break}case"checkbox":case"radiobutton":{const Zt=Gt.defaultValue===Gt.exportValues;qt.setValue(Lt,{value:Zt});break}case"combobox":case"listbox":{const Zt=Gt.defaultValue||"";qt.setValue(Lt,{value:Zt});break}default:continue}const Bt=document.querySelector(`[data-element-id="${Lt}"]`);if(Bt){if(!j.has(Bt)){(0,i.warn)(`_bindResetFormAction - element not allowed: ${Lt}`);continue}}else continue;Bt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Qt=this.linkService.eventBus)==null||Qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Ot,name:"ResetForm"}})),!1}}}jt=new WeakSet,Ii=function(){this.container.setAttribute("data-internal-link","")},Ce=new WeakSet,Br=function(T,rt,dt=null){T.href=this.linkService.getAnchorUrl(""),T.onclick=()=>{var ft;return(ft=this.downloadManager)==null||ft.openOrDownloadData(rt.content,rt.filename,dt),!1},k(this,jt,Ii).call(this)},Se=new WeakSet,zr=function(T,rt){T.href=this.linkService.getAnchorUrl(""),T.onclick=()=>(this.linkService.executeSetOCGState(rt),!1),k(this,jt,Ii).call(this)};class ut extends ${constructor(B){super(B,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const B=document.createElement("img");return B.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",B.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),B.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(B),this.container}}class st extends ${render(){return this.container}showElementAndHideCanvas(B){var T;this.data.hasOwnCanvas&&(((T=B.previousSibling)==null?void 0:T.nodeName)==="CANVAS"&&(B.previousSibling.hidden=!0),B.hidden=!1)}_getKeyModifier(B){return i.FeatureTest.platform.isMac?B.metaKey:B.ctrlKey}_setEventListener(B,T,rt,dt,ft){rt.includes("mouse")?B.addEventListener(rt,St=>{var _t;(_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:dt,value:ft(St),shift:St.shiftKey,modifier:this._getKeyModifier(St)}})}):B.addEventListener(rt,St=>{var _t;if(rt==="blur"){if(!T.focused||!St.relatedTarget)return;T.focused=!1}else if(rt==="focus"){if(T.focused)return;T.focused=!0}ft&&((_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:dt,value:ft(St)}}))})}_setEventListeners(B,T,rt,dt){var ft,St,_t;for(const[$t,qt]of rt)(qt==="Action"||(ft=this.data.actions)!=null&&ft[qt])&&((qt==="Focus"||qt==="Blur")&&(T||(T={focused:!1})),this._setEventListener(B,T,$t,qt,dt),qt==="Focus"&&!((St=this.data.actions)!=null&&St.Blur)?this._setEventListener(B,T,"blur","Blur",null):qt==="Blur"&&!((_t=this.data.actions)!=null&&_t.Focus)&&this._setEventListener(B,T,"focus","Focus",null))}_setBackgroundColor(B){const T=this.data.backgroundColor||null;B.style.backgroundColor=T===null?"transparent":i.Util.makeHexColor(T[0],T[1],T[2])}_setTextStyle(B){const T=["left","center","right"],{fontColor:rt}=this.data.defaultAppearanceData,dt=this.data.defaultAppearanceData.fontSize||tt,ft=B.style;let St;const _t=2,$t=qt=>Math.round(10*qt)/10;if(this.data.multiLine){const qt=Math.abs(this.data.rect[3]-this.data.rect[1]-_t),Ot=Math.round(qt/(i.LINE_FACTOR*dt))||1,Qt=qt/Ot;St=Math.min(dt,$t(Qt/i.LINE_FACTOR))}else{const qt=Math.abs(this.data.rect[3]-this.data.rect[1]-_t);St=Math.min(dt,$t(qt/i.LINE_FACTOR))}ft.fontSize=`calc(${St}px * var(--scale-factor))`,ft.color=i.Util.makeHexColor(rt[0],rt[1],rt[2]),this.data.textAlignment!==null&&(ft.textAlign=T[this.data.textAlignment])}_setRequired(B,T){T?B.setAttribute("required",!0):B.removeAttribute("required"),B.setAttribute("aria-required",T)}}class I extends st{constructor(B){const T=B.renderForms||B.data.hasOwnCanvas||!B.data.hasAppearance&&!!B.data.fieldValue;super(B,{isRenderable:T})}setPropertyOnSiblings(B,T,rt,dt){const ft=this.annotationStorage;for(const St of this._getElementsByName(B.name,B.id))St.domElement&&(St.domElement[T]=rt),ft.setValue(St.id,{[dt]:rt})}render(){var dt,ft;const B=this.annotationStorage,T=this.data.id;this.container.classList.add("textWidgetAnnotation");let rt=null;if(this.renderForms){const St=B.getValue(T,{value:this.data.fieldValue});let _t=St.value||"";const $t=B.getValue(T,{charLimit:this.data.maxLen}).charLimit;$t&&_t.length>$t&&(_t=_t.slice(0,$t));let qt=St.formattedValue||((dt=this.data.textContent)==null?void 0:dt.join(`
`))||null;qt&&this.data.comb&&(qt=qt.replaceAll(/\s+/g,""));const Ot={userValue:_t,formattedValue:qt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(rt=document.createElement("textarea"),rt.textContent=qt??_t,this.data.doNotScroll&&(rt.style.overflowY="hidden")):(rt=document.createElement("input"),rt.type="text",rt.setAttribute("value",qt??_t),this.data.doNotScroll&&(rt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(rt.hidden=!0),j.add(rt),rt.setAttribute("data-element-id",T),rt.disabled=this.data.readOnly,rt.name=this.data.fieldName,rt.tabIndex=F,this._setRequired(rt,this.data.required),$t&&(rt.maxLength=$t),rt.addEventListener("input",Gt=>{B.setValue(T,{value:Gt.target.value}),this.setPropertyOnSiblings(rt,"value",Gt.target.value,"value"),Ot.formattedValue=null}),rt.addEventListener("resetform",Gt=>{const Lt=this.data.defaultFieldValue??"";rt.value=Ot.userValue=Lt,Ot.formattedValue=null});let Qt=Gt=>{const{formattedValue:Lt}=Ot;Lt!=null&&(Gt.target.value=Lt),Gt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){rt.addEventListener("focus",Lt=>{var Zt;if(Ot.focused)return;const{target:Bt}=Lt;Ot.userValue&&(Bt.value=Ot.userValue),Ot.lastCommittedValue=Bt.value,Ot.commitKey=1,(Zt=this.data.actions)!=null&&Zt.Focus||(Ot.focused=!0)}),rt.addEventListener("updatefromsandbox",Lt=>{this.showElementAndHideCanvas(Lt.target);const Bt={value(Zt){Ot.userValue=Zt.detail.value??"",B.setValue(T,{value:Ot.userValue.toString()}),Zt.target.value=Ot.userValue},formattedValue(Zt){const{formattedValue:ue}=Zt.detail;Ot.formattedValue=ue,ue!=null&&Zt.target!==document.activeElement&&(Zt.target.value=ue),B.setValue(T,{formattedValue:ue})},selRange(Zt){Zt.target.setSelectionRange(...Zt.detail.selRange)},charLimit:Zt=>{var Le;const{charLimit:ue}=Zt.detail,{target:de}=Zt;if(ue===0){de.removeAttribute("maxLength");return}de.setAttribute("maxLength",ue);let Ee=Ot.userValue;!Ee||Ee.length<=ue||(Ee=Ee.slice(0,ue),de.value=Ot.userValue=Ee,B.setValue(T,{value:Ee}),(Le=this.linkService.eventBus)==null||Le.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:Ee,willCommit:!0,commitKey:1,selStart:de.selectionStart,selEnd:de.selectionEnd}}))}};this._dispatchEventFromSandbox(Bt,Lt)}),rt.addEventListener("keydown",Lt=>{var ue;Ot.commitKey=1;let Bt=-1;if(Lt.key==="Escape"?Bt=0:Lt.key==="Enter"&&!this.data.multiLine?Bt=2:Lt.key==="Tab"&&(Ot.commitKey=3),Bt===-1)return;const{value:Zt}=Lt.target;Ot.lastCommittedValue!==Zt&&(Ot.lastCommittedValue=Zt,Ot.userValue=Zt,(ue=this.linkService.eventBus)==null||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:Zt,willCommit:!0,commitKey:Bt,selStart:Lt.target.selectionStart,selEnd:Lt.target.selectionEnd}}))});const Gt=Qt;Qt=null,rt.addEventListener("blur",Lt=>{var Zt,ue;if(!Ot.focused||!Lt.relatedTarget)return;(Zt=this.data.actions)!=null&&Zt.Blur||(Ot.focused=!1);const{value:Bt}=Lt.target;Ot.userValue=Bt,Ot.lastCommittedValue!==Bt&&((ue=this.linkService.eventBus)==null||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:Bt,willCommit:!0,commitKey:Ot.commitKey,selStart:Lt.target.selectionStart,selEnd:Lt.target.selectionEnd}})),Gt(Lt)}),(ft=this.data.actions)!=null&&ft.Keystroke&&rt.addEventListener("beforeinput",Lt=>{var Xe;Ot.lastCommittedValue=null;const{data:Bt,target:Zt}=Lt,{value:ue,selectionStart:de,selectionEnd:Ee}=Zt;let Le=de,Je=Ee;switch(Lt.inputType){case"deleteWordBackward":{const Ve=ue.substring(0,de).match(/\w*[^\w]*$/);Ve&&(Le-=Ve[0].length);break}case"deleteWordForward":{const Ve=ue.substring(de).match(/^[^\w]*\w*/);Ve&&(Je+=Ve[0].length);break}case"deleteContentBackward":de===Ee&&(Le-=1);break;case"deleteContentForward":de===Ee&&(Je+=1);break}Lt.preventDefault(),(Xe=this.linkService.eventBus)==null||Xe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:ue,change:Bt||"",willCommit:!1,selStart:Le,selEnd:Je}})}),this._setEventListeners(rt,Ot,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Lt=>Lt.target.value)}if(Qt&&rt.addEventListener("blur",Qt),this.data.comb){const Gt=(this.data.rect[2]-this.data.rect[0])/$t;rt.classList.add("comb"),rt.style.letterSpacing=`calc(${Gt}px * var(--scale-factor) - 1ch)`}}else rt=document.createElement("div"),rt.textContent=this.data.fieldValue,rt.style.verticalAlign="middle",rt.style.display="table-cell",this.data.hasOwnCanvas&&(rt.hidden=!0);return this._setTextStyle(rt),this._setBackgroundColor(rt),this._setDefaultPropertiesFromJS(rt),this.container.append(rt),this.container}}class V extends st{constructor(B){super(B,{isRenderable:!!B.data.hasOwnCanvas})}}class W extends st{constructor(B){super(B,{isRenderable:B.renderForms})}render(){const B=this.annotationStorage,T=this.data,rt=T.id;let dt=B.getValue(rt,{value:T.exportValue===T.fieldValue}).value;typeof dt=="string"&&(dt=dt!=="Off",B.setValue(rt,{value:dt})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const ft=document.createElement("input");return j.add(ft),ft.setAttribute("data-element-id",rt),ft.disabled=T.readOnly,this._setRequired(ft,this.data.required),ft.type="checkbox",ft.name=T.fieldName,dt&&ft.setAttribute("checked",!0),ft.setAttribute("exportValue",T.exportValue),ft.tabIndex=F,ft.addEventListener("change",St=>{const{name:_t,checked:$t}=St.target;for(const qt of this._getElementsByName(_t,rt)){const Ot=$t&&qt.exportValue===T.exportValue;qt.domElement&&(qt.domElement.checked=Ot),B.setValue(qt.id,{value:Ot})}B.setValue(rt,{value:$t})}),ft.addEventListener("resetform",St=>{const _t=T.defaultFieldValue||"Off";St.target.checked=_t===T.exportValue}),this.enableScripting&&this.hasJSActions&&(ft.addEventListener("updatefromsandbox",St=>{const _t={value($t){$t.target.checked=$t.detail.value!=="Off",B.setValue(rt,{value:$t.target.checked})}};this._dispatchEventFromSandbox(_t,St)}),this._setEventListeners(ft,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],St=>St.target.checked)),this._setBackgroundColor(ft),this._setDefaultPropertiesFromJS(ft),this.container.append(ft),this.container}}class H extends st{constructor(B){super(B,{isRenderable:B.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const B=this.annotationStorage,T=this.data,rt=T.id;let dt=B.getValue(rt,{value:T.fieldValue===T.buttonValue}).value;if(typeof dt=="string"&&(dt=dt!==T.buttonValue,B.setValue(rt,{value:dt})),dt)for(const St of this._getElementsByName(T.fieldName,rt))B.setValue(St.id,{value:!1});const ft=document.createElement("input");if(j.add(ft),ft.setAttribute("data-element-id",rt),ft.disabled=T.readOnly,this._setRequired(ft,this.data.required),ft.type="radio",ft.name=T.fieldName,dt&&ft.setAttribute("checked",!0),ft.tabIndex=F,ft.addEventListener("change",St=>{const{name:_t,checked:$t}=St.target;for(const qt of this._getElementsByName(_t,rt))B.setValue(qt.id,{value:!1});B.setValue(rt,{value:$t})}),ft.addEventListener("resetform",St=>{const _t=T.defaultFieldValue;St.target.checked=_t!=null&&_t===T.buttonValue}),this.enableScripting&&this.hasJSActions){const St=T.buttonValue;ft.addEventListener("updatefromsandbox",_t=>{const $t={value:qt=>{const Ot=St===qt.detail.value;for(const Qt of this._getElementsByName(qt.target.name)){const Gt=Ot&&Qt.id===rt;Qt.domElement&&(Qt.domElement.checked=Gt),B.setValue(Qt.id,{value:Gt})}}};this._dispatchEventFromSandbox($t,_t)}),this._setEventListeners(ft,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_t=>_t.target.checked)}return this._setBackgroundColor(ft),this._setDefaultPropertiesFromJS(ft),this.container.append(ft),this.container}}class Q extends et{constructor(B){super(B,{ignoreBorder:B.data.hasAppearance})}render(){const B=super.render();B.classList.add("buttonWidgetAnnotation","pushButton");const T=B.lastChild;return this.enableScripting&&this.hasJSActions&&T&&(this._setDefaultPropertiesFromJS(T),T.addEventListener("updatefromsandbox",rt=>{this._dispatchEventFromSandbox({},rt)})),B}}class ot extends st{constructor(B){super(B,{isRenderable:B.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const B=this.annotationStorage,T=this.data.id,rt=B.getValue(T,{value:this.data.fieldValue}),dt=document.createElement("select");j.add(dt),dt.setAttribute("data-element-id",T),dt.disabled=this.data.readOnly,this._setRequired(dt,this.data.required),dt.name=this.data.fieldName,dt.tabIndex=F;let ft=this.data.combo&&this.data.options.length>0;this.data.combo||(dt.size=this.data.options.length,this.data.multiSelect&&(dt.multiple=!0)),dt.addEventListener("resetform",Ot=>{const Qt=this.data.defaultFieldValue;for(const Gt of dt.options)Gt.selected=Gt.value===Qt});for(const Ot of this.data.options){const Qt=document.createElement("option");Qt.textContent=Ot.displayValue,Qt.value=Ot.exportValue,rt.value.includes(Ot.exportValue)&&(Qt.setAttribute("selected",!0),ft=!1),dt.append(Qt)}let St=null;if(ft){const Ot=document.createElement("option");Ot.value=" ",Ot.setAttribute("hidden",!0),Ot.setAttribute("selected",!0),dt.prepend(Ot),St=()=>{Ot.remove(),dt.removeEventListener("input",St),St=null},dt.addEventListener("input",St)}const _t=Ot=>{const Qt=Ot?"value":"textContent",{options:Gt,multiple:Lt}=dt;return Lt?Array.prototype.filter.call(Gt,Bt=>Bt.selected).map(Bt=>Bt[Qt]):Gt.selectedIndex===-1?null:Gt[Gt.selectedIndex][Qt]};let $t=_t(!1);const qt=Ot=>{const Qt=Ot.target.options;return Array.prototype.map.call(Qt,Gt=>({displayValue:Gt.textContent,exportValue:Gt.value}))};return this.enableScripting&&this.hasJSActions?(dt.addEventListener("updatefromsandbox",Ot=>{const Qt={value(Gt){St==null||St();const Lt=Gt.detail.value,Bt=new Set(Array.isArray(Lt)?Lt:[Lt]);for(const Zt of dt.options)Zt.selected=Bt.has(Zt.value);B.setValue(T,{value:_t(!0)}),$t=_t(!1)},multipleSelection(Gt){dt.multiple=!0},remove(Gt){const Lt=dt.options,Bt=Gt.detail.remove;Lt[Bt].selected=!1,dt.remove(Bt),Lt.length>0&&Array.prototype.findIndex.call(Lt,Zt=>Zt.selected)===-1&&(Lt[0].selected=!0),B.setValue(T,{value:_t(!0),items:qt(Gt)}),$t=_t(!1)},clear(Gt){for(;dt.length!==0;)dt.remove(0);B.setValue(T,{value:null,items:[]}),$t=_t(!1)},insert(Gt){const{index:Lt,displayValue:Bt,exportValue:Zt}=Gt.detail.insert,ue=dt.children[Lt],de=document.createElement("option");de.textContent=Bt,de.value=Zt,ue?ue.before(de):dt.append(de),B.setValue(T,{value:_t(!0),items:qt(Gt)}),$t=_t(!1)},items(Gt){const{items:Lt}=Gt.detail;for(;dt.length!==0;)dt.remove(0);for(const Bt of Lt){const{displayValue:Zt,exportValue:ue}=Bt,de=document.createElement("option");de.textContent=Zt,de.value=ue,dt.append(de)}dt.options.length>0&&(dt.options[0].selected=!0),B.setValue(T,{value:_t(!0),items:qt(Gt)}),$t=_t(!1)},indices(Gt){const Lt=new Set(Gt.detail.indices);for(const Bt of Gt.target.options)Bt.selected=Lt.has(Bt.index);B.setValue(T,{value:_t(!0)}),$t=_t(!1)},editable(Gt){Gt.target.disabled=!Gt.detail.editable}};this._dispatchEventFromSandbox(Qt,Ot)}),dt.addEventListener("input",Ot=>{var Gt;const Qt=_t(!0);B.setValue(T,{value:Qt}),Ot.preventDefault(),(Gt=this.linkService.eventBus)==null||Gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:$t,changeEx:Qt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(dt,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Ot=>Ot.target.value)):dt.addEventListener("input",function(Ot){B.setValue(T,{value:_t(!0)})}),this.data.combo&&this._setTextStyle(dt),this._setBackgroundColor(dt),this._setDefaultPropertiesFromJS(dt),this.container.append(dt),this.container}}class At extends ${constructor(B){const{data:T,elements:rt}=B;super(B,{isRenderable:$._hasPopupData(T)}),this.elements=rt}render(){this.container.classList.add("popupAnnotation");const B=new Dt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),T=[];for(const rt of this.elements)rt.popup=B,T.push(rt.data.id),rt.addHighlightArea();return this.container.setAttribute("aria-controls",T.map(rt=>`${i.AnnotationPrefix}${rt}`).join(",")),this.container}}class Dt{constructor({container:B,color:T,elements:rt,titleObj:dt,modificationDate:ft,contentsObj:St,richText:_t,parent:$t,rect:qt,parentRect:Ot,open:Qt}){c(this,X);c(this,K);c(this,p);c(this,J);c(this,lt,k(this,X,jr).bind(this));c(this,s,k(this,J,_n).bind(this));c(this,r,k(this,p,xn).bind(this));c(this,d,k(this,K,Ws).bind(this));c(this,m,null);c(this,l,null);c(this,x,null);c(this,A,null);c(this,S,null);c(this,u,null);c(this,o,null);c(this,h,!1);c(this,n,null);c(this,a,null);c(this,g,null);c(this,M,null);c(this,y,!1);var Gt;N(this,l,B),N(this,M,dt),N(this,x,St),N(this,g,_t),N(this,u,$t),N(this,m,T),N(this,a,qt),N(this,o,Ot),N(this,S,rt),N(this,A,D.PDFDateString.toDateObject(ft)),this.trigger=rt.flatMap(Lt=>Lt.getElementsToTriggerPopup());for(const Lt of this.trigger)Lt.addEventListener("click",t(this,d)),Lt.addEventListener("mouseenter",t(this,r)),Lt.addEventListener("mouseleave",t(this,s)),Lt.classList.add("popupTriggerArea");for(const Lt of rt)(Gt=Lt.container)==null||Gt.addEventListener("keydown",t(this,lt));t(this,l).hidden=!0,Qt&&k(this,K,Ws).call(this)}render(){if(t(this,n))return;const{page:{view:B},viewport:{rawDims:{pageWidth:T,pageHeight:rt,pageX:dt,pageY:ft}}}=t(this,u),St=N(this,n,document.createElement("div"));if(St.className="popup",t(this,m)){const Ee=St.style.outlineColor=i.Util.makeHexColor(...t(this,m));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?St.style.backgroundColor=`color-mix(in srgb, ${Ee} 30%, white)`:St.style.backgroundColor=i.Util.makeHexColor(...t(this,m).map(Le=>Math.floor(.7*(255-Le)+Le)))}const _t=document.createElement("span");_t.className="header";const $t=document.createElement("h1");if(_t.append($t),{dir:$t.dir,str:$t.textContent}=t(this,M),St.append(_t),t(this,A)){const Ee=document.createElement("span");Ee.classList.add("popupDate"),Ee.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),Ee.setAttribute("data-l10n-args",JSON.stringify({date:t(this,A).toLocaleDateString(),time:t(this,A).toLocaleTimeString()})),_t.append(Ee)}const qt=t(this,x),Ot=t(this,g);if(Ot!=null&&Ot.str&&(!(qt!=null&&qt.str)||qt.str===Ot.str))P.XfaLayer.render({xfaHtml:Ot.html,intent:"richText",div:St}),St.lastChild.classList.add("richText","popupContent");else{const Ee=this._formatContents(qt);St.append(Ee)}let Qt=!!t(this,o),Gt=Qt?t(this,o):t(this,a);for(const Ee of t(this,S))if(!Gt||i.Util.intersect(Ee.data.rect,Gt)!==null){Gt=Ee.data.rect,Qt=!0;break}const Lt=i.Util.normalizeRect([Gt[0],B[3]-Gt[1]+B[1],Gt[2],B[3]-Gt[3]+B[1]]),Bt=Qt?Gt[2]-Gt[0]+5:0,Zt=Lt[0]+Bt,ue=Lt[1],{style:de}=t(this,l);de.left=`${100*(Zt-dt)/T}%`,de.top=`${100*(ue-ft)/rt}%`,t(this,l).append(St)}_formatContents({str:B,dir:T}){const rt=document.createElement("p");rt.classList.add("popupContent"),rt.dir=T;const dt=B.split(/(?:\r\n?|\n)/);for(let ft=0,St=dt.length;ft<St;++ft){const _t=dt[ft];rt.append(document.createTextNode(_t)),ft<St-1&&rt.append(document.createElement("br"))}return rt}forceHide(){N(this,y,this.isVisible),t(this,y)&&(t(this,l).hidden=!0)}maybeShow(){t(this,y)&&(N(this,y,!1),t(this,l).hidden=!1)}get isVisible(){return t(this,l).hidden===!1}}lt=new WeakMap,s=new WeakMap,r=new WeakMap,d=new WeakMap,m=new WeakMap,l=new WeakMap,x=new WeakMap,A=new WeakMap,S=new WeakMap,u=new WeakMap,o=new WeakMap,h=new WeakMap,n=new WeakMap,a=new WeakMap,g=new WeakMap,M=new WeakMap,y=new WeakMap,X=new WeakSet,jr=function(B){B.altKey||B.shiftKey||B.ctrlKey||B.metaKey||(B.key==="Enter"||B.key==="Escape"&&t(this,h))&&k(this,K,Ws).call(this)},K=new WeakSet,Ws=function(){N(this,h,!t(this,h)),t(this,h)?(k(this,p,xn).call(this),t(this,l).addEventListener("click",t(this,d)),t(this,l).addEventListener("keydown",t(this,lt))):(k(this,J,_n).call(this),t(this,l).removeEventListener("click",t(this,d)),t(this,l).removeEventListener("keydown",t(this,lt)))},p=new WeakSet,xn=function(){t(this,n)||this.render(),this.isVisible?t(this,h)&&t(this,l).classList.add("focused"):(t(this,l).hidden=!1,t(this,l).style.zIndex=parseInt(t(this,l).style.zIndex)+1e3)},J=new WeakSet,_n=function(){t(this,l).classList.remove("focused"),!(t(this,h)||!this.isVisible)&&(t(this,l).hidden=!0,t(this,l).style.zIndex=parseInt(t(this,l).style.zIndex)-1e3)};class Ct extends ${constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0}),this.textContent=B.data.textContent,this.textPosition=B.data.textPosition,this.annotationEditorType=i.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const B=document.createElement("div");B.classList.add("annotationTextContent"),B.setAttribute("role","comment");for(const T of this.textContent){const rt=document.createElement("span");rt.textContent=T,B.append(rt)}this.container.append(B)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class Nt extends ${constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0});c(this,v,null)}render(){this.container.classList.add("lineAnnotation");const T=this.data,{width:rt,height:dt}=C(T.rect),ft=this.svgFactory.create(rt,dt,!0),St=N(this,v,this.svgFactory.createElement("svg:line"));return St.setAttribute("x1",T.rect[2]-T.lineCoordinates[0]),St.setAttribute("y1",T.rect[3]-T.lineCoordinates[1]),St.setAttribute("x2",T.rect[2]-T.lineCoordinates[2]),St.setAttribute("y2",T.rect[3]-T.lineCoordinates[3]),St.setAttribute("stroke-width",T.borderStyle.width||1),St.setAttribute("stroke","transparent"),St.setAttribute("fill","transparent"),ft.append(St),this.container.append(ft),!T.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,v)}addHighlightArea(){this.container.classList.add("highlightArea")}}v=new WeakMap;class wt extends ${constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0});c(this,G,null)}render(){this.container.classList.add("squareAnnotation");const T=this.data,{width:rt,height:dt}=C(T.rect),ft=this.svgFactory.create(rt,dt,!0),St=T.borderStyle.width,_t=N(this,G,this.svgFactory.createElement("svg:rect"));return _t.setAttribute("x",St/2),_t.setAttribute("y",St/2),_t.setAttribute("width",rt-St),_t.setAttribute("height",dt-St),_t.setAttribute("stroke-width",St||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),ft.append(_t),this.container.append(ft),!T.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,G)}addHighlightArea(){this.container.classList.add("highlightArea")}}G=new WeakMap;class Tt extends ${constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0});c(this,Y,null)}render(){this.container.classList.add("circleAnnotation");const T=this.data,{width:rt,height:dt}=C(T.rect),ft=this.svgFactory.create(rt,dt,!0),St=T.borderStyle.width,_t=N(this,Y,this.svgFactory.createElement("svg:ellipse"));return _t.setAttribute("cx",rt/2),_t.setAttribute("cy",dt/2),_t.setAttribute("rx",rt/2-St/2),_t.setAttribute("ry",dt/2-St/2),_t.setAttribute("stroke-width",St||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),ft.append(_t),this.container.append(ft),!T.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Y)}addHighlightArea(){this.container.classList.add("highlightArea")}}Y=new WeakMap;class Pt extends ${constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0});c(this,ht,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const T=this.data,{width:rt,height:dt}=C(T.rect),ft=this.svgFactory.create(rt,dt,!0);let St=[];for(const $t of T.vertices){const qt=$t.x-T.rect[0],Ot=T.rect[3]-$t.y;St.push(qt+","+Ot)}St=St.join(" ");const _t=N(this,ht,this.svgFactory.createElement(this.svgElementName));return _t.setAttribute("points",St),_t.setAttribute("stroke-width",T.borderStyle.width||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),ft.append(_t),this.container.append(ft),!T.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,ht)}addHighlightArea(){this.container.classList.add("highlightArea")}}ht=new WeakMap;class Et extends Pt{constructor(B){super(B),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class at extends ${constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class bt extends ${constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0});c(this,gt,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=i.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const T=this.data,{width:rt,height:dt}=C(T.rect),ft=this.svgFactory.create(rt,dt,!0);for(const St of T.inkLists){let _t=[];for(const qt of St){const Ot=qt.x-T.rect[0],Qt=T.rect[3]-qt.y;_t.push(`${Ot},${Qt}`)}_t=_t.join(" ");const $t=this.svgFactory.createElement(this.svgElementName);t(this,gt).push($t),$t.setAttribute("points",_t),$t.setAttribute("stroke-width",T.borderStyle.width||1),$t.setAttribute("stroke","transparent"),$t.setAttribute("fill","transparent"),!T.popupRef&&this.hasPopupData&&this._createPopup(),ft.append($t)}return this.container.append(ft),this.container}getElementsToTriggerPopup(){return t(this,gt)}addHighlightArea(){this.container.classList.add("highlightArea")}}gt=new WeakMap;class kt extends ${constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Rt extends ${constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Ut extends ${constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Kt extends ${constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class re extends ${constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class _e extends ${constructor(T){var ft;super(T,{isRenderable:!0});c(this,Ft);c(this,xt,null);const{filename:rt,content:dt}=this.data.file;this.filename=(0,D.getFilenameFromUrl)(rt,!0),this.content=dt,(ft=this.linkService.eventBus)==null||ft.dispatch("fileattachmentannotation",{source:this,filename:rt,content:dt})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:T,data:rt}=this;let dt;rt.hasAppearance||rt.fillAlpha===0?dt=document.createElement("div"):(dt=document.createElement("img"),dt.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(rt.name)?"paperclip":"pushpin"}.svg`,rt.fillAlpha&&rt.fillAlpha<1&&(dt.style=`filter: opacity(${Math.round(rt.fillAlpha*100)}%);`)),dt.addEventListener("dblclick",k(this,Ft,Sn).bind(this)),N(this,xt,dt);const{isMac:ft}=i.FeatureTest.platform;return T.addEventListener("keydown",St=>{St.key==="Enter"&&(ft?St.metaKey:St.ctrlKey)&&k(this,Ft,Sn).call(this)}),!rt.popupRef&&this.hasPopupData?this._createPopup():dt.classList.add("popupTriggerArea"),T.append(dt),T}getElementsToTriggerPopup(){return t(this,xt)}addHighlightArea(){this.container.classList.add("highlightArea")}}xt=new WeakMap,Ft=new WeakSet,Sn=function(){var T;(T=this.downloadManager)==null||T.openOrDownloadData(this.content,this.filename)};class ce{constructor({div:B,accessibilityManager:T,annotationCanvasMap:rt,page:dt,viewport:ft}){c(this,ve);c(this,fe);c(this,ie,null);c(this,ee,null);c(this,Ae,new Map);this.div=B,N(this,ie,T),N(this,ee,rt),this.page=dt,this.viewport=ft,this.zIndex=0}async render(B){const{annotations:T}=B,rt=this.div;(0,D.setLayerDimensions)(rt,this.viewport);const dt=new Map,ft={data:null,layer:rt,linkService:B.linkService,downloadManager:B.downloadManager,imageResourcesPath:B.imageResourcesPath||"",renderForms:B.renderForms!==!1,svgFactory:new D.DOMSVGFactory,annotationStorage:B.annotationStorage||new b.AnnotationStorage,enableScripting:B.enableScripting===!0,hasJSActions:B.hasJSActions,fieldObjects:B.fieldObjects,parent:this,elements:null};for(const St of T){if(St.noHTML)continue;const _t=St.annotationType===i.AnnotationType.POPUP;if(_t){const Ot=dt.get(St.id);if(!Ot)continue;ft.elements=Ot}else{const{width:Ot,height:Qt}=C(St.rect);if(Ot<=0||Qt<=0)continue}ft.data=St;const $t=q.create(ft);if(!$t.isRenderable)continue;if(!_t&&St.popupRef){const Ot=dt.get(St.popupRef);Ot?Ot.push($t):dt.set(St.popupRef,[$t])}$t.annotationEditorType>0&&t(this,Ae).set($t.data.id,$t);const qt=$t.render();St.hidden&&(qt.style.visibility="hidden"),k(this,ve,Gr).call(this,qt,St.id)}k(this,fe,En).call(this)}update({viewport:B}){const T=this.div;this.viewport=B,(0,D.setLayerDimensions)(T,{rotation:B.rotation}),k(this,fe,En).call(this),T.hidden=!1}getEditableAnnotations(){return Array.from(t(this,Ae).values())}getEditableAnnotation(B){return t(this,Ae).get(B)}}ie=new WeakMap,ee=new WeakMap,Ae=new WeakMap,ve=new WeakSet,Gr=function(B,T){var dt;const rt=B.firstChild||B;rt.id=`${i.AnnotationPrefix}${T}`,this.div.append(B),(dt=t(this,ie))==null||dt.moveElementInDOM(this.div,B,rt,!1)},fe=new WeakSet,En=function(){if(!t(this,ee))return;const B=this.div;for(const[T,rt]of t(this,ee)){const dt=B.querySelector(`[data-annotation-id="${T}"]`);if(!dt)continue;const{firstChild:ft}=dt;ft?ft.nodeName==="CANVAS"?ft.replaceWith(rt):ft.before(rt):dt.append(rt)}t(this,ee).clear()}},792:(f,O,w)=>{var P,F,tt,Ur,C;w.d(O,{AnnotationStorage:()=>nt,PrintAnnotationStorage:()=>z,SerializableEmpty:()=>_});var i=w(292),D=w(310),b=w(651);const _=Object.freeze({map:null,hash:"",transfer:void 0});class nt{constructor(){c(this,tt);c(this,P,!1);c(this,F,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue($,et){const ut=t(this,F).get($);return ut===void 0?et:Object.assign(et,ut)}getRawValue($){return t(this,F).get($)}remove($){if(t(this,F).delete($),t(this,F).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const et of t(this,F).values())if(et instanceof D.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue($,et){const ut=t(this,F).get($);let st=!1;if(ut!==void 0)for(const[I,V]of Object.entries(et))ut[I]!==V&&(st=!0,ut[I]=V);else st=!0,t(this,F).set($,et);st&&k(this,tt,Ur).call(this),et instanceof D.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(et.constructor._type)}has($){return t(this,F).has($)}getAll(){return t(this,F).size>0?(0,i.objectFromMap)(t(this,F)):null}setAll($){for(const[et,ut]of Object.entries($))this.setValue(et,ut)}get size(){return t(this,F).size}resetModified(){t(this,P)&&(N(this,P,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new z(this)}get serializable(){if(t(this,F).size===0)return _;const $=new Map,et=new b.MurmurHash3_64,ut=[],st=Object.create(null);let I=!1;for(const[V,W]of t(this,F)){const H=W instanceof D.AnnotationEditor?W.serialize(!1,st):W;H&&($.set(V,H),et.update(`${V}:${JSON.stringify(H)}`),I||(I=!!H.bitmap))}if(I)for(const V of $.values())V.bitmap&&ut.push(V.bitmap);return $.size>0?{map:$,hash:et.hexdigest(),transfer:ut}:_}get editorStats(){let $=null;const et=new Map;for(const ut of t(this,F).values()){if(!(ut instanceof D.AnnotationEditor))continue;const st=ut.telemetryFinalData;if(!st)continue;const{type:I}=st;et.has(I)||et.set(I,Object.getPrototypeOf(ut).constructor),$||($=Object.create(null));const V=$[I]||($[I]=new Map);for(const[W,H]of Object.entries(st)){if(W==="type")continue;let Q=V.get(W);Q||(Q=new Map,V.set(W,Q));const ot=Q.get(H)??0;Q.set(H,ot+1)}}for(const[ut,st]of et)$[ut]=st.computeTelemetryFinalData($[ut]);return $}}P=new WeakMap,F=new WeakMap,tt=new WeakSet,Ur=function(){t(this,P)||(N(this,P,!0),typeof this.onSetModified=="function"&&this.onSetModified())};class z extends nt{constructor(et){super();c(this,C,void 0);const{map:ut,hash:st,transfer:I}=et.serializable,V=structuredClone(ut,I?{transfer:I}:null);N(this,C,{map:V,hash:st,transfer:I})}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,C)}}C=new WeakMap},831:(f,O,w)=>{w.a(f,async(i,D)=>{var H,Q,ot,At,Ki,Ct,$s,wt,Tt,Pt,Et,at,Xs,kt,Rt,Ut,Kt,re,vs,ce,he,Cn,jt,oe;try{let Ce=function(E){if(typeof E=="string"||E instanceof URL?E={url:E}:(E instanceof ArrayBuffer||ArrayBuffer.isView(E))&&(E={data:E}),typeof E!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!E.url&&!E.data&&!E.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const v=new A,{docId:G}=v,Y=E.url?se(E.url):null,ht=E.data?Se(E.data):null,gt=E.httpHeaders||null,xt=E.withCredentials===!0,Ft=E.password??null,Xt=E.range instanceof S?E.range:null,ie=Number.isInteger(E.rangeChunkSize)&&E.rangeChunkSize>0?E.rangeChunkSize:ne;let ee=E.worker instanceof a?E.worker:null;const Ae=E.verbosity,ve=typeof E.docBaseUrl=="string"&&!(0,nt.isDataScheme)(E.docBaseUrl)?E.docBaseUrl:null,ke=typeof E.cMapUrl=="string"?E.cMapUrl:null,fe=E.cMapPacked!==!1,Pe=E.CMapReaderFactory||d,ae=typeof E.standardFontDataUrl=="string"?E.standardFontDataUrl:null,B=E.StandardFontDataFactory||l,T=E.stopAtErrors!==!0,rt=Number.isInteger(E.maxImageSize)&&E.maxImageSize>-1?E.maxImageSize:-1,dt=E.isEvalSupported!==!1,ft=typeof E.isOffscreenCanvasSupported=="boolean"?E.isOffscreenCanvasSupported:!b.isNodeJS,St=Number.isInteger(E.canvasMaxAreaInBytes)?E.canvasMaxAreaInBytes:-1,_t=typeof E.disableFontFace=="boolean"?E.disableFontFace:b.isNodeJS,$t=E.fontExtraProperties===!0,qt=E.enableXfa===!0,Ot=E.ownerDocument||globalThis.document,Qt=E.disableRange===!0,Gt=E.disableStream===!0,Lt=E.disableAutoFetch===!0,Bt=E.pdfBug===!0,Zt=Xt?Xt.length:E.length??NaN,ue=typeof E.useSystemFonts=="boolean"?E.useSystemFonts:!b.isNodeJS&&!_t,de=typeof E.useWorkerFetch=="boolean"?E.useWorkerFetch:Pe===nt.DOMCMapReaderFactory&&B===nt.DOMStandardFontDataFactory&&ke&&ae&&(0,nt.isValidFetchUrl)(ke,document.baseURI)&&(0,nt.isValidFetchUrl)(ae,document.baseURI),Ee=E.canvasFactory||new r({ownerDocument:Ot}),Le=E.filterFactory||new m({docId:G,ownerDocument:Ot}),Je=null;(0,b.setVerbosityLevel)(Ae);const Xe={canvasFactory:Ee,filterFactory:Le};if(de||(Xe.cMapReaderFactory=new Pe({baseUrl:ke,isCompressed:fe}),Xe.standardFontDataFactory=new B({baseUrl:ae})),!ee){const Ge={verbosity:Ae,port:j.GlobalWorkerOptions.workerPort};ee=Ge.port?a.fromPort(Ge):new a(Ge),v._worker=ee}const Ve={docId:G,apiVersion:"4.1.392",data:ht,password:Ft,disableAutoFetch:Lt,rangeChunkSize:ie,length:Zt,docBaseUrl:ve,enableXfa:qt,evaluatorOptions:{maxImageSize:rt,disableFontFace:_t,ignoreErrors:T,isEvalSupported:dt,isOffscreenCanvasSupported:ft,canvasMaxAreaInBytes:St,fontExtraProperties:$t,useSystemFonts:ue,cMapUrl:de?ke:null,standardFontDataUrl:de?ae:null}},ii={ignoreErrors:T,isEvalSupported:dt,disableFontFace:_t,fontExtraProperties:$t,enableXfa:qt,ownerDocument:Ot,disableAutoFetch:Lt,pdfBug:Bt,styleElement:Je};return ee.promise.then(function(){if(v.destroyed)throw new Error("Loading aborted");const Ge=x(ee,Ve),U=new Promise(function(mt){let Ht;Xt?Ht=new et.PDFDataTransportStream(Xt,{disableRange:Qt,disableStream:Gt}):ht||(Ht=(zt=>b.isNodeJS?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&(0,nt.isValidFetchUrl)(zt.url)?new ut.PDFFetchStream(zt):new I.PDFNodeStream(zt):(0,nt.isValidFetchUrl)(zt.url)?new ut.PDFFetchStream(zt):new st.PDFNetworkStream(zt))({url:Y,length:Zt,httpHeaders:gt,withCredentials:xt,rangeChunkSize:ie,disableRange:Qt,disableStream:Gt})),mt(Ht)});return Promise.all([Ge,U]).then(function([mt,Ht]){if(v.destroyed)throw new Error("Loading aborted");const zt=new C.MessageHandler(G,mt,ee.port),Jt=new g(zt,v,Ht,ii,Xe);v._transport=Jt,zt.send("Ready",null)})}).catch(v._capability.reject),v},se=function(E){if(E instanceof URL)return E.href;try{return new URL(E,window.location).href}catch{if(b.isNodeJS&&typeof E=="string")return E}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")},Se=function(E){if(b.isNodeJS&&typeof Buffer<"u"&&E instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(E instanceof Uint8Array&&E.byteLength===E.buffer.byteLength)return E;if(typeof E=="string")return(0,b.stringToBytes)(E);if(E instanceof ArrayBuffer||ArrayBuffer.isView(E)||typeof E=="object"&&!isNaN(E==null?void 0:E.length))return new Uint8Array(E);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")};w.d(O,{PDFDataRangeTransport:()=>S,PDFWorker:()=>a,build:()=>it,getDocument:()=>Ce,version:()=>K});var b=w(292),_=w(792),nt=w(419),z=w(10),P=w(573),F=w(923),tt=w(814),j=w(164),C=w(178),q=w(62),$=w(626),et=w(585),ut=w(94),st=w(457),I=w(786),V=w(50),W=i([P,I]);[P,I]=W.then?(await W)():W;const ne=65536,lt=100,s=5e3,r=b.isNodeJS?P.NodeCanvasFactory:nt.DOMCanvasFactory,d=b.isNodeJS?P.NodeCMapReaderFactory:nt.DOMCMapReaderFactory,m=b.isNodeJS?P.NodeFilterFactory:nt.DOMFilterFactory,l=b.isNodeJS?P.NodeStandardFontDataFactory:nt.DOMStandardFontDataFactory;async function x(E,v){if(E.destroyed)throw new Error("Worker was destroyed");const G=await E.messageHandler.sendWithPromise("GetDocRequest",v,v.data?[v.data.buffer]:null);if(E.destroyed)throw new Error("Worker was destroyed");return G}const p=class p{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${fi(p,H)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var v,G,Y;this.destroyed=!0;try{(v=this._worker)!=null&&v.port&&(this._worker._pendingDestroy=!0),await((G=this._transport)==null?void 0:G.destroy())}catch(ht){throw(Y=this._worker)!=null&&Y.port&&delete this._worker._pendingDestroy,ht}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};H=new WeakMap,c(p,H,0);let A=p;class S{constructor(v,G,Y=!1,ht=null){this.length=v,this.initialData=G,this.progressiveDone=Y,this.contentDispositionFilename=ht,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(v){this._rangeListeners.push(v)}addProgressListener(v){this._progressListeners.push(v)}addProgressiveReadListener(v){this._progressiveReadListeners.push(v)}addProgressiveDoneListener(v){this._progressiveDoneListeners.push(v)}onDataRange(v,G){for(const Y of this._rangeListeners)Y(v,G)}onDataProgress(v,G){this._readyCapability.promise.then(()=>{for(const Y of this._progressListeners)Y(v,G)})}onDataProgressiveRead(v){this._readyCapability.promise.then(()=>{for(const G of this._progressiveReadListeners)G(v)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const v of this._progressiveDoneListeners)v()})}transportReady(){this._readyCapability.resolve()}requestDataRange(v,G){(0,b.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class u{constructor(v,G){this._pdfInfo=v,this._transport=G}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,b.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(v){return this._transport.getPage(v)}getPageIndex(v){return this._transport.getPageIndex(v)}getDestinations(){return this._transport.getDestinations()}getDestination(v){return this._transport.getDestination(v)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:v="display"}={}){const{renderingIntent:G}=this._transport.getRenderingIntent(v);return this._transport.getOptionalContentConfig(G)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(v=!1){return this._transport.startCleanup(v||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class o{constructor(v,G,Y,ht=!1){c(this,At);c(this,Ct);c(this,Q,null);c(this,ot,!1);this._pageIndex=v,this._pageInfo=G,this._transport=Y,this._stats=ht?new nt.StatTimer:null,this._pdfBug=ht,this.commonObjs=Y.commonObjs,this.objs=new y,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:v,rotation:G=this.rotate,offsetX:Y=0,offsetY:ht=0,dontFlip:gt=!1}={}){return new nt.PageViewport({viewBox:this.view,scale:v,rotation:G,offsetX:Y,offsetY:ht,dontFlip:gt})}getAnnotations({intent:v="display"}={}){const{renderingIntent:G}=this._transport.getRenderingIntent(v);return this._transport.getAnnotations(this._pageIndex,G)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,b.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var v;return((v=this._transport._htmlForXfa)==null?void 0:v.children[this._pageIndex])||null}render({canvasContext:v,viewport:G,intent:Y="display",annotationMode:ht=b.AnnotationMode.ENABLE,transform:gt=null,background:xt=null,optionalContentConfigPromise:Ft=null,annotationCanvasMap:Xt=null,pageColors:ie=null,printAnnotationStorage:ee=null}){var rt,dt;(rt=this._stats)==null||rt.time("Overall");const Ae=this._transport.getRenderingIntent(Y,ht,ee),{renderingIntent:ve,cacheKey:ke}=Ae;N(this,ot,!1),k(this,Ct,$s).call(this),Ft||(Ft=this._transport.getOptionalContentConfig(ve));let fe=this._intentStates.get(ke);fe||(fe=Object.create(null),this._intentStates.set(ke,fe)),fe.streamReaderCancelTimeout&&(clearTimeout(fe.streamReaderCancelTimeout),fe.streamReaderCancelTimeout=null);const Pe=!!(ve&b.RenderingIntentFlag.PRINT);fe.displayReadyCapability||(fe.displayReadyCapability=Promise.withResolvers(),fe.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(dt=this._stats)==null||dt.time("Page Request"),this._pumpOperatorList(Ae));const ae=ft=>{var St,_t;fe.renderTasks.delete(B),(this._maybeCleanupAfterRender||Pe)&&N(this,ot,!0),k(this,At,Ki).call(this,!Pe),ft?(B.capability.reject(ft),this._abortOperatorList({intentState:fe,reason:ft instanceof Error?ft:new Error(ft)})):B.capability.resolve(),(St=this._stats)==null||St.timeEnd("Rendering"),(_t=this._stats)==null||_t.timeEnd("Overall")},B=new Z({callback:ae,params:{canvasContext:v,viewport:G,transform:gt,background:xt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Xt,operatorList:fe.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Pe,pdfBug:this._pdfBug,pageColors:ie});(fe.renderTasks||(fe.renderTasks=new Set)).add(B);const T=B.task;return Promise.all([fe.displayReadyCapability.promise,Ft]).then(([ft,St])=>{var _t;if(this.destroyed){ae();return}if((_t=this._stats)==null||_t.time("Rendering"),!(St.renderingIntent&ve))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");B.initializeGraphics({transparency:ft,optionalContentConfig:St}),B.operatorListChanged()}).catch(ae),T}getOperatorList({intent:v="display",annotationMode:G=b.AnnotationMode.ENABLE,printAnnotationStorage:Y=null}={}){var Xt;function ht(){xt.operatorList.lastChunk&&(xt.opListReadCapability.resolve(xt.operatorList),xt.renderTasks.delete(Ft))}const gt=this._transport.getRenderingIntent(v,G,Y,!0);let xt=this._intentStates.get(gt.cacheKey);xt||(xt=Object.create(null),this._intentStates.set(gt.cacheKey,xt));let Ft;return xt.opListReadCapability||(Ft=Object.create(null),Ft.operatorListChanged=ht,xt.opListReadCapability=Promise.withResolvers(),(xt.renderTasks||(xt.renderTasks=new Set)).add(Ft),xt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Xt=this._stats)==null||Xt.time("Page Request"),this._pumpOperatorList(gt)),xt.opListReadCapability.promise}streamTextContent({includeMarkedContent:v=!1,disableNormalization:G=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:v===!0,disableNormalization:G===!0},{highWaterMark:100,size(Y){return Y.items.length}})}getTextContent(v={}){if(this._transport._htmlForXfa)return this.getXfa().then(Y=>V.XfaText.textContent(Y));const G=this.streamTextContent(v);return new Promise(function(Y,ht){function gt(){xt.read().then(function({value:Xt,done:ie}){if(ie){Y(Ft);return}Object.assign(Ft.styles,Xt.styles),Ft.items.push(...Xt.items),gt()},ht)}const xt=G.getReader(),Ft={items:[],styles:Object.create(null)};gt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const v=[];for(const G of this._intentStates.values())if(this._abortOperatorList({intentState:G,reason:new Error("Page was destroyed."),force:!0}),!G.opListReadCapability)for(const Y of G.renderTasks)v.push(Y.completed),Y.cancel();return this.objs.clear(),N(this,ot,!1),k(this,Ct,$s).call(this),Promise.all(v)}cleanup(v=!1){N(this,ot,!0);const G=k(this,At,Ki).call(this,!1);return v&&G&&this._stats&&(this._stats=new nt.StatTimer),G}_startRenderPage(v,G){var ht,gt;const Y=this._intentStates.get(G);Y&&((ht=this._stats)==null||ht.timeEnd("Page Request"),(gt=Y.displayReadyCapability)==null||gt.resolve(v))}_renderPageChunk(v,G){for(let Y=0,ht=v.length;Y<ht;Y++)G.operatorList.fnArray.push(v.fnArray[Y]),G.operatorList.argsArray.push(v.argsArray[Y]);G.operatorList.lastChunk=v.lastChunk,G.operatorList.separateAnnots=v.separateAnnots;for(const Y of G.renderTasks)Y.operatorListChanged();v.lastChunk&&k(this,At,Ki).call(this,!0)}_pumpOperatorList({renderingIntent:v,cacheKey:G,annotationStorageSerializable:Y}){const{map:ht,transfer:gt}=Y,xt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:v,cacheKey:G,annotationStorage:ht},gt).getReader(),Ft=this._intentStates.get(G);Ft.streamReader=xt;const Xt=()=>{xt.read().then(({value:ie,done:ee})=>{if(ee){Ft.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(ie,Ft),Xt())},ie=>{if(Ft.streamReader=null,!this._transport.destroyed){if(Ft.operatorList){Ft.operatorList.lastChunk=!0;for(const ee of Ft.renderTasks)ee.operatorListChanged();k(this,At,Ki).call(this,!0)}if(Ft.displayReadyCapability)Ft.displayReadyCapability.reject(ie);else if(Ft.opListReadCapability)Ft.opListReadCapability.reject(ie);else throw ie}})};Xt()}_abortOperatorList({intentState:v,reason:G,force:Y=!1}){if(v.streamReader){if(v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null),!Y){if(v.renderTasks.size>0)return;if(G instanceof nt.RenderingCancelledException){let ht=lt;G.extraDelay>0&&G.extraDelay<1e3&&(ht+=G.extraDelay),v.streamReaderCancelTimeout=setTimeout(()=>{v.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:v,reason:G,force:!0})},ht);return}}if(v.streamReader.cancel(new b.AbortException(G.message)).catch(()=>{}),v.streamReader=null,!this._transport.destroyed){for(const[ht,gt]of this._intentStates)if(gt===v){this._intentStates.delete(ht);break}this.cleanup()}}}get stats(){return this._stats}}Q=new WeakMap,ot=new WeakMap,At=new WeakSet,Ki=function(v=!1){if(k(this,Ct,$s).call(this),!t(this,ot)||this.destroyed)return!1;if(v)return N(this,Q,setTimeout(()=>{N(this,Q,null),k(this,At,Ki).call(this,!1)},s)),!1;for(const{renderTasks:G,operatorList:Y}of this._intentStates.values())if(G.size>0||!Y.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),N(this,ot,!1),!0},Ct=new WeakSet,$s=function(){t(this,Q)&&(clearTimeout(t(this,Q)),N(this,Q,null))};class h{constructor(){c(this,wt,new Set);c(this,Tt,Promise.resolve())}postMessage(v,G){const Y={data:structuredClone(v,G?{transfer:G}:null)};t(this,Tt).then(()=>{for(const ht of t(this,wt))ht.call(this,Y)})}addEventListener(v,G){t(this,wt).add(G)}removeEventListener(v,G){t(this,wt).delete(G)}terminate(){t(this,wt).clear()}}wt=new WeakMap,Tt=new WeakMap;const n={isWorkerDisabled:!1,fakeWorkerId:0};b.isNodeJS&&(n.isWorkerDisabled=!0,(Pt=j.GlobalWorkerOptions).workerSrc||(Pt.workerSrc="./pdf.worker.mjs")),n.isSameOrigin=function(E,v){let G;try{if(G=new URL(E),!G.origin||G.origin==="null")return!1}catch{return!1}const Y=new URL(v,G);return G.origin===Y.origin},n.createCDNWrapper=function(E){const v=`await import("${E}");`;return URL.createObjectURL(new Blob([v],{type:"text/javascript"}))};const L=class L{constructor({name:v=null,port:G=null,verbosity:Y=(0,b.getVerbosityLevel)()}={}){var ht;if(this.name=v,this.destroyed=!1,this.verbosity=Y,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,G){if((ht=t(L,Et))!=null&&ht.has(G))throw new Error("Cannot use more than one PDFWorker per port.");(t(L,Et)||N(L,Et,new WeakMap)).set(G,this),this._initializeFromPort(G);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(v){this._port=v,this._messageHandler=new C.MessageHandler("main","worker",v),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!n.isWorkerDisabled&&!t(L,at,Xs)){let{workerSrc:v}=L;try{n.isSameOrigin(window.location.href,v)||(v=n.createCDNWrapper(new URL(v,window.location).href));const G=new Worker(v,{type:"module"}),Y=new C.MessageHandler("main","worker",G),ht=()=>{G.removeEventListener("error",gt),Y.destroy(),G.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},gt=()=>{this._webWorker||ht()};G.addEventListener("error",gt),Y.on("test",Ft=>{if(G.removeEventListener("error",gt),this.destroyed){ht();return}Ft?(this._messageHandler=Y,this._port=G,this._webWorker=G,this._readyCapability.resolve(),Y.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),Y.destroy(),G.terminate())}),Y.on("ready",Ft=>{if(G.removeEventListener("error",gt),this.destroyed){ht();return}try{xt()}catch{this._setupFakeWorker()}});const xt=()=>{const Ft=new Uint8Array;Y.send("test",Ft,[Ft.buffer])};xt();return}catch{(0,b.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){n.isWorkerDisabled||((0,b.warn)("Setting up fake worker."),n.isWorkerDisabled=!0),L._setupFakeWorkerGlobal.then(v=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const G=new h;this._port=G;const Y=`fake${n.fakeWorkerId++}`,ht=new C.MessageHandler(Y+"_worker",Y,G);v.setup(ht,G);const gt=new C.MessageHandler(Y,Y+"_worker",G);this._messageHandler=gt,this._readyCapability.resolve(),gt.send("configure",{verbosity:this.verbosity})}).catch(v=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${v.message}".`))})}destroy(){var v;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(v=t(L,Et))==null||v.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(v){var Y;if(!(v!=null&&v.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const G=(Y=t(this,Et))==null?void 0:Y.get(v.port);if(G){if(G._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return G}return new L(v)}static get workerSrc(){if(j.GlobalWorkerOptions.workerSrc)return j.GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){const v=async()=>t(this,at,Xs)?t(this,at,Xs):(await mi(()=>import(this.workerSrc).then(async G=>(await G.__tla,G)),[])).WorkerMessageHandler;return(0,b.shadow)(this,"_setupFakeWorkerGlobal",v())}};Et=new WeakMap,at=new WeakSet,Xs=function(){var v;try{return((v=globalThis.pdfjsWorker)==null?void 0:v.WorkerMessageHandler)||null}catch{return null}},c(L,at),c(L,Et,void 0);let a=L;class g{constructor(v,G,Y,ht,gt){c(this,re);c(this,kt,new Map);c(this,Rt,new Map);c(this,Ut,new Map);c(this,Kt,null);this.messageHandler=v,this.loadingTask=G,this.commonObjs=new y,this.fontLoader=new z.FontLoader({ownerDocument:ht.ownerDocument,styleElement:ht.styleElement}),this._params=ht,this.canvasFactory=gt.canvasFactory,this.filterFactory=gt.filterFactory,this.cMapReaderFactory=gt.cMapReaderFactory,this.standardFontDataFactory=gt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Y,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return(0,b.shadow)(this,"annotationStorage",new _.AnnotationStorage)}getRenderingIntent(v,G=b.AnnotationMode.ENABLE,Y=null,ht=!1){let gt=b.RenderingIntentFlag.DISPLAY,xt=_.SerializableEmpty;switch(v){case"any":gt=b.RenderingIntentFlag.ANY;break;case"display":break;case"print":gt=b.RenderingIntentFlag.PRINT;break;default:(0,b.warn)(`getRenderingIntent - invalid intent: ${v}`)}switch(G){case b.AnnotationMode.DISABLE:gt+=b.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case b.AnnotationMode.ENABLE:break;case b.AnnotationMode.ENABLE_FORMS:gt+=b.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case b.AnnotationMode.ENABLE_STORAGE:gt+=b.RenderingIntentFlag.ANNOTATIONS_STORAGE,xt=(gt&b.RenderingIntentFlag.PRINT&&Y instanceof _.PrintAnnotationStorage?Y:this.annotationStorage).serializable;break;default:(0,b.warn)(`getRenderingIntent - invalid annotationMode: ${G}`)}return ht&&(gt+=b.RenderingIntentFlag.OPLIST),{renderingIntent:gt,cacheKey:`${gt}_${xt.hash}`,annotationStorageSerializable:xt}}destroy(){var Y;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(Y=t(this,Kt))==null||Y.reject(new Error("Worker was destroyed during onPassword callback"));const v=[];for(const ht of t(this,Rt).values())v.push(ht._destroy());t(this,Rt).clear(),t(this,Ut).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const G=this.messageHandler.sendWithPromise("Terminate",null);return v.push(G),Promise.all(v).then(()=>{var ht;this.commonObjs.clear(),this.fontLoader.clear(),t(this,kt).clear(),this.filterFactory.destroy(),(0,tt.cleanupTextLayer)(),(ht=this._networkStream)==null||ht.cancelAllRequests(new b.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:v,loadingTask:G}=this;v.on("GetReader",(Y,ht)=>{(0,b.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=gt=>{this._lastProgress={loaded:gt.loaded,total:gt.total}},ht.onPull=()=>{this._fullReader.read().then(function({value:gt,done:xt}){if(xt){ht.close();return}(0,b.assert)(gt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),ht.enqueue(new Uint8Array(gt),1,[gt])}).catch(gt=>{ht.error(gt)})},ht.onCancel=gt=>{this._fullReader.cancel(gt),ht.ready.catch(xt=>{if(!this.destroyed)throw xt})}}),v.on("ReaderHeadersReady",Y=>{const ht=Promise.withResolvers(),gt=this._fullReader;return gt.headersReady.then(()=>{var xt;(!gt.isStreamingSupported||!gt.isRangeSupported)&&(this._lastProgress&&((xt=G.onProgress)==null||xt.call(G,this._lastProgress)),gt.onProgress=Ft=>{var Xt;(Xt=G.onProgress)==null||Xt.call(G,{loaded:Ft.loaded,total:Ft.total})}),ht.resolve({isStreamingSupported:gt.isStreamingSupported,isRangeSupported:gt.isRangeSupported,contentLength:gt.contentLength})},ht.reject),ht.promise}),v.on("GetRangeReader",(Y,ht)=>{(0,b.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const gt=this._networkStream.getRangeReader(Y.begin,Y.end);if(!gt){ht.close();return}ht.onPull=()=>{gt.read().then(function({value:xt,done:Ft}){if(Ft){ht.close();return}(0,b.assert)(xt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),ht.enqueue(new Uint8Array(xt),1,[xt])}).catch(xt=>{ht.error(xt)})},ht.onCancel=xt=>{gt.cancel(xt),ht.ready.catch(Ft=>{if(!this.destroyed)throw Ft})}}),v.on("GetDoc",({pdfInfo:Y})=>{this._numPages=Y.numPages,this._htmlForXfa=Y.htmlForXfa,delete Y.htmlForXfa,G._capability.resolve(new u(Y,this))}),v.on("DocException",function(Y){let ht;switch(Y.name){case"PasswordException":ht=new b.PasswordException(Y.message,Y.code);break;case"InvalidPDFException":ht=new b.InvalidPDFException(Y.message);break;case"MissingPDFException":ht=new b.MissingPDFException(Y.message);break;case"UnexpectedResponseException":ht=new b.UnexpectedResponseException(Y.message,Y.status);break;case"UnknownErrorException":ht=new b.UnknownErrorException(Y.message,Y.details);break;default:(0,b.unreachable)("DocException - expected a valid Error.")}G._capability.reject(ht)}),v.on("PasswordRequest",Y=>{if(N(this,Kt,Promise.withResolvers()),G.onPassword){const ht=gt=>{gt instanceof Error?t(this,Kt).reject(gt):t(this,Kt).resolve({password:gt})};try{G.onPassword(ht,Y.code)}catch(gt){t(this,Kt).reject(gt)}}else t(this,Kt).reject(new b.PasswordException(Y.message,Y.code));return t(this,Kt).promise}),v.on("DataLoaded",Y=>{var ht;(ht=G.onProgress)==null||ht.call(G,{loaded:Y.length,total:Y.length}),this.downloadInfoCapability.resolve(Y)}),v.on("StartRenderPage",Y=>{this.destroyed||t(this,Rt).get(Y.pageIndex)._startRenderPage(Y.transparency,Y.cacheKey)}),v.on("commonobj",([Y,ht,gt])=>{var xt;if(this.destroyed||this.commonObjs.has(Y))return null;switch(ht){case"Font":const Ft=this._params;if("error"in gt){const Ae=gt.error;(0,b.warn)(`Error during font loading: ${Ae}`),this.commonObjs.resolve(Y,Ae);break}const Xt=Ft.pdfBug&&((xt=globalThis.FontInspector)!=null&&xt.enabled)?(Ae,ve)=>globalThis.FontInspector.fontAdded(Ae,ve):null,ie=new z.FontFaceObject(gt,{isEvalSupported:Ft.isEvalSupported,disableFontFace:Ft.disableFontFace,ignoreErrors:Ft.ignoreErrors,inspectFont:Xt});this.fontLoader.bind(ie).catch(()=>v.sendWithPromise("FontFallback",{id:Y})).finally(()=>{!Ft.fontExtraProperties&&ie.data&&(ie.data=null),this.commonObjs.resolve(Y,ie)});break;case"CopyLocalImage":const{imageRef:ee}=gt;(0,b.assert)(ee,"The imageRef must be defined.");for(const Ae of t(this,Rt).values())for(const[,ve]of Ae.objs)if(ve.ref===ee)return ve.dataLen?(this.commonObjs.resolve(Y,structuredClone(ve)),ve.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Y,gt);break;default:throw new Error(`Got unknown common object type ${ht}`)}return null}),v.on("obj",([Y,ht,gt,xt])=>{var Xt;if(this.destroyed)return;const Ft=t(this,Rt).get(ht);if(!Ft.objs.has(Y)){if(Ft._intentStates.size===0){(Xt=xt==null?void 0:xt.bitmap)==null||Xt.close();return}switch(gt){case"Image":Ft.objs.resolve(Y,xt),(xt==null?void 0:xt.dataLen)>b.MAX_IMAGE_SIZE_TO_CACHE&&(Ft._maybeCleanupAfterRender=!0);break;case"Pattern":Ft.objs.resolve(Y,xt);break;default:throw new Error(`Got unknown object type ${gt}`)}}}),v.on("DocProgress",Y=>{var ht;this.destroyed||((ht=G.onProgress)==null||ht.call(G,{loaded:Y.loaded,total:Y.total}))}),v.on("FetchBuiltInCMap",Y=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Y):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),v.on("FetchStandardFontData",Y=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Y):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Y;this.annotationStorage.size<=0&&(0,b.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:v,transfer:G}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:v,filename:((Y=this._fullReader)==null?void 0:Y.filename)??null},G).finally(()=>{this.annotationStorage.resetModified()})}getPage(v){if(!Number.isInteger(v)||v<=0||v>this._numPages)return Promise.reject(new Error("Invalid page request."));const G=v-1,Y=t(this,Ut).get(G);if(Y)return Y;const ht=this.messageHandler.sendWithPromise("GetPage",{pageIndex:G}).then(gt=>{if(this.destroyed)throw new Error("Transport destroyed");const xt=new o(G,gt,this,this._params.pdfBug);return t(this,Rt).set(G,xt),xt});return t(this,Ut).set(G,ht),ht}getPageIndex(v){return typeof v!="object"||v===null||!Number.isInteger(v.num)||v.num<0||!Number.isInteger(v.gen)||v.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:v.num,gen:v.gen})}getAnnotations(v,G){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:v,intent:G})}getFieldObjects(){return k(this,re,vs).call(this,"GetFieldObjects")}hasJSActions(){return k(this,re,vs).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(v){return typeof v!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:v})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return k(this,re,vs).call(this,"GetDocJSActions")}getPageJSActions(v){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:v})}getStructTree(v){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:v})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(v){return k(this,re,vs).call(this,"GetOptionalContentConfig").then(G=>new $.OptionalContentConfig(G,v))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const v="GetMetadata",G=t(this,kt).get(v);if(G)return G;const Y=this.messageHandler.sendWithPromise(v,null).then(ht=>{var gt,xt;return{info:ht[0],metadata:ht[1]?new q.Metadata(ht[1]):null,contentDispositionFilename:((gt=this._fullReader)==null?void 0:gt.filename)??null,contentLength:((xt=this._fullReader)==null?void 0:xt.contentLength)??null}});return t(this,kt).set(v,Y),Y}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(v=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const G of t(this,Rt).values())if(!G.cleanup())throw new Error(`startCleanup: Page ${G.pageNumber} is currently rendering.`);this.commonObjs.clear(),v||this.fontLoader.clear(),t(this,kt).clear(),this.filterFactory.destroy(!0),(0,tt.cleanupTextLayer)()}}get loadingParams(){const{disableAutoFetch:v,enableXfa:G}=this._params;return(0,b.shadow)(this,"loadingParams",{disableAutoFetch:v,enableXfa:G})}}kt=new WeakMap,Rt=new WeakMap,Ut=new WeakMap,Kt=new WeakMap,re=new WeakSet,vs=function(v,G=null){const Y=t(this,kt).get(v);if(Y)return Y;const ht=this.messageHandler.sendWithPromise(v,G);return t(this,kt).set(v,ht),ht};const M=Symbol("INITIAL_DATA");class y{constructor(){c(this,he);c(this,ce,Object.create(null))}get(v,G=null){if(G){const ht=k(this,he,Cn).call(this,v);return ht.promise.then(()=>G(ht.data)),null}const Y=t(this,ce)[v];if(!Y||Y.data===M)throw new Error(`Requesting object that isn't resolved yet ${v}.`);return Y.data}has(v){const G=t(this,ce)[v];return!!G&&G.data!==M}resolve(v,G=null){const Y=k(this,he,Cn).call(this,v);Y.data=G,Y.resolve()}clear(){var v;for(const G in t(this,ce)){const{data:Y}=t(this,ce)[G];(v=Y==null?void 0:Y.bitmap)==null||v.close()}N(this,ce,Object.create(null))}*[Symbol.iterator](){for(const v in t(this,ce)){const{data:G}=t(this,ce)[v];G!==M&&(yield[v,G])}}}ce=new WeakMap,he=new WeakSet,Cn=function(v){var G;return(G=t(this,ce))[v]||(G[v]={...Promise.withResolvers(),data:M})};class X{constructor(v){c(this,jt,null);N(this,jt,v),this.onContinue=null}get promise(){return t(this,jt).capability.promise}cancel(v=0){t(this,jt).cancel(null,v)}get separateAnnots(){const{separateAnnots:v}=t(this,jt).operatorList;if(!v)return!1;const{annotationCanvasMap:G}=t(this,jt);return v.form||v.canvas&&(G==null?void 0:G.size)>0}}jt=new WeakMap;const J=class J{constructor({callback:v,params:G,objs:Y,commonObjs:ht,annotationCanvasMap:gt,operatorList:xt,pageIndex:Ft,canvasFactory:Xt,filterFactory:ie,useRequestAnimationFrame:ee=!1,pdfBug:Ae=!1,pageColors:ve=null}){this.callback=v,this.params=G,this.objs=Y,this.commonObjs=ht,this.annotationCanvasMap=gt,this.operatorListIdx=null,this.operatorList=xt,this._pageIndex=Ft,this.canvasFactory=Xt,this.filterFactory=ie,this._pdfBug=Ae,this.pageColors=ve,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=ee===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new X(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=G.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:v=!1,optionalContentConfig:G}){var Ft,Xt;if(this.cancelled)return;if(this._canvas){if(t(J,oe).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(J,oe).add(this._canvas)}this._pdfBug&&((Ft=globalThis.StepperManager)!=null&&Ft.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Y,viewport:ht,transform:gt,background:xt}=this.params;this.gfx=new F.CanvasGraphics(Y,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:G},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:gt,viewport:ht,transparency:v,background:xt}),this.operatorListIdx=0,this.graphicsReady=!0,(Xt=this.graphicsReadyCallback)==null||Xt.call(this)}cancel(v=null,G=0){var Y;this.running=!1,this.cancelled=!0,(Y=this.gfx)==null||Y.endDrawing(),t(J,oe).delete(this._canvas),this.callback(v||new nt.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,G))}operatorListChanged(){var v;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(v=this.stepper)==null||v.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),t(J,oe).delete(this._canvas),this.callback())))}};oe=new WeakMap,c(J,oe,new WeakSet);let Z=J;const K="4.1.392",it="fcb76a78d";D()}catch(Ce){D(Ce)}})},583:(f,O,w)=>{w.d(O,{BaseCMapReaderFactory:()=>_,BaseCanvasFactory:()=>b,BaseFilterFactory:()=>D,BaseSVGFactory:()=>z,BaseStandardFontDataFactory:()=>nt});var i=w(292);class D{constructor(){this.constructor===D&&(0,i.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(F){return"none"}addHCMFilter(F,tt){return"none"}addHighlightHCMFilter(F,tt,j,C,q){return"none"}destroy(F=!1){}}class b{constructor(){this.constructor===b&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(F,tt){if(F<=0||tt<=0)throw new Error("Invalid canvas size");const j=this._createCanvas(F,tt);return{canvas:j,context:j.getContext("2d")}}reset(F,tt,j){if(!F.canvas)throw new Error("Canvas is not specified");if(tt<=0||j<=0)throw new Error("Invalid canvas size");F.canvas.width=tt,F.canvas.height=j}destroy(F){if(!F.canvas)throw new Error("Canvas is not specified");F.canvas.width=0,F.canvas.height=0,F.canvas=null,F.context=null}_createCanvas(F,tt){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}class _{constructor({baseUrl:F=null,isCompressed:tt=!0}){this.constructor===_&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=F,this.isCompressed=tt}async fetch({name:F}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!F)throw new Error("CMap name must be specified.");const tt=this.baseUrl+F+(this.isCompressed?".bcmap":""),j=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(tt,j).catch(C=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${tt}`)})}_fetchData(F,tt){(0,i.unreachable)("Abstract method `_fetchData` called.")}}class nt{constructor({baseUrl:F=null}){this.constructor===nt&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=F}async fetch({filename:F}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!F)throw new Error("Font filename must be specified.");const tt=`${this.baseUrl}${F}`;return this._fetchData(tt).catch(j=>{throw new Error(`Unable to load font data at: ${tt}`)})}_fetchData(F){(0,i.unreachable)("Abstract method `_fetchData` called.")}}class z{constructor(){this.constructor===z&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(F,tt,j=!1){if(F<=0||tt<=0)throw new Error("Invalid SVG dimensions");const C=this._createSVG("svg:svg");return C.setAttribute("version","1.1"),j||(C.setAttribute("width",`${F}px`),C.setAttribute("height",`${tt}px`)),C.setAttribute("preserveAspectRatio","none"),C.setAttribute("viewBox",`0 0 ${F} ${tt}`),C}createElement(F){if(typeof F!="string")throw new Error("Invalid SVG element type");return this._createSVG(F)}_createSVG(F){(0,i.unreachable)("Abstract method `_createSVG` called.")}}},923:(f,O,w)=>{var oe,Tn,se,Ln;w.d(O,{CanvasGraphics:()=>me});var i=w(292),D=w(419);const b={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function _(lt,s){if(!s)return;const r=s[2]-s[0],d=s[3]-s[1],m=new Path2D;m.rect(s[0],s[1],r,d),lt.clip(m)}class nt{constructor(){this.constructor===nt&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class z extends nt{constructor(s){super(),this._type=s[1],this._bbox=s[2],this._colorStops=s[3],this._p0=s[4],this._p1=s[5],this._r0=s[6],this._r1=s[7],this.matrix=null}_createGradient(s){let r;this._type==="axial"?r=s.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(r=s.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const d of this._colorStops)r.addColorStop(d[0],d[1]);return r}getPattern(s,r,d,m){let l;if(m===b.STROKE||m===b.FILL){const x=r.current.getClippedPathBoundingBox(m,(0,D.getCurrentTransform)(s))||[0,0,0,0],A=Math.ceil(x[2]-x[0])||1,S=Math.ceil(x[3]-x[1])||1,u=r.cachedCanvases.getCanvas("pattern",A,S,!0),o=u.context;o.clearRect(0,0,o.canvas.width,o.canvas.height),o.beginPath(),o.rect(0,0,o.canvas.width,o.canvas.height),o.translate(-x[0],-x[1]),d=i.Util.transform(d,[1,0,0,1,x[0],x[1]]),o.transform(...r.baseTransform),this.matrix&&o.transform(...this.matrix),_(o,this._bbox),o.fillStyle=this._createGradient(o),o.fill(),l=s.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(d);l.setTransform(h)}else _(s,this._bbox),l=this._createGradient(s);return l}}function P(lt,s,r,d,m,l,x,A){const S=s.coords,u=s.colors,o=lt.data,h=lt.width*4;let n;S[r+1]>S[d+1]&&(n=r,r=d,d=n,n=l,l=x,x=n),S[d+1]>S[m+1]&&(n=d,d=m,m=n,n=x,x=A,A=n),S[r+1]>S[d+1]&&(n=r,r=d,d=n,n=l,l=x,x=n);const a=(S[r]+s.offsetX)*s.scaleX,g=(S[r+1]+s.offsetY)*s.scaleY,M=(S[d]+s.offsetX)*s.scaleX,y=(S[d+1]+s.offsetY)*s.scaleY,X=(S[m]+s.offsetX)*s.scaleX,Z=(S[m+1]+s.offsetY)*s.scaleY;if(g>=Z)return;const K=u[l],it=u[l+1],p=u[l+2],L=u[x],J=u[x+1],E=u[x+2],v=u[A],G=u[A+1],Y=u[A+2],ht=Math.round(g),gt=Math.round(Z);let xt,Ft,Xt,ie,ee,Ae,ve,ke;for(let fe=ht;fe<=gt;fe++){if(fe<y){const rt=fe<g?0:(g-fe)/(g-y);xt=a-(a-M)*rt,Ft=K-(K-L)*rt,Xt=it-(it-J)*rt,ie=p-(p-E)*rt}else{let rt;fe>Z?rt=1:y===Z?rt=0:rt=(y-fe)/(y-Z),xt=M-(M-X)*rt,Ft=L-(L-v)*rt,Xt=J-(J-G)*rt,ie=E-(E-Y)*rt}let Pe;fe<g?Pe=0:fe>Z?Pe=1:Pe=(g-fe)/(g-Z),ee=a-(a-X)*Pe,Ae=K-(K-v)*Pe,ve=it-(it-G)*Pe,ke=p-(p-Y)*Pe;const ae=Math.round(Math.min(xt,ee)),B=Math.round(Math.max(xt,ee));let T=h*fe+ae*4;for(let rt=ae;rt<=B;rt++)Pe=(xt-rt)/(xt-ee),Pe<0?Pe=0:Pe>1&&(Pe=1),o[T++]=Ft-(Ft-Ae)*Pe|0,o[T++]=Xt-(Xt-ve)*Pe|0,o[T++]=ie-(ie-ke)*Pe|0,o[T++]=255}}function F(lt,s,r){const d=s.coords,m=s.colors;let l,x;switch(s.type){case"lattice":const A=s.verticesPerRow,S=Math.floor(d.length/A)-1,u=A-1;for(l=0;l<S;l++){let o=l*A;for(let h=0;h<u;h++,o++)P(lt,r,d[o],d[o+1],d[o+A],m[o],m[o+1],m[o+A]),P(lt,r,d[o+A+1],d[o+1],d[o+A],m[o+A+1],m[o+1],m[o+A])}break;case"triangles":for(l=0,x=d.length;l<x;l+=3)P(lt,r,d[l],d[l+1],d[l+2],m[l],m[l+1],m[l+2]);break;default:throw new Error("illegal figure")}}class tt extends nt{constructor(s){super(),this._coords=s[2],this._colors=s[3],this._figures=s[4],this._bounds=s[5],this._bbox=s[7],this._background=s[8],this.matrix=null}_createMeshCanvas(s,r,d){const m=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),x=Math.ceil(this._bounds[2])-m,A=Math.ceil(this._bounds[3])-l,S=Math.min(Math.ceil(Math.abs(x*s[0]*1.1)),3e3),u=Math.min(Math.ceil(Math.abs(A*s[1]*1.1)),3e3),o=x/S,h=A/u,n={coords:this._coords,colors:this._colors,offsetX:-m,offsetY:-l,scaleX:1/o,scaleY:1/h},a=S+2*2,g=u+2*2,M=d.getCanvas("mesh",a,g,!1),y=M.context,X=y.createImageData(S,u);if(r){const Z=X.data;for(let K=0,it=Z.length;K<it;K+=4)Z[K]=r[0],Z[K+1]=r[1],Z[K+2]=r[2],Z[K+3]=255}for(const Z of this._figures)F(X,Z,n);return y.putImageData(X,2,2),{canvas:M.canvas,offsetX:m-2*o,offsetY:l-2*h,scaleX:o,scaleY:h}}getPattern(s,r,d,m){_(s,this._bbox);let l;if(m===b.SHADING)l=i.Util.singularValueDecompose2dScale((0,D.getCurrentTransform)(s));else if(l=i.Util.singularValueDecompose2dScale(r.baseTransform),this.matrix){const A=i.Util.singularValueDecompose2dScale(this.matrix);l=[l[0]*A[0],l[1]*A[1]]}const x=this._createMeshCanvas(l,m===b.SHADING?null:this._background,r.cachedCanvases);return m!==b.SHADING&&(s.setTransform(...r.baseTransform),this.matrix&&s.transform(...this.matrix)),s.translate(x.offsetX,x.offsetY),s.scale(x.scaleX,x.scaleY),s.createPattern(x.canvas,"no-repeat")}}class j extends nt{getPattern(){return"hotpink"}}function C(lt){switch(lt[0]){case"RadialAxial":return new z(lt);case"Mesh":return new tt(lt);case"Dummy":return new j}throw new Error(`Unknown IR type: ${lt[0]}`)}const q={COLORED:1,UNCOLORED:2},jt=class jt{constructor(s,r,d,m,l){this.operatorList=s[2],this.matrix=s[3]||[1,0,0,1,0,0],this.bbox=s[4],this.xstep=s[5],this.ystep=s[6],this.paintType=s[7],this.tilingType=s[8],this.color=r,this.ctx=d,this.canvasGraphicsFactory=m,this.baseTransform=l}createPatternCanvas(s){const r=this.operatorList,d=this.bbox,m=this.xstep,l=this.ystep,x=this.paintType,A=this.tilingType,S=this.color,u=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+A);const o=d[0],h=d[1],n=d[2],a=d[3],g=i.Util.singularValueDecompose2dScale(this.matrix),M=i.Util.singularValueDecompose2dScale(this.baseTransform),y=[g[0]*M[0],g[1]*M[1]],X=this.getSizeAndScale(m,this.ctx.canvas.width,y[0]),Z=this.getSizeAndScale(l,this.ctx.canvas.height,y[1]),K=s.cachedCanvases.getCanvas("pattern",X.size,Z.size,!0),it=K.context,p=u.createCanvasGraphics(it);p.groupLevel=s.groupLevel,this.setFillAndStrokeStyleToContext(p,x,S);let L=o,J=h,E=n,v=a;return o<0&&(L=0,E+=Math.abs(o)),h<0&&(J=0,v+=Math.abs(h)),it.translate(-(X.scale*L),-(Z.scale*J)),p.transform(X.scale,0,0,Z.scale,0,0),it.save(),this.clipBbox(p,L,J,E,v),p.baseTransform=(0,D.getCurrentTransform)(p.ctx),p.executeOperatorList(r),p.endDrawing(),{canvas:K.canvas,scaleX:X.scale,scaleY:Z.scale,offsetX:L,offsetY:J}}getSizeAndScale(s,r,d){s=Math.abs(s);const m=Math.max(jt.MAX_PATTERN_SIZE,r);let l=Math.ceil(s*d);return l>=m?l=m:d=l/s,{scale:d,size:l}}clipBbox(s,r,d,m,l){const x=m-r,A=l-d;s.ctx.rect(r,d,x,A),s.current.updateRectMinMax((0,D.getCurrentTransform)(s.ctx),[r,d,m,l]),s.clip(),s.endPath()}setFillAndStrokeStyleToContext(s,r,d){const m=s.ctx,l=s.current;switch(r){case q.COLORED:const x=this.ctx;m.fillStyle=x.fillStyle,m.strokeStyle=x.strokeStyle,l.fillColor=x.fillStyle,l.strokeColor=x.strokeStyle;break;case q.UNCOLORED:const A=i.Util.makeHexColor(d[0],d[1],d[2]);m.fillStyle=A,m.strokeStyle=A,l.fillColor=A,l.strokeColor=A;break;default:throw new i.FormatError(`Unsupported paint type: ${r}`)}}getPattern(s,r,d,m){let l=d;m!==b.SHADING&&(l=i.Util.transform(l,r.baseTransform),this.matrix&&(l=i.Util.transform(l,this.matrix)));const x=this.createPatternCanvas(r);let A=new DOMMatrix(l);A=A.translate(x.offsetX,x.offsetY),A=A.scale(1/x.scaleX,1/x.scaleY);const S=s.createPattern(x.canvas,"repeat");return S.setTransform(A),S}};be(jt,"MAX_PATTERN_SIZE",3e3);let $=jt;function et({src:lt,srcPos:s=0,dest:r,width:d,height:m,nonBlackColor:l=4294967295,inverseDecode:x=!1}){const A=i.FeatureTest.isLittleEndian?4278190080:255,[S,u]=x?[l,A]:[A,l],o=d>>3,h=d&7,n=lt.length;r=new Uint32Array(r.buffer);let a=0;for(let g=0;g<m;g++){for(const y=s+o;s<y;s++){const X=s<n?lt[s]:255;r[a++]=X&128?u:S,r[a++]=X&64?u:S,r[a++]=X&32?u:S,r[a++]=X&16?u:S,r[a++]=X&8?u:S,r[a++]=X&4?u:S,r[a++]=X&2?u:S,r[a++]=X&1?u:S}if(h===0)continue;const M=s<n?lt[s++]:255;for(let y=0;y<h;y++)r[a++]=M&1<<7-y?u:S}return{srcPos:s,destPos:a}}const ut=16,st=100,I=4096,V=15,W=10,H=1e3,Q=16;function ot(lt,s){if(lt._removeMirroring)throw new Error("Context is already forwarding operations.");lt.__originalSave=lt.save,lt.__originalRestore=lt.restore,lt.__originalRotate=lt.rotate,lt.__originalScale=lt.scale,lt.__originalTranslate=lt.translate,lt.__originalTransform=lt.transform,lt.__originalSetTransform=lt.setTransform,lt.__originalResetTransform=lt.resetTransform,lt.__originalClip=lt.clip,lt.__originalMoveTo=lt.moveTo,lt.__originalLineTo=lt.lineTo,lt.__originalBezierCurveTo=lt.bezierCurveTo,lt.__originalRect=lt.rect,lt.__originalClosePath=lt.closePath,lt.__originalBeginPath=lt.beginPath,lt._removeMirroring=()=>{lt.save=lt.__originalSave,lt.restore=lt.__originalRestore,lt.rotate=lt.__originalRotate,lt.scale=lt.__originalScale,lt.translate=lt.__originalTranslate,lt.transform=lt.__originalTransform,lt.setTransform=lt.__originalSetTransform,lt.resetTransform=lt.__originalResetTransform,lt.clip=lt.__originalClip,lt.moveTo=lt.__originalMoveTo,lt.lineTo=lt.__originalLineTo,lt.bezierCurveTo=lt.__originalBezierCurveTo,lt.rect=lt.__originalRect,lt.closePath=lt.__originalClosePath,lt.beginPath=lt.__originalBeginPath,delete lt._removeMirroring},lt.save=function(){s.save(),this.__originalSave()},lt.restore=function(){s.restore(),this.__originalRestore()},lt.translate=function(r,d){s.translate(r,d),this.__originalTranslate(r,d)},lt.scale=function(r,d){s.scale(r,d),this.__originalScale(r,d)},lt.transform=function(r,d,m,l,x,A){s.transform(r,d,m,l,x,A),this.__originalTransform(r,d,m,l,x,A)},lt.setTransform=function(r,d,m,l,x,A){s.setTransform(r,d,m,l,x,A),this.__originalSetTransform(r,d,m,l,x,A)},lt.resetTransform=function(){s.resetTransform(),this.__originalResetTransform()},lt.rotate=function(r){s.rotate(r),this.__originalRotate(r)},lt.clip=function(r){s.clip(r),this.__originalClip(r)},lt.moveTo=function(r,d){s.moveTo(r,d),this.__originalMoveTo(r,d)},lt.lineTo=function(r,d){s.lineTo(r,d),this.__originalLineTo(r,d)},lt.bezierCurveTo=function(r,d,m,l,x,A){s.bezierCurveTo(r,d,m,l,x,A),this.__originalBezierCurveTo(r,d,m,l,x,A)},lt.rect=function(r,d,m,l){s.rect(r,d,m,l),this.__originalRect(r,d,m,l)},lt.closePath=function(){s.closePath(),this.__originalClosePath()},lt.beginPath=function(){s.beginPath(),this.__originalBeginPath()}}class At{constructor(s){this.canvasFactory=s,this.cache=Object.create(null)}getCanvas(s,r,d){let m;return this.cache[s]!==void 0?(m=this.cache[s],this.canvasFactory.reset(m,r,d)):(m=this.canvasFactory.create(r,d),this.cache[s]=m),m}delete(s){delete this.cache[s]}clear(){for(const s in this.cache){const r=this.cache[s];this.canvasFactory.destroy(r),delete this.cache[s]}}}function Dt(lt,s,r,d,m,l,x,A,S,u){const[o,h,n,a,g,M]=(0,D.getCurrentTransform)(lt);if(h===0&&n===0){const Z=x*o+g,K=Math.round(Z),it=A*a+M,p=Math.round(it),L=(x+S)*o+g,J=Math.abs(Math.round(L)-K)||1,E=(A+u)*a+M,v=Math.abs(Math.round(E)-p)||1;return lt.setTransform(Math.sign(o),0,0,Math.sign(a),K,p),lt.drawImage(s,r,d,m,l,0,0,J,v),lt.setTransform(o,h,n,a,g,M),[J,v]}if(o===0&&a===0){const Z=A*n+g,K=Math.round(Z),it=x*h+M,p=Math.round(it),L=(A+u)*n+g,J=Math.abs(Math.round(L)-K)||1,E=(x+S)*h+M,v=Math.abs(Math.round(E)-p)||1;return lt.setTransform(0,Math.sign(h),Math.sign(n),0,K,p),lt.drawImage(s,r,d,m,l,0,0,v,J),lt.setTransform(o,h,n,a,g,M),[v,J]}lt.drawImage(s,r,d,m,l,x,A,S,u);const y=Math.hypot(o,h),X=Math.hypot(n,a);return[y*S,X*u]}function Ct(lt){const{width:s,height:r}=lt;if(s>H||r>H)return null;const d=1e3,m=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),l=s+1;let x=new Uint8Array(l*(r+1)),A,S,u;const o=s+7&-8;let h=new Uint8Array(o*r),n=0;for(const y of lt.data){let X=128;for(;X>0;)h[n++]=y&X?0:255,X>>=1}let a=0;for(n=0,h[n]!==0&&(x[0]=1,++a),S=1;S<s;S++)h[n]!==h[n+1]&&(x[S]=h[n]?2:1,++a),n++;for(h[n]!==0&&(x[S]=2,++a),A=1;A<r;A++){n=A*o,u=A*l,h[n-o]!==h[n]&&(x[u]=h[n]?1:8,++a);let y=(h[n]?4:0)+(h[n-o]?8:0);for(S=1;S<s;S++)y=(y>>2)+(h[n+1]?4:0)+(h[n-o+1]?8:0),m[y]&&(x[u+S]=m[y],++a),n++;if(h[n-o]!==h[n]&&(x[u+S]=h[n]?2:4,++a),a>d)return null}for(n=o*(r-1),u=A*l,h[n]!==0&&(x[u]=8,++a),S=1;S<s;S++)h[n]!==h[n+1]&&(x[u+S]=h[n]?4:8,++a),n++;if(h[n]!==0&&(x[u+S]=4,++a),a>d)return null;const g=new Int32Array([0,l,-1,0,-l,0,0,0,1]),M=new Path2D;for(A=0;a&&A<=r;A++){let y=A*l;const X=y+s;for(;y<X&&!x[y];)y++;if(y===X)continue;M.moveTo(y%l,A);const Z=y;let K=x[y];do{const it=g[K];do y+=it;while(!x[y]);const p=x[y];p!==5&&p!==10?(K=p,x[y]=0):(K=p&51*K>>4,x[y]&=K>>2|K<<2),M.lineTo(y%l,y/l|0),x[y]||--a}while(Z!==y);--A}return h=null,x=null,function(y){y.save(),y.scale(1/s,-1/r),y.translate(0,-r),y.fill(M),y.beginPath(),y.restore()}}class Nt{constructor(s,r){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,s,r])}clone(){const s=Object.create(this);return s.clipBox=this.clipBox.slice(),s}setCurrentPoint(s,r){this.x=s,this.y=r}updatePathMinMax(s,r,d){[r,d]=i.Util.applyTransform([r,d],s),this.minX=Math.min(this.minX,r),this.minY=Math.min(this.minY,d),this.maxX=Math.max(this.maxX,r),this.maxY=Math.max(this.maxY,d)}updateRectMinMax(s,r){const d=i.Util.applyTransform(r,s),m=i.Util.applyTransform(r.slice(2),s),l=i.Util.applyTransform([r[0],r[3]],s),x=i.Util.applyTransform([r[2],r[1]],s);this.minX=Math.min(this.minX,d[0],m[0],l[0],x[0]),this.minY=Math.min(this.minY,d[1],m[1],l[1],x[1]),this.maxX=Math.max(this.maxX,d[0],m[0],l[0],x[0]),this.maxY=Math.max(this.maxY,d[1],m[1],l[1],x[1])}updateScalingPathMinMax(s,r){i.Util.scaleMinMax(s,r),this.minX=Math.min(this.minX,r[0]),this.minY=Math.min(this.minY,r[1]),this.maxX=Math.max(this.maxX,r[2]),this.maxY=Math.max(this.maxY,r[3])}updateCurvePathMinMax(s,r,d,m,l,x,A,S,u,o){const h=i.Util.bezierBoundingBox(r,d,m,l,x,A,S,u,o);o||this.updateRectMinMax(s,h)}getPathBoundingBox(s=b.FILL,r=null){const d=[this.minX,this.minY,this.maxX,this.maxY];if(s===b.STROKE){r||(0,i.unreachable)("Stroke bounding box must include transform.");const m=i.Util.singularValueDecompose2dScale(r),l=m[0]*this.lineWidth/2,x=m[1]*this.lineWidth/2;d[0]-=l,d[1]-=x,d[2]+=l,d[3]+=x}return d}updateClipFromPath(){const s=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(s||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(s){this.clipBox=s,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(s=b.FILL,r=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(s,r))}}function wt(lt,s){if(typeof ImageData<"u"&&s instanceof ImageData){lt.putImageData(s,0,0);return}const r=s.height,d=s.width,m=r%Q,l=(r-m)/Q,x=m===0?l:l+1,A=lt.createImageData(d,Q);let S=0,u;const o=s.data,h=A.data;let n,a,g,M;if(s.kind===i.ImageKind.GRAYSCALE_1BPP){const y=o.byteLength,X=new Uint32Array(h.buffer,0,h.byteLength>>2),Z=X.length,K=d+7>>3,it=4294967295,p=i.FeatureTest.isLittleEndian?4278190080:255;for(n=0;n<x;n++){for(g=n<l?Q:m,u=0,a=0;a<g;a++){const L=y-S;let J=0;const E=L>K?d:L*8-7,v=E&-8;let G=0,Y=0;for(;J<v;J+=8)Y=o[S++],X[u++]=Y&128?it:p,X[u++]=Y&64?it:p,X[u++]=Y&32?it:p,X[u++]=Y&16?it:p,X[u++]=Y&8?it:p,X[u++]=Y&4?it:p,X[u++]=Y&2?it:p,X[u++]=Y&1?it:p;for(;J<E;J++)G===0&&(Y=o[S++],G=128),X[u++]=Y&G?it:p,G>>=1}for(;u<Z;)X[u++]=0;lt.putImageData(A,0,n*Q)}}else if(s.kind===i.ImageKind.RGBA_32BPP){for(a=0,M=d*Q*4,n=0;n<l;n++)h.set(o.subarray(S,S+M)),S+=M,lt.putImageData(A,0,a),a+=Q;n<x&&(M=d*m*4,h.set(o.subarray(S,S+M)),lt.putImageData(A,0,a))}else if(s.kind===i.ImageKind.RGB_24BPP)for(g=Q,M=d*g,n=0;n<x;n++){for(n>=l&&(g=m,M=d*g),u=0,a=M;a--;)h[u++]=o[S++],h[u++]=o[S++],h[u++]=o[S++],h[u++]=255;lt.putImageData(A,0,n*Q)}else throw new Error(`bad image kind: ${s.kind}`)}function Tt(lt,s){if(s.bitmap){lt.drawImage(s.bitmap,0,0);return}const r=s.height,d=s.width,m=r%Q,l=(r-m)/Q,x=m===0?l:l+1,A=lt.createImageData(d,Q);let S=0;const u=s.data,o=A.data;for(let h=0;h<x;h++){const n=h<l?Q:m;({srcPos:S}=et({src:u,srcPos:S,dest:o,width:d,height:n,nonBlackColor:0})),lt.putImageData(A,0,h*Q)}}function Pt(lt,s){const r=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const d of r)lt[d]!==void 0&&(s[d]=lt[d]);lt.setLineDash!==void 0&&(s.setLineDash(lt.getLineDash()),s.lineDashOffset=lt.lineDashOffset)}function Et(lt){if(lt.strokeStyle=lt.fillStyle="#000000",lt.fillRule="nonzero",lt.globalAlpha=1,lt.lineWidth=1,lt.lineCap="butt",lt.lineJoin="miter",lt.miterLimit=10,lt.globalCompositeOperation="source-over",lt.font="10px sans-serif",lt.setLineDash!==void 0&&(lt.setLineDash([]),lt.lineDashOffset=0),!i.isNodeJS){const{filter:s}=lt;s!=="none"&&s!==""&&(lt.filter="none")}}function at(lt,s,r,d){const m=lt.length;for(let l=3;l<m;l+=4){const x=lt[l];if(x===0)lt[l-3]=s,lt[l-2]=r,lt[l-1]=d;else if(x<255){const A=255-x;lt[l-3]=lt[l-3]*x+s*A>>8,lt[l-2]=lt[l-2]*x+r*A>>8,lt[l-1]=lt[l-1]*x+d*A>>8}}}function bt(lt,s,r){const d=lt.length,m=1/255;for(let l=3;l<d;l+=4){const x=r?r[lt[l]]:lt[l];s[l]=s[l]*x*m|0}}function kt(lt,s,r){const d=lt.length;for(let m=3;m<d;m+=4){const l=lt[m-3]*77+lt[m-2]*152+lt[m-1]*28;s[m]=r?s[m]*r[l>>8]>>8:s[m]*l>>16}}function Rt(lt,s,r,d,m,l,x,A,S,u,o){const h=!!l,n=h?l[0]:0,a=h?l[1]:0,g=h?l[2]:0,M=m==="Luminosity"?kt:bt,y=Math.min(d,Math.ceil(1048576/r));for(let X=0;X<d;X+=y){const Z=Math.min(y,d-X),K=lt.getImageData(A-u,X+(S-o),r,Z),it=s.getImageData(A,X+S,r,Z);h&&at(K.data,n,a,g),M(K.data,it.data,x),s.putImageData(it,A,X+S)}}function Ut(lt,s,r,d){const m=d[0],l=d[1],x=d[2]-m,A=d[3]-l;x===0||A===0||(Rt(s.context,r,x,A,s.subtype,s.backdrop,s.transferMap,m,l,s.offsetX,s.offsetY),lt.save(),lt.globalAlpha=1,lt.globalCompositeOperation="source-over",lt.setTransform(1,0,0,1,0,0),lt.drawImage(r.canvas,0,0),lt.restore())}function Kt(lt,s){const r=i.Util.singularValueDecompose2dScale(lt);r[0]=Math.fround(r[0]),r[1]=Math.fround(r[1]);const d=Math.fround((globalThis.devicePixelRatio||1)*D.PixelsPerInch.PDF_TO_CSS_UNITS);return s!==void 0?s:r[0]<=d||r[1]<=d}const re=["butt","round","square"],_e=["miter","round","bevel"],ce={},he={},ne=class ne{constructor(s,r,d,m,l,{optionalContentConfig:x,markedContentStack:A=null},S,u){c(this,oe);c(this,se);this.ctx=s,this.current=new Nt(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=r,this.objs=d,this.canvasFactory=m,this.filterFactory=l,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=A||[],this.optionalContentConfig=x,this.cachedCanvases=new At(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=S,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(s,r=null){return typeof s=="string"?s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s):r}beginDrawing({transform:s,viewport:r,transparency:d=!1,background:m=null}){const l=this.ctx.canvas.width,x=this.ctx.canvas.height,A=this.ctx.fillStyle;if(this.ctx.fillStyle=m||"#ffffff",this.ctx.fillRect(0,0,l,x),this.ctx.fillStyle=A,d){const S=this.cachedCanvases.getCanvas("transparent",l,x);this.compositeCtx=this.ctx,this.transparentCanvas=S.canvas,this.ctx=S.context,this.ctx.save(),this.ctx.transform(...(0,D.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),Et(this.ctx),s&&(this.ctx.transform(...s),this.outputScaleX=s[0],this.outputScaleY=s[0]),this.ctx.transform(...r.transform),this.viewportScale=r.scale,this.baseTransform=(0,D.getCurrentTransform)(this.ctx)}executeOperatorList(s,r,d,m){const l=s.argsArray,x=s.fnArray;let A=r||0;const S=l.length;if(S===A)return A;const u=S-A>W&&typeof d=="function",o=u?Date.now()+V:0;let h=0;const n=this.commonObjs,a=this.objs;let g;for(;;){if(m!==void 0&&A===m.nextBreakPoint)return m.breakIt(A,d),A;if(g=x[A],g!==i.OPS.dependency)this[g].apply(this,l[A]);else for(const M of l[A]){const y=M.startsWith("g_")?n:a;if(!y.has(M))return y.get(M,d),A}if(A++,A===S)return A;if(u&&++h>W){if(Date.now()>o)return d(),A;h=0}}}endDrawing(){k(this,oe,Tn).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const s of this._cachedBitmapsMap.values()){for(const r of s.values())typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&(r.width=r.height=0);s.clear()}this._cachedBitmapsMap.clear(),k(this,se,Ln).call(this)}_scaleImage(s,r){const d=s.width,m=s.height;let l=Math.max(Math.hypot(r[0],r[1]),1),x=Math.max(Math.hypot(r[2],r[3]),1),A=d,S=m,u="prescale1",o,h;for(;l>2&&A>1||x>2&&S>1;){let n=A,a=S;l>2&&A>1&&(n=A>=16384?Math.floor(A/2)-1||1:Math.ceil(A/2),l/=A/n),x>2&&S>1&&(a=S>=16384?Math.floor(S/2)-1||1:Math.ceil(S)/2,x/=S/a),o=this.cachedCanvases.getCanvas(u,n,a),h=o.context,h.clearRect(0,0,n,a),h.drawImage(s,0,0,A,S,0,0,n,a),s=o.canvas,A=n,S=a,u=u==="prescale1"?"prescale2":"prescale1"}return{img:s,paintWidth:A,paintHeight:S}}_createMaskCanvas(s){const r=this.ctx,{width:d,height:m}=s,l=this.current.fillColor,x=this.current.patternFill,A=(0,D.getCurrentTransform)(r);let S,u,o,h;if((s.bitmap||s.data)&&s.count>1){const E=s.bitmap||s.data.buffer;u=JSON.stringify(x?A:[A.slice(0,4),l]),S=this._cachedBitmapsMap.get(E),S||(S=new Map,this._cachedBitmapsMap.set(E,S));const v=S.get(u);if(v&&!x){const G=Math.round(Math.min(A[0],A[2])+A[4]),Y=Math.round(Math.min(A[1],A[3])+A[5]);return{canvas:v,offsetX:G,offsetY:Y}}o=v}o||(h=this.cachedCanvases.getCanvas("maskCanvas",d,m),Tt(h.context,s));let n=i.Util.transform(A,[1/d,0,0,-1/m,0,0]);n=i.Util.transform(n,[1,0,0,1,0,-m]);const[a,g,M,y]=i.Util.getAxialAlignedBoundingBox([0,0,d,m],n),X=Math.round(M-a)||1,Z=Math.round(y-g)||1,K=this.cachedCanvases.getCanvas("fillCanvas",X,Z),it=K.context,p=a,L=g;it.translate(-p,-L),it.transform(...n),o||(o=this._scaleImage(h.canvas,(0,D.getCurrentTransformInverse)(it)),o=o.img,S&&x&&S.set(u,o)),it.imageSmoothingEnabled=Kt((0,D.getCurrentTransform)(it),s.interpolate),Dt(it,o,0,0,o.width,o.height,0,0,d,m),it.globalCompositeOperation="source-in";const J=i.Util.transform((0,D.getCurrentTransformInverse)(it),[1,0,0,1,-p,-L]);return it.fillStyle=x?l.getPattern(r,this,J,b.FILL):l,it.fillRect(0,0,d,m),S&&!x&&(this.cachedCanvases.delete("fillCanvas"),S.set(u,K.canvas)),{canvas:K.canvas,offsetX:Math.round(p),offsetY:Math.round(L)}}setLineWidth(s){s!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=s,this.ctx.lineWidth=s}setLineCap(s){this.ctx.lineCap=re[s]}setLineJoin(s){this.ctx.lineJoin=_e[s]}setMiterLimit(s){this.ctx.miterLimit=s}setDash(s,r){const d=this.ctx;d.setLineDash!==void 0&&(d.setLineDash(s),d.lineDashOffset=r)}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(const[r,d]of s)switch(r){case"LW":this.setLineWidth(d);break;case"LC":this.setLineCap(d);break;case"LJ":this.setLineJoin(d);break;case"ML":this.setMiterLimit(d);break;case"D":this.setDash(d[0],d[1]);break;case"RI":this.setRenderingIntent(d);break;case"FL":this.setFlatness(d);break;case"Font":this.setFont(d[0],d[1]);break;case"CA":this.current.strokeAlpha=d;break;case"ca":this.current.fillAlpha=d,this.ctx.globalAlpha=d;break;case"BM":this.ctx.globalCompositeOperation=d;break;case"SMask":this.current.activeSMask=d?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(d);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const s=this.inSMaskMode;this.current.activeSMask&&!s?this.beginSMaskMode():!this.current.activeSMask&&s&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const s=this.ctx.canvas.width,r=this.ctx.canvas.height,d="smaskGroupAt"+this.groupLevel,m=this.cachedCanvases.getCanvas(d,s,r);this.suspendedCtx=this.ctx,this.ctx=m.context;const l=this.ctx;l.setTransform(...(0,D.getCurrentTransform)(this.suspendedCtx)),Pt(this.suspendedCtx,l),ot(l,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Pt(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(s){if(!this.current.activeSMask)return;s?(s[0]=Math.floor(s[0]),s[1]=Math.floor(s[1]),s[2]=Math.ceil(s[2]),s[3]=Math.ceil(s[3])):s=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const r=this.current.activeSMask,d=this.suspendedCtx;Ut(d,r,this.ctx,s),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(Pt(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const s=this.current;this.stateStack.push(s),this.current=s.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Pt(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(s,r,d,m,l,x){this.ctx.transform(s,r,d,m,l,x),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(s,r,d){const m=this.ctx,l=this.current;let x=l.x,A=l.y,S,u;const o=(0,D.getCurrentTransform)(m),h=o[0]===0&&o[3]===0||o[1]===0&&o[2]===0,n=h?d.slice(0):null;for(let a=0,g=0,M=s.length;a<M;a++)switch(s[a]|0){case i.OPS.rectangle:x=r[g++],A=r[g++];const y=r[g++],X=r[g++],Z=x+y,K=A+X;m.moveTo(x,A),y===0||X===0?m.lineTo(Z,K):(m.lineTo(Z,A),m.lineTo(Z,K),m.lineTo(x,K)),h||l.updateRectMinMax(o,[x,A,Z,K]),m.closePath();break;case i.OPS.moveTo:x=r[g++],A=r[g++],m.moveTo(x,A),h||l.updatePathMinMax(o,x,A);break;case i.OPS.lineTo:x=r[g++],A=r[g++],m.lineTo(x,A),h||l.updatePathMinMax(o,x,A);break;case i.OPS.curveTo:S=x,u=A,x=r[g+4],A=r[g+5],m.bezierCurveTo(r[g],r[g+1],r[g+2],r[g+3],x,A),l.updateCurvePathMinMax(o,S,u,r[g],r[g+1],r[g+2],r[g+3],x,A,n),g+=6;break;case i.OPS.curveTo2:S=x,u=A,m.bezierCurveTo(x,A,r[g],r[g+1],r[g+2],r[g+3]),l.updateCurvePathMinMax(o,S,u,x,A,r[g],r[g+1],r[g+2],r[g+3],n),x=r[g+2],A=r[g+3],g+=4;break;case i.OPS.curveTo3:S=x,u=A,x=r[g+2],A=r[g+3],m.bezierCurveTo(r[g],r[g+1],x,A,x,A),l.updateCurvePathMinMax(o,S,u,r[g],r[g+1],x,A,x,A,n),g+=4;break;case i.OPS.closePath:m.closePath();break}h&&l.updateScalingPathMinMax(o,n),l.setCurrentPoint(x,A)}closePath(){this.ctx.closePath()}stroke(s=!0){const r=this.ctx,d=this.current.strokeColor;r.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof d=="object"&&(d!=null&&d.getPattern)?(r.save(),r.strokeStyle=d.getPattern(r,this,(0,D.getCurrentTransformInverse)(r),b.STROKE),this.rescaleAndStroke(!1),r.restore()):this.rescaleAndStroke(!0)),s&&this.consumePath(this.current.getClippedPathBoundingBox()),r.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(s=!0){const r=this.ctx,d=this.current.fillColor,m=this.current.patternFill;let l=!1;m&&(r.save(),r.fillStyle=d.getPattern(r,this,(0,D.getCurrentTransformInverse)(r),b.FILL),l=!0);const x=this.current.getClippedPathBoundingBox();this.contentVisible&&x!==null&&(this.pendingEOFill?(r.fill("evenodd"),this.pendingEOFill=!1):r.fill()),l&&r.restore(),s&&this.consumePath(x)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ce}eoClip(){this.pendingClip=he}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const s=this.pendingTextPaths,r=this.ctx;if(s===void 0){r.beginPath();return}r.save(),r.beginPath();for(const d of s)r.setTransform(...d.transform),r.translate(d.x,d.y),d.addToPath(r,d.fontSize);r.restore(),r.clip(),r.beginPath(),delete this.pendingTextPaths}setCharSpacing(s){this.current.charSpacing=s}setWordSpacing(s){this.current.wordSpacing=s}setHScale(s){this.current.textHScale=s/100}setLeading(s){this.current.leading=-s}setFont(s,r){var o;const d=this.commonObjs.get(s),m=this.current;if(!d)throw new Error(`Can't find font for ${s}`);if(m.fontMatrix=d.fontMatrix||i.FONT_IDENTITY_MATRIX,(m.fontMatrix[0]===0||m.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+s),r<0?(r=-r,m.fontDirection=-1):m.fontDirection=1,this.current.font=d,this.current.fontSize=r,d.isType3Font)return;const l=d.loadedName||"sans-serif",x=((o=d.systemFontInfo)==null?void 0:o.css)||`"${l}", ${d.fallbackName}`;let A="normal";d.black?A="900":d.bold&&(A="bold");const S=d.italic?"italic":"normal";let u=r;r<ut?u=ut:r>st&&(u=st),this.current.fontSizeScale=r/u,this.ctx.font=`${S} ${A} ${u}px ${x}`}setTextRenderingMode(s){this.current.textRenderingMode=s}setTextRise(s){this.current.textRise=s}moveText(s,r){this.current.x=this.current.lineX+=s,this.current.y=this.current.lineY+=r}setLeadingMoveText(s,r){this.setLeading(-r),this.moveText(s,r)}setTextMatrix(s,r,d,m,l,x){this.current.textMatrix=[s,r,d,m,l,x],this.current.textMatrixScale=Math.hypot(s,r),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(s,r,d,m){const l=this.ctx,x=this.current,A=x.font,S=x.textRenderingMode,u=x.fontSize/x.fontSizeScale,o=S&i.TextRenderingMode.FILL_STROKE_MASK,h=!!(S&i.TextRenderingMode.ADD_TO_PATH_FLAG),n=x.patternFill&&!A.missingFile;let a;(A.disableFontFace||h||n)&&(a=A.getPathGenerator(this.commonObjs,s)),A.disableFontFace||n?(l.save(),l.translate(r,d),l.beginPath(),a(l,u),m&&l.setTransform(...m),(o===i.TextRenderingMode.FILL||o===i.TextRenderingMode.FILL_STROKE)&&l.fill(),(o===i.TextRenderingMode.STROKE||o===i.TextRenderingMode.FILL_STROKE)&&l.stroke(),l.restore()):((o===i.TextRenderingMode.FILL||o===i.TextRenderingMode.FILL_STROKE)&&l.fillText(s,r,d),(o===i.TextRenderingMode.STROKE||o===i.TextRenderingMode.FILL_STROKE)&&l.strokeText(s,r,d)),h&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,D.getCurrentTransform)(l),x:r,y:d,fontSize:u,addToPath:a})}get isFontSubpixelAAEnabled(){const{context:s}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);s.scale(1.5,1),s.fillText("I",0,10);const r=s.getImageData(0,0,10,10).data;let d=!1;for(let m=3;m<r.length;m+=4)if(r[m]>0&&r[m]<255){d=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",d)}showText(s){const r=this.current,d=r.font;if(d.isType3Font)return this.showType3Text(s);const m=r.fontSize;if(m===0)return;const l=this.ctx,x=r.fontSizeScale,A=r.charSpacing,S=r.wordSpacing,u=r.fontDirection,o=r.textHScale*u,h=s.length,n=d.vertical,a=n?1:-1,g=d.defaultVMetrics,M=m*r.fontMatrix[0],y=r.textRenderingMode===i.TextRenderingMode.FILL&&!d.disableFontFace&&!r.patternFill;l.save(),l.transform(...r.textMatrix),l.translate(r.x,r.y+r.textRise),u>0?l.scale(o,-1):l.scale(o,1);let X;if(r.patternFill){l.save();const L=r.fillColor.getPattern(l,this,(0,D.getCurrentTransformInverse)(l),b.FILL);X=(0,D.getCurrentTransform)(l),l.restore(),l.fillStyle=L}let Z=r.lineWidth;const K=r.textMatrixScale;if(K===0||Z===0){const L=r.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(L===i.TextRenderingMode.STROKE||L===i.TextRenderingMode.FILL_STROKE)&&(Z=this.getSinglePixelWidth())}else Z/=K;if(x!==1&&(l.scale(x,x),Z/=x),l.lineWidth=Z,d.isInvalidPDFjsFont){const L=[];let J=0;for(const E of s)L.push(E.unicode),J+=E.width;l.fillText(L.join(""),0,0),r.x+=J*M*o,l.restore(),this.compose();return}let it=0,p;for(p=0;p<h;++p){const L=s[p];if(typeof L=="number"){it+=a*L*m/1e3;continue}let J=!1;const E=(L.isSpace?S:0)+A,v=L.fontChar,G=L.accent;let Y,ht,gt=L.width;if(n){const Ft=L.vmetric||g,Xt=-(L.vmetric?Ft[1]:gt*.5)*M,ie=Ft[2]*M;gt=Ft?-Ft[0]:gt,Y=Xt/x,ht=(it+ie)/x}else Y=it/x,ht=0;if(d.remeasure&&gt>0){const Ft=l.measureText(v).width*1e3/m*x;if(gt<Ft&&this.isFontSubpixelAAEnabled){const Xt=gt/Ft;J=!0,l.save(),l.scale(Xt,1),Y/=Xt}else gt!==Ft&&(Y+=(gt-Ft)/2e3*m/x)}if(this.contentVisible&&(L.isInFont||d.missingFile)){if(y&&!G)l.fillText(v,Y,ht);else if(this.paintChar(v,Y,ht,X),G){const Ft=Y+m*G.offset.x/x,Xt=ht-m*G.offset.y/x;this.paintChar(G.fontChar,Ft,Xt,X)}}const xt=n?gt*M-E*u:gt*M+E*u;it+=xt,J&&l.restore()}n?r.y-=it:r.x+=it*o,l.restore(),this.compose()}showType3Text(s){const r=this.ctx,d=this.current,m=d.font,l=d.fontSize,x=d.fontDirection,A=m.vertical?1:-1,S=d.charSpacing,u=d.wordSpacing,o=d.textHScale*x,h=d.fontMatrix||i.FONT_IDENTITY_MATRIX,n=s.length,a=d.textRenderingMode===i.TextRenderingMode.INVISIBLE;let g,M,y,X;if(!(a||l===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),r.transform(...d.textMatrix),r.translate(d.x,d.y),r.scale(o,x),g=0;g<n;++g){if(M=s[g],typeof M=="number"){X=A*M*l/1e3,this.ctx.translate(X,0),d.x+=X*o;continue}const Z=(M.isSpace?u:0)+S,K=m.charProcOperatorList[M.operatorListId];if(!K){(0,i.warn)(`Type3 character "${M.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=M,this.save(),r.scale(l,l),r.transform(...h),this.executeOperatorList(K),this.restore()),y=i.Util.applyTransform([M.width,0],h)[0]*l+Z,r.translate(y,0),d.x+=y*o}r.restore(),this.processingType3=null}}setCharWidth(s,r){}setCharWidthAndBounds(s,r,d,m,l,x){this.ctx.rect(d,m,l-d,x-m),this.ctx.clip(),this.endPath()}getColorN_Pattern(s){let r;if(s[0]==="TilingPattern"){const d=s[1],m=this.baseTransform||(0,D.getCurrentTransform)(this.ctx),l={createCanvasGraphics:x=>new ne(x,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};r=new $(s,d,this.ctx,l,m)}else r=this._getPattern(s[1],s[2]);return r}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(s,r,d){const m=i.Util.makeHexColor(s,r,d);this.ctx.strokeStyle=m,this.current.strokeColor=m}setFillRGBColor(s,r,d){const m=i.Util.makeHexColor(s,r,d);this.ctx.fillStyle=m,this.current.fillColor=m,this.current.patternFill=!1}_getPattern(s,r=null){let d;return this.cachedPatterns.has(s)?d=this.cachedPatterns.get(s):(d=C(this.getObject(s)),this.cachedPatterns.set(s,d)),r&&(d.matrix=r),d}shadingFill(s){if(!this.contentVisible)return;const r=this.ctx;this.save();const d=this._getPattern(s);r.fillStyle=d.getPattern(r,this,(0,D.getCurrentTransformInverse)(r),b.SHADING);const m=(0,D.getCurrentTransformInverse)(r);if(m){const{width:l,height:x}=r.canvas,[A,S,u,o]=i.Util.getAxialAlignedBoundingBox([0,0,l,x],m);this.ctx.fillRect(A,S,u-A,o-S)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(s,r){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(s)&&s.length===6&&this.transform(...s),this.baseTransform=(0,D.getCurrentTransform)(this.ctx),r)){const d=r[2]-r[0],m=r[3]-r[1];this.ctx.rect(r[0],r[1],d,m),this.current.updateRectMinMax((0,D.getCurrentTransform)(this.ctx),r),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(s){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;s.isolated||(0,i.info)("TODO: Support non-isolated groups."),s.knockout&&(0,i.warn)("Knockout groups not supported.");const d=(0,D.getCurrentTransform)(r);if(s.matrix&&r.transform(...s.matrix),!s.bbox)throw new Error("Bounding box is required.");let m=i.Util.getAxialAlignedBoundingBox(s.bbox,(0,D.getCurrentTransform)(r));const l=[0,0,r.canvas.width,r.canvas.height];m=i.Util.intersect(m,l)||[0,0,0,0];const x=Math.floor(m[0]),A=Math.floor(m[1]);let S=Math.max(Math.ceil(m[2])-x,1),u=Math.max(Math.ceil(m[3])-A,1),o=1,h=1;S>I&&(o=S/I,S=I),u>I&&(h=u/I,u=I),this.current.startNewPathAndClipBox([0,0,S,u]);let n="groupAt"+this.groupLevel;s.smask&&(n+="_smask_"+this.smaskCounter++%2);const a=this.cachedCanvases.getCanvas(n,S,u),g=a.context;g.scale(1/o,1/h),g.translate(-x,-A),g.transform(...d),s.smask?this.smaskStack.push({canvas:a.canvas,context:g,offsetX:x,offsetY:A,scaleX:o,scaleY:h,subtype:s.smask.subtype,backdrop:s.smask.backdrop,transferMap:s.smask.transferMap||null,startTransformInverse:null}):(r.setTransform(1,0,0,1,0,0),r.translate(x,A),r.scale(o,h),r.save()),Pt(r,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(s){if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,d=this.groupStack.pop();if(this.ctx=d,this.ctx.imageSmoothingEnabled=!1,s.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const m=(0,D.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...m);const l=i.Util.getAxialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],m);this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(s,r,d,m,l){if(k(this,oe,Tn).call(this),Et(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(r)&&r.length===4){const x=r[2]-r[0],A=r[3]-r[1];if(l&&this.annotationCanvasMap){d=d.slice(),d[4]-=r[0],d[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=x,r[3]=A;const[S,u]=i.Util.singularValueDecompose2dScale((0,D.getCurrentTransform)(this.ctx)),{viewportScale:o}=this,h=Math.ceil(x*this.outputScaleX*o),n=Math.ceil(A*this.outputScaleY*o);this.annotationCanvas=this.canvasFactory.create(h,n);const{canvas:a,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(s,a),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(S,0,0,-u,0,A*u),Et(this.ctx)}else Et(this.ctx),this.ctx.rect(r[0],r[1],x,A),this.ctx.clip(),this.endPath()}this.current=new Nt(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...d),this.transform(...m)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),k(this,se,Ln).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(s){if(!this.contentVisible)return;const r=s.count;s=this.getObject(s.data,s),s.count=r;const d=this.ctx,m=this.processingType3;if(m&&(m.compiled===void 0&&(m.compiled=Ct(s)),m.compiled)){m.compiled(d);return}const l=this._createMaskCanvas(s),x=l.canvas;d.save(),d.setTransform(1,0,0,1,0,0),d.drawImage(x,l.offsetX,l.offsetY),d.restore(),this.compose()}paintImageMaskXObjectRepeat(s,r,d=0,m=0,l,x){if(!this.contentVisible)return;s=this.getObject(s.data,s);const A=this.ctx;A.save();const S=(0,D.getCurrentTransform)(A);A.transform(r,d,m,l,0,0);const u=this._createMaskCanvas(s);A.setTransform(1,0,0,1,u.offsetX-S[4],u.offsetY-S[5]);for(let o=0,h=x.length;o<h;o+=2){const n=i.Util.transform(S,[r,d,m,l,x[o],x[o+1]]),[a,g]=i.Util.applyTransform([0,0],n);A.drawImage(u.canvas,a,g)}A.restore(),this.compose()}paintImageMaskXObjectGroup(s){if(!this.contentVisible)return;const r=this.ctx,d=this.current.fillColor,m=this.current.patternFill;for(const l of s){const{data:x,width:A,height:S,transform:u}=l,o=this.cachedCanvases.getCanvas("maskCanvas",A,S),h=o.context;h.save();const n=this.getObject(x,l);Tt(h,n),h.globalCompositeOperation="source-in",h.fillStyle=m?d.getPattern(h,this,(0,D.getCurrentTransformInverse)(r),b.FILL):d,h.fillRect(0,0,A,S),h.restore(),r.save(),r.transform(...u),r.scale(1,-1),Dt(r,o.canvas,0,0,A,S,0,-1,1,1),r.restore()}this.compose()}paintImageXObject(s){if(!this.contentVisible)return;const r=this.getObject(s);if(!r){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(r)}paintImageXObjectRepeat(s,r,d,m){if(!this.contentVisible)return;const l=this.getObject(s);if(!l){(0,i.warn)("Dependent image isn't ready yet");return}const x=l.width,A=l.height,S=[];for(let u=0,o=m.length;u<o;u+=2)S.push({transform:[r,0,0,d,m[u],m[u+1]],x:0,y:0,w:x,h:A});this.paintInlineImageXObjectGroup(l,S)}applyTransferMapsToCanvas(s){return this.current.transferMaps!=="none"&&(s.filter=this.current.transferMaps,s.drawImage(s.canvas,0,0),s.filter="none"),s.canvas}applyTransferMapsToBitmap(s){if(this.current.transferMaps==="none")return s.bitmap;const{bitmap:r,width:d,height:m}=s,l=this.cachedCanvases.getCanvas("inlineImage",d,m),x=l.context;return x.filter=this.current.transferMaps,x.drawImage(r,0,0),x.filter="none",l.canvas}paintInlineImageXObject(s){if(!this.contentVisible)return;const r=s.width,d=s.height,m=this.ctx;if(this.save(),!i.isNodeJS){const{filter:A}=m;A!=="none"&&A!==""&&(m.filter="none")}m.scale(1/r,-1/d);let l;if(s.bitmap)l=this.applyTransferMapsToBitmap(s);else if(typeof HTMLElement=="function"&&s instanceof HTMLElement||!s.data)l=s;else{const A=this.cachedCanvases.getCanvas("inlineImage",r,d).context;wt(A,s),l=this.applyTransferMapsToCanvas(A)}const x=this._scaleImage(l,(0,D.getCurrentTransformInverse)(m));m.imageSmoothingEnabled=Kt((0,D.getCurrentTransform)(m),s.interpolate),Dt(m,x.img,0,0,x.paintWidth,x.paintHeight,0,-d,r,d),this.compose(),this.restore()}paintInlineImageXObjectGroup(s,r){if(!this.contentVisible)return;const d=this.ctx;let m;if(s.bitmap)m=s.bitmap;else{const l=s.width,x=s.height,A=this.cachedCanvases.getCanvas("inlineImage",l,x).context;wt(A,s),m=this.applyTransferMapsToCanvas(A)}for(const l of r)d.save(),d.transform(...l.transform),d.scale(1,-1),Dt(d,m,l.x,l.y,l.w,l.h,0,-1,1,1),d.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(s){}markPointProps(s,r){}beginMarkedContent(s){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(s,r){s==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(s){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const d=this.ctx;this.pendingClip&&(r||(this.pendingClip===he?d.clip("evenodd"):d.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),d.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const s=(0,D.getCurrentTransform)(this.ctx);if(s[1]===0&&s[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(s[0]),Math.abs(s[3]));else{const r=Math.abs(s[0]*s[3]-s[2]*s[1]),d=Math.hypot(s[0],s[2]),m=Math.hypot(s[1],s[3]);this._cachedGetSinglePixelWidth=Math.max(d,m)/r}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:s}=this.current,{a:r,b:d,c:m,d:l}=this.ctx.getTransform();let x,A;if(d===0&&m===0){const S=Math.abs(r),u=Math.abs(l);if(S===u)if(s===0)x=A=1/S;else{const o=S*s;x=A=o<1?1/o:1}else if(s===0)x=1/S,A=1/u;else{const o=S*s,h=u*s;x=o<1?1/o:1,A=h<1?1/h:1}}else{const S=Math.abs(r*l-d*m),u=Math.hypot(r,d),o=Math.hypot(m,l);if(s===0)x=o/S,A=u/S;else{const h=s*S;x=o>h?o/h:1,A=u>h?u/h:1}}this._cachedScaleForStroking[0]=x,this._cachedScaleForStroking[1]=A}return this._cachedScaleForStroking}rescaleAndStroke(s){const{ctx:r}=this,{lineWidth:d}=this.current,[m,l]=this.getScaleForStroking();if(r.lineWidth=d||1,m===1&&l===1){r.stroke();return}const x=r.getLineDash();if(s&&r.save(),r.scale(m,l),x.length>0){const A=Math.max(m,l);r.setLineDash(x.map(S=>S/A)),r.lineDashOffset/=A}r.stroke(),s&&r.restore()}isContentVisible(){for(let s=this.markedContentStack.length-1;s>=0;s--)if(!this.markedContentStack[s].visible)return!1;return!0}};oe=new WeakSet,Tn=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},se=new WeakSet,Ln=function(){if(this.pageColors){const s=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(s!=="none"){const r=this.ctx.filter;this.ctx.filter=s,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=r}}};let me=ne;for(const lt in i.OPS)me.prototype[lt]!==void 0&&(me.prototype[i.OPS[lt]]=me.prototype[lt])},419:(f,O,w)=>{var Pt,Et,at,bt,kt,Rt,Ut,Yi,re,Qi,ce,Ji,me,Mn,oe,Vs,se,Ks,ne,bs,s,As;w.d(O,{DOMCMapReaderFactory:()=>F,DOMCanvasFactory:()=>z,DOMFilterFactory:()=>nt,DOMSVGFactory:()=>j,DOMStandardFontDataFactory:()=>tt,PDFDateString:()=>Q,PageViewport:()=>C,PixelsPerInch:()=>_,RenderingCancelledException:()=>q,StatTimer:()=>I,fetchData:()=>P,getColorValues:()=>Dt,getCurrentTransform:()=>Ct,getCurrentTransformInverse:()=>Nt,getFilenameFromUrl:()=>ut,getPdfFilenameFromUrl:()=>st,getRGB:()=>At,getXfaPageViewport:()=>ot,isDataScheme:()=>$,isPdfFile:()=>et,isValidFetchUrl:()=>V,noContextMenu:()=>W,setLayerDimensions:()=>wt});var i=w(583),D=w(292);const b="http://www.w3.org/2000/svg",Tt=class Tt{};be(Tt,"CSS",96),be(Tt,"PDF",72),be(Tt,"PDF_TO_CSS_UNITS",Tt.CSS/Tt.PDF);let _=Tt;class nt extends i.BaseFilterFactory{constructor({docId:l,ownerDocument:x=globalThis.document}={}){super();c(this,Ut);c(this,re);c(this,ce);c(this,me);c(this,oe);c(this,se);c(this,ne);c(this,s);c(this,Pt,void 0);c(this,Et,void 0);c(this,at,void 0);c(this,bt,void 0);c(this,kt,void 0);c(this,Rt,0);N(this,at,l),N(this,bt,x)}addFilter(l){if(!l)return"none";let x=t(this,Ut,Yi).get(l);if(x)return x;let A,S,u,o;if(l.length===1){const g=l[0],M=new Array(256);for(let y=0;y<256;y++)M[y]=g[y]/255;o=A=S=u=M.join(",")}else{const[g,M,y]=l,X=new Array(256),Z=new Array(256),K=new Array(256);for(let it=0;it<256;it++)X[it]=g[it]/255,Z[it]=M[it]/255,K[it]=y[it]/255;A=X.join(","),S=Z.join(","),u=K.join(","),o=`${A}${S}${u}`}if(x=t(this,Ut,Yi).get(o),x)return t(this,Ut,Yi).set(l,x),x;const h=`g_${t(this,at)}_transfer_map_${fi(this,Rt)._++}`,n=`url(#${h})`;t(this,Ut,Yi).set(l,n),t(this,Ut,Yi).set(o,n);const a=k(this,oe,Vs).call(this,h);return k(this,ne,bs).call(this,A,S,u,a),n}addHCMFilter(l,x){var X;const A=`${l}-${x}`,S="base";let u=t(this,re,Qi).get(S);if((u==null?void 0:u.key)===A||(u?((X=u.filter)==null||X.remove(),u.key=A,u.url="none",u.filter=null):(u={key:A,url:"none",filter:null},t(this,re,Qi).set(S,u)),!l||!x))return u.url;const o=k(this,s,As).call(this,l);l=D.Util.makeHexColor(...o);const h=k(this,s,As).call(this,x);if(x=D.Util.makeHexColor(...h),t(this,ce,Ji).style.color="",l==="#000000"&&x==="#ffffff"||l===x)return u.url;const n=new Array(256);for(let Z=0;Z<=255;Z++){const K=Z/255;n[Z]=K<=.03928?K/12.92:((K+.055)/1.055)**2.4}const a=n.join(","),g=`g_${t(this,at)}_hcm_filter`,M=u.filter=k(this,oe,Vs).call(this,g);k(this,ne,bs).call(this,a,a,a,M),k(this,me,Mn).call(this,M);const y=(Z,K)=>{const it=o[Z]/255,p=h[Z]/255,L=new Array(K+1);for(let J=0;J<=K;J++)L[J]=it+J/K*(p-it);return L.join(",")};return k(this,ne,bs).call(this,y(0,5),y(1,5),y(2,5),M),u.url=`url(#${g})`,u.url}addHighlightHCMFilter(l,x,A,S,u){var p;const o=`${x}-${A}-${S}-${u}`;let h=t(this,re,Qi).get(l);if((h==null?void 0:h.key)===o||(h?((p=h.filter)==null||p.remove(),h.key=o,h.url="none",h.filter=null):(h={key:o,url:"none",filter:null},t(this,re,Qi).set(l,h)),!x||!A))return h.url;const[n,a]=[x,A].map(k(this,s,As).bind(this));let g=Math.round(.2126*n[0]+.7152*n[1]+.0722*n[2]),M=Math.round(.2126*a[0]+.7152*a[1]+.0722*a[2]),[y,X]=[S,u].map(k(this,s,As).bind(this));M<g&&([g,M,y,X]=[M,g,X,y]),t(this,ce,Ji).style.color="";const Z=(L,J,E)=>{const v=new Array(256),G=(M-g)/E,Y=L/255,ht=(J-L)/(255*E);let gt=0;for(let xt=0;xt<=E;xt++){const Ft=Math.round(g+xt*G),Xt=Y+xt*ht;for(let ie=gt;ie<=Ft;ie++)v[ie]=Xt;gt=Ft+1}for(let xt=gt;xt<256;xt++)v[xt]=v[gt-1];return v.join(",")},K=`g_${t(this,at)}_hcm_${l}_filter`,it=h.filter=k(this,oe,Vs).call(this,K);return k(this,me,Mn).call(this,it),k(this,ne,bs).call(this,Z(y[0],X[0],5),Z(y[1],X[1],5),Z(y[2],X[2],5),it),h.url=`url(#${K})`,h.url}destroy(l=!1){l&&t(this,re,Qi).size!==0||(t(this,Et)&&(t(this,Et).parentNode.parentNode.remove(),N(this,Et,null)),t(this,Pt)&&(t(this,Pt).clear(),N(this,Pt,null)),N(this,Rt,0))}}Pt=new WeakMap,Et=new WeakMap,at=new WeakMap,bt=new WeakMap,kt=new WeakMap,Rt=new WeakMap,Ut=new WeakSet,Yi=function(){return t(this,Pt)||N(this,Pt,new Map)},re=new WeakSet,Qi=function(){return t(this,kt)||N(this,kt,new Map)},ce=new WeakSet,Ji=function(){if(!t(this,Et)){const l=t(this,bt).createElement("div"),{style:x}=l;x.visibility="hidden",x.contain="strict",x.width=x.height=0,x.position="absolute",x.top=x.left=0,x.zIndex=-1;const A=t(this,bt).createElementNS(b,"svg");A.setAttribute("width",0),A.setAttribute("height",0),N(this,Et,t(this,bt).createElementNS(b,"defs")),l.append(A),A.append(t(this,Et)),t(this,bt).body.append(l)}return t(this,Et)},me=new WeakSet,Mn=function(l){const x=t(this,bt).createElementNS(b,"feColorMatrix");x.setAttribute("type","matrix"),x.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),l.append(x)},oe=new WeakSet,Vs=function(l){const x=t(this,bt).createElementNS(b,"filter");return x.setAttribute("color-interpolation-filters","sRGB"),x.setAttribute("id",l),t(this,ce,Ji).append(x),x},se=new WeakSet,Ks=function(l,x,A){const S=t(this,bt).createElementNS(b,x);S.setAttribute("type","discrete"),S.setAttribute("tableValues",A),l.append(S)},ne=new WeakSet,bs=function(l,x,A,S){const u=t(this,bt).createElementNS(b,"feComponentTransfer");S.append(u),k(this,se,Ks).call(this,u,"feFuncR",l),k(this,se,Ks).call(this,u,"feFuncG",x),k(this,se,Ks).call(this,u,"feFuncB",A)},s=new WeakSet,As=function(l){return t(this,ce,Ji).style.color=l,At(getComputedStyle(t(this,ce,Ji)).getPropertyValue("color"))};class z extends i.BaseCanvasFactory{constructor({ownerDocument:m=globalThis.document}={}){super(),this._document=m}_createCanvas(m,l){const x=this._document.createElement("canvas");return x.width=m,x.height=l,x}}async function P(d,m="text"){if(V(d,document.baseURI)){const l=await fetch(d);if(!l.ok)throw new Error(l.statusText);switch(m){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"json":return l.json()}return l.text()}return new Promise((l,x)=>{const A=new XMLHttpRequest;A.open("GET",d,!0),A.responseType=m,A.onreadystatechange=()=>{if(A.readyState===XMLHttpRequest.DONE){if(A.status===200||A.status===0){switch(m){case"arraybuffer":case"blob":case"json":l(A.response);return}l(A.responseText);return}x(new Error(A.statusText))}},A.send(null)})}class F extends i.BaseCMapReaderFactory{_fetchData(m,l){return P(m,this.isCompressed?"arraybuffer":"text").then(x=>({cMapData:x instanceof ArrayBuffer?new Uint8Array(x):(0,D.stringToBytes)(x),compressionType:l}))}}class tt extends i.BaseStandardFontDataFactory{_fetchData(m){return P(m,"arraybuffer").then(l=>new Uint8Array(l))}}class j extends i.BaseSVGFactory{_createSVG(m){return document.createElementNS(b,m)}}class C{constructor({viewBox:m,scale:l,rotation:x,offsetX:A=0,offsetY:S=0,dontFlip:u=!1}){this.viewBox=m,this.scale=l,this.rotation=x,this.offsetX=A,this.offsetY=S;const o=(m[2]+m[0])/2,h=(m[3]+m[1])/2;let n,a,g,M;switch(x%=360,x<0&&(x+=360),x){case 180:n=-1,a=0,g=0,M=1;break;case 90:n=0,a=1,g=1,M=0;break;case 270:n=0,a=-1,g=-1,M=0;break;case 0:n=1,a=0,g=0,M=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(g=-g,M=-M);let y,X,Z,K;n===0?(y=Math.abs(h-m[1])*l+A,X=Math.abs(o-m[0])*l+S,Z=(m[3]-m[1])*l,K=(m[2]-m[0])*l):(y=Math.abs(o-m[0])*l+A,X=Math.abs(h-m[1])*l+S,Z=(m[2]-m[0])*l,K=(m[3]-m[1])*l),this.transform=[n*l,a*l,g*l,M*l,y-n*l*o-g*l*h,X-a*l*o-M*l*h],this.width=Z,this.height=K}get rawDims(){const{viewBox:m}=this;return(0,D.shadow)(this,"rawDims",{pageWidth:m[2]-m[0],pageHeight:m[3]-m[1],pageX:m[0],pageY:m[1]})}clone({scale:m=this.scale,rotation:l=this.rotation,offsetX:x=this.offsetX,offsetY:A=this.offsetY,dontFlip:S=!1}={}){return new C({viewBox:this.viewBox.slice(),scale:m,rotation:l,offsetX:x,offsetY:A,dontFlip:S})}convertToViewportPoint(m,l){return D.Util.applyTransform([m,l],this.transform)}convertToViewportRectangle(m){const l=D.Util.applyTransform([m[0],m[1]],this.transform),x=D.Util.applyTransform([m[2],m[3]],this.transform);return[l[0],l[1],x[0],x[1]]}convertToPdfPoint(m,l){return D.Util.applyInverseTransform([m,l],this.transform)}}class q extends D.BaseException{constructor(m,l=0){super(m,"RenderingCancelledException"),this.extraDelay=l}}function $(d){const m=d.length;let l=0;for(;l<m&&d[l].trim()==="";)l++;return d.substring(l,l+5).toLowerCase()==="data:"}function et(d){return typeof d=="string"&&/\.pdf$/i.test(d)}function ut(d,m=!1){return m||([d]=d.split(/[#?]/,1)),d.substring(d.lastIndexOf("/")+1)}function st(d,m="document.pdf"){if(typeof d!="string")return m;if($(d))return(0,D.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),m;const l=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,x=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,A=l.exec(d);let S=x.exec(A[1])||x.exec(A[2])||x.exec(A[3]);if(S&&(S=S[0],S.includes("%")))try{S=x.exec(decodeURIComponent(S))[0]}catch{}return S||m}class I{constructor(){be(this,"started",Object.create(null));be(this,"times",[])}time(m){m in this.started&&(0,D.warn)(`Timer is already running for ${m}`),this.started[m]=Date.now()}timeEnd(m){m in this.started||(0,D.warn)(`Timer has not been started for ${m}`),this.times.push({name:m,start:this.started[m],end:Date.now()}),delete this.started[m]}toString(){const m=[];let l=0;for(const{name:x}of this.times)l=Math.max(x.length,l);for(const{name:x,start:A,end:S}of this.times)m.push(`${x.padEnd(l)} ${S-A}ms
`);return m.join("")}}function V(d,m){try{const{protocol:l}=m?new URL(d,m):new URL(d);return l==="http:"||l==="https:"}catch{return!1}}function W(d){d.preventDefault()}let H;class Q{static toDateObject(m){if(!m||typeof m!="string")return null;H||(H=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const l=H.exec(m);if(!l)return null;const x=parseInt(l[1],10);let A=parseInt(l[2],10);A=A>=1&&A<=12?A-1:0;let S=parseInt(l[3],10);S=S>=1&&S<=31?S:1;let u=parseInt(l[4],10);u=u>=0&&u<=23?u:0;let o=parseInt(l[5],10);o=o>=0&&o<=59?o:0;let h=parseInt(l[6],10);h=h>=0&&h<=59?h:0;const n=l[7]||"Z";let a=parseInt(l[8],10);a=a>=0&&a<=23?a:0;let g=parseInt(l[9],10)||0;return g=g>=0&&g<=59?g:0,n==="-"?(u+=a,o+=g):n==="+"&&(u-=a,o-=g),new Date(Date.UTC(x,A,S,u,o,h))}}function ot(d,{scale:m=1,rotation:l=0}){const{width:x,height:A}=d.attributes.style,S=[0,0,parseInt(x),parseInt(A)];return new C({viewBox:S,scale:m,rotation:l})}function At(d){if(d.startsWith("#")){const m=parseInt(d.slice(1),16);return[(m&16711680)>>16,(m&65280)>>8,m&255]}return d.startsWith("rgb(")?d.slice(4,-1).split(",").map(m=>parseInt(m)):d.startsWith("rgba(")?d.slice(5,-1).split(",").map(m=>parseInt(m)).slice(0,3):((0,D.warn)(`Not a valid color format: "${d}"`),[0,0,0])}function Dt(d){const m=document.createElement("span");m.style.visibility="hidden",document.body.append(m);for(const l of d.keys()){m.style.color=l;const x=window.getComputedStyle(m).color;d.set(l,At(x))}m.remove()}function Ct(d){const{a:m,b:l,c:x,d:A,e:S,f:u}=d.getTransform();return[m,l,x,A,S,u]}function Nt(d){const{a:m,b:l,c:x,d:A,e:S,f:u}=d.getTransform().invertSelf();return[m,l,x,A,S,u]}function wt(d,m,l=!1,x=!0){if(m instanceof C){const{pageWidth:A,pageHeight:S}=m.rawDims,{style:u}=d,o=D.FeatureTest.isCSSRoundSupported,h=`var(--scale-factor) * ${A}px`,n=`var(--scale-factor) * ${S}px`,a=o?`round(${h}, 1px)`:`calc(${h})`,g=o?`round(${n}, 1px)`:`calc(${n})`;!l||m.rotation%180===0?(u.width=a,u.height=g):(u.width=g,u.height=a)}x&&d.setAttribute("data-main-rotation",m.rotation)}},47:(f,O,w)=>{var _,nt,z,P,F,Pn,j,kn,q,qr;w.d(O,{DrawLayer:()=>b});var i=w(419),D=w(292);const et=class et{constructor({pageIndex:st}){c(this,j);c(this,q);c(this,_,null);c(this,nt,0);c(this,z,new Map);c(this,P,new Map);this.pageIndex=st}setParent(st){if(!t(this,_)){N(this,_,st);return}if(t(this,_)!==st){if(t(this,z).size>0)for(const I of t(this,z).values())I.remove(),st.append(I);N(this,_,st)}}static get _svgFactory(){return(0,D.shadow)(this,"_svgFactory",new i.DOMSVGFactory)}highlight(st,I,V,W=!1){const H=fi(this,nt)._++,Q=k(this,j,kn).call(this,st.box);Q.classList.add("highlight"),st.free&&Q.classList.add("free");const ot=et._svgFactory.createElement("defs");Q.append(ot);const At=et._svgFactory.createElement("path");ot.append(At);const Dt=`path_p${this.pageIndex}_${H}`;At.setAttribute("id",Dt),At.setAttribute("d",st.toSVGPath()),W&&t(this,P).set(H,At);const Ct=k(this,q,qr).call(this,ot,Dt),Nt=et._svgFactory.createElement("use");return Q.append(Nt),Q.setAttribute("fill",I),Q.setAttribute("fill-opacity",V),Nt.setAttribute("href",`#${Dt}`),t(this,z).set(H,Q),{id:H,clipPathId:`url(#${Ct})`}}highlightOutline(st){const I=fi(this,nt)._++,V=k(this,j,kn).call(this,st.box);V.classList.add("highlightOutline");const W=et._svgFactory.createElement("defs");V.append(W);const H=et._svgFactory.createElement("path");W.append(H);const Q=`path_p${this.pageIndex}_${I}`;H.setAttribute("id",Q),H.setAttribute("d",st.toSVGPath()),H.setAttribute("vector-effect","non-scaling-stroke");let ot;if(st.free){V.classList.add("free");const Ct=et._svgFactory.createElement("mask");W.append(Ct),ot=`mask_p${this.pageIndex}_${I}`,Ct.setAttribute("id",ot),Ct.setAttribute("maskUnits","objectBoundingBox");const Nt=et._svgFactory.createElement("rect");Ct.append(Nt),Nt.setAttribute("width","1"),Nt.setAttribute("height","1"),Nt.setAttribute("fill","white");const wt=et._svgFactory.createElement("use");Ct.append(wt),wt.setAttribute("href",`#${Q}`),wt.setAttribute("stroke","none"),wt.setAttribute("fill","black"),wt.setAttribute("fill-rule","nonzero"),wt.classList.add("mask")}const At=et._svgFactory.createElement("use");V.append(At),At.setAttribute("href",`#${Q}`),ot&&At.setAttribute("mask",`url(#${ot})`);const Dt=At.cloneNode();return V.append(Dt),At.classList.add("mainOutline"),Dt.classList.add("secondaryOutline"),t(this,z).set(I,V),I}finalizeLine(st,I){const V=t(this,P).get(st);t(this,P).delete(st),this.updateBox(st,I.box),V.setAttribute("d",I.toSVGPath())}updateLine(st,I){t(this,z).get(st).firstChild.firstChild.setAttribute("d",I.toSVGPath())}removeFreeHighlight(st){this.remove(st),t(this,P).delete(st)}updatePath(st,I){t(this,P).get(st).setAttribute("d",I.toSVGPath())}updateBox(st,I){var V;k(V=et,F,Pn).call(V,t(this,z).get(st),I)}show(st,I){t(this,z).get(st).classList.toggle("hidden",!I)}rotate(st,I){t(this,z).get(st).setAttribute("data-main-rotation",I)}changeColor(st,I){t(this,z).get(st).setAttribute("fill",I)}changeOpacity(st,I){t(this,z).get(st).setAttribute("fill-opacity",I)}addClass(st,I){t(this,z).get(st).classList.add(I)}removeClass(st,I){t(this,z).get(st).classList.remove(I)}remove(st){t(this,_)!==null&&(t(this,z).get(st).remove(),t(this,z).delete(st))}destroy(){N(this,_,null);for(const st of t(this,z).values())st.remove();t(this,z).clear()}};_=new WeakMap,nt=new WeakMap,z=new WeakMap,P=new WeakMap,F=new WeakSet,Pn=function(st,{x:I=0,y:V=0,width:W=1,height:H=1}={}){const{style:Q}=st;Q.top=`${100*V}%`,Q.left=`${100*I}%`,Q.width=`${100*W}%`,Q.height=`${100*H}%`},j=new WeakSet,kn=function(st){var V;const I=et._svgFactory.create(1,1,!0);return t(this,_).append(I),I.setAttribute("aria-hidden",!0),k(V=et,F,Pn).call(V,I,st),I},q=new WeakSet,qr=function(st,I){const V=et._svgFactory.createElement("clipPath");st.append(V);const W=`clip_${I}`;V.setAttribute("id",W),V.setAttribute("clipPathUnits","objectBoundingBox");const H=et._svgFactory.createElement("use");return V.append(H),H.setAttribute("href",`#${I}`),H.classList.add("clip"),W},c(et,F);let b=et},731:(f,O,w)=>{var et,ut,st,I,V,W,H,Q,ot,At,Dt,Wr,Nt,$r,Tt,Xr,Et,Ys,bt,Qs,Rt,Js,Kt,Vr,_e,Rn,he,Kr,oe,Ce,se,Se,ne,lt,s,r,d,m,l,x,A,S,u,o,h,n,a,g,Fn,y,In,Z,Yr,it,Qr,L,Jr,E,Dn,G,ys,ht,Zi,xt,Zr,Xt,Zs,ee,ws,ve,ta,fe,ea,ae,ia,T,sa,ft,St,_t,$t,qt,Ot,Qt,Gt,Lt,Bt,Zt,ue,de,Ee,Le,Je,na,Ve,ra,Ge,aa,mt,oa,zt,Nn,te,la,ye,On,He,ha,We,ca,Ti,da,Rs,ua,Fs,pa,ci,Di,ss,Hn,Hi,tn,Bi,en,vi,ts,ns,Bn,zi,sn,Is,ga,rs,zn,Ds,fa,Ns,ma,as,jn,ji,nn,Li,xs,Ue,qe,bi,di,Ai,Gi,ai,Mi,oi,si,os,Pi,_s,ki,Ss,Ui,rn,ls,Gn,Os,va,Hs,ba,hs,Un,qi,an,Bs,Aa,Ri,Wi,li,Fi,ui,pi,gi,Ze,yi,$i,Xi,Ye,pe,wi,zs,ya,ds,qn,us,Wn,ps,$n,Vi,on;w.d(O,{AnnotationEditorLayer:()=>$});var i=w(292),D=w(310),b=w(830),_=w(976);const nt=/\r\n?|\n/g,jt=class jt extends D.AnnotationEditor{constructor(e){super({...e,name:"freeTextEditor"});c(this,Dt);c(this,Nt);c(this,Tt);c(this,Et);c(this,Rt);c(this,Kt);c(this,he);c(this,et,this.editorDivBlur.bind(this));c(this,ut,this.editorDivFocus.bind(this));c(this,st,this.editorDivInput.bind(this));c(this,I,this.editorDivKeydown.bind(this));c(this,V,this.editorDivPaste.bind(this));c(this,W,void 0);c(this,H,"");c(this,Q,`${this.id}-editor`);c(this,ot,void 0);c(this,At,null);N(this,W,e.color||jt._defaultColor||D.AnnotationEditor._defaultLineColor),N(this,ot,e.fontSize||jt._defaultFontSize)}static get _keyboardManager(){const e=jt.prototype,R=yt=>yt.isEmpty(),ct=b.AnnotationEditorUIManager.TRANSLATE_SMALL,pt=b.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new b.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-ct,0],checker:R}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-pt,0],checker:R}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[ct,0],checker:R}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[pt,0],checker:R}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-ct],checker:R}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-pt],checker:R}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,ct],checker:R}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,pt],checker:R}]]))}static initialize(e,R){D.AnnotationEditor.initialize(e,R,{strings:["pdfjs-free-text-default-content"]});const ct=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ct.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,R){switch(e){case i.AnnotationEditorParamsType.FREETEXT_SIZE:jt._defaultFontSize=R;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:jt._defaultColor=R;break}}updateParams(e,R){switch(e){case i.AnnotationEditorParamsType.FREETEXT_SIZE:k(this,Dt,Wr).call(this,R);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:k(this,Nt,$r).call(this,R);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,jt._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,jt._defaultColor||D.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,ot)],[i.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,W)]]}_translateEmpty(e,R){this._uiManager.translateSelectedEditors(e,R,!0)}getInitialTranslation(){const e=this.parentScale;return[-jt._internalPadding*e,-(jt._internalPadding+t(this,ot))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,I)),this.editorDiv.addEventListener("focus",t(this,ut)),this.editorDiv.addEventListener("blur",t(this,et)),this.editorDiv.addEventListener("input",t(this,st)),this.editorDiv.addEventListener("paste",t(this,V)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,Q)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",t(this,I)),this.editorDiv.removeEventListener("focus",t(this,ut)),this.editorDiv.removeEventListener("blur",t(this,et)),this.editorDiv.removeEventListener("input",t(this,st)),this.editorDiv.removeEventListener("paste",t(this,V)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=t(this,H),R=N(this,H,k(this,Tt,Xr).call(this).trimEnd());if(e===R)return;const ct=pt=>{if(N(this,H,pt),!pt){this.remove();return}k(this,Rt,Js).call(this),this._uiManager.rebuild(this),k(this,Et,Ys).call(this)};this.addCommands({cmd:()=>{ct(R)},undo:()=>{ct(e)},mustExec:!1}),k(this,Et,Ys).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){jt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,R;this.width&&(e=this.x,R=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,Q)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),D.AnnotationEditor._l10nPromise.get("pdfjs-free-text-default-content").then(pt=>{var yt;return(yt=this.editorDiv)==null?void 0:yt.setAttribute("default-content",pt)}),this.editorDiv.contentEditable=!0;const{style:ct}=this.editorDiv;if(ct.fontSize=`calc(${t(this,ot)}px * var(--scale-factor))`,ct.color=t(this,W),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,b.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[pt,yt]=this.parentDimensions;if(this.annotationElementId){const{position:It}=t(this,At);let[Wt,Mt]=this.getInitialTranslation();[Wt,Mt]=this.pageTranslationToScreen(Wt,Mt);const[Yt,Vt]=this.pageDimensions,[we,xe]=this.pageTranslation;let Te,Me;switch(this.rotation){case 0:Te=e+(It[0]-we)/Yt,Me=R+this.height-(It[1]-xe)/Vt;break;case 90:Te=e+(It[0]-we)/Yt,Me=R-(It[1]-xe)/Vt,[Wt,Mt]=[Mt,-Wt];break;case 180:Te=e-this.width+(It[0]-we)/Yt,Me=R-(It[1]-xe)/Vt,[Wt,Mt]=[-Wt,-Mt];break;case 270:Te=e+(It[0]-we-this.height*Vt)/Yt,Me=R+(It[1]-xe-this.width*Yt)/Vt,[Wt,Mt]=[-Mt,Wt];break}this.setAt(Te*pt,Me*yt,Wt,Mt)}else this.setAt(e*pt,R*yt,this.width*pt,this.height*yt);k(this,Rt,Js).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var Te,Me,je;const R=e.clipboardData||window.clipboardData,{types:ct}=R;if(ct.length===1&&ct[0]==="text/plain")return;e.preventDefault();const pt=k(Te=jt,_e,Rn).call(Te,R.getData("text")||"").replaceAll(nt,`
`);if(!pt)return;const yt=window.getSelection();if(!yt.rangeCount)return;this.editorDiv.normalize(),yt.deleteFromDocument();const It=yt.getRangeAt(0);if(!pt.includes(`
`)){It.insertNode(document.createTextNode(pt)),this.editorDiv.normalize(),yt.collapseToStart();return}const{startContainer:Wt,startOffset:Mt}=It,Yt=[],Vt=[];if(Wt.nodeType===Node.TEXT_NODE){const De=Wt.parentElement;if(Vt.push(Wt.nodeValue.slice(Mt).replaceAll(nt,"")),De!==this.editorDiv){let ze=Yt;for(const Be of this.editorDiv.childNodes){if(Be===De){ze=Vt;continue}ze.push(k(Me=jt,bt,Qs).call(Me,Be))}}Yt.push(Wt.nodeValue.slice(0,Mt).replaceAll(nt,""))}else if(Wt===this.editorDiv){let De=Yt,ze=0;for(const Be of this.editorDiv.childNodes)ze++===Mt&&(De=Vt),De.push(k(je=jt,bt,Qs).call(je,Be))}N(this,H,`${Yt.join(`
`)}${pt}${Vt.join(`
`)}`),k(this,Rt,Js).call(this);const we=new Range;let xe=Yt.reduce((De,ze)=>De+ze.length,0);for(const{firstChild:De}of this.editorDiv.childNodes)if(De.nodeType===Node.TEXT_NODE){const ze=De.nodeValue.length;if(xe<=ze){we.setStart(De,xe),we.setEnd(De,xe);break}xe-=ze}yt.removeAllRanges(),yt.addRange(we)}get contentDiv(){return this.editorDiv}static deserialize(e,R,ct){var It;let pt=null;if(e instanceof _.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Wt,fontColor:Mt},rect:Yt,rotation:Vt,id:we},textContent:xe,textPosition:Te,parent:{page:{pageNumber:Me}}}=e;if(!xe||xe.length===0)return null;pt=e={annotationType:i.AnnotationEditorType.FREETEXT,color:Array.from(Mt),fontSize:Wt,value:xe.join(`
`),position:Te,pageIndex:Me-1,rect:Yt,rotation:Vt,id:we,deleted:!1}}const yt=super.deserialize(e,R,ct);return N(yt,ot,e.fontSize),N(yt,W,i.Util.makeHexColor(...e.color)),N(yt,H,k(It=jt,_e,Rn).call(It,e.value)),yt.annotationElementId=e.id||null,N(yt,At,pt),yt}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const R=jt._internalPadding*this.parentScale,ct=this.getRect(R,R),pt=D.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,W)),yt={annotationType:i.AnnotationEditorType.FREETEXT,color:pt,fontSize:t(this,ot),value:k(this,Kt,Vr).call(this),pageIndex:this.pageIndex,rect:ct,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?yt:this.annotationElementId&&!k(this,he,Kr).call(this,yt)?null:(yt.id=this.annotationElementId,yt)}};et=new WeakMap,ut=new WeakMap,st=new WeakMap,I=new WeakMap,V=new WeakMap,W=new WeakMap,H=new WeakMap,Q=new WeakMap,ot=new WeakMap,At=new WeakMap,Dt=new WeakSet,Wr=function(e){const R=pt=>{this.editorDiv.style.fontSize=`calc(${pt}px * var(--scale-factor))`,this.translate(0,-(pt-t(this,ot))*this.parentScale),N(this,ot,pt),k(this,Et,Ys).call(this)},ct=t(this,ot);this.addCommands({cmd:R.bind(this,e),undo:R.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Nt=new WeakSet,$r=function(e){const R=pt=>{N(this,W,this.editorDiv.style.color=pt)},ct=t(this,W);this.addCommands({cmd:R.bind(this,e),undo:R.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Tt=new WeakSet,Xr=function(){var R;const e=[];this.editorDiv.normalize();for(const ct of this.editorDiv.childNodes)e.push(k(R=jt,bt,Qs).call(R,ct));return e.join(`
`)},Et=new WeakSet,Ys=function(){const[e,R]=this.parentDimensions;let ct;if(this.isAttachedToDOM)ct=this.div.getBoundingClientRect();else{const{currentLayer:pt,div:yt}=this,It=yt.style.display;yt.style.display="hidden",pt.div.append(this.div),ct=yt.getBoundingClientRect(),yt.remove(),yt.style.display=It}this.rotation%180===this.parentRotation%180?(this.width=ct.width/e,this.height=ct.height/R):(this.width=ct.height/e,this.height=ct.width/R),this.fixAndSetPosition()},bt=new WeakSet,Qs=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(nt,"")},Rt=new WeakSet,Js=function(){if(this.editorDiv.replaceChildren(),!!t(this,H))for(const e of t(this,H).split(`
`)){const R=document.createElement("div");R.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(R)}},Kt=new WeakSet,Vr=function(){return t(this,H).replaceAll("\xA0"," ")},_e=new WeakSet,Rn=function(e){return e.replaceAll(" ","\xA0")},he=new WeakSet,Kr=function(e){const{value:R,fontSize:ct,color:pt,pageIndex:yt}=t(this,At);return this._hasBeenMoved||e.value!==R||e.fontSize!==ct||e.color.some((It,Wt)=>It!==pt[Wt])||e.pageIndex!==yt},c(jt,bt),c(jt,_e),be(jt,"_freeTextDefaultContent",""),be(jt,"_internalPadding",0),be(jt,"_defaultColor",null),be(jt,"_defaultFontSize",10),be(jt,"_type","freetext"),be(jt,"_editorType",i.AnnotationEditorType.FREETEXT);let z=jt;var P=w(61),F=w(259),tt=w(419);const dt=class dt extends D.AnnotationEditor{constructor(e){super({...e,name:"highlightEditor"});c(this,g);c(this,y);c(this,Z);c(this,it);c(this,L);c(this,E);c(this,G);c(this,xt);c(this,Xt);c(this,ee);c(this,ve);c(this,fe);c(this,oe,null);c(this,Ce,0);c(this,se,void 0);c(this,Se,null);c(this,ne,null);c(this,lt,null);c(this,s,null);c(this,r,0);c(this,d,null);c(this,m,null);c(this,l,null);c(this,x,!1);c(this,A,k(this,xt,Zr).bind(this));c(this,S,null);c(this,u,void 0);c(this,o,null);c(this,h,"");c(this,n,void 0);c(this,a,"");this.color=e.color||dt._defaultColor,N(this,n,e.thickness||dt._defaultThickness),N(this,u,e.opacity||dt._defaultOpacity),N(this,se,e.boxes||null),N(this,a,e.methodOfCreation||""),N(this,h,e.text||""),this._isDraggable=!1,e.highlightId>-1?(N(this,x,!0),k(this,y,In).call(this,e),k(this,G,ys).call(this)):(N(this,oe,e.anchorNode),N(this,Ce,e.anchorOffset),N(this,s,e.focusNode),N(this,r,e.focusOffset),k(this,g,Fn).call(this),k(this,G,ys).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=dt.prototype;return(0,i.shadow)(this,"_keyboardManager",new b.KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:t(this,x)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:t(this,n),methodOfCreation:t(this,a)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,R){var ct;D.AnnotationEditor.initialize(e,R),dt._defaultColor||(dt._defaultColor=((ct=R.highlightColors)==null?void 0:ct.values().next().value)||"#fff066")}static updateDefaultParams(e,R){switch(e){case i.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:dt._defaultColor=R;break;case i.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:dt._defaultThickness=R;break}}translateInPage(e,R){}get toolbarPosition(){return t(this,S)}updateParams(e,R){switch(e){case i.AnnotationEditorParamsType.HIGHLIGHT_COLOR:k(this,Z,Yr).call(this,R);break;case i.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:k(this,it,Qr).call(this,R);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,dt._defaultColor],[i.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,dt._defaultThickness]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||dt._defaultColor],[i.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,t(this,n)||dt._defaultThickness],[i.AnnotationEditorParamsType.HIGHLIGHT_FREE,t(this,x)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(N(this,ne,new F.ColorPicker({editor:this})),e.addColorPicker(t(this,ne))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(k(this,ee,ws).call(this))}getBaseTranslation(){return[0,0]}getRect(e,R){return super.getRect(e,R,k(this,ee,ws).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){k(this,E,Dn).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,G,ys).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var ct;let R=!1;this.parent&&!e?k(this,E,Dn).call(this):e&&(k(this,G,ys).call(this,e),R=!this.parent&&((ct=this.div)==null?void 0:ct.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),R&&this.select()}rotate(e){var pt,yt,It;const{drawLayer:R}=this.parent;let ct;t(this,x)?(e=(e-this.rotation+360)%360,ct=k(pt=dt,ht,Zi).call(pt,t(this,m).box,e)):ct=k(yt=dt,ht,Zi).call(yt,this,e),R.rotate(t(this,l),e),R.rotate(t(this,o),e),R.updateBox(t(this,l),ct),R.updateBox(t(this,o),k(It=dt,ht,Zi).call(It,t(this,lt).box,e))}render(){if(this.div)return this.div;const e=super.render();t(this,h)&&(e.setAttribute("aria-label",t(this,h)),e.setAttribute("role","mark")),t(this,x)?e.classList.add("free"):this.div.addEventListener("keydown",t(this,A));const R=N(this,d,document.createElement("div"));e.append(R),R.setAttribute("aria-hidden","true"),R.className="internal",R.style.clipPath=t(this,Se);const[ct,pt]=this.parentDimensions;return this.setDims(this.width*ct,this.height*pt),(0,b.bindEvents)(this,t(this,d),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(t(this,o),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(t(this,o),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:k(this,Xt,Zs).call(this,!0);break;case 1:case 3:k(this,Xt,Zs).call(this,!1);break}}select(){var e,R;super.select(),t(this,o)&&((e=this.parent)==null||e.drawLayer.removeClass(t(this,o),"hovered"),(R=this.parent)==null||R.drawLayer.addClass(t(this,o),"selected"))}unselect(){var e;super.unselect(),t(this,o)&&((e=this.parent)==null||e.drawLayer.removeClass(t(this,o),"selected"),t(this,x)||k(this,Xt,Zs).call(this,!1))}get _mustFixPosition(){return!t(this,x)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(t(this,l),e),this.parent.drawLayer.show(t(this,o),e))}static startHighlighting(e,R,{target:ct,x:pt,y:yt}){const{x:It,y:Wt,width:Mt,height:Yt}=ct.getBoundingClientRect(),Vt=Me=>{k(this,ae,ia).call(this,e,Me)},we={capture:!0,passive:!1},xe=Me=>{Me.preventDefault(),Me.stopPropagation()},Te=Me=>{ct.removeEventListener("pointermove",Vt),window.removeEventListener("blur",Te),window.removeEventListener("pointerup",Te),window.removeEventListener("pointerdown",xe,we),window.removeEventListener("contextmenu",tt.noContextMenu),k(this,T,sa).call(this,e,Me)};window.addEventListener("blur",Te),window.addEventListener("pointerup",Te),window.addEventListener("pointerdown",xe,we),window.addEventListener("contextmenu",tt.noContextMenu),ct.addEventListener("pointermove",Vt),this._freeHighlight=new P.FreeOutliner({x:pt,y:yt},[It,Wt,Mt,Yt],e.scale,this._defaultThickness/2,R,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(e,R,ct){var Me;const pt=super.deserialize(e,R,ct),{rect:[yt,It,Wt,Mt],color:Yt,quadPoints:Vt}=e;pt.color=i.Util.makeHexColor(...Yt),N(pt,u,e.opacity);const[we,xe]=pt.pageDimensions;pt.width=(Wt-yt)/we,pt.height=(Mt-It)/xe;const Te=N(pt,se,[]);for(let je=0;je<Vt.length;je+=8)Te.push({x:(Vt[4]-Wt)/we,y:(Mt-(1-Vt[je+5]))/xe,width:(Vt[je+2]-Vt[je])/we,height:(Vt[je+5]-Vt[je+1])/xe});return k(Me=pt,g,Fn).call(Me),pt}serialize(e=!1){if(this.isEmpty()||e)return null;const R=this.getRect(0,0),ct=D.AnnotationEditor._colorManager.convert(this.color);return{annotationType:i.AnnotationEditorType.HIGHLIGHT,color:ct,opacity:t(this,u),thickness:t(this,n),quadPoints:k(this,ve,ta).call(this),outlines:k(this,fe,ea).call(this,R),pageIndex:this.pageIndex,rect:R,rotation:k(this,ee,ws).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};oe=new WeakMap,Ce=new WeakMap,se=new WeakMap,Se=new WeakMap,ne=new WeakMap,lt=new WeakMap,s=new WeakMap,r=new WeakMap,d=new WeakMap,m=new WeakMap,l=new WeakMap,x=new WeakMap,A=new WeakMap,S=new WeakMap,u=new WeakMap,o=new WeakMap,h=new WeakMap,n=new WeakMap,a=new WeakMap,g=new WeakSet,Fn=function(){const e=new P.Outliner(t(this,se),.001);N(this,m,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=t(this,m).box;const R=new P.Outliner(t(this,se),.0025,.001,this._uiManager.direction==="ltr");N(this,lt,R.getOutlines());const{lastPoint:ct}=t(this,lt).box;N(this,S,[(ct[0]-this.x)/this.width,(ct[1]-this.y)/this.height])},y=new WeakSet,In=function({highlightOutlines:e,highlightId:R,clipPathId:ct}){var Vt,we;if(N(this,m,e),N(this,lt,e.getNewOutline(t(this,n)/2+1.5,.0025)),R>=0)N(this,l,R),N(this,Se,ct),this.parent.drawLayer.finalizeLine(R,e),N(this,o,this.parent.drawLayer.highlightOutline(t(this,lt)));else if(this.parent){const xe=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(t(this,l),e),this.parent.drawLayer.updateBox(t(this,l),k(Vt=dt,ht,Zi).call(Vt,t(this,m).box,(xe-this.rotation+360)%360)),this.parent.drawLayer.updateLine(t(this,o),t(this,lt)),this.parent.drawLayer.updateBox(t(this,o),k(we=dt,ht,Zi).call(we,t(this,lt).box,xe))}const{x:yt,y:It,width:Wt,height:Mt}=e.box;switch(this.rotation){case 0:this.x=yt,this.y=It,this.width=Wt,this.height=Mt;break;case 90:{const[xe,Te]=this.parentDimensions;this.x=It,this.y=1-yt,this.width=Wt*Te/xe,this.height=Mt*xe/Te;break}case 180:this.x=1-yt,this.y=1-It,this.width=Wt,this.height=Mt;break;case 270:{const[xe,Te]=this.parentDimensions;this.x=1-It,this.y=yt,this.width=Wt*Te/xe,this.height=Mt*xe/Te;break}}const{lastPoint:Yt}=t(this,lt).box;N(this,S,[(Yt[0]-yt)/Wt,(Yt[1]-It)/Mt])},Z=new WeakSet,Yr=function(e){const R=pt=>{var yt,It;this.color=pt,(yt=this.parent)==null||yt.drawLayer.changeColor(t(this,l),pt),(It=t(this,ne))==null||It.updateColor(pt)},ct=this.color;this.addCommands({cmd:R.bind(this,e),undo:R.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:i.AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},it=new WeakSet,Qr=function(e){const R=t(this,n),ct=pt=>{N(this,n,pt),k(this,L,Jr).call(this,pt)};this.addCommands({cmd:ct.bind(this,e),undo:ct.bind(this,R),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},L=new WeakSet,Jr=function(e){if(!t(this,x))return;k(this,y,In).call(this,{highlightOutlines:t(this,m).getNewOutline(e/2)}),this.fixAndSetPosition();const[R,ct]=this.parentDimensions;this.setDims(this.width*R,this.height*ct)},E=new WeakSet,Dn=function(){t(this,l)===null||!this.parent||(this.parent.drawLayer.remove(t(this,l)),N(this,l,null),this.parent.drawLayer.remove(t(this,o)),N(this,o,null))},G=new WeakSet,ys=function(e=this.parent){t(this,l)===null&&({id:fi(this,l)._,clipPathId:fi(this,Se)._}=e.drawLayer.highlight(t(this,m),this.color,t(this,u)),N(this,o,e.drawLayer.highlightOutline(t(this,lt))),t(this,d)&&(t(this,d).style.clipPath=t(this,Se)))},ht=new WeakSet,Zi=function({x:e,y:R,width:ct,height:pt},yt){switch(yt){case 90:return{x:1-R-pt,y:e,width:pt,height:ct};case 180:return{x:1-e-ct,y:1-R-pt,width:ct,height:pt};case 270:return{x:R,y:1-e-ct,width:pt,height:ct}}return{x:e,y:R,width:ct,height:pt}},xt=new WeakSet,Zr=function(e){dt._keyboardManager.exec(this,e)},Xt=new WeakSet,Zs=function(e){if(!t(this,oe))return;const R=window.getSelection();e?R.setPosition(t(this,oe),t(this,Ce)):R.setPosition(t(this,s),t(this,r))},ee=new WeakSet,ws=function(){return t(this,x)?this.rotation:0},ve=new WeakSet,ta=function(){if(t(this,x))return null;const[e,R]=this.pageDimensions,ct=t(this,se),pt=new Array(ct.length*8);let yt=0;for(const{x:It,y:Wt,width:Mt,height:Yt}of ct){const Vt=It*e,we=(1-Wt-Yt)*R;pt[yt]=pt[yt+4]=Vt,pt[yt+1]=pt[yt+3]=we,pt[yt+2]=pt[yt+6]=Vt+Mt*e,pt[yt+5]=pt[yt+7]=we+Yt*R,yt+=8}return pt},fe=new WeakSet,ea=function(e){return t(this,m).serialize(e,k(this,ee,ws).call(this))},ae=new WeakSet,ia=function(e,R){this._freeHighlight.add(R)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},T=new WeakSet,sa=function(e,R){this._freeHighlight.isEmpty()?e.drawLayer.removeFreeHighlight(this._freeHighlightId):e.createAndAddNewEditor(R,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},c(dt,ht),c(dt,ae),c(dt,T),be(dt,"_defaultColor",null),be(dt,"_defaultOpacity",1),be(dt,"_defaultThickness",12),be(dt,"_l10nPromise"),be(dt,"_type","highlight"),be(dt,"_editorType",i.AnnotationEditorType.HIGHLIGHT),be(dt,"_freeHighlightId",-1),be(dt,"_freeHighlight",null),be(dt,"_freeHighlightClipId","");let j=dt;const Ne=class Ne extends D.AnnotationEditor{constructor(e){super({...e,name:"inkEditor"});c(this,Je);c(this,Ve);c(this,Ge);c(this,mt);c(this,zt);c(this,te);c(this,ye);c(this,He);c(this,We);c(this,Ti);c(this,Rs);c(this,Fs);c(this,ci);c(this,ss);c(this,Hi);c(this,Bi);c(this,vi);c(this,ns);c(this,zi);c(this,Ns);c(this,as);c(this,ji);c(this,Li);c(this,ft,0);c(this,St,0);c(this,_t,this.canvasPointermove.bind(this));c(this,$t,this.canvasPointerleave.bind(this));c(this,qt,this.canvasPointerup.bind(this));c(this,Ot,this.canvasPointerdown.bind(this));c(this,Qt,null);c(this,Gt,new Path2D);c(this,Lt,!1);c(this,Bt,!1);c(this,Zt,!1);c(this,ue,null);c(this,de,0);c(this,Ee,0);c(this,Le,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,R){D.AnnotationEditor.initialize(e,R)}static updateDefaultParams(e,R){switch(e){case i.AnnotationEditorParamsType.INK_THICKNESS:Ne._defaultThickness=R;break;case i.AnnotationEditorParamsType.INK_COLOR:Ne._defaultColor=R;break;case i.AnnotationEditorParamsType.INK_OPACITY:Ne._defaultOpacity=R/100;break}}updateParams(e,R){switch(e){case i.AnnotationEditorParamsType.INK_THICKNESS:k(this,Je,na).call(this,R);break;case i.AnnotationEditorParamsType.INK_COLOR:k(this,Ve,ra).call(this,R);break;case i.AnnotationEditorParamsType.INK_OPACITY:k(this,Ge,aa).call(this,R);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,Ne._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,Ne._defaultColor||D.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(Ne._defaultOpacity*100)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Ne._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||Ne._defaultColor||D.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Ne._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(k(this,Hi,tn).call(this),k(this,Bi,en).call(this)),this.isAttachedToDOM||(this.parent.add(this),k(this,vi,ts).call(this)),k(this,Li,xs).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,Qt)&&(clearTimeout(t(this,Qt)),N(this,Qt,null)),t(this,ue).disconnect(),N(this,ue,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,R]=this.parentDimensions,ct=this.width*e,pt=this.height*R;this.setDimensions(ct,pt)}enableEditMode(){t(this,Lt)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",t(this,Ot)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,Ot)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,Lt)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),N(this,Lt,!0),this.div.classList.add("disabled"),k(this,Li,xs).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||t(this,Lt)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),k(this,te,la).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),k(this,ye,On).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),k(this,ss,Hn).call(this,e)}canvasPointerleave(e){k(this,ss,Hn).call(this,e)}get isResizable(){return!this.isEmpty()&&t(this,Lt)}render(){if(this.div)return this.div;let e,R;this.width&&(e=this.x,R=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[ct,pt,yt,It]=k(this,mt,oa).call(this);if(this.setAt(ct,pt,0,0),this.setDims(yt,It),k(this,Hi,tn).call(this),this.width){const[Wt,Mt]=this.parentDimensions;this.setAspectRatio(this.width*Wt,this.height*Mt),this.setAt(e*Wt,R*Mt,this.width*Wt,this.height*Mt),N(this,Zt,!0),k(this,vi,ts).call(this),this.setDims(this.width*Wt,this.height*Mt),k(this,ci,Di).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return k(this,Bi,en).call(this),this.div}setDimensions(e,R){const ct=Math.round(e),pt=Math.round(R);if(t(this,de)===ct&&t(this,Ee)===pt)return;N(this,de,ct),N(this,Ee,pt),this.canvas.style.visibility="hidden";const[yt,It]=this.parentDimensions;this.width=e/yt,this.height=R/It,this.fixAndSetPosition(),t(this,Lt)&&k(this,ns,Bn).call(this,e,R),k(this,vi,ts).call(this),k(this,ci,Di).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(e,R,ct){var je,De,ze;if(e instanceof _.InkAnnotationElement)return null;const pt=super.deserialize(e,R,ct);pt.thickness=e.thickness,pt.color=i.Util.makeHexColor(...e.color),pt.opacity=e.opacity;const[yt,It]=pt.pageDimensions,Wt=pt.width*yt,Mt=pt.height*It,Yt=pt.parentScale,Vt=e.thickness/2;N(pt,Lt,!0),N(pt,de,Math.round(Wt)),N(pt,Ee,Math.round(Mt));const{paths:we,rect:xe,rotation:Te}=e;for(let{bezier:Be}of we){Be=k(je=Ne,Ds,fa).call(je,Be,xe,Te);const hi=[];pt.paths.push(hi);let gs=Yt*(Be[0]-Vt),fs=Yt*(Be[1]-Vt);for(let ri=2,An=Be.length;ri<An;ri+=6){const yn=Yt*(Be[ri]-Vt),Gs=Yt*(Be[ri+1]-Vt),Us=Yt*(Be[ri+2]-Vt),qs=Yt*(Be[ri+3]-Vt),ms=Yt*(Be[ri+4]-Vt),Hr=Yt*(Be[ri+5]-Vt);hi.push([[gs,fs],[yn,Gs],[Us,qs],[ms,Hr]]),gs=ms,fs=Hr}const js=k(this,Is,ga).call(this,hi);pt.bezierPath2D.push(js)}const Me=k(De=pt,as,jn).call(De);return N(pt,St,Math.max(D.AnnotationEditor.MIN_SIZE,Me[2]-Me[0])),N(pt,ft,Math.max(D.AnnotationEditor.MIN_SIZE,Me[3]-Me[1])),k(ze=pt,ns,Bn).call(ze,Wt,Mt),pt}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),R=D.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:R,thickness:this.thickness,opacity:this.opacity,paths:k(this,Ns,ma).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};ft=new WeakMap,St=new WeakMap,_t=new WeakMap,$t=new WeakMap,qt=new WeakMap,Ot=new WeakMap,Qt=new WeakMap,Gt=new WeakMap,Lt=new WeakMap,Bt=new WeakMap,Zt=new WeakMap,ue=new WeakMap,de=new WeakMap,Ee=new WeakMap,Le=new WeakMap,Je=new WeakSet,na=function(e){const R=pt=>{this.thickness=pt,k(this,Li,xs).call(this)},ct=this.thickness;this.addCommands({cmd:R.bind(this,e),undo:R.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Ve=new WeakSet,ra=function(e){const R=pt=>{this.color=pt,k(this,ci,Di).call(this)},ct=this.color;this.addCommands({cmd:R.bind(this,e),undo:R.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ge=new WeakSet,aa=function(e){const R=pt=>{this.opacity=pt,k(this,ci,Di).call(this)};e/=100;const ct=this.opacity;this.addCommands({cmd:R.bind(this,e),undo:R.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},mt=new WeakSet,oa=function(){const{parentRotation:e,parentDimensions:[R,ct]}=this;switch(e){case 90:return[0,ct,ct,R];case 180:return[R,ct,R,ct];case 270:return[R,0,ct,R];default:return[0,0,R,ct]}},zt=new WeakSet,Nn=function(){const{ctx:e,color:R,opacity:ct,thickness:pt,parentScale:yt,scaleFactor:It}=this;e.lineWidth=pt*yt/It,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${R}${(0,b.opacityToHex)(ct)}`},te=new WeakSet,la=function(e,R){this.canvas.addEventListener("contextmenu",tt.noContextMenu),this.canvas.addEventListener("pointerleave",t(this,$t)),this.canvas.addEventListener("pointermove",t(this,_t)),this.canvas.addEventListener("pointerup",t(this,qt)),this.canvas.removeEventListener("pointerdown",t(this,Ot)),this.isEditing=!0,t(this,Zt)||(N(this,Zt,!0),k(this,vi,ts).call(this),this.thickness||(this.thickness=Ne._defaultThickness),this.color||(this.color=Ne._defaultColor||D.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Ne._defaultOpacity)),this.currentPath.push([e,R]),N(this,Bt,!1),k(this,zt,Nn).call(this),N(this,Le,()=>{k(this,Ti,da).call(this),t(this,Le)&&window.requestAnimationFrame(t(this,Le))}),window.requestAnimationFrame(t(this,Le))},ye=new WeakSet,On=function(e,R){const[ct,pt]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===ct&&R===pt)return;const yt=this.currentPath;let It=t(this,Gt);if(yt.push([e,R]),N(this,Bt,!0),yt.length<=2){It.moveTo(...yt[0]),It.lineTo(e,R);return}yt.length===3&&(N(this,Gt,It=new Path2D),It.moveTo(...yt[0])),k(this,Rs,ua).call(this,It,...yt.at(-3),...yt.at(-2),e,R)},He=new WeakSet,ha=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);t(this,Gt).lineTo(...e)},We=new WeakSet,ca=function(e,R){N(this,Le,null),e=Math.min(Math.max(e,0),this.canvas.width),R=Math.min(Math.max(R,0),this.canvas.height),k(this,ye,On).call(this,e,R),k(this,He,ha).call(this);let ct;if(this.currentPath.length!==1)ct=k(this,Fs,pa).call(this);else{const Mt=[e,R];ct=[[Mt,Mt.slice(),Mt.slice(),Mt]]}const pt=t(this,Gt),yt=this.currentPath;this.currentPath=[],N(this,Gt,new Path2D);const It=()=>{this.allRawPaths.push(yt),this.paths.push(ct),this.bezierPath2D.push(pt),this._uiManager.rebuild(this)},Wt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(k(this,Hi,tn).call(this),k(this,Bi,en).call(this)),k(this,Li,xs).call(this))};this.addCommands({cmd:It,undo:Wt,mustExec:!0})},Ti=new WeakSet,da=function(){if(!t(this,Bt))return;N(this,Bt,!1);const e=Math.ceil(this.thickness*this.parentScale),R=this.currentPath.slice(-3),ct=R.map(It=>It[0]),pt=R.map(It=>It[1]);Math.min(...ct)-e,Math.max(...ct)+e,Math.min(...pt)-e,Math.max(...pt)+e;const{ctx:yt}=this;yt.save(),yt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const It of this.bezierPath2D)yt.stroke(It);yt.stroke(t(this,Gt)),yt.restore()},Rs=new WeakSet,ua=function(e,R,ct,pt,yt,It,Wt){const Mt=(R+pt)/2,Yt=(ct+yt)/2,Vt=(pt+It)/2,we=(yt+Wt)/2;e.bezierCurveTo(Mt+2*(pt-Mt)/3,Yt+2*(yt-Yt)/3,Vt+2*(pt-Vt)/3,we+2*(yt-we)/3,Vt,we)},Fs=new WeakSet,pa=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const R=[];let ct,[pt,yt]=e[0];for(ct=1;ct<e.length-2;ct++){const[xe,Te]=e[ct],[Me,je]=e[ct+1],De=(xe+Me)/2,ze=(Te+je)/2,Be=[pt+2*(xe-pt)/3,yt+2*(Te-yt)/3],hi=[De+2*(xe-De)/3,ze+2*(Te-ze)/3];R.push([[pt,yt],Be,hi,[De,ze]]),[pt,yt]=[De,ze]}const[It,Wt]=e[ct],[Mt,Yt]=e[ct+1],Vt=[pt+2*(It-pt)/3,yt+2*(Wt-yt)/3],we=[Mt+2*(It-Mt)/3,Yt+2*(Wt-Yt)/3];return R.push([[pt,yt],Vt,we,[Mt,Yt]]),R},ci=new WeakSet,Di=function(){if(this.isEmpty()){k(this,zi,sn).call(this);return}k(this,zt,Nn).call(this);const{canvas:e,ctx:R}=this;R.setTransform(1,0,0,1,0,0),R.clearRect(0,0,e.width,e.height),k(this,zi,sn).call(this);for(const ct of this.bezierPath2D)R.stroke(ct)},ss=new WeakSet,Hn=function(e){this.canvas.removeEventListener("pointerleave",t(this,$t)),this.canvas.removeEventListener("pointermove",t(this,_t)),this.canvas.removeEventListener("pointerup",t(this,qt)),this.canvas.addEventListener("pointerdown",t(this,Ot)),t(this,Qt)&&clearTimeout(t(this,Qt)),N(this,Qt,setTimeout(()=>{N(this,Qt,null),this.canvas.removeEventListener("contextmenu",tt.noContextMenu)},10)),k(this,We,ca).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Hi=new WeakSet,tn=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Bi=new WeakSet,en=function(){N(this,ue,new ResizeObserver(e=>{const R=e[0].contentRect;R.width&&R.height&&this.setDimensions(R.width,R.height)})),t(this,ue).observe(this.div)},vi=new WeakSet,ts=function(){if(!t(this,Zt))return;const[e,R]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*R),k(this,zi,sn).call(this)},ns=new WeakSet,Bn=function(e,R){const ct=k(this,ji,nn).call(this),pt=(e-ct)/t(this,St),yt=(R-ct)/t(this,ft);this.scaleFactor=Math.min(pt,yt)},zi=new WeakSet,sn=function(){const e=k(this,ji,nn).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},Is=new WeakSet,ga=function(e){const R=new Path2D;for(let ct=0,pt=e.length;ct<pt;ct++){const[yt,It,Wt,Mt]=e[ct];ct===0&&R.moveTo(...yt),R.bezierCurveTo(It[0],It[1],Wt[0],Wt[1],Mt[0],Mt[1])}return R},rs=new WeakSet,zn=function(e,R,ct){const[pt,yt,It,Wt]=R;switch(ct){case 0:for(let Mt=0,Yt=e.length;Mt<Yt;Mt+=2)e[Mt]+=pt,e[Mt+1]=Wt-e[Mt+1];break;case 90:for(let Mt=0,Yt=e.length;Mt<Yt;Mt+=2){const Vt=e[Mt];e[Mt]=e[Mt+1]+pt,e[Mt+1]=Vt+yt}break;case 180:for(let Mt=0,Yt=e.length;Mt<Yt;Mt+=2)e[Mt]=It-e[Mt],e[Mt+1]+=yt;break;case 270:for(let Mt=0,Yt=e.length;Mt<Yt;Mt+=2){const Vt=e[Mt];e[Mt]=It-e[Mt+1],e[Mt+1]=Wt-Vt}break;default:throw new Error("Invalid rotation")}return e},Ds=new WeakSet,fa=function(e,R,ct){const[pt,yt,It,Wt]=R;switch(ct){case 0:for(let Mt=0,Yt=e.length;Mt<Yt;Mt+=2)e[Mt]-=pt,e[Mt+1]=Wt-e[Mt+1];break;case 90:for(let Mt=0,Yt=e.length;Mt<Yt;Mt+=2){const Vt=e[Mt];e[Mt]=e[Mt+1]-yt,e[Mt+1]=Vt-pt}break;case 180:for(let Mt=0,Yt=e.length;Mt<Yt;Mt+=2)e[Mt]=It-e[Mt],e[Mt+1]-=yt;break;case 270:for(let Mt=0,Yt=e.length;Mt<Yt;Mt+=2){const Vt=e[Mt];e[Mt]=Wt-e[Mt+1],e[Mt+1]=It-Vt}break;default:throw new Error("Invalid rotation")}return e},Ns=new WeakSet,ma=function(e,R,ct,pt){var Yt,Vt;const yt=[],It=this.thickness/2,Wt=e*R+It,Mt=e*ct+It;for(const we of this.paths){const xe=[],Te=[];for(let Me=0,je=we.length;Me<je;Me++){const[De,ze,Be,hi]=we[Me];if(De[0]===hi[0]&&De[1]===hi[1]&&je===1){const qs=e*De[0]+Wt,ms=e*De[1]+Mt;xe.push(qs,ms),Te.push(qs,ms);break}const gs=e*De[0]+Wt,fs=e*De[1]+Mt,js=e*ze[0]+Wt,ri=e*ze[1]+Mt,An=e*Be[0]+Wt,yn=e*Be[1]+Mt,Gs=e*hi[0]+Wt,Us=e*hi[1]+Mt;Me===0&&(xe.push(gs,fs),Te.push(gs,fs)),xe.push(js,ri,An,yn,Gs,Us),Te.push(js,ri),Me===je-1&&Te.push(Gs,Us)}yt.push({bezier:k(Yt=Ne,rs,zn).call(Yt,xe,pt,this.rotation),points:k(Vt=Ne,rs,zn).call(Vt,Te,pt,this.rotation)})}return yt},as=new WeakSet,jn=function(){let e=1/0,R=-1/0,ct=1/0,pt=-1/0;for(const yt of this.paths)for(const[It,Wt,Mt,Yt]of yt){const Vt=i.Util.bezierBoundingBox(...It,...Wt,...Mt,...Yt);e=Math.min(e,Vt[0]),ct=Math.min(ct,Vt[1]),R=Math.max(R,Vt[2]),pt=Math.max(pt,Vt[3])}return[e,ct,R,pt]},ji=new WeakSet,nn=function(){return t(this,Lt)?Math.ceil(this.thickness*this.parentScale):0},Li=new WeakSet,xs=function(e=!1){if(this.isEmpty())return;if(!t(this,Lt)){k(this,ci,Di).call(this);return}const R=k(this,as,jn).call(this),ct=k(this,ji,nn).call(this);N(this,St,Math.max(D.AnnotationEditor.MIN_SIZE,R[2]-R[0])),N(this,ft,Math.max(D.AnnotationEditor.MIN_SIZE,R[3]-R[1]));const pt=Math.ceil(ct+t(this,St)*this.scaleFactor),yt=Math.ceil(ct+t(this,ft)*this.scaleFactor),[It,Wt]=this.parentDimensions;this.width=pt/It,this.height=yt/Wt,this.setAspectRatio(pt,yt);const Mt=this.translationX,Yt=this.translationY;this.translationX=-R[0],this.translationY=-R[1],k(this,vi,ts).call(this),k(this,ci,Di).call(this),N(this,de,pt),N(this,Ee,yt),this.setDims(pt,yt);const Vt=e?ct/this.scaleFactor/2:0;this.translate(Mt-this.translationX-Vt,Yt-this.translationY-Vt)},c(Ne,Is),c(Ne,rs),c(Ne,Ds),be(Ne,"_defaultColor",null),be(Ne,"_defaultOpacity",1),be(Ne,"_defaultThickness",1),be(Ne,"_type","ink"),be(Ne,"_editorType",i.AnnotationEditorType.INK);let C=Ne;const cs=class cs extends D.AnnotationEditor{constructor(e){super({...e,name:"stampEditor"});c(this,Pi);c(this,ki);c(this,Ui);c(this,ls);c(this,Os);c(this,Hs);c(this,hs);c(this,qi);c(this,Bs);c(this,Ue,null);c(this,qe,null);c(this,bi,null);c(this,di,null);c(this,Ai,null);c(this,Gi,"");c(this,ai,null);c(this,Mi,null);c(this,oi,null);c(this,si,!1);c(this,os,!1);N(this,di,e.bitmapUrl),N(this,Ai,e.bitmapFile)}static initialize(e,R){D.AnnotationEditor.initialize(e,R)}static get supportedTypes(){const e=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,i.shadow)(this,"supportedTypes",e.map(R=>`image/${R}`))}static get supportedTypesStr(){return(0,i.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,R){R.pasteEditor(i.AnnotationEditorType.STAMP,{bitmapFile:e.getAsFile()})}remove(){var e,R;t(this,qe)&&(N(this,Ue,null),this._uiManager.imageManager.deleteId(t(this,qe)),(e=t(this,ai))==null||e.remove(),N(this,ai,null),(R=t(this,Mi))==null||R.disconnect(),N(this,Mi,null),t(this,oi)&&(clearTimeout(t(this,oi)),N(this,oi,null))),super.remove()}rebuild(){if(!this.parent){t(this,qe)&&k(this,Ui,rn).call(this);return}super.rebuild(),this.div!==null&&(t(this,qe)&&t(this,ai)===null&&k(this,Ui,rn).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(t(this,bi)||t(this,Ue)||t(this,di)||t(this,Ai)||t(this,qe))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,R;if(this.width&&(e=this.x,R=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),t(this,Ue)?k(this,ls,Gn).call(this):k(this,Ui,rn).call(this),this.width){const[ct,pt]=this.parentDimensions;this.setAt(e*ct,R*pt,this.width*ct,this.height*pt)}return this.div}getImageForAltText(){return t(this,ai)}static deserialize(e,R,ct){if(e instanceof _.StampAnnotationElement)return null;const pt=super.deserialize(e,R,ct),{rect:yt,bitmapUrl:It,bitmapId:Wt,isSvg:Mt,accessibilityData:Yt}=e;Wt&&ct.imageManager.isValidId(Wt)?N(pt,qe,Wt):N(pt,di,It),N(pt,si,Mt);const[Vt,we]=pt.pageDimensions;return pt.width=(yt[2]-yt[0])/Vt,pt.height=(yt[3]-yt[1])/we,Yt&&(pt.altTextData=Yt),pt}serialize(e=!1,R=null){if(this.isEmpty())return null;const ct={annotationType:i.AnnotationEditorType.STAMP,bitmapId:t(this,qe),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,si),structTreeParentId:this._structTreeParentId};if(e)return ct.bitmapUrl=k(this,qi,an).call(this,!0),ct.accessibilityData=this.altTextData,ct;const{decorative:pt,altText:yt}=this.altTextData;if(!pt&&yt&&(ct.accessibilityData={type:"Figure",alt:yt}),R===null)return ct;R.stamps||(R.stamps=new Map);const It=t(this,si)?(ct.rect[2]-ct.rect[0])*(ct.rect[3]-ct.rect[1]):null;if(!R.stamps.has(t(this,qe)))R.stamps.set(t(this,qe),{area:It,serialized:ct}),ct.bitmap=k(this,qi,an).call(this,!1);else if(t(this,si)){const Wt=R.stamps.get(t(this,qe));It>Wt.area&&(Wt.area=It,Wt.serialized.bitmap.close(),Wt.serialized.bitmap=k(this,qi,an).call(this,!1))}return ct}};Ue=new WeakMap,qe=new WeakMap,bi=new WeakMap,di=new WeakMap,Ai=new WeakMap,Gi=new WeakMap,ai=new WeakMap,Mi=new WeakMap,oi=new WeakMap,si=new WeakMap,os=new WeakMap,Pi=new WeakSet,_s=function(e,R=!1){if(!e){this.remove();return}N(this,Ue,e.bitmap),R||(N(this,qe,e.id),N(this,si,e.isSvg)),e.file&&N(this,Gi,e.file.name),k(this,ls,Gn).call(this)},ki=new WeakSet,Ss=function(){N(this,bi,null),this._uiManager.enableWaiting(!1),t(this,ai)&&this.div.focus()},Ui=new WeakSet,rn=function(){if(t(this,qe)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(t(this,qe)).then(R=>k(this,Pi,_s).call(this,R,!0)).finally(()=>k(this,ki,Ss).call(this));return}if(t(this,di)){const R=t(this,di);N(this,di,null),this._uiManager.enableWaiting(!0),N(this,bi,this._uiManager.imageManager.getFromUrl(R).then(ct=>k(this,Pi,_s).call(this,ct)).finally(()=>k(this,ki,Ss).call(this)));return}if(t(this,Ai)){const R=t(this,Ai);N(this,Ai,null),this._uiManager.enableWaiting(!0),N(this,bi,this._uiManager.imageManager.getFromFile(R).then(ct=>k(this,Pi,_s).call(this,ct)).finally(()=>k(this,ki,Ss).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=cs.supportedTypesStr,N(this,bi,new Promise(R=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const ct=await this._uiManager.imageManager.getFromFile(e.files[0]);k(this,Pi,_s).call(this,ct)}R()}),e.addEventListener("cancel",()=>{this.remove(),R()})}).finally(()=>k(this,ki,Ss).call(this))),e.click()},ls=new WeakSet,Gn=function(){const{div:e}=this;let{width:R,height:ct}=t(this,Ue);const[pt,yt]=this.pageDimensions,It=.75;if(this.width)R=this.width*pt,ct=this.height*yt;else if(R>It*pt||ct>It*yt){const Vt=Math.min(It*pt/R,It*yt/ct);R*=Vt,ct*=Vt}const[Wt,Mt]=this.parentDimensions;this.setDims(R*Wt/pt,ct*Mt/yt),this._uiManager.enableWaiting(!1);const Yt=N(this,ai,document.createElement("canvas"));e.append(Yt),e.hidden=!1,k(this,hs,Un).call(this,R,ct),k(this,Bs,Aa).call(this),t(this,os)||(this.parent.addUndoableEditor(this),N(this,os,!0)),this._reportTelemetry({action:"inserted_image"}),t(this,Gi)&&Yt.setAttribute("aria-label",t(this,Gi))},Os=new WeakSet,va=function(e,R){var It;const[ct,pt]=this.parentDimensions;this.width=e/ct,this.height=R/pt,this.setDims(e,R),(It=this._initialOptions)!=null&&It.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,t(this,oi)!==null&&clearTimeout(t(this,oi)),N(this,oi,setTimeout(()=>{N(this,oi,null),k(this,hs,Un).call(this,e,R)},200))},Hs=new WeakSet,ba=function(e,R){const{width:ct,height:pt}=t(this,Ue);let yt=ct,It=pt,Wt=t(this,Ue);for(;yt>2*e||It>2*R;){const Mt=yt,Yt=It;yt>2*e&&(yt=yt>=16384?Math.floor(yt/2)-1:Math.ceil(yt/2)),It>2*R&&(It=It>=16384?Math.floor(It/2)-1:Math.ceil(It/2));const Vt=new OffscreenCanvas(yt,It);Vt.getContext("2d").drawImage(Wt,0,0,Mt,Yt,0,0,yt,It),Wt=Vt.transferToImageBitmap()}return Wt},hs=new WeakSet,Un=function(e,R){e=Math.ceil(e),R=Math.ceil(R);const ct=t(this,ai);if(!ct||ct.width===e&&ct.height===R)return;ct.width=e,ct.height=R;const pt=t(this,si)?t(this,Ue):k(this,Hs,ba).call(this,e,R);if(this._uiManager.hasMLManager&&!this.hasAltText()){const It=new OffscreenCanvas(e,R);It.getContext("2d").drawImage(pt,0,0,pt.width,pt.height,0,0,e,R),It.convertToBlob().then(Wt=>{const Mt=new FileReader;Mt.onload=()=>{const Yt=Mt.result;this._uiManager.mlGuess({service:"image-to-text",request:{imageData:Yt}}).then(Vt=>{const we=(Vt==null?void 0:Vt.output)||"";this.parent&&we&&!this.hasAltText()&&(this.altTextData={altText:we,decorative:!1})})},Mt.readAsDataURL(Wt)})}const yt=ct.getContext("2d");yt.filter=this._uiManager.hcmFilter,yt.drawImage(pt,0,0,pt.width,pt.height,0,0,e,R)},qi=new WeakSet,an=function(e){if(e){if(t(this,si)){const ct=this._uiManager.imageManager.getSvgUrl(t(this,qe));if(ct)return ct}const R=document.createElement("canvas");return{width:R.width,height:R.height}=t(this,Ue),R.getContext("2d").drawImage(t(this,Ue),0,0),R.toDataURL()}if(t(this,si)){const[R,ct]=this.pageDimensions,pt=Math.round(this.width*R*tt.PixelsPerInch.PDF_TO_CSS_UNITS),yt=Math.round(this.height*ct*tt.PixelsPerInch.PDF_TO_CSS_UNITS),It=new OffscreenCanvas(pt,yt);return It.getContext("2d").drawImage(t(this,Ue),0,0,t(this,Ue).width,t(this,Ue).height,0,0,pt,yt),It.transferToImageBitmap()}return structuredClone(t(this,Ue))},Bs=new WeakSet,Aa=function(){N(this,Mi,new ResizeObserver(e=>{const R=e[0].contentRect;R.width&&R.height&&k(this,Os,va).call(this,R.width,R.height)})),t(this,Mi).observe(this.div)},be(cs,"_type","stamp"),be(cs,"_editorType",i.AnnotationEditorType.STAMP);let q=cs;const ni=class ni{constructor({uiManager:vt,pageIndex:e,div:R,accessibilityManager:ct,annotationLayer:pt,drawLayer:yt,textLayer:It,viewport:Wt,l10n:Mt}){c(this,zs);c(this,ds);c(this,us);c(this,ps);c(this,Vi);c(this,Ri,void 0);c(this,Wi,!1);c(this,li,null);c(this,Fi,null);c(this,ui,null);c(this,pi,null);c(this,gi,null);c(this,Ze,new Map);c(this,yi,!1);c(this,$i,!1);c(this,Xi,!1);c(this,Ye,null);c(this,pe,void 0);const Yt=[...t(ni,wi).values()];if(!ni._initialized){ni._initialized=!0;for(const Vt of Yt)Vt.initialize(Mt,vt)}vt.registerEditorTypes(Yt),N(this,pe,vt),this.pageIndex=e,this.div=R,N(this,Ri,ct),N(this,li,pt),this.viewport=Wt,N(this,Ye,It),this.drawLayer=yt,t(this,pe).addLayer(this)}get isEmpty(){return t(this,Ze).size===0}get isInvisible(){return this.isEmpty&&t(this,pe).getMode()===i.AnnotationEditorType.NONE}updateToolbar(vt){t(this,pe).updateToolbar(vt)}updateMode(vt=t(this,pe).getMode()){switch(k(this,Vi,on).call(this),vt){case i.AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case i.AnnotationEditorType.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case i.AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const R of t(ni,wi).values())e.toggle(`${R._type}Editing`,vt===R._editorType);this.div.hidden=!1}hasTextLayer(vt){var e;return vt===((e=t(this,Ye))==null?void 0:e.div)}addInkEditorIfNeeded(vt){if(t(this,pe).getMode()===i.AnnotationEditorType.INK){if(!vt){for(const e of t(this,Ze).values())if(e.isEmpty()){e.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(vt){t(this,pe).setEditingState(vt)}addCommands(vt){t(this,pe).addCommands(vt)}togglePointerEvents(vt=!1){this.div.classList.toggle("disabled",!vt)}toggleAnnotationLayerPointerEvents(vt=!1){var e;(e=t(this,li))==null||e.div.classList.toggle("disabled",!vt)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const vt=new Set;for(const R of t(this,Ze).values())R.enableEditing(),R.annotationElementId&&vt.add(R.annotationElementId);if(!t(this,li))return;const e=t(this,li).getEditableAnnotations();for(const R of e){if(R.hide(),t(this,pe).isDeletedAnnotationElement(R.data.id)||vt.has(R.data.id))continue;const ct=this.deserialize(R);ct&&(this.addOrRebuild(ct),ct.enableEditing())}}disable(){var R;N(this,Xi,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const vt=new Set;for(const ct of t(this,Ze).values()){if(ct.disableEditing(),!ct.annotationElementId||ct.serialize()!==null){vt.add(ct.annotationElementId);continue}(R=this.getEditableAnnotation(ct.annotationElementId))==null||R.show(),ct.remove()}if(t(this,li)){const ct=t(this,li).getEditableAnnotations();for(const pt of ct){const{id:yt}=pt.data;vt.has(yt)||t(this,pe).isDeletedAnnotationElement(yt)||pt.show()}}k(this,Vi,on).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const ct of t(ni,wi).values())e.remove(`${ct._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),N(this,Xi,!1)}getEditableAnnotation(vt){var e;return((e=t(this,li))==null?void 0:e.getEditableAnnotation(vt))||null}setActiveEditor(vt){t(this,pe).getActive()!==vt&&t(this,pe).setActiveEditor(vt)}enableTextSelection(){var vt;this.div.tabIndex=-1,(vt=t(this,Ye))!=null&&vt.div&&!t(this,pi)&&(N(this,pi,k(this,zs,ya).bind(this)),t(this,Ye).div.addEventListener("pointerdown",t(this,pi)),t(this,Ye).div.classList.add("highlighting"))}disableTextSelection(){var vt;this.div.tabIndex=0,(vt=t(this,Ye))!=null&&vt.div&&t(this,pi)&&(t(this,Ye).div.removeEventListener("pointerdown",t(this,pi)),N(this,pi,null),t(this,Ye).div.classList.remove("highlighting"))}enableClick(){t(this,ui)||(N(this,ui,this.pointerdown.bind(this)),N(this,Fi,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",t(this,ui)),this.div.addEventListener("pointerup",t(this,Fi)))}disableClick(){t(this,ui)&&(this.div.removeEventListener("pointerdown",t(this,ui)),this.div.removeEventListener("pointerup",t(this,Fi)),N(this,ui,null),N(this,Fi,null))}attach(vt){t(this,Ze).set(vt.id,vt);const{annotationElementId:e}=vt;e&&t(this,pe).isDeletedAnnotationElement(e)&&t(this,pe).removeDeletedAnnotationElement(vt)}detach(vt){var e;t(this,Ze).delete(vt.id),(e=t(this,Ri))==null||e.removePointerInTextLayer(vt.contentDiv),!t(this,Xi)&&vt.annotationElementId&&t(this,pe).addDeletedAnnotationElement(vt)}remove(vt){this.detach(vt),t(this,pe).removeEditor(vt),vt.div.remove(),vt.isAttachedToDOM=!1,t(this,$i)||this.addInkEditorIfNeeded(!1)}changeParent(vt){var e;vt.parent!==this&&(vt.annotationElementId&&(t(this,pe).addDeletedAnnotationElement(vt.annotationElementId),D.AnnotationEditor.deleteAnnotationElement(vt),vt.annotationElementId=null),this.attach(vt),(e=vt.parent)==null||e.detach(vt),vt.setParent(this),vt.div&&vt.isAttachedToDOM&&(vt.div.remove(),this.div.append(vt.div)))}add(vt){if(!(vt.parent===this&&vt.isAttachedToDOM)){if(this.changeParent(vt),t(this,pe).addEditor(vt),this.attach(vt),!vt.isAttachedToDOM){const e=vt.render();this.div.append(e),vt.isAttachedToDOM=!0}vt.fixAndSetPosition(),vt.onceAdded(),t(this,pe).addToAnnotationStorage(vt),vt._reportTelemetry(vt.telemetryInitialData)}}moveEditorInDOM(vt){var R;if(!vt.isAttachedToDOM)return;const{activeElement:e}=document;vt.div.contains(e)&&!t(this,gi)&&(vt._focusEventsAllowed=!1,N(this,gi,setTimeout(()=>{N(this,gi,null),vt.div.contains(document.activeElement)?vt._focusEventsAllowed=!0:(vt.div.addEventListener("focusin",()=>{vt._focusEventsAllowed=!0},{once:!0}),e.focus())},0))),vt._structTreeParentId=(R=t(this,Ri))==null?void 0:R.moveElementInDOM(this.div,vt.div,vt.contentDiv,!0)}addOrRebuild(vt){vt.needsToBeRebuilt()?(vt.parent||(vt.parent=this),vt.rebuild(),vt.show()):this.add(vt)}addUndoableEditor(vt){const e=()=>vt._uiManager.rebuild(vt),R=()=>{vt.remove()};this.addCommands({cmd:e,undo:R,mustExec:!1})}getNextId(){return t(this,pe).getId()}canCreateNewEmptyEditor(){var vt;return(vt=t(this,ds,qn))==null?void 0:vt.canCreateNewEmptyEditor()}pasteEditor(vt,e){t(this,pe).updateToolbar(vt),t(this,pe).updateMode(vt);const{offsetX:R,offsetY:ct}=k(this,ps,$n).call(this),pt=this.getNextId(),yt=k(this,us,Wn).call(this,{parent:this,id:pt,x:R,y:ct,uiManager:t(this,pe),isCentered:!0,...e});yt&&this.add(yt)}deserialize(vt){var e;return((e=t(ni,wi).get(vt.annotationType??vt.annotationEditorType))==null?void 0:e.deserialize(vt,this,t(this,pe)))||null}createAndAddNewEditor(vt,e,R={}){const ct=this.getNextId(),pt=k(this,us,Wn).call(this,{parent:this,id:ct,x:vt.offsetX,y:vt.offsetY,uiManager:t(this,pe),isCentered:e,...R});return pt&&this.add(pt),pt}addNewEditor(){this.createAndAddNewEditor(k(this,ps,$n).call(this),!0)}setSelected(vt){t(this,pe).setSelected(vt)}toggleSelected(vt){t(this,pe).toggleSelected(vt)}isSelected(vt){return t(this,pe).isSelected(vt)}unselect(vt){t(this,pe).unselect(vt)}pointerup(vt){const{isMac:e}=i.FeatureTest.platform;if(!(vt.button!==0||vt.ctrlKey&&e)&&vt.target===this.div&&t(this,yi)){if(N(this,yi,!1),!t(this,Wi)){N(this,Wi,!0);return}if(t(this,pe).getMode()===i.AnnotationEditorType.STAMP){t(this,pe).unselectAll();return}this.createAndAddNewEditor(vt,!1)}}pointerdown(vt){if(t(this,pe).getMode()===i.AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),t(this,yi)){N(this,yi,!1);return}const{isMac:e}=i.FeatureTest.platform;if(vt.button!==0||vt.ctrlKey&&e||vt.target!==this.div)return;N(this,yi,!0);const R=t(this,pe).getActive();N(this,Wi,!R||R.isEmpty())}findNewParent(vt,e,R){const ct=t(this,pe).findParent(e,R);return ct===null||ct===this?!1:(ct.changeParent(vt),!0)}destroy(){var vt,e;((vt=t(this,pe).getActive())==null?void 0:vt.parent)===this&&(t(this,pe).commitOrRemove(),t(this,pe).setActiveEditor(null)),t(this,gi)&&(clearTimeout(t(this,gi)),N(this,gi,null));for(const R of t(this,Ze).values())(e=t(this,Ri))==null||e.removePointerInTextLayer(R.contentDiv),R.setParent(null),R.isAttachedToDOM=!1,R.div.remove();this.div=null,t(this,Ze).clear(),t(this,pe).removeLayer(this)}render({viewport:vt}){this.viewport=vt,(0,tt.setLayerDimensions)(this.div,vt);for(const e of t(this,pe).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:vt}){t(this,pe).commitOrRemove(),k(this,Vi,on).call(this);const e=this.viewport.rotation,R=vt.rotation;if(this.viewport=vt,(0,tt.setLayerDimensions)(this.div,{rotation:R}),e!==R)for(const ct of t(this,Ze).values())ct.rotate(R);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:vt,pageHeight:e}=this.viewport.rawDims;return[vt,e]}get scale(){return t(this,pe).viewParameters.realScale}};Ri=new WeakMap,Wi=new WeakMap,li=new WeakMap,Fi=new WeakMap,ui=new WeakMap,pi=new WeakMap,gi=new WeakMap,Ze=new WeakMap,yi=new WeakMap,$i=new WeakMap,Xi=new WeakMap,Ye=new WeakMap,pe=new WeakMap,wi=new WeakMap,zs=new WeakSet,ya=function(vt){if(t(this,pe).unselectAll(),vt.target===t(this,Ye).div){const{isMac:e}=i.FeatureTest.platform;if(vt.button!==0||vt.ctrlKey&&e)return;t(this,pe).showAllEditors("highlight",!0,!0),t(this,Ye).div.classList.add("free"),j.startHighlighting(this,t(this,pe).direction==="ltr",vt),t(this,Ye).div.addEventListener("pointerup",()=>{t(this,Ye).div.classList.remove("free")},{once:!0}),vt.preventDefault()}},ds=new WeakSet,qn=function(){return t(ni,wi).get(t(this,pe).getMode())},us=new WeakSet,Wn=function(vt){const e=t(this,ds,qn);return e?new e.prototype.constructor(vt):null},ps=new WeakSet,$n=function(){const{x:vt,y:e,width:R,height:ct}=this.div.getBoundingClientRect(),pt=Math.max(0,vt),yt=Math.max(0,e),It=Math.min(window.innerWidth,vt+R),Wt=Math.min(window.innerHeight,e+ct),Mt=(pt+It)/2-vt,Yt=(yt+Wt)/2-e,[Vt,we]=this.viewport.rotation%180===0?[Mt,Yt]:[Yt,Mt];return{offsetX:Vt,offsetY:we}},Vi=new WeakSet,on=function(){N(this,$i,!0);for(const vt of t(this,Ze).values())vt.isEmpty()&&vt.remove();N(this,$i,!1)},be(ni,"_initialized",!1),c(ni,wi,new Map([z,C,q,j].map(vt=>[vt._editorType,vt])));let $=ni},259:(f,O,w)=>{var nt,z,P,F,tt,j,C,q,$,et,ut,st,I,Xn,W,Vn,Q,wa,At,Ni,Ct,xa,wt,xi;w.d(O,{ColorPicker:()=>_});var i=w(292),D=w(830),b=w(419);const Pt=class Pt{constructor({editor:at=null,uiManager:bt=null}){c(this,I);c(this,W);c(this,Q);c(this,At);c(this,Ct);c(this,wt);c(this,nt,k(this,Q,wa).bind(this));c(this,z,k(this,Ct,xa).bind(this));c(this,P,null);c(this,F,null);c(this,tt,void 0);c(this,j,null);c(this,C,!1);c(this,q,!1);c(this,$,null);c(this,et,void 0);c(this,ut,null);c(this,st,void 0);var kt;at?(N(this,q,!1),N(this,st,i.AnnotationEditorParamsType.HIGHLIGHT_COLOR),N(this,$,at)):(N(this,q,!0),N(this,st,i.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR)),N(this,ut,(at==null?void 0:at._uiManager)||bt),N(this,et,t(this,ut)._eventBus),N(this,tt,(at==null?void 0:at.color)||((kt=t(this,ut))==null?void 0:kt.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return(0,i.shadow)(this,"_keyboardManager",new D.KeyboardManager([[["Escape","mac+Escape"],Pt.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Pt.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Pt.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Pt.prototype._moveToPrevious],[["Home","mac+Home"],Pt.prototype._moveToBeginning],[["End","mac+End"],Pt.prototype._moveToEnd]]))}renderButton(){const at=N(this,P,document.createElement("button"));at.className="colorPicker",at.tabIndex="0",at.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),at.setAttribute("aria-haspopup",!0),at.addEventListener("click",k(this,At,Ni).bind(this)),at.addEventListener("keydown",t(this,nt));const bt=N(this,F,document.createElement("span"));return bt.className="swatch",bt.setAttribute("aria-hidden",!0),bt.style.backgroundColor=t(this,tt),at.append(bt),at}renderMainDropdown(){const at=N(this,j,k(this,I,Xn).call(this));return at.setAttribute("aria-orientation","horizontal"),at.setAttribute("aria-labelledby","highlightColorPickerLabel"),at}_colorSelectFromKeyboard(at){if(at.target===t(this,P)){k(this,At,Ni).call(this,at);return}const bt=at.target.getAttribute("data-color");bt&&k(this,W,Vn).call(this,bt,at)}_moveToNext(at){var bt,kt;if(!t(this,wt,xi)){k(this,At,Ni).call(this,at);return}if(at.target===t(this,P)){(bt=t(this,j).firstChild)==null||bt.focus();return}(kt=at.target.nextSibling)==null||kt.focus()}_moveToPrevious(at){var bt,kt;if(at.target===((bt=t(this,j))==null?void 0:bt.firstChild)||at.target===t(this,P)){t(this,wt,xi)&&this._hideDropdownFromKeyboard();return}t(this,wt,xi)||k(this,At,Ni).call(this,at),(kt=at.target.previousSibling)==null||kt.focus()}_moveToBeginning(at){var bt;if(!t(this,wt,xi)){k(this,At,Ni).call(this,at);return}(bt=t(this,j).firstChild)==null||bt.focus()}_moveToEnd(at){var bt;if(!t(this,wt,xi)){k(this,At,Ni).call(this,at);return}(bt=t(this,j).lastChild)==null||bt.focus()}hideDropdown(){var at;(at=t(this,j))==null||at.classList.add("hidden"),window.removeEventListener("pointerdown",t(this,z))}_hideDropdownFromKeyboard(){var at;if(!t(this,q)){if(!t(this,wt,xi)){(at=t(this,$))==null||at.unselect();return}this.hideDropdown(),t(this,P).focus({preventScroll:!0,focusVisible:t(this,C)})}}updateColor(at){if(t(this,F)&&(t(this,F).style.backgroundColor=at),!t(this,j))return;const bt=t(this,ut).highlightColors.values();for(const kt of t(this,j).children)kt.setAttribute("aria-selected",bt.next().value===at)}destroy(){var at,bt;(at=t(this,P))==null||at.remove(),N(this,P,null),N(this,F,null),(bt=t(this,j))==null||bt.remove(),N(this,j,null)}};nt=new WeakMap,z=new WeakMap,P=new WeakMap,F=new WeakMap,tt=new WeakMap,j=new WeakMap,C=new WeakMap,q=new WeakMap,$=new WeakMap,et=new WeakMap,ut=new WeakMap,st=new WeakMap,I=new WeakSet,Xn=function(){const at=document.createElement("div");at.addEventListener("contextmenu",b.noContextMenu),at.className="dropdown",at.role="listbox",at.setAttribute("aria-multiselectable",!1),at.setAttribute("aria-orientation","vertical"),at.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[bt,kt]of t(this,ut).highlightColors){const Rt=document.createElement("button");Rt.tabIndex="0",Rt.role="option",Rt.setAttribute("data-color",kt),Rt.title=bt,Rt.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${bt}`);const Ut=document.createElement("span");Rt.append(Ut),Ut.className="swatch",Ut.style.backgroundColor=kt,Rt.setAttribute("aria-selected",kt===t(this,tt)),Rt.addEventListener("click",k(this,W,Vn).bind(this,kt)),at.append(Rt)}return at.addEventListener("keydown",t(this,nt)),at},W=new WeakSet,Vn=function(at,bt){bt.stopPropagation(),t(this,et).dispatch("switchannotationeditorparams",{source:this,type:t(this,st),value:at})},Q=new WeakSet,wa=function(at){Pt._keyboardManager.exec(this,at)},At=new WeakSet,Ni=function(at){if(t(this,wt,xi)){this.hideDropdown();return}if(N(this,C,at.detail===0),window.addEventListener("pointerdown",t(this,z)),t(this,j)){t(this,j).classList.remove("hidden");return}const bt=N(this,j,k(this,I,Xn).call(this));t(this,P).append(bt)},Ct=new WeakSet,xa=function(at){var bt;(bt=t(this,j))!=null&&bt.contains(at.target)||this.hideDropdown()},wt=new WeakSet,xi=function(){return t(this,j)&&!t(this,j).classList.contains("hidden")};let _=Pt},310:(f,O,w)=>{var F,tt,j,C,q,$,et,ut,Kn,V,W,H,Q,ot,At,Dt,Ct,Nt,wt,Tt,Pt,Et,at,bt,kt,Rt,Ut,Kt,re,_e,ce,Yn,me,Qn,oe,Jn,se,_a,ne,Sa,s,Zn,d,tr,l,er,A,Ea,u,Ca,h,Ta,a,La,M,ir,X,Es;w.d(O,{AnnotationEditor:()=>z});var i=w(830),D=w(292),b=w(419);const I=class I{constructor(p){c(this,ut);c(this,F,"");c(this,tt,!1);c(this,j,null);c(this,C,null);c(this,q,null);c(this,$,!1);c(this,et,null);N(this,et,p)}static initialize(p){I._l10nPromise||(I._l10nPromise=p)}async render(){const p=N(this,j,document.createElement("button"));p.className="altText";const L=await I._l10nPromise.get("pdfjs-editor-alt-text-button-label");p.textContent=L,p.setAttribute("aria-label",L),p.tabIndex="0",p.addEventListener("contextmenu",b.noContextMenu),p.addEventListener("pointerdown",E=>E.stopPropagation());const J=E=>{E.preventDefault(),t(this,et)._uiManager.editAltText(t(this,et))};return p.addEventListener("click",J,{capture:!0}),p.addEventListener("keydown",E=>{E.target===p&&E.key==="Enter"&&(N(this,$,!0),J(E))}),await k(this,ut,Kn).call(this),p}finish(){t(this,j)&&(t(this,j).focus({focusVisible:t(this,$)}),N(this,$,!1))}isEmpty(){return!t(this,F)&&!t(this,tt)}get data(){return{altText:t(this,F),decorative:t(this,tt)}}set data({altText:p,decorative:L}){t(this,F)===p&&t(this,tt)===L||(N(this,F,p),N(this,tt,L),k(this,ut,Kn).call(this))}toggle(p=!1){t(this,j)&&(!p&&t(this,q)&&(clearTimeout(t(this,q)),N(this,q,null)),t(this,j).disabled=!p)}destroy(){var p;(p=t(this,j))==null||p.remove(),N(this,j,null),N(this,C,null)}};F=new WeakMap,tt=new WeakMap,j=new WeakMap,C=new WeakMap,q=new WeakMap,$=new WeakMap,et=new WeakMap,ut=new WeakSet,Kn=async function(){var J,E;const p=t(this,j);if(!p)return;if(!t(this,F)&&!t(this,tt)){p.classList.remove("done"),(J=t(this,C))==null||J.remove();return}p.classList.add("done"),I._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(v=>{p.setAttribute("aria-label",v)});let L=t(this,C);if(!L){N(this,C,L=document.createElement("span")),L.className="tooltip",L.setAttribute("role","tooltip");const v=L.id=`alt-text-tooltip-${t(this,et).id}`;p.setAttribute("aria-describedby",v);const G=100;p.addEventListener("mouseenter",()=>{N(this,q,setTimeout(()=>{N(this,q,null),t(this,C).classList.add("show"),t(this,et)._reportTelemetry({action:"alt_text_tooltip"})},G))}),p.addEventListener("mouseleave",()=>{var Y;t(this,q)&&(clearTimeout(t(this,q)),N(this,q,null)),(Y=t(this,C))==null||Y.classList.remove("show")})}L.innerText=t(this,tt)?await I._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):t(this,F),L.parentNode||p.append(L),(E=t(this,et).getImageForAltText())==null||E.setAttribute("aria-describedby",L.id)},be(I,"_l10nPromise",null);let _=I;var nt=w(362);const K=class K{constructor(p){c(this,ce);c(this,oe);c(this,se);c(this,ne);c(this,s);c(this,d);c(this,l);c(this,A);c(this,u);c(this,h);c(this,a);c(this,M);c(this,X);c(this,V,null);c(this,W,null);c(this,H,!1);c(this,Q,!1);c(this,ot,null);c(this,At,null);c(this,Dt,this.focusin.bind(this));c(this,Ct,this.focusout.bind(this));c(this,Nt,null);c(this,wt,"");c(this,Tt,!1);c(this,Pt,null);c(this,Et,!1);c(this,at,!1);c(this,bt,!1);c(this,kt,null);c(this,Rt,0);c(this,Ut,0);c(this,Kt,null);be(this,"_initialOptions",Object.create(null));be(this,"_isVisible",!0);be(this,"_uiManager",null);be(this,"_focusEventsAllowed",!0);be(this,"_l10nPromise",null);c(this,re,!1);c(this,_e,K._zIndex++);this.constructor===K&&(0,D.unreachable)("Cannot initialize AnnotationEditor."),this.parent=p.parent,this.id=p.id,this.width=this.height=null,this.pageIndex=p.parent.pageIndex,this.name=p.name,this.div=null,this._uiManager=p.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=p.isCentered,this._structTreeParentId=null;const{rotation:L,rawDims:{pageWidth:J,pageHeight:E,pageX:v,pageY:G}}=this.parent.viewport;this.rotation=L,this.pageRotation=(360+L-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[J,E],this.pageTranslation=[v,G];const[Y,ht]=this.parentDimensions;this.x=p.x/Y,this.y=p.y/ht,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const p=K.prototype._resizeWithKeyboard,L=i.AnnotationEditorUIManager.TRANSLATE_SMALL,J=i.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,D.shadow)(this,"_resizerKeyboardManager",new i.KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],p,{args:[-L,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],p,{args:[-J,0]}],[["ArrowRight","mac+ArrowRight"],p,{args:[L,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],p,{args:[J,0]}],[["ArrowUp","mac+ArrowUp"],p,{args:[0,-L]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],p,{args:[0,-J]}],[["ArrowDown","mac+ArrowDown"],p,{args:[0,L]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],p,{args:[0,J]}],[["Escape","mac+Escape"],K.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,D.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(p){const L=new P({id:p.parent.getNextId(),parent:p.parent,uiManager:p._uiManager});L.annotationElementId=p.annotationElementId,L.deleted=!0,L._uiManager.addToAnnotationStorage(L)}static initialize(p,L,J){if(K._l10nPromise||(K._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(v=>[v,p.get(v.replaceAll(/([A-Z])/g,G=>`-${G.toLowerCase()}`))]))),J==null?void 0:J.strings)for(const v of J.strings)K._l10nPromise.set(v,p.get(v));if(K._borderLineWidth!==-1)return;const E=getComputedStyle(document.documentElement);K._borderLineWidth=parseFloat(E.getPropertyValue("--outline-width"))||0}static updateDefaultParams(p,L){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(p){return!1}static paste(p,L){(0,D.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return t(this,re)}set _isDraggable(p){var L;N(this,re,p),(L=this.div)==null||L.classList.toggle("draggable",p)}get isEnterHandled(){return!0}center(){const[p,L]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*L/(p*2),this.y+=this.width*p/(L*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*L/(p*2),this.y-=this.width*p/(L*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(p){this._uiManager.addCommands(p)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,_e)}setParent(p){p!==null?(this.pageIndex=p.pageIndex,this.pageDimensions=p.pageDimensions):k(this,X,Es).call(this),this.parent=p}focusin(p){this._focusEventsAllowed&&(t(this,Tt)?N(this,Tt,!1):this.parent.setSelected(this))}focusout(p){var L,J;!this._focusEventsAllowed||!this.isAttachedToDOM||(L=p.relatedTarget)!=null&&L.closest(`#${this.id}`)||(p.preventDefault(),(J=this.parent)!=null&&J.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(p,L,J,E){const[v,G]=this.parentDimensions;[J,E]=this.screenToPageTranslation(J,E),this.x=(p+J)/v,this.y=(L+E)/G,this.fixAndSetPosition()}translate(p,L){k(this,ce,Yn).call(this,this.parentDimensions,p,L)}translateInPage(p,L){t(this,Pt)||N(this,Pt,[this.x,this.y]),k(this,ce,Yn).call(this,this.pageDimensions,p,L),this.div.scrollIntoView({block:"nearest"})}drag(p,L){t(this,Pt)||N(this,Pt,[this.x,this.y]);const[J,E]=this.parentDimensions;if(this.x+=p/J,this.y+=L/E,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:gt,y:xt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,gt,xt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:v,y:G}=this;const[Y,ht]=this.getBaseTranslation();v+=Y,G+=ht,this.div.style.left=`${(100*v).toFixed(2)}%`,this.div.style.top=`${(100*G).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!t(this,Pt)&&(t(this,Pt)[0]!==this.x||t(this,Pt)[1]!==this.y)}getBaseTranslation(){const[p,L]=this.parentDimensions,{_borderLineWidth:J}=K,E=J/p,v=J/L;switch(this.rotation){case 90:return[-E,v];case 180:return[E,v];case 270:return[E,-v];default:return[-E,-v]}}get _mustFixPosition(){return!0}fixAndSetPosition(p=this.rotation){const[L,J]=this.pageDimensions;let{x:E,y:v,width:G,height:Y}=this;if(G*=L,Y*=J,E*=L,v*=J,this._mustFixPosition)switch(p){case 0:E=Math.max(0,Math.min(L-G,E)),v=Math.max(0,Math.min(J-Y,v));break;case 90:E=Math.max(0,Math.min(L-Y,E)),v=Math.min(J,Math.max(G,v));break;case 180:E=Math.min(L,Math.max(G,E)),v=Math.min(J,Math.max(Y,v));break;case 270:E=Math.min(L,Math.max(Y,E)),v=Math.max(0,Math.min(J-G,v));break}this.x=E/=L,this.y=v/=J;const[ht,gt]=this.getBaseTranslation();E+=ht,v+=gt;const{style:xt}=this.div;xt.left=`${(100*E).toFixed(2)}%`,xt.top=`${(100*v).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(p,L){var J;return k(J=K,me,Qn).call(J,p,L,this.parentRotation)}pageTranslationToScreen(p,L){var J;return k(J=K,me,Qn).call(J,p,L,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:p,pageDimensions:[L,J]}=this,E=L*p,v=J*p;return D.FeatureTest.isCSSRoundSupported?[Math.round(E),Math.round(v)]:[E,v]}setDims(p,L){const[J,E]=this.parentDimensions;this.div.style.width=`${(100*p/J).toFixed(2)}%`,t(this,Q)||(this.div.style.height=`${(100*L/E).toFixed(2)}%`)}fixDims(){const{style:p}=this.div,{height:L,width:J}=p,E=J.endsWith("%"),v=!t(this,Q)&&L.endsWith("%");if(E&&v)return;const[G,Y]=this.parentDimensions;E||(p.width=`${(100*parseFloat(J)/G).toFixed(2)}%`),!t(this,Q)&&!v&&(p.height=`${(100*parseFloat(L)/Y).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var p;(p=t(this,W))==null||p.finish()}async addEditToolbar(){return t(this,Nt)||t(this,at)?t(this,Nt):(N(this,Nt,new nt.EditorToolbar(this)),this.div.append(t(this,Nt).render()),t(this,W)&&t(this,Nt).addAltTextButton(await t(this,W).render()),t(this,Nt))}removeEditToolbar(){var p;t(this,Nt)&&(t(this,Nt).remove(),N(this,Nt,null),(p=t(this,W))==null||p.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){t(this,W)||(_.initialize(K._l10nPromise),N(this,W,new _(this)),await this.addEditToolbar())}get altTextData(){var p;return(p=t(this,W))==null?void 0:p.data}set altTextData(p){t(this,W)&&(t(this,W).data=p)}hasAltText(){var p;return!((p=t(this,W))!=null&&p.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=t(this,H)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",t(this,Dt)),this.div.addEventListener("focusout",t(this,Ct));const[p,L]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*L/p).toFixed(2)}%`,this.div.style.maxHeight=`${(100*p/L).toFixed(2)}%`);const[J,E]=this.getInitialTranslation();return this.translate(J,E),(0,i.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(p){const{isMac:L}=D.FeatureTest.platform;if(p.button!==0||p.ctrlKey&&L){p.preventDefault();return}if(N(this,Tt,!0),this._isDraggable){k(this,A,Ea).call(this,p);return}k(this,l,er).call(this,p)}moveInDOM(){t(this,kt)&&clearTimeout(t(this,kt)),N(this,kt,setTimeout(()=>{var p;N(this,kt,null),(p=this.parent)==null||p.moveEditorInDOM(this)},0))}_setParentAndPosition(p,L,J){p.changeParent(this),this.x=L,this.y=J,this.fixAndSetPosition()}getRect(p,L,J=this.rotation){const E=this.parentScale,[v,G]=this.pageDimensions,[Y,ht]=this.pageTranslation,gt=p/E,xt=L/E,Ft=this.x*v,Xt=this.y*G,ie=this.width*v,ee=this.height*G;switch(J){case 0:return[Ft+gt+Y,G-Xt-xt-ee+ht,Ft+gt+ie+Y,G-Xt-xt+ht];case 90:return[Ft+xt+Y,G-Xt+gt+ht,Ft+xt+ee+Y,G-Xt+gt+ie+ht];case 180:return[Ft-gt-ie+Y,G-Xt+xt+ht,Ft-gt+Y,G-Xt+xt+ee+ht];case 270:return[Ft-xt-ee+Y,G-Xt-gt-ie+ht,Ft-xt+Y,G-Xt-gt+ht];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(p,L){const[J,E,v,G]=p,Y=v-J,ht=G-E;switch(this.rotation){case 0:return[J,L-G,Y,ht];case 90:return[J,L-E,ht,Y];case 180:return[v,L-E,Y,ht];case 270:return[v,L-G,ht,Y];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){N(this,at,!0)}disableEditMode(){N(this,at,!1)}isInEditMode(){return t(this,at)}shouldGetKeyboardEvents(){return t(this,bt)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var p,L;(p=this.div)==null||p.addEventListener("focusin",t(this,Dt)),(L=this.div)==null||L.addEventListener("focusout",t(this,Ct))}rotate(p){}serialize(p=!1,L=null){(0,D.unreachable)("An editor must be serializable")}static deserialize(p,L,J){const E=new this.prototype.constructor({parent:L,id:L.getNextId(),uiManager:J});E.rotation=p.rotation;const[v,G]=E.pageDimensions,[Y,ht,gt,xt]=E.getRectInCurrentCoords(p.rect,G);return E.x=Y/v,E.y=ht/G,E.width=gt/v,E.height=xt/G,E}remove(){if(this.div.removeEventListener("focusin",t(this,Dt)),this.div.removeEventListener("focusout",t(this,Ct)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),t(this,kt)&&(clearTimeout(t(this,kt)),N(this,kt,null)),k(this,X,Es).call(this),this.removeEditToolbar(),t(this,Kt)){for(const p of t(this,Kt).values())clearTimeout(p);N(this,Kt,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(k(this,se,_a).call(this),t(this,ot).classList.remove("hidden"),(0,i.bindEvents)(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(p){if(!this.isResizable||p.target!==this.div||p.key!=="Enter")return;this._uiManager.setSelected(this),N(this,At,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const L=t(this,ot).children;if(!t(this,V)){N(this,V,Array.from(L));const G=k(this,u,Ca).bind(this),Y=k(this,h,Ta).bind(this);for(const ht of t(this,V)){const gt=ht.getAttribute("data-resizer-name");ht.setAttribute("role","spinbutton"),ht.addEventListener("keydown",G),ht.addEventListener("blur",Y),ht.addEventListener("focus",k(this,a,La).bind(this,gt)),K._l10nPromise.get(`pdfjs-editor-resizer-label-${gt}`).then(xt=>ht.setAttribute("aria-label",xt))}}const J=t(this,V)[0];let E=0;for(const G of L){if(G===J)break;E++}const v=(360-this.rotation+this.parentRotation)%360/90*(t(this,V).length/4);if(v!==E){if(v<E)for(let Y=0;Y<E-v;Y++)t(this,ot).append(t(this,ot).firstChild);else if(v>E)for(let Y=0;Y<v-E;Y++)t(this,ot).firstChild.before(t(this,ot).lastChild);let G=0;for(const Y of L){const ht=t(this,V)[G++].getAttribute("data-resizer-name");K._l10nPromise.get(`pdfjs-editor-resizer-label-${ht}`).then(gt=>Y.setAttribute("aria-label",gt))}}k(this,M,ir).call(this,0),N(this,bt,!0),t(this,ot).firstChild.focus({focusVisible:!0}),p.preventDefault(),p.stopImmediatePropagation()}_resizeWithKeyboard(p,L){t(this,bt)&&k(this,d,tr).call(this,t(this,wt),{movementX:p,movementY:L})}_stopResizingWithKeyboard(){k(this,X,Es).call(this),this.div.focus()}select(){var p,L;if(this.makeResizable(),(p=this.div)==null||p.classList.add("selectedEditor"),!t(this,Nt)){this.addEditToolbar().then(()=>{var J,E;(J=this.div)!=null&&J.classList.contains("selectedEditor")&&((E=t(this,Nt))==null||E.show())});return}(L=t(this,Nt))==null||L.show()}unselect(){var p,L,J,E;(p=t(this,ot))==null||p.classList.add("hidden"),(L=this.div)==null||L.classList.remove("selectedEditor"),(J=this.div)!=null&&J.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(E=t(this,Nt))==null||E.hide()}updateParams(p,L){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return t(this,Et)}set isEditing(p){N(this,Et,p),this.parent&&(p?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(p,L){N(this,Q,!0);const J=p/L,{style:E}=this.div;E.aspectRatio=J,E.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(p,L=!1){if(L){t(this,Kt)||N(this,Kt,new Map);const{action:J}=p;let E=t(this,Kt).get(J);E&&clearTimeout(E),E=setTimeout(()=>{this._reportTelemetry(p),t(this,Kt).delete(J),t(this,Kt).size===0&&N(this,Kt,null)},K._telemetryTimeout),t(this,Kt).set(J,E);return}p.type||(p.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:p}})}show(p=this._isVisible){this.div.classList.toggle("hidden",!p),this._isVisible=p}enable(){this.div&&(this.div.tabIndex=0),N(this,H,!1)}disable(){this.div&&(this.div.tabIndex=-1),N(this,H,!0)}};V=new WeakMap,W=new WeakMap,H=new WeakMap,Q=new WeakMap,ot=new WeakMap,At=new WeakMap,Dt=new WeakMap,Ct=new WeakMap,Nt=new WeakMap,wt=new WeakMap,Tt=new WeakMap,Pt=new WeakMap,Et=new WeakMap,at=new WeakMap,bt=new WeakMap,kt=new WeakMap,Rt=new WeakMap,Ut=new WeakMap,Kt=new WeakMap,re=new WeakMap,_e=new WeakMap,ce=new WeakSet,Yn=function([p,L],J,E){[J,E]=this.screenToPageTranslation(J,E),this.x+=J/p,this.y+=E/L,this.fixAndSetPosition()},me=new WeakSet,Qn=function(p,L,J){switch(J){case 90:return[L,-p];case 180:return[-p,-L];case 270:return[-L,p];default:return[p,L]}},oe=new WeakSet,Jn=function(p){switch(p){case 90:{const[L,J]=this.pageDimensions;return[0,-L/J,J/L,0]}case 180:return[-1,0,0,-1];case 270:{const[L,J]=this.pageDimensions;return[0,L/J,-J/L,0]}default:return[1,0,0,1]}},se=new WeakSet,_a=function(){if(t(this,ot))return;N(this,ot,document.createElement("div")),t(this,ot).classList.add("resizers");const p=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const L of p){const J=document.createElement("div");t(this,ot).append(J),J.classList.add("resizer",L),J.setAttribute("data-resizer-name",L),J.addEventListener("pointerdown",k(this,ne,Sa).bind(this,L)),J.addEventListener("contextmenu",b.noContextMenu),J.tabIndex=-1}this.div.prepend(t(this,ot))},ne=new WeakSet,Sa=function(p,L){var ee;L.preventDefault();const{isMac:J}=D.FeatureTest.platform;if(L.button!==0||L.ctrlKey&&J)return;(ee=t(this,W))==null||ee.toggle(!1);const E=k(this,d,tr).bind(this,p),v=this._isDraggable;this._isDraggable=!1;const G={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E,G);const Y=this.x,ht=this.y,gt=this.width,xt=this.height,Ft=this.parent.div.style.cursor,Xt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(L.target).cursor;const ie=()=>{var Ae;this.parent.togglePointerEvents(!0),(Ae=t(this,W))==null||Ae.toggle(!0),this._isDraggable=v,window.removeEventListener("pointerup",ie),window.removeEventListener("blur",ie),window.removeEventListener("pointermove",E,G),this.parent.div.style.cursor=Ft,this.div.style.cursor=Xt,k(this,s,Zn).call(this,Y,ht,gt,xt)};window.addEventListener("pointerup",ie),window.addEventListener("blur",ie)},s=new WeakSet,Zn=function(p,L,J,E){const v=this.x,G=this.y,Y=this.width,ht=this.height;v===p&&G===L&&Y===J&&ht===E||this.addCommands({cmd:()=>{this.width=Y,this.height=ht,this.x=v,this.y=G;const[gt,xt]=this.parentDimensions;this.setDims(gt*Y,xt*ht),this.fixAndSetPosition()},undo:()=>{this.width=J,this.height=E,this.x=p,this.y=L;const[gt,xt]=this.parentDimensions;this.setDims(gt*J,xt*E),this.fixAndSetPosition()},mustExec:!0})},d=new WeakSet,tr=function(p,L){const[J,E]=this.parentDimensions,v=this.x,G=this.y,Y=this.width,ht=this.height,gt=K.MIN_SIZE/J,xt=K.MIN_SIZE/E,Ft=Lt=>Math.round(Lt*1e4)/1e4,Xt=k(this,oe,Jn).call(this,this.rotation),ie=(Lt,Bt)=>[Xt[0]*Lt+Xt[2]*Bt,Xt[1]*Lt+Xt[3]*Bt],ee=k(this,oe,Jn).call(this,360-this.rotation),Ae=(Lt,Bt)=>[ee[0]*Lt+ee[2]*Bt,ee[1]*Lt+ee[3]*Bt];let ve,ke,fe=!1,Pe=!1;switch(p){case"topLeft":fe=!0,ve=(Lt,Bt)=>[0,0],ke=(Lt,Bt)=>[Lt,Bt];break;case"topMiddle":ve=(Lt,Bt)=>[Lt/2,0],ke=(Lt,Bt)=>[Lt/2,Bt];break;case"topRight":fe=!0,ve=(Lt,Bt)=>[Lt,0],ke=(Lt,Bt)=>[0,Bt];break;case"middleRight":Pe=!0,ve=(Lt,Bt)=>[Lt,Bt/2],ke=(Lt,Bt)=>[0,Bt/2];break;case"bottomRight":fe=!0,ve=(Lt,Bt)=>[Lt,Bt],ke=(Lt,Bt)=>[0,0];break;case"bottomMiddle":ve=(Lt,Bt)=>[Lt/2,Bt],ke=(Lt,Bt)=>[Lt/2,0];break;case"bottomLeft":fe=!0,ve=(Lt,Bt)=>[0,Bt],ke=(Lt,Bt)=>[Lt,0];break;case"middleLeft":Pe=!0,ve=(Lt,Bt)=>[0,Bt/2],ke=(Lt,Bt)=>[Lt,Bt/2];break}const ae=ve(Y,ht),B=ke(Y,ht);let T=ie(...B);const rt=Ft(v+T[0]),dt=Ft(G+T[1]);let ft=1,St=1,[_t,$t]=this.screenToPageTranslation(L.movementX,L.movementY);if([_t,$t]=Ae(_t/J,$t/E),fe){const Lt=Math.hypot(Y,ht);ft=St=Math.max(Math.min(Math.hypot(B[0]-ae[0]-_t,B[1]-ae[1]-$t)/Lt,1/Y,1/ht),gt/Y,xt/ht)}else Pe?ft=Math.max(gt,Math.min(1,Math.abs(B[0]-ae[0]-_t)))/Y:St=Math.max(xt,Math.min(1,Math.abs(B[1]-ae[1]-$t)))/ht;const qt=Ft(Y*ft),Ot=Ft(ht*St);T=ie(...ke(qt,Ot));const Qt=rt-T[0],Gt=dt-T[1];this.width=qt,this.height=Ot,this.x=Qt,this.y=Gt,this.setDims(J*qt,E*Ot),this.fixAndSetPosition()},l=new WeakSet,er=function(p){const{isMac:L}=D.FeatureTest.platform;p.ctrlKey&&!L||p.shiftKey||p.metaKey&&L?this.parent.toggleSelected(this):this.parent.setSelected(this)},A=new WeakSet,Ea=function(p){const L=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let J,E;L&&(this.div.classList.add("moving"),J={passive:!0,capture:!0},N(this,Rt,p.clientX),N(this,Ut,p.clientY),E=G=>{const{clientX:Y,clientY:ht}=G,[gt,xt]=this.screenToPageTranslation(Y-t(this,Rt),ht-t(this,Ut));N(this,Rt,Y),N(this,Ut,ht),this._uiManager.dragSelectedEditors(gt,xt)},window.addEventListener("pointermove",E,J));const v=()=>{window.removeEventListener("pointerup",v),window.removeEventListener("blur",v),L&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",E,J)),N(this,Tt,!1),this._uiManager.endDragSession()||k(this,l,er).call(this,p)};window.addEventListener("pointerup",v),window.addEventListener("blur",v)},u=new WeakSet,Ca=function(p){K._resizerKeyboardManager.exec(this,p)},h=new WeakSet,Ta=function(p){var L;t(this,bt)&&((L=p.relatedTarget)==null?void 0:L.parentNode)!==t(this,ot)&&k(this,X,Es).call(this)},a=new WeakSet,La=function(p){N(this,wt,t(this,bt)?p:"")},M=new WeakSet,ir=function(p){if(t(this,V))for(const L of t(this,V))L.tabIndex=p},X=new WeakSet,Es=function(){if(N(this,bt,!1),k(this,M,ir).call(this,-1),t(this,At)){const{savedX:p,savedY:L,savedWidth:J,savedHeight:E}=t(this,At);k(this,s,Zn).call(this,p,L,J,E),N(this,At,null)}},c(K,me),be(K,"_borderLineWidth",-1),be(K,"_colorManager",new i.ColorManager),be(K,"_zIndex",1),be(K,"_telemetryTimeout",1e3);let z=K;class P extends z{constructor(p){super(p),this.annotationElementId=p.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},61:(f,O,w)=>{var P,F,tt,j,Ma,q,ln,et,Pa,st,ka,V,sr,H,Q,ot,At,Dt,Ct,Nt,wt,Tt,Pt,Et,at,bt,kt,Rt,Ut,Kt,re,_e,nr,me,jt,oe,Ce,se,Se,ne,lt,Cs,r,Ts,m,Ra;w.d(O,{FreeOutliner:()=>nt,Outliner:()=>D});var i=w(292);class D{constructor(A,S=0,u=0,o=!0){c(this,j);c(this,q);c(this,et);c(this,st);c(this,V);c(this,P,void 0);c(this,F,[]);c(this,tt,[]);let h=1/0,n=-1/0,a=1/0,g=-1/0;const M=10**-4;for(const{x:L,y:J,width:E,height:v}of A){const G=Math.floor((L-S)/M)*M,Y=Math.ceil((L+E+S)/M)*M,ht=Math.floor((J-S)/M)*M,gt=Math.ceil((J+v+S)/M)*M,xt=[G,ht,gt,!0],Ft=[Y,ht,gt,!1];t(this,F).push(xt,Ft),h=Math.min(h,G),n=Math.max(n,Y),a=Math.min(a,ht),g=Math.max(g,gt)}const y=n-h+2*u,X=g-a+2*u,Z=h-u,K=a-u,it=t(this,F).at(o?-1:-2),p=[it[0],it[2]];for(const L of t(this,F)){const[J,E,v]=L;L[0]=(J-Z)/y,L[1]=(E-K)/X,L[2]=(v-K)/X}N(this,P,{x:Z,y:K,width:y,height:X,lastPoint:p})}getOutlines(){t(this,F).sort((S,u)=>S[0]-u[0]||S[1]-u[1]||S[2]-u[2]);const A=[];for(const S of t(this,F))S[3]?(A.push(...k(this,V,sr).call(this,S)),k(this,et,Pa).call(this,S)):(k(this,st,ka).call(this,S),A.push(...k(this,V,sr).call(this,S)));return k(this,j,Ma).call(this,A)}}P=new WeakMap,F=new WeakMap,tt=new WeakMap,j=new WeakSet,Ma=function(A){const S=[],u=new Set;for(const n of A){const[a,g,M]=n;S.push([a,g,n],[a,M,n])}S.sort((n,a)=>n[1]-a[1]||n[0]-a[0]);for(let n=0,a=S.length;n<a;n+=2){const g=S[n][2],M=S[n+1][2];g.push(M),M.push(g),u.add(g),u.add(M)}const o=[];let h;for(;u.size>0;){const n=u.values().next().value;let[a,g,M,y,X]=n;u.delete(n);let Z=a,K=g;for(h=[a,M],o.push(h);;){let it;if(u.has(y))it=y;else if(u.has(X))it=X;else break;u.delete(it),[a,g,M,y,X]=it,Z!==a&&(h.push(Z,K,a,K===g?g:M),Z=a),K=K===g?M:g}h.push(Z,K)}return new _(o,t(this,P))},q=new WeakSet,ln=function(A){const S=t(this,tt);let u=0,o=S.length-1;for(;u<=o;){const h=u+o>>1,n=S[h][0];if(n===A)return h;n<A?u=h+1:o=h-1}return o+1},et=new WeakSet,Pa=function([,A,S]){const u=k(this,q,ln).call(this,A);t(this,tt).splice(u,0,[A,S])},st=new WeakSet,ka=function([,A,S]){const u=k(this,q,ln).call(this,A);for(let o=u;o<t(this,tt).length;o++){const[h,n]=t(this,tt)[o];if(h!==A)break;if(h===A&&n===S){t(this,tt).splice(o,1);return}}for(let o=u-1;o>=0;o--){const[h,n]=t(this,tt)[o];if(h!==A)break;if(h===A&&n===S){t(this,tt).splice(o,1);return}}},V=new WeakSet,sr=function(A){const[S,u,o]=A,h=[[S,u,o]],n=k(this,q,ln).call(this,o);for(let a=0;a<n;a++){const[g,M]=t(this,tt)[a];for(let y=0,X=h.length;y<X;y++){const[,Z,K]=h[y];if(!(M<=Z||K<=g)){if(Z>=g){if(K>M)h[y][1]=M;else{if(X===1)return[];h.splice(y,1),y--,X--}continue}h[y][2]=g,K>M&&h.push([S,M,K])}}}return h};class b{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(A,S){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof z}}class _ extends b{constructor(S,u){super();c(this,H,void 0);c(this,Q,void 0);N(this,Q,S),N(this,H,u)}toSVGPath(){const S=[];for(const u of t(this,Q)){let[o,h]=u;S.push(`M${o} ${h}`);for(let n=2;n<u.length;n+=2){const a=u[n],g=u[n+1];a===o?(S.push(`V${g}`),h=g):g===h&&(S.push(`H${a}`),o=a)}S.push("Z")}return S.join(" ")}serialize([S,u,o,h],n){const a=[],g=o-S,M=h-u;for(const y of t(this,Q)){const X=new Array(y.length);for(let Z=0;Z<y.length;Z+=2)X[Z]=S+y[Z]*g,X[Z+1]=h-y[Z+1]*M;a.push(X)}return a}get box(){return t(this,H)}}H=new WeakMap,Q=new WeakMap;const he=class he{constructor({x:A,y:S},u,o,h,n,a=0){c(this,_e);c(this,ot,void 0);c(this,At,[]);c(this,Dt,void 0);c(this,Ct,void 0);c(this,Nt,[]);c(this,wt,new Float64Array(18));c(this,Tt,void 0);c(this,Pt,void 0);c(this,Et,void 0);c(this,at,void 0);c(this,bt,void 0);c(this,kt,void 0);c(this,Rt,[]);N(this,ot,u),N(this,kt,h*o),N(this,Ct,n),t(this,wt).set([NaN,NaN,NaN,NaN,A,S],6),N(this,Dt,a),N(this,at,t(he,Ut)*o),N(this,Et,t(he,re)*o),N(this,bt,o),t(this,Rt).push(A,S)}get free(){return!0}isEmpty(){return isNaN(t(this,wt)[8])}add({x:A,y:S}){var xt;N(this,Tt,A),N(this,Pt,S);const[u,o,h,n]=t(this,ot);let[a,g,M,y]=t(this,wt).subarray(8,12);const X=A-M,Z=S-y,K=Math.hypot(X,Z);if(K<t(this,Et))return!1;const it=K-t(this,at),p=it/K,L=p*X,J=p*Z;let E=a,v=g;a=M,g=y,M+=L,y+=J,(xt=t(this,Rt))==null||xt.push(A,S);const G=-J/it,Y=L/it,ht=G*t(this,kt),gt=Y*t(this,kt);return t(this,wt).set(t(this,wt).subarray(2,8),0),t(this,wt).set([M+ht,y+gt],4),t(this,wt).set(t(this,wt).subarray(14,18),12),t(this,wt).set([M-ht,y-gt],16),isNaN(t(this,wt)[6])?(t(this,Nt).length===0&&(t(this,wt).set([a+ht,g+gt],2),t(this,Nt).push(NaN,NaN,NaN,NaN,(a+ht-u)/h,(g+gt-o)/n),t(this,wt).set([a-ht,g-gt],14),t(this,At).push(NaN,NaN,NaN,NaN,(a-ht-u)/h,(g-gt-o)/n)),t(this,wt).set([E,v,a,g,M,y],6),!this.isEmpty()):(t(this,wt).set([E,v,a,g,M,y],6),Math.abs(Math.atan2(v-g,E-a)-Math.atan2(J,L))<Math.PI/2?([a,g,M,y]=t(this,wt).subarray(2,6),t(this,Nt).push(NaN,NaN,NaN,NaN,((a+M)/2-u)/h,((g+y)/2-o)/n),[a,g,E,v]=t(this,wt).subarray(14,18),t(this,At).push(NaN,NaN,NaN,NaN,((E+a)/2-u)/h,((v+g)/2-o)/n),!0):([E,v,a,g,M,y]=t(this,wt).subarray(0,6),t(this,Nt).push(((E+5*a)/6-u)/h,((v+5*g)/6-o)/n,((5*a+M)/6-u)/h,((5*g+y)/6-o)/n,((a+M)/2-u)/h,((g+y)/2-o)/n),[M,y,a,g,E,v]=t(this,wt).subarray(12,18),t(this,At).push(((E+5*a)/6-u)/h,((v+5*g)/6-o)/n,((5*a+M)/6-u)/h,((5*g+y)/6-o)/n,((a+M)/2-u)/h,((g+y)/2-o)/n),!0))}toSVGPath(){if(this.isEmpty())return"";const A=t(this,Nt),S=t(this,At),u=t(this,wt).subarray(4,6),o=t(this,wt).subarray(16,18),[h,n,a,g]=t(this,ot),[M,y,X,Z]=k(this,_e,nr).call(this);if(isNaN(t(this,wt)[6])&&!this.isEmpty())return`M${(t(this,wt)[2]-h)/a} ${(t(this,wt)[3]-n)/g} L${(t(this,wt)[4]-h)/a} ${(t(this,wt)[5]-n)/g} L${M} ${y} L${X} ${Z} L${(t(this,wt)[16]-h)/a} ${(t(this,wt)[17]-n)/g} L${(t(this,wt)[14]-h)/a} ${(t(this,wt)[15]-n)/g} Z`;const K=[];K.push(`M${A[4]} ${A[5]}`);for(let it=6;it<A.length;it+=6)isNaN(A[it])?K.push(`L${A[it+4]} ${A[it+5]}`):K.push(`C${A[it]} ${A[it+1]} ${A[it+2]} ${A[it+3]} ${A[it+4]} ${A[it+5]}`);K.push(`L${(u[0]-h)/a} ${(u[1]-n)/g} L${M} ${y} L${X} ${Z} L${(o[0]-h)/a} ${(o[1]-n)/g}`);for(let it=S.length-6;it>=6;it-=6)isNaN(S[it])?K.push(`L${S[it+4]} ${S[it+5]}`):K.push(`C${S[it]} ${S[it+1]} ${S[it+2]} ${S[it+3]} ${S[it+4]} ${S[it+5]}`);return K.push(`L${S[4]} ${S[5]} Z`),K.join(" ")}getOutlines(){var J;const A=t(this,Nt),S=t(this,At),u=t(this,wt),o=u.subarray(4,6),h=u.subarray(16,18),[n,a,g,M]=t(this,ot),y=new Float64Array((((J=t(this,Rt))==null?void 0:J.length)??0)+2);for(let E=0,v=y.length-2;E<v;E+=2)y[E]=(t(this,Rt)[E]-n)/g,y[E+1]=(t(this,Rt)[E+1]-a)/M;y[y.length-2]=(t(this,Tt)-n)/g,y[y.length-1]=(t(this,Pt)-a)/M;const[X,Z,K,it]=k(this,_e,nr).call(this);if(isNaN(u[6])&&!this.isEmpty()){const E=new Float64Array(36);return E.set([NaN,NaN,NaN,NaN,(u[2]-n)/g,(u[3]-a)/M,NaN,NaN,NaN,NaN,(u[4]-n)/g,(u[5]-a)/M,NaN,NaN,NaN,NaN,X,Z,NaN,NaN,NaN,NaN,K,it,NaN,NaN,NaN,NaN,(u[16]-n)/g,(u[17]-a)/M,NaN,NaN,NaN,NaN,(u[14]-n)/g,(u[15]-a)/M],0),new z(E,y,t(this,ot),t(this,bt),t(this,Dt),t(this,Ct))}const p=new Float64Array(t(this,Nt).length+24+t(this,At).length);let L=A.length;for(let E=0;E<L;E+=2){if(isNaN(A[E])){p[E]=p[E+1]=NaN;continue}p[E]=A[E],p[E+1]=A[E+1]}p.set([NaN,NaN,NaN,NaN,(o[0]-n)/g,(o[1]-a)/M,NaN,NaN,NaN,NaN,X,Z,NaN,NaN,NaN,NaN,K,it,NaN,NaN,NaN,NaN,(h[0]-n)/g,(h[1]-a)/M],L),L+=24;for(let E=S.length-6;E>=6;E-=6)for(let v=0;v<6;v+=2){if(isNaN(S[E+v])){p[L]=p[L+1]=NaN,L+=2;continue}p[L]=S[E+v],p[L+1]=S[E+v+1],L+=2}return p.set([NaN,NaN,NaN,NaN,S[4],S[5]],L),new z(p,y,t(this,ot),t(this,bt),t(this,Dt),t(this,Ct))}};ot=new WeakMap,At=new WeakMap,Dt=new WeakMap,Ct=new WeakMap,Nt=new WeakMap,wt=new WeakMap,Tt=new WeakMap,Pt=new WeakMap,Et=new WeakMap,at=new WeakMap,bt=new WeakMap,kt=new WeakMap,Rt=new WeakMap,Ut=new WeakMap,Kt=new WeakMap,re=new WeakMap,_e=new WeakSet,nr=function(){const A=t(this,wt).subarray(4,6),S=t(this,wt).subarray(16,18),[u,o,h,n]=t(this,ot);return[(t(this,Tt)+(A[0]-S[0])/2-u)/h,(t(this,Pt)+(A[1]-S[1])/2-o)/n,(t(this,Tt)+(S[0]-A[0])/2-u)/h,(t(this,Pt)+(S[1]-A[1])/2-o)/n]},c(he,Ut,8),c(he,Kt,2),c(he,re,t(he,Ut)+t(he,Kt));let nt=he;class z extends b{constructor(S,u,o,h,n,a){super();c(this,lt);c(this,r);c(this,m);c(this,me,void 0);c(this,jt,null);c(this,oe,void 0);c(this,Ce,void 0);c(this,se,void 0);c(this,Se,void 0);c(this,ne,void 0);N(this,ne,S),N(this,se,u),N(this,me,o),N(this,Se,h),N(this,oe,n),N(this,Ce,a),k(this,m,Ra).call(this,a);const{x:g,y:M,width:y,height:X}=t(this,jt);for(let Z=0,K=S.length;Z<K;Z+=2)S[Z]=(S[Z]-g)/y,S[Z+1]=(S[Z+1]-M)/X;for(let Z=0,K=u.length;Z<K;Z+=2)u[Z]=(u[Z]-g)/y,u[Z+1]=(u[Z+1]-M)/X}toSVGPath(){const S=[`M${t(this,ne)[4]} ${t(this,ne)[5]}`];for(let u=6,o=t(this,ne).length;u<o;u+=6){if(isNaN(t(this,ne)[u])){S.push(`L${t(this,ne)[u+4]} ${t(this,ne)[u+5]}`);continue}S.push(`C${t(this,ne)[u]} ${t(this,ne)[u+1]} ${t(this,ne)[u+2]} ${t(this,ne)[u+3]} ${t(this,ne)[u+4]} ${t(this,ne)[u+5]}`)}return S.push("Z"),S.join(" ")}serialize([S,u,o,h],n){const a=o-S,g=h-u;let M,y;switch(n){case 0:M=k(this,lt,Cs).call(this,t(this,ne),S,h,a,-g),y=k(this,lt,Cs).call(this,t(this,se),S,h,a,-g);break;case 90:M=k(this,r,Ts).call(this,t(this,ne),S,u,a,g),y=k(this,r,Ts).call(this,t(this,se),S,u,a,g);break;case 180:M=k(this,lt,Cs).call(this,t(this,ne),o,u,-a,g),y=k(this,lt,Cs).call(this,t(this,se),o,u,-a,g);break;case 270:M=k(this,r,Ts).call(this,t(this,ne),o,h,-a,-g),y=k(this,r,Ts).call(this,t(this,se),o,h,-a,-g);break}return{outline:Array.from(M),points:[Array.from(y)]}}get box(){return t(this,jt)}getNewOutline(S,u){const{x:o,y:h,width:n,height:a}=t(this,jt),[g,M,y,X]=t(this,me),Z=n*y,K=a*X,it=o*y+g,p=h*X+M,L=new nt({x:t(this,se)[0]*Z+it,y:t(this,se)[1]*K+p},t(this,me),t(this,Se),S,t(this,Ce),u??t(this,oe));for(let J=2;J<t(this,se).length;J+=2)L.add({x:t(this,se)[J]*Z+it,y:t(this,se)[J+1]*K+p});return L.getOutlines()}}me=new WeakMap,jt=new WeakMap,oe=new WeakMap,Ce=new WeakMap,se=new WeakMap,Se=new WeakMap,ne=new WeakMap,lt=new WeakSet,Cs=function(S,u,o,h,n){const a=new Float64Array(S.length);for(let g=0,M=S.length;g<M;g+=2)a[g]=u+S[g]*h,a[g+1]=o+S[g+1]*n;return a},r=new WeakSet,Ts=function(S,u,o,h,n){const a=new Float64Array(S.length);for(let g=0,M=S.length;g<M;g+=2)a[g]=u+S[g+1]*h,a[g+1]=o+S[g]*n;return a},m=new WeakSet,Ra=function(S){const u=t(this,ne);let o=u[4],h=u[5],n=o,a=h,g=o,M=h,y=o,X=h;const Z=S?Math.max:Math.min;for(let J=6,E=u.length;J<E;J+=6){if(isNaN(u[J]))n=Math.min(n,u[J+4]),a=Math.min(a,u[J+5]),g=Math.max(g,u[J+4]),M=Math.max(M,u[J+5]),X<u[J+5]?(y=u[J+4],X=u[J+5]):X===u[J+5]&&(y=Z(y,u[J+4]));else{const v=i.Util.bezierBoundingBox(o,h,...u.slice(J,J+6));n=Math.min(n,v[0]),a=Math.min(a,v[1]),g=Math.max(g,v[2]),M=Math.max(M,v[3]),X<v[3]?(y=v[2],X=v[3]):X===v[3]&&(y=Z(y,v[2]))}o=u[J+4],h=u[J+5]}const K=n-t(this,oe),it=a-t(this,oe),p=g-n+2*t(this,oe),L=M-a+2*t(this,oe);N(this,jt,{x:K,y:it,width:p,height:L,lastPoint:[y,X]})}},362:(f,O,w)=>{var _,nt,z,P,F,Fa,j,Ia,q,Da,et,hn,st,Na,V,rr,Q,ot,At,Dt,Oa,Nt,Ha,Tt,Ba;w.d(O,{EditorToolbar:()=>D,HighlightToolbar:()=>b});var i=w(419);const H=class H{constructor(at){c(this,j);c(this,q);c(this,et);c(this,st);c(this,V);c(this,_,null);c(this,nt,null);c(this,z,void 0);c(this,P,null);N(this,z,at)}render(){const at=N(this,_,document.createElement("div"));at.className="editToolbar",at.setAttribute("role","toolbar"),at.addEventListener("contextmenu",i.noContextMenu),at.addEventListener("pointerdown",k(H,F,Fa));const bt=N(this,P,document.createElement("div"));bt.className="buttons",at.append(bt);const kt=t(this,z).toolbarPosition;if(kt){const{style:Rt}=at,Ut=t(this,z)._uiManager.direction==="ltr"?1-kt[0]:kt[0];Rt.insetInlineEnd=`${100*Ut}%`,Rt.top=`calc(${100*kt[1]}% + var(--editor-toolbar-vert-offset))`}return k(this,st,Na).call(this),at}hide(){var at;t(this,_).classList.add("hidden"),(at=t(this,nt))==null||at.hideDropdown()}show(){t(this,_).classList.remove("hidden")}addAltTextButton(at){k(this,et,hn).call(this,at),t(this,P).prepend(at,t(this,V,rr))}addColorPicker(at){N(this,nt,at);const bt=at.renderButton();k(this,et,hn).call(this,bt),t(this,P).prepend(bt,t(this,V,rr))}remove(){var at;t(this,_).remove(),(at=t(this,nt))==null||at.destroy(),N(this,nt,null)}};_=new WeakMap,nt=new WeakMap,z=new WeakMap,P=new WeakMap,F=new WeakSet,Fa=function(at){at.stopPropagation()},j=new WeakSet,Ia=function(at){t(this,z)._focusEventsAllowed=!1,at.preventDefault(),at.stopPropagation()},q=new WeakSet,Da=function(at){t(this,z)._focusEventsAllowed=!0,at.preventDefault(),at.stopPropagation()},et=new WeakSet,hn=function(at){at.addEventListener("focusin",k(this,j,Ia).bind(this),{capture:!0}),at.addEventListener("focusout",k(this,q,Da).bind(this),{capture:!0}),at.addEventListener("contextmenu",i.noContextMenu)},st=new WeakSet,Na=function(){const at=document.createElement("button");at.className="delete",at.tabIndex=0,at.setAttribute("data-l10n-id",`pdfjs-editor-remove-${t(this,z).editorType}-button`),k(this,et,hn).call(this,at),at.addEventListener("click",bt=>{t(this,z)._uiManager.delete()}),t(this,P).append(at)},V=new WeakSet,rr=function(){const at=document.createElement("div");return at.className="divider",at},c(H,F);let D=H;class b{constructor(at){c(this,Dt);c(this,Nt);c(this,Tt);c(this,Q,null);c(this,ot,null);c(this,At,void 0);N(this,At,at)}show(at,bt,kt){const[Rt,Ut]=k(this,Nt,Ha).call(this,bt,kt),{style:Kt}=t(this,ot)||N(this,ot,k(this,Dt,Oa).call(this));at.append(t(this,ot)),Kt.insetInlineEnd=`${100*Rt}%`,Kt.top=`calc(${100*Ut}% + var(--editor-toolbar-vert-offset))`}hide(){t(this,ot).remove()}}Q=new WeakMap,ot=new WeakMap,At=new WeakMap,Dt=new WeakSet,Oa=function(){const at=N(this,ot,document.createElement("div"));at.className="editToolbar",at.setAttribute("role","toolbar"),at.addEventListener("contextmenu",i.noContextMenu);const bt=N(this,Q,document.createElement("div"));return bt.className="buttons",at.append(bt),k(this,Tt,Ba).call(this),at},Nt=new WeakSet,Ha=function(at,bt){let kt=0,Rt=0;for(const Ut of at){const Kt=Ut.y+Ut.height;if(Kt<kt)continue;const re=Ut.x+(bt?Ut.width:0);if(Kt>kt){Rt=re,kt=Kt;continue}bt?re>Rt&&(Rt=re):re<Rt&&(Rt=re)}return[bt?1-Rt:Rt,kt]},Tt=new WeakSet,Ba=function(){const at=document.createElement("button");at.className="highlightButton",at.tabIndex=0,at.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const bt=document.createElement("span");at.append(bt),bt.className="visuallyHidden",bt.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),at.addEventListener("contextmenu",i.noContextMenu),at.addEventListener("click",()=>{t(this,At).highlightSelection("floating_button")}),t(this,Q).append(at)}},830:(f,O,w)=>{var q,$,et,ut,st,ar,W,H,Q,ot,At,za,Nt,wt,Tt,Pt,Et,at,bt,kt,Rt,Ut,Kt,re,_e,ce,he,me,jt,oe,Ce,se,Se,ne,lt,s,r,d,m,l,x,A,S,u,o,h,n,a,g,M,y,X,Z,K,it,p,L,J,cn,v,ja,Y,Ga,gt,dn,Ft,Ua,ie,qa,Ae,Wa,ke,or,Pe,lr,B,hr,rt,cr,ft,dr,_t,Qe,qt,_i,Qt,$a,Lt,Xa,Zt,ur,de,Va,Le,Ls,Xe,pr;w.d(O,{AnnotationEditorUIManager:()=>C,ColorManager:()=>j,KeyboardManager:()=>tt,bindEvents:()=>_,opacityToHex:()=>nt});var i=w(292),D=w(419),b=w(362);function _(Ge,U,mt){for(const Ht of mt)U.addEventListener(Ht,Ge[Ht].bind(Ge))}function nt(Ge){return Math.round(Math.min(255,Math.max(1,255*Ge))).toString(16).padStart(2,"0")}class z{constructor(){c(this,q,0)}get id(){return`${i.AnnotationEditorPrefix}${fi(this,q)._++}`}}q=new WeakMap;const V=class V{constructor(){c(this,st);c(this,$,(0,i.getUuid)());c(this,et,0);c(this,ut,null)}static get _isSVGFittingCanvas(){const U='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',mt=new OffscreenCanvas(1,3).getContext("2d"),Ht=new Image;Ht.src=U;const zt=Ht.decode().then(()=>(mt.drawImage(Ht,0,0,1,1,0,0,1,3),new Uint32Array(mt.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,i.shadow)(this,"_isSVGFittingCanvas",zt)}async getFromFile(U){const{lastModified:mt,name:Ht,size:zt,type:Jt}=U;return k(this,st,ar).call(this,`${mt}_${Ht}_${zt}_${Jt}`,U)}async getFromUrl(U){return k(this,st,ar).call(this,U,U)}async getFromId(U){t(this,ut)||N(this,ut,new Map);const mt=t(this,ut).get(U);return mt?mt.bitmap?(mt.refCounter+=1,mt):mt.file?this.getFromFile(mt.file):this.getFromUrl(mt.url):null}getSvgUrl(U){const mt=t(this,ut).get(U);return mt!=null&&mt.isSvg?mt.svgUrl:null}deleteId(U){t(this,ut)||N(this,ut,new Map);const mt=t(this,ut).get(U);mt&&(mt.refCounter-=1,mt.refCounter===0&&(mt.bitmap=null))}isValidId(U){return U.startsWith(`image_${t(this,$)}_`)}};$=new WeakMap,et=new WeakMap,ut=new WeakMap,st=new WeakSet,ar=async function(U,mt){t(this,ut)||N(this,ut,new Map);let Ht=t(this,ut).get(U);if(Ht===null)return null;if(Ht!=null&&Ht.bitmap)return Ht.refCounter+=1,Ht;try{Ht||(Ht={bitmap:null,id:`image_${t(this,$)}_${fi(this,et)._++}`,refCounter:0,isSvg:!1});let zt;if(typeof mt=="string"?(Ht.url=mt,zt=await(0,D.fetchData)(mt,"blob")):zt=Ht.file=mt,zt.type==="image/svg+xml"){const Jt=V._isSVGFittingCanvas,te=new FileReader,le=new Image,ye=new Promise((Re,He)=>{le.onload=()=>{Ht.bitmap=le,Ht.isSvg=!0,Re()},te.onload=async()=>{const Ke=Ht.svgUrl=te.result;le.src=await Jt?`${Ke}#svgView(preserveAspectRatio(none))`:Ke},le.onerror=te.onerror=He});te.readAsDataURL(zt),await ye}else Ht.bitmap=await createImageBitmap(zt);Ht.refCounter=1}catch(zt){console.error(zt),Ht=null}return t(this,ut).set(U,Ht),Ht&&t(this,ut).set(Ht.id,Ht),Ht};let P=V;class F{constructor(U=128){c(this,W,[]);c(this,H,!1);c(this,Q,void 0);c(this,ot,-1);N(this,Q,U)}add({cmd:U,undo:mt,post:Ht,mustExec:zt,type:Jt=NaN,overwriteIfSameType:te=!1,keepUndo:le=!1}){if(zt&&U(),t(this,H))return;const ye={cmd:U,undo:mt,post:Ht,type:Jt};if(t(this,ot)===-1){t(this,W).length>0&&(t(this,W).length=0),N(this,ot,0),t(this,W).push(ye);return}if(te&&t(this,W)[t(this,ot)].type===Jt){le&&(ye.undo=t(this,W)[t(this,ot)].undo),t(this,W)[t(this,ot)]=ye;return}const Re=t(this,ot)+1;Re===t(this,Q)?t(this,W).splice(0,1):(N(this,ot,Re),Re<t(this,W).length&&t(this,W).splice(Re)),t(this,W).push(ye)}undo(){if(t(this,ot)===-1)return;N(this,H,!0);const{undo:U,post:mt}=t(this,W)[t(this,ot)];U(),mt==null||mt(),N(this,H,!1),N(this,ot,t(this,ot)-1)}redo(){if(t(this,ot)<t(this,W).length-1){N(this,ot,t(this,ot)+1),N(this,H,!0);const{cmd:U,post:mt}=t(this,W)[t(this,ot)];U(),mt==null||mt(),N(this,H,!1)}}hasSomethingToUndo(){return t(this,ot)!==-1}hasSomethingToRedo(){return t(this,ot)<t(this,W).length-1}destroy(){N(this,W,null)}}W=new WeakMap,H=new WeakMap,Q=new WeakMap,ot=new WeakMap;class tt{constructor(U){c(this,At);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:mt}=i.FeatureTest.platform;for(const[Ht,zt,Jt={}]of U)for(const te of Ht){const le=te.startsWith("mac+");mt&&le?(this.callbacks.set(te.slice(4),{callback:zt,options:Jt}),this.allKeys.add(te.split("+").at(-1))):!mt&&!le&&(this.callbacks.set(te,{callback:zt,options:Jt}),this.allKeys.add(te.split("+").at(-1)))}}exec(U,mt){if(!this.allKeys.has(mt.key))return;const Ht=this.callbacks.get(k(this,At,za).call(this,mt));if(!Ht)return;const{callback:zt,options:{bubbles:Jt=!1,args:te=[],checker:le=null}}=Ht;le&&!le(U,mt)||(zt.bind(U,...te,mt)(),Jt||(mt.stopPropagation(),mt.preventDefault()))}}At=new WeakSet,za=function(U){U.altKey&&this.buffer.push("alt"),U.ctrlKey&&this.buffer.push("ctrl"),U.metaKey&&this.buffer.push("meta"),U.shiftKey&&this.buffer.push("shift"),this.buffer.push(U.key);const mt=this.buffer.join("+");return this.buffer.length=0,mt};const Ct=class Ct{get _colors(){const U=new Map([["CanvasText",null],["Canvas",null]]);return(0,D.getColorValues)(U),(0,i.shadow)(this,"_colors",U)}convert(U){const mt=(0,D.getRGB)(U);if(!window.matchMedia("(forced-colors: active)").matches)return mt;for(const[Ht,zt]of this._colors)if(zt.every((Jt,te)=>Jt===mt[te]))return Ct._colorsMapping.get(Ht);return mt}getHexCode(U){const mt=this._colors.get(U);return mt?i.Util.makeHexColor(...mt):U}};be(Ct,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let j=Ct;const ii=class ii{constructor(U,mt,Ht,zt,Jt,te,le,ye,Re){c(this,J);c(this,v);c(this,Y);c(this,gt);c(this,Ft);c(this,ie);c(this,Ae);c(this,ke);c(this,Pe);c(this,B);c(this,rt);c(this,ft);c(this,_t);c(this,qt);c(this,Qt);c(this,Lt);c(this,Zt);c(this,de);c(this,Le);c(this,Xe);c(this,Nt,null);c(this,wt,new Map);c(this,Tt,new Map);c(this,Pt,null);c(this,Et,null);c(this,at,new F);c(this,bt,0);c(this,kt,new Set);c(this,Rt,null);c(this,Ut,null);c(this,Kt,new Set);c(this,re,!1);c(this,_e,null);c(this,ce,null);c(this,he,null);c(this,me,!1);c(this,jt,null);c(this,oe,new z);c(this,Ce,!1);c(this,se,!1);c(this,Se,null);c(this,ne,null);c(this,lt,null);c(this,s,i.AnnotationEditorType.NONE);c(this,r,new Set);c(this,d,null);c(this,m,null);c(this,l,null);c(this,x,this.blur.bind(this));c(this,A,this.focus.bind(this));c(this,S,this.copy.bind(this));c(this,u,this.cut.bind(this));c(this,o,this.paste.bind(this));c(this,h,this.keydown.bind(this));c(this,n,this.keyup.bind(this));c(this,a,this.onEditingAction.bind(this));c(this,g,this.onPageChanging.bind(this));c(this,M,this.onScaleChanging.bind(this));c(this,y,k(this,Y,Ga).bind(this));c(this,X,this.onRotationChanging.bind(this));c(this,Z,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});c(this,K,[0,0]);c(this,it,null);c(this,p,null);c(this,L,null);N(this,p,U),N(this,L,mt),N(this,Pt,Ht),this._eventBus=zt,this._eventBus._on("editingaction",t(this,a)),this._eventBus._on("pagechanging",t(this,g)),this._eventBus._on("scalechanging",t(this,M)),this._eventBus._on("rotationchanging",t(this,X)),k(this,Ft,Ua).call(this),k(this,Pe,lr).call(this),N(this,Et,Jt.annotationStorage),N(this,_e,Jt.filterFactory),N(this,m,te),N(this,he,le||null),N(this,re,ye),N(this,lt,Re||null),this.viewParameters={realScale:D.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const U=ii.prototype,mt=te=>t(te,p).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&te.hasSomethingToControl(),Ht=(te,{target:le})=>{if(le instanceof HTMLInputElement){const{type:ye}=le;return ye!=="text"&&ye!=="number"}return!0},zt=this.TRANSLATE_SMALL,Jt=this.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new tt([[["ctrl+a","mac+meta+a"],U.selectAll,{checker:Ht}],[["ctrl+z","mac+meta+z"],U.undo,{checker:Ht}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],U.redo,{checker:Ht}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],U.delete,{checker:Ht}],[["Enter","mac+Enter"],U.addNewEditorFromKeyboard,{checker:(te,{target:le})=>!(le instanceof HTMLButtonElement)&&t(te,p).contains(le)&&!te.isEnterHandled}],[[" ","mac+ "],U.addNewEditorFromKeyboard,{checker:(te,{target:le})=>!(le instanceof HTMLButtonElement)&&t(te,p).contains(document.activeElement)}],[["Escape","mac+Escape"],U.unselectAll],[["ArrowLeft","mac+ArrowLeft"],U.translateSelectedEditors,{args:[-zt,0],checker:mt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],U.translateSelectedEditors,{args:[-Jt,0],checker:mt}],[["ArrowRight","mac+ArrowRight"],U.translateSelectedEditors,{args:[zt,0],checker:mt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],U.translateSelectedEditors,{args:[Jt,0],checker:mt}],[["ArrowUp","mac+ArrowUp"],U.translateSelectedEditors,{args:[0,-zt],checker:mt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],U.translateSelectedEditors,{args:[0,-Jt],checker:mt}],[["ArrowDown","mac+ArrowDown"],U.translateSelectedEditors,{args:[0,zt],checker:mt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],U.translateSelectedEditors,{args:[0,Jt],checker:mt}]]))}destroy(){var U,mt;k(this,B,hr).call(this),k(this,ke,or).call(this),this._eventBus._off("editingaction",t(this,a)),this._eventBus._off("pagechanging",t(this,g)),this._eventBus._off("scalechanging",t(this,M)),this._eventBus._off("rotationchanging",t(this,X));for(const Ht of t(this,Tt).values())Ht.destroy();t(this,Tt).clear(),t(this,wt).clear(),t(this,Kt).clear(),N(this,Nt,null),t(this,r).clear(),t(this,at).destroy(),(U=t(this,Pt))==null||U.destroy(),(mt=t(this,jt))==null||mt.hide(),N(this,jt,null),t(this,ce)&&(clearTimeout(t(this,ce)),N(this,ce,null)),t(this,it)&&(clearTimeout(t(this,it)),N(this,it,null)),k(this,ie,qa).call(this)}async mlGuess(U){var mt;return((mt=t(this,lt))==null?void 0:mt.guess(U))||null}get hasMLManager(){return!!t(this,lt)}get hcmFilter(){return(0,i.shadow)(this,"hcmFilter",t(this,m)?t(this,_e).addHCMFilter(t(this,m).foreground,t(this,m).background):"none")}get direction(){return(0,i.shadow)(this,"direction",getComputedStyle(t(this,p)).direction)}get highlightColors(){return(0,i.shadow)(this,"highlightColors",t(this,he)?new Map(t(this,he).split(",").map(U=>U.split("=").map(mt=>mt.trim()))):null)}get highlightColorNames(){return(0,i.shadow)(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,U=>U.reverse())):null)}setMainHighlightColorPicker(U){N(this,ne,U)}editAltText(U){var mt;(mt=t(this,Pt))==null||mt.editAltText(this,U)}onPageChanging({pageNumber:U}){N(this,bt,U-1)}focusMainContainer(){t(this,p).focus()}findParent(U,mt){for(const Ht of t(this,Tt).values()){const{x:zt,y:Jt,width:te,height:le}=Ht.div.getBoundingClientRect();if(U>=zt&&U<=zt+te&&mt>=Jt&&mt<=Jt+le)return Ht}return null}disableUserSelect(U=!1){t(this,L).classList.toggle("noUserSelect",U)}addShouldRescale(U){t(this,Kt).add(U)}removeShouldRescale(U){t(this,Kt).delete(U)}onScaleChanging({scale:U}){this.commitOrRemove(),this.viewParameters.realScale=U*D.PixelsPerInch.PDF_TO_CSS_UNITS;for(const mt of t(this,Kt))mt.onScaleChanging()}onRotationChanging({pagesRotation:U}){this.commitOrRemove(),this.viewParameters.rotation=U}highlightSelection(U=""){const mt=document.getSelection();if(!mt||mt.isCollapsed)return;const{anchorNode:Ht,anchorOffset:zt,focusNode:Jt,focusOffset:te}=mt,le=mt.toString(),ye=k(this,J,cn).call(this,mt).closest(".textLayer"),Re=this.getSelectionBoxes(ye);if(Re){mt.empty(),t(this,s)===i.AnnotationEditorType.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:i.AnnotationEditorType.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const He of t(this,Tt).values())if(He.hasTextLayer(ye)){He.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:U,boxes:Re,anchorNode:Ht,anchorOffset:zt,focusNode:Jt,focusOffset:te,text:le});break}}}addToAnnotationStorage(U){!U.isEmpty()&&t(this,Et)&&!t(this,Et).has(U.id)&&t(this,Et).setValue(U.id,U)}blur(){if(this.isShiftKeyDown=!1,t(this,me)&&(N(this,me,!1),k(this,gt,dn).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:U}=document;for(const mt of t(this,r))if(mt.div.contains(U)){N(this,Se,[mt,U]),mt._focusEventsAllowed=!1;break}}focus(){if(!t(this,Se))return;const[U,mt]=t(this,Se);N(this,Se,null),mt.addEventListener("focusin",()=>{U._focusEventsAllowed=!0},{once:!0}),mt.focus()}addEditListeners(){k(this,Pe,lr).call(this),k(this,rt,cr).call(this)}removeEditListeners(){k(this,B,hr).call(this),k(this,ft,dr).call(this)}copy(U){var Ht;if(U.preventDefault(),(Ht=t(this,Nt))==null||Ht.commitOrRemove(),!this.hasSelection)return;const mt=[];for(const zt of t(this,r)){const Jt=zt.serialize(!0);Jt&&mt.push(Jt)}mt.length!==0&&U.clipboardData.setData("application/pdfjs",JSON.stringify(mt))}cut(U){this.copy(U),this.delete()}paste(U){U.preventDefault();const{clipboardData:mt}=U;for(const Jt of mt.items)for(const te of t(this,Ut))if(te.isHandlingMimeForPasting(Jt.type)){te.paste(Jt,this.currentLayer);return}let Ht=mt.getData("application/pdfjs");if(!Ht)return;try{Ht=JSON.parse(Ht)}catch(Jt){(0,i.warn)(`paste: "${Jt.message}".`);return}if(!Array.isArray(Ht))return;this.unselectAll();const zt=this.currentLayer;try{const Jt=[];for(const ye of Ht){const Re=zt.deserialize(ye);if(!Re)return;Jt.push(Re)}const te=()=>{for(const ye of Jt)k(this,Zt,ur).call(this,ye);k(this,Xe,pr).call(this,Jt)},le=()=>{for(const ye of Jt)ye.remove()};this.addCommands({cmd:te,undo:le,mustExec:!0})}catch(Jt){(0,i.warn)(`paste: "${Jt.message}".`)}}keydown(U){!this.isShiftKeyDown&&U.key==="Shift"&&(this.isShiftKeyDown=!0),t(this,s)!==i.AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&ii._keyboardManager.exec(this,U)}keyup(U){this.isShiftKeyDown&&U.key==="Shift"&&(this.isShiftKeyDown=!1,t(this,me)&&(N(this,me,!1),k(this,gt,dn).call(this,"main_toolbar")))}onEditingAction({name:U}){switch(U){case"undo":case"redo":case"delete":case"selectAll":this[U]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(U){U?(k(this,Ae,Wa).call(this),k(this,rt,cr).call(this),k(this,_t,Qe).call(this,{isEditing:t(this,s)!==i.AnnotationEditorType.NONE,isEmpty:k(this,Le,Ls).call(this),hasSomethingToUndo:t(this,at).hasSomethingToUndo(),hasSomethingToRedo:t(this,at).hasSomethingToRedo(),hasSelectedEditor:!1})):(k(this,ke,or).call(this),k(this,ft,dr).call(this),k(this,_t,Qe).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(U){if(!t(this,Ut)){N(this,Ut,U);for(const mt of t(this,Ut))k(this,qt,_i).call(this,mt.defaultPropertiesToUpdate)}}getId(){return t(this,oe).id}get currentLayer(){return t(this,Tt).get(t(this,bt))}getLayer(U){return t(this,Tt).get(U)}get currentPageIndex(){return t(this,bt)}addLayer(U){t(this,Tt).set(U.pageIndex,U),t(this,Ce)?U.enable():U.disable()}removeLayer(U){t(this,Tt).delete(U.pageIndex)}updateMode(U,mt=null,Ht=!1){if(t(this,s)!==U){if(N(this,s,U),U===i.AnnotationEditorType.NONE){this.setEditingState(!1),k(this,Lt,Xa).call(this);return}this.setEditingState(!0),k(this,Qt,$a).call(this),this.unselectAll();for(const zt of t(this,Tt).values())zt.updateMode(U);if(!mt&&Ht){this.addNewEditorFromKeyboard();return}if(mt){for(const zt of t(this,wt).values())if(zt.annotationElementId===mt){this.setSelected(zt),zt.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(U){U!==t(this,s)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:U})}updateParams(U,mt){var Ht;if(t(this,Ut)){switch(U){case i.AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor();return;case i.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:(Ht=t(this,ne))==null||Ht.updateColor(mt);break;case i.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(t(this,l)||N(this,l,new Map)).set(U,mt),this.showAllEditors("highlight",mt);break}for(const zt of t(this,r))zt.updateParams(U,mt);for(const zt of t(this,Ut))zt.updateDefaultParams(U,mt)}}showAllEditors(U,mt,Ht=!1){var zt;for(const Jt of t(this,wt).values())Jt.editorType===U&&Jt.show(mt);(((zt=t(this,l))==null?void 0:zt.get(i.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))??!0)!==mt&&k(this,qt,_i).call(this,[[i.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,mt]])}enableWaiting(U=!1){if(t(this,se)!==U){N(this,se,U);for(const mt of t(this,Tt).values())U?mt.disableClick():mt.enableClick(),mt.div.classList.toggle("waiting",U)}}getEditors(U){const mt=[];for(const Ht of t(this,wt).values())Ht.pageIndex===U&&mt.push(Ht);return mt}getEditor(U){return t(this,wt).get(U)}addEditor(U){t(this,wt).set(U.id,U)}removeEditor(U){var mt;U.div.contains(document.activeElement)&&(t(this,ce)&&clearTimeout(t(this,ce)),N(this,ce,setTimeout(()=>{this.focusMainContainer(),N(this,ce,null)},0))),t(this,wt).delete(U.id),this.unselect(U),(!U.annotationElementId||!t(this,kt).has(U.annotationElementId))&&((mt=t(this,Et))==null||mt.remove(U.id))}addDeletedAnnotationElement(U){t(this,kt).add(U.annotationElementId),U.deleted=!0}isDeletedAnnotationElement(U){return t(this,kt).has(U)}removeDeletedAnnotationElement(U){t(this,kt).delete(U.annotationElementId),U.deleted=!1}setActiveEditor(U){t(this,Nt)!==U&&(N(this,Nt,U),U&&k(this,qt,_i).call(this,U.propertiesToUpdate))}updateUI(U){t(this,de,Va)===U&&k(this,qt,_i).call(this,U.propertiesToUpdate)}toggleSelected(U){if(t(this,r).has(U)){t(this,r).delete(U),U.unselect(),k(this,_t,Qe).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,r).add(U),U.select(),k(this,qt,_i).call(this,U.propertiesToUpdate),k(this,_t,Qe).call(this,{hasSelectedEditor:!0})}setSelected(U){for(const mt of t(this,r))mt!==U&&mt.unselect();t(this,r).clear(),t(this,r).add(U),U.select(),k(this,qt,_i).call(this,U.propertiesToUpdate),k(this,_t,Qe).call(this,{hasSelectedEditor:!0})}isSelected(U){return t(this,r).has(U)}get firstSelectedEditor(){return t(this,r).values().next().value}unselect(U){U.unselect(),t(this,r).delete(U),k(this,_t,Qe).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,r).size!==0}get isEnterHandled(){return t(this,r).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){t(this,at).undo(),k(this,_t,Qe).call(this,{hasSomethingToUndo:t(this,at).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:k(this,Le,Ls).call(this)})}redo(){t(this,at).redo(),k(this,_t,Qe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,at).hasSomethingToRedo(),isEmpty:k(this,Le,Ls).call(this)})}addCommands(U){t(this,at).add(U),k(this,_t,Qe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:k(this,Le,Ls).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const U=[...t(this,r)],mt=()=>{for(const zt of U)zt.remove()},Ht=()=>{for(const zt of U)k(this,Zt,ur).call(this,zt)};this.addCommands({cmd:mt,undo:Ht,mustExec:!0})}commitOrRemove(){var U;(U=t(this,Nt))==null||U.commitOrRemove()}hasSomethingToControl(){return t(this,Nt)||this.hasSelection}selectAll(){for(const U of t(this,r))U.commit();k(this,Xe,pr).call(this,t(this,wt).values())}unselectAll(){if(!(t(this,Nt)&&(t(this,Nt).commitOrRemove(),t(this,s)!==i.AnnotationEditorType.NONE))&&this.hasSelection){for(const U of t(this,r))U.unselect();t(this,r).clear(),k(this,_t,Qe).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(U,mt,Ht=!1){if(Ht||this.commitOrRemove(),!this.hasSelection)return;t(this,K)[0]+=U,t(this,K)[1]+=mt;const[zt,Jt]=t(this,K),te=[...t(this,r)];t(this,it)&&clearTimeout(t(this,it)),N(this,it,setTimeout(()=>{N(this,it,null),t(this,K)[0]=t(this,K)[1]=0,this.addCommands({cmd:()=>{for(const ye of te)t(this,wt).has(ye.id)&&ye.translateInPage(zt,Jt)},undo:()=>{for(const ye of te)t(this,wt).has(ye.id)&&ye.translateInPage(-zt,-Jt)},mustExec:!1})},1e3));for(const ye of te)ye.translateInPage(U,mt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),N(this,Rt,new Map);for(const U of t(this,r))t(this,Rt).set(U,{savedX:U.x,savedY:U.y,savedPageIndex:U.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!t(this,Rt))return!1;this.disableUserSelect(!1);const U=t(this,Rt);N(this,Rt,null);let mt=!1;for(const[{x:zt,y:Jt,pageIndex:te},le]of U)le.newX=zt,le.newY=Jt,le.newPageIndex=te,mt||(mt=zt!==le.savedX||Jt!==le.savedY||te!==le.savedPageIndex);if(!mt)return!1;const Ht=(zt,Jt,te,le)=>{if(t(this,wt).has(zt.id)){const ye=t(this,Tt).get(le);ye?zt._setParentAndPosition(ye,Jt,te):(zt.pageIndex=le,zt.x=Jt,zt.y=te)}};return this.addCommands({cmd:()=>{for(const[zt,{newX:Jt,newY:te,newPageIndex:le}]of U)Ht(zt,Jt,te,le)},undo:()=>{for(const[zt,{savedX:Jt,savedY:te,savedPageIndex:le}]of U)Ht(zt,Jt,te,le)},mustExec:!0}),!0}dragSelectedEditors(U,mt){if(t(this,Rt))for(const Ht of t(this,Rt).keys())Ht.drag(U,mt)}rebuild(U){if(U.parent===null){const mt=this.getLayer(U.pageIndex);mt?(mt.changeParent(U),mt.addOrRebuild(U)):(this.addEditor(U),this.addToAnnotationStorage(U),U.rebuild())}else U.parent.addOrRebuild(U)}get isEditorHandlingKeyboard(){var U;return((U=this.getActive())==null?void 0:U.shouldGetKeyboardEvents())||t(this,r).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(U){return t(this,Nt)===U}getActive(){return t(this,Nt)}getMode(){return t(this,s)}get imageManager(){return(0,i.shadow)(this,"imageManager",new P)}getSelectionBoxes(U){if(!U)return null;const mt=document.getSelection();for(let Re=0,He=mt.rangeCount;Re<He;Re++)if(!U.contains(mt.getRangeAt(Re).commonAncestorContainer))return null;const{x:Ht,y:zt,width:Jt,height:te}=U.getBoundingClientRect();let le;switch(U.getAttribute("data-main-rotation")){case"90":le=(Re,He,Ke,We)=>({x:(He-zt)/te,y:1-(Re+Ke-Ht)/Jt,width:We/te,height:Ke/Jt});break;case"180":le=(Re,He,Ke,We)=>({x:1-(Re+Ke-Ht)/Jt,y:1-(He+We-zt)/te,width:Ke/Jt,height:We/te});break;case"270":le=(Re,He,Ke,We)=>({x:1-(He+We-zt)/te,y:(Re-Ht)/Jt,width:We/te,height:Ke/Jt});break;default:le=(Re,He,Ke,We)=>({x:(Re-Ht)/Jt,y:(He-zt)/te,width:Ke/Jt,height:We/te});break}const ye=[];for(let Re=0,He=mt.rangeCount;Re<He;Re++){const Ke=mt.getRangeAt(Re);if(!Ke.collapsed)for(const{x:We,y:Vo,width:Ti,height:Or}of Ke.getClientRects())Ti===0||Or===0||ye.push(le(We,Vo,Ti,Or))}return ye.length===0?null:ye}};Nt=new WeakMap,wt=new WeakMap,Tt=new WeakMap,Pt=new WeakMap,Et=new WeakMap,at=new WeakMap,bt=new WeakMap,kt=new WeakMap,Rt=new WeakMap,Ut=new WeakMap,Kt=new WeakMap,re=new WeakMap,_e=new WeakMap,ce=new WeakMap,he=new WeakMap,me=new WeakMap,jt=new WeakMap,oe=new WeakMap,Ce=new WeakMap,se=new WeakMap,Se=new WeakMap,ne=new WeakMap,lt=new WeakMap,s=new WeakMap,r=new WeakMap,d=new WeakMap,m=new WeakMap,l=new WeakMap,x=new WeakMap,A=new WeakMap,S=new WeakMap,u=new WeakMap,o=new WeakMap,h=new WeakMap,n=new WeakMap,a=new WeakMap,g=new WeakMap,M=new WeakMap,y=new WeakMap,X=new WeakMap,Z=new WeakMap,K=new WeakMap,it=new WeakMap,p=new WeakMap,L=new WeakMap,J=new WeakSet,cn=function({anchorNode:U}){return U.nodeType===Node.TEXT_NODE?U.parentElement:U},v=new WeakSet,ja=function(){const U=document.getSelection();if(!U||U.isCollapsed)return;const mt=k(this,J,cn).call(this,U).closest(".textLayer"),Ht=this.getSelectionBoxes(mt);Ht&&(t(this,jt)||N(this,jt,new b.HighlightToolbar(this)),t(this,jt).show(mt,Ht,this.direction==="ltr"))},Y=new WeakSet,Ga=function(){var Ht,zt,Jt;const U=document.getSelection();if(!U||U.isCollapsed){t(this,d)&&((Ht=t(this,jt))==null||Ht.hide(),N(this,d,null),k(this,_t,Qe).call(this,{hasSelectedText:!1}));return}const{anchorNode:mt}=U;if(mt!==t(this,d)){if(!k(this,J,cn).call(this,U).closest(".textLayer")){t(this,d)&&((zt=t(this,jt))==null||zt.hide(),N(this,d,null),k(this,_t,Qe).call(this,{hasSelectedText:!1}));return}if((Jt=t(this,jt))==null||Jt.hide(),N(this,d,mt),k(this,_t,Qe).call(this,{hasSelectedText:!0}),!(t(this,s)!==i.AnnotationEditorType.HIGHLIGHT&&t(this,s)!==i.AnnotationEditorType.NONE)&&(t(this,s)===i.AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),N(this,me,this.isShiftKeyDown),!this.isShiftKeyDown)){const te=le=>{le.type==="pointerup"&&le.button!==0||(window.removeEventListener("pointerup",te),window.removeEventListener("blur",te),le.type==="pointerup"&&k(this,gt,dn).call(this,"main_toolbar"))};window.addEventListener("pointerup",te),window.addEventListener("blur",te)}}},gt=new WeakSet,dn=function(U=""){t(this,s)===i.AnnotationEditorType.HIGHLIGHT?this.highlightSelection(U):t(this,re)&&k(this,v,ja).call(this)},Ft=new WeakSet,Ua=function(){document.addEventListener("selectionchange",t(this,y))},ie=new WeakSet,qa=function(){document.removeEventListener("selectionchange",t(this,y))},Ae=new WeakSet,Wa=function(){window.addEventListener("focus",t(this,A)),window.addEventListener("blur",t(this,x))},ke=new WeakSet,or=function(){window.removeEventListener("focus",t(this,A)),window.removeEventListener("blur",t(this,x))},Pe=new WeakSet,lr=function(){window.addEventListener("keydown",t(this,h)),window.addEventListener("keyup",t(this,n))},B=new WeakSet,hr=function(){window.removeEventListener("keydown",t(this,h)),window.removeEventListener("keyup",t(this,n))},rt=new WeakSet,cr=function(){document.addEventListener("copy",t(this,S)),document.addEventListener("cut",t(this,u)),document.addEventListener("paste",t(this,o))},ft=new WeakSet,dr=function(){document.removeEventListener("copy",t(this,S)),document.removeEventListener("cut",t(this,u)),document.removeEventListener("paste",t(this,o))},_t=new WeakSet,Qe=function(U){Object.entries(U).some(([mt,Ht])=>t(this,Z)[mt]!==Ht)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,Z),U)}),t(this,s)===i.AnnotationEditorType.HIGHLIGHT&&U.hasSelectedEditor===!1&&k(this,qt,_i).call(this,[[i.AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))},qt=new WeakSet,_i=function(U){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:U})},Qt=new WeakSet,$a=function(){if(!t(this,Ce)){N(this,Ce,!0);for(const U of t(this,Tt).values())U.enable();for(const U of t(this,wt).values())U.enable()}},Lt=new WeakSet,Xa=function(){if(this.unselectAll(),t(this,Ce)){N(this,Ce,!1);for(const U of t(this,Tt).values())U.disable();for(const U of t(this,wt).values())U.disable()}},Zt=new WeakSet,ur=function(U){const mt=t(this,Tt).get(U.pageIndex);mt?mt.addOrRebuild(U):(this.addEditor(U),this.addToAnnotationStorage(U))},de=new WeakSet,Va=function(){let U=null;for(U of t(this,r));return U},Le=new WeakSet,Ls=function(){if(t(this,wt).size===0)return!0;if(t(this,wt).size===1)for(const U of t(this,wt).values())return U.isEmpty();return!1},Xe=new WeakSet,pr=function(U){for(const mt of t(this,r))mt.unselect();t(this,r).clear();for(const mt of U)mt.isEmpty()||(t(this,r).add(mt),mt.select());k(this,_t,Qe).call(this,{hasSelectedEditor:this.hasSelection})},be(ii,"TRANSLATE_SMALL",1),be(ii,"TRANSLATE_BIG",10);let C=ii},94:(f,O,w)=>{w.d(O,{PDFFetchStream:()=>z});var i=w(292),D=w(490);function b(tt,j,C){return{method:"GET",headers:tt,signal:C.signal,mode:"cors",credentials:j?"include":"same-origin",redirect:"follow"}}function _(tt){const j=new Headers;for(const C in tt){const q=tt[C];q!==void 0&&j.append(C,q)}return j}function nt(tt){return tt instanceof Uint8Array?tt.buffer:tt instanceof ArrayBuffer?tt:((0,i.warn)(`getArrayBuffer - unexpected data format: ${tt}`),new Uint8Array(tt).buffer)}class z{constructor(j){this.source=j,this.isHttp=/^https?:/i.test(j.url),this.httpHeaders=this.isHttp&&j.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var j;return((j=this._fullRequestReader)==null?void 0:j._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new P(this),this._fullRequestReader}getRangeReader(j,C){if(C<=this._progressiveDataLength)return null;const q=new F(this,j,C);return this._rangeRequestReaders.push(q),q}cancelAllRequests(j){var C;(C=this._fullRequestReader)==null||C.cancel(j);for(const q of this._rangeRequestReaders.slice(0))q.cancel(j)}}class P{constructor(j){this._stream=j,this._reader=null,this._loaded=0,this._filename=null;const C=j.source;this._withCredentials=C.withCredentials||!1,this._contentLength=C.length,this._headersCapability=Promise.withResolvers(),this._disableRange=C.disableRange||!1,this._rangeChunkSize=C.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!C.disableStream,this._isRangeSupported=!C.disableRange,this._headers=_(this._stream.httpHeaders);const q=C.url;fetch(q,b(this._headers,this._withCredentials,this._abortController)).then($=>{if(!(0,D.validateResponseStatus)($.status))throw(0,D.createResponseStatusError)($.status,q);this._reader=$.body.getReader(),this._headersCapability.resolve();const et=I=>$.headers.get(I),{allowRangeRequests:ut,suggestedLength:st}=(0,D.validateRangeRequestCapabilities)({getResponseHeader:et,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=ut,this._contentLength=st||this._contentLength,this._filename=(0,D.extractFilenameFromHeader)(et),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var q;await this._headersCapability.promise;const{value:j,done:C}=await this._reader.read();return C?{value:j,done:C}:(this._loaded+=j.byteLength,(q=this.onProgress)==null||q.call(this,{loaded:this._loaded,total:this._contentLength}),{value:nt(j),done:!1})}cancel(j){var C;(C=this._reader)==null||C.cancel(j),this._abortController.abort()}}class F{constructor(j,C,q){this._stream=j,this._reader=null,this._loaded=0;const $=j.source;this._withCredentials=$.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!$.disableStream,this._abortController=new AbortController,this._headers=_(this._stream.httpHeaders),this._headers.append("Range",`bytes=${C}-${q-1}`);const et=$.url;fetch(et,b(this._headers,this._withCredentials,this._abortController)).then(ut=>{if(!(0,D.validateResponseStatus)(ut.status))throw(0,D.createResponseStatusError)(ut.status,et);this._readCapability.resolve(),this._reader=ut.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var q;await this._readCapability.promise;const{value:j,done:C}=await this._reader.read();return C?{value:j,done:C}:(this._loaded+=j.byteLength,(q=this.onProgress)==null||q.call(this,{loaded:this._loaded}),{value:nt(j),done:!1})}cancel(j){var C;(C=this._reader)==null||C.cancel(j),this._abortController.abort()}}},10:(f,O,w)=>{var _;w.d(O,{FontFaceObject:()=>b,FontLoader:()=>D});var i=w(292);class D{constructor({ownerDocument:z=globalThis.document,styleElement:P=null}){c(this,_,new Set);this._document=z,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(z){this.nativeFontFaces.add(z),this._document.fonts.add(z)}removeNativeFontFace(z){this.nativeFontFaces.delete(z),this._document.fonts.delete(z)}insertRule(z){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const P=this.styleElement.sheet;P.insertRule(z,P.cssRules.length)}clear(){for(const z of this.nativeFontFaces)this._document.fonts.delete(z);this.nativeFontFaces.clear(),t(this,_).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:z,_inspectFont:P}){if(!(!z||t(this,_).has(z.loadedName))){if((0,i.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:F,src:tt,style:j}=z,C=new FontFace(F,tt,j);this.addNativeFontFace(C);try{await C.load(),t(this,_).add(F),P==null||P(z)}catch{(0,i.warn)(`Cannot load system font: ${z.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(C)}return}(0,i.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(z){if(z.attached||z.missingFile&&!z.systemFontInfo)return;if(z.attached=!0,z.systemFontInfo){await this.loadSystemFont(z);return}if(this.isFontLoadingAPISupported){const F=z.createNativeFontFace();if(F){this.addNativeFontFace(F);try{await F.loaded}catch(tt){throw(0,i.warn)(`Failed to load font '${F.family}': '${tt}'.`),z.disableFontFace=!0,tt}}return}const P=z.createFontFaceRule();if(P){if(this.insertRule(P),this.isSyncFontLoadingSupported)return;await new Promise(F=>{const tt=this._queueLoadingCallback(F);this._prepareFontLoadEvent(z,tt)})}}get isFontLoadingAPISupported(){var P;const z=!!((P=this._document)!=null&&P.fonts);return(0,i.shadow)(this,"isFontLoadingAPISupported",z)}get isSyncFontLoadingSupported(){let z=!1;return(i.isNodeJS||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(z=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",z)}_queueLoadingCallback(z){function P(){for((0,i.assert)(!tt.done,"completeRequest() cannot be called twice."),tt.done=!0;F.length>0&&F[0].done;){const j=F.shift();setTimeout(j.callback,0)}}const{loadingRequests:F}=this,tt={done:!1,complete:P,callback:z};return F.push(tt),tt}get _loadTestFont(){const z=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,i.shadow)(this,"_loadTestFont",z)}_prepareFontLoadEvent(z,P){function F(Dt,Ct){return Dt.charCodeAt(Ct)<<24|Dt.charCodeAt(Ct+1)<<16|Dt.charCodeAt(Ct+2)<<8|Dt.charCodeAt(Ct+3)&255}function tt(Dt,Ct,Nt,wt){const Tt=Dt.substring(0,Ct),Pt=Dt.substring(Ct+Nt);return Tt+wt+Pt}let j,C;const q=this._document.createElement("canvas");q.width=1,q.height=1;const $=q.getContext("2d");let et=0;function ut(Dt,Ct){if(++et>30){(0,i.warn)("Load test font never loaded."),Ct();return}if($.font="30px "+Dt,$.fillText(".",0,20),$.getImageData(0,0,1,1).data[3]>0){Ct();return}setTimeout(ut.bind(null,Dt,Ct))}const st=`lt${Date.now()}${this.loadTestFontId++}`;let I=this._loadTestFont;I=tt(I,976,st.length,st);const V=16,W=1482184792;let H=F(I,V);for(j=0,C=st.length-3;j<C;j+=4)H=H-W+F(st,j)|0;j<st.length&&(H=H-W+F(st+"XXX",j)|0),I=tt(I,V,4,(0,i.string32)(H));const Q=`url(data:font/opentype;base64,${btoa(I)});`,ot=`@font-face {font-family:"${st}";src:${Q}}`;this.insertRule(ot);const At=this._document.createElement("div");At.style.visibility="hidden",At.style.width=At.style.height="10px",At.style.position="absolute",At.style.top=At.style.left="0px";for(const Dt of[z.loadedName,st]){const Ct=this._document.createElement("span");Ct.textContent="Hi",Ct.style.fontFamily=Dt,At.append(Ct)}this._document.body.append(At),ut(st,()=>{At.remove(),P.complete()})}}_=new WeakMap;class b{constructor(z,{isEvalSupported:P=!0,disableFontFace:F=!1,ignoreErrors:tt=!1,inspectFont:j=null}){this.compiledGlyphs=Object.create(null);for(const C in z)this[C]=z[C];this.isEvalSupported=P!==!1,this.disableFontFace=F===!0,this.ignoreErrors=tt===!0,this._inspectFont=j}createNativeFontFace(){var P;if(!this.data||this.disableFontFace)return null;let z;if(!this.cssFontInfo)z=new FontFace(this.loadedName,this.data,{});else{const F={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(F.style=`oblique ${this.cssFontInfo.italicAngle}deg`),z=new FontFace(this.cssFontInfo.fontFamily,this.data,F)}return(P=this._inspectFont)==null||P.call(this,this),z}createFontFaceRule(){var tt;if(!this.data||this.disableFontFace)return null;const z=(0,i.bytesToString)(this.data),P=`url(data:${this.mimetype};base64,${btoa(z)});`;let F;if(!this.cssFontInfo)F=`@font-face {font-family:"${this.loadedName}";src:${P}}`;else{let j=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(j+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),F=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${j}src:${P}}`}return(tt=this._inspectFont)==null||tt.call(this,this,P),F}getPathGenerator(z,P){if(this.compiledGlyphs[P]!==void 0)return this.compiledGlyphs[P];let F;try{F=z.get(this.loadedName+"_path_"+P)}catch(tt){if(!this.ignoreErrors)throw tt;return(0,i.warn)(`getPathGenerator - ignoring character: "${tt}".`),this.compiledGlyphs[P]=function(j,C){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const tt=[];for(const j of F){const C=j.args!==void 0?j.args.join(","):"";tt.push("c.",j.cmd,"(",C,`);
`)}return this.compiledGlyphs[P]=new Function("c","size",tt.join(""))}return this.compiledGlyphs[P]=function(tt,j){for(const C of F)C.cmd==="scale"&&(C.args=[j,-j]),tt[C.cmd].apply(tt,C.args)}}}},62:(f,O,w)=>{var b,_;w.d(O,{Metadata:()=>D});var i=w(292);class D{constructor({parsedData:z,rawData:P}){c(this,b,void 0);c(this,_,void 0);N(this,b,z),N(this,_,P)}getRaw(){return t(this,_)}get(z){return t(this,b).get(z)??null}getAll(){return(0,i.objectFromMap)(t(this,b))}has(z){return t(this,b).has(z)}}b=new WeakMap,_=new WeakMap},457:(f,O,w)=>{w.d(O,{PDFNetworkStream:()=>P});var i=w(292),D=w(490);const b=200,_=206;function nt(j){const C=j.response;return typeof C!="string"?C:(0,i.stringToBytes)(C).buffer}class z{constructor(C,q={}){this.url=C,this.isHttp=/^https?:/i.test(C),this.httpHeaders=this.isHttp&&q.httpHeaders||Object.create(null),this.withCredentials=q.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(C,q,$){const et={begin:C,end:q};for(const ut in $)et[ut]=$[ut];return this.request(et)}requestFull(C){return this.request(C)}request(C){const q=new XMLHttpRequest,$=this.currXhrId++,et=this.pendingRequests[$]={xhr:q};q.open("GET",this.url),q.withCredentials=this.withCredentials;for(const ut in this.httpHeaders){const st=this.httpHeaders[ut];st!==void 0&&q.setRequestHeader(ut,st)}return this.isHttp&&"begin"in C&&"end"in C?(q.setRequestHeader("Range",`bytes=${C.begin}-${C.end-1}`),et.expectedStatus=_):et.expectedStatus=b,q.responseType="arraybuffer",C.onError&&(q.onerror=function(ut){C.onError(q.status)}),q.onreadystatechange=this.onStateChange.bind(this,$),q.onprogress=this.onProgress.bind(this,$),et.onHeadersReceived=C.onHeadersReceived,et.onDone=C.onDone,et.onError=C.onError,et.onProgress=C.onProgress,q.send(null),$}onProgress(C,q){var et;const $=this.pendingRequests[C];$&&((et=$.onProgress)==null||et.call($,q))}onStateChange(C,q){var I,V,W;const $=this.pendingRequests[C];if(!$)return;const et=$.xhr;if(et.readyState>=2&&$.onHeadersReceived&&($.onHeadersReceived(),delete $.onHeadersReceived),et.readyState!==4||!(C in this.pendingRequests))return;if(delete this.pendingRequests[C],et.status===0&&this.isHttp){(I=$.onError)==null||I.call($,et.status);return}const ut=et.status||b;if(!(ut===b&&$.expectedStatus===_)&&ut!==$.expectedStatus){(V=$.onError)==null||V.call($,et.status);return}const st=nt(et);if(ut===_){const H=et.getResponseHeader("Content-Range"),Q=/bytes (\d+)-(\d+)\/(\d+)/.exec(H);$.onDone({begin:parseInt(Q[1],10),chunk:st})}else st?$.onDone({begin:0,chunk:st}):(W=$.onError)==null||W.call($,et.status)}getRequestXhr(C){return this.pendingRequests[C].xhr}isPendingRequest(C){return C in this.pendingRequests}abortRequest(C){const q=this.pendingRequests[C].xhr;delete this.pendingRequests[C],q.abort()}}class P{constructor(C){this._source=C,this._manager=new z(C.url,{httpHeaders:C.httpHeaders,withCredentials:C.withCredentials}),this._rangeChunkSize=C.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(C){const q=this._rangeRequestReaders.indexOf(C);q>=0&&this._rangeRequestReaders.splice(q,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new F(this._manager,this._source),this._fullRequestReader}getRangeReader(C,q){const $=new tt(this._manager,C,q);return $.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push($),$}cancelAllRequests(C){var q;(q=this._fullRequestReader)==null||q.cancel(C);for(const $ of this._rangeRequestReaders.slice(0))$.cancel(C)}}class F{constructor(C,q){this._manager=C;const $={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=q.url,this._fullRequestId=C.requestFull($),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=q.disableRange||!1,this._contentLength=q.length,this._rangeChunkSize=q.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const C=this._fullRequestId,q=this._manager.getRequestXhr(C),$=st=>q.getResponseHeader(st),{allowRangeRequests:et,suggestedLength:ut}=(0,D.validateRangeRequestCapabilities)({getResponseHeader:$,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});et&&(this._isRangeSupported=!0),this._contentLength=ut||this._contentLength,this._filename=(0,D.extractFilenameFromHeader)($),this._isRangeSupported&&this._manager.abortRequest(C),this._headersReceivedCapability.resolve()}_onDone(C){if(C&&(this._requests.length>0?this._requests.shift().resolve({value:C.chunk,done:!1}):this._cachedChunks.push(C.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const q of this._requests)q.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(C){this._storedError=(0,D.createResponseStatusError)(C,this._url),this._headersReceivedCapability.reject(this._storedError);for(const q of this._requests)q.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(C){var q;(q=this.onProgress)==null||q.call(this,{loaded:C.loaded,total:C.lengthComputable?C.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const C=Promise.withResolvers();return this._requests.push(C),C.promise}cancel(C){this._done=!0,this._headersReceivedCapability.reject(C);for(const q of this._requests)q.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class tt{constructor(C,q,$){this._manager=C;const et={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=C.url,this._requestId=C.requestRange(q,$,et),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var C;(C=this.onClosed)==null||C.call(this,this)}_onDone(C){const q=C.chunk;this._requests.length>0?this._requests.shift().resolve({value:q,done:!1}):this._queuedChunk=q,this._done=!0;for(const $ of this._requests)$.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(C){this._storedError=(0,D.createResponseStatusError)(C,this._url);for(const q of this._requests)q.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(C){var q;this.isStreamingSupported||((q=this.onProgress)==null||q.call(this,{loaded:C.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const q=this._queuedChunk;return this._queuedChunk=null,{value:q,done:!1}}if(this._done)return{value:void 0,done:!0};const C=Promise.withResolvers();return this._requests.push(C),C.promise}cancel(C){this._done=!0;for(const q of this._requests)q.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},490:(f,O,w)=>{w.d(O,{createResponseStatusError:()=>z,extractFilenameFromHeader:()=>nt,validateRangeRequestCapabilities:()=>_,validateResponseStatus:()=>P});var i=w(292);function D(F){let tt=!0,j=C("filename\\*","i").exec(F);if(j){j=j[1];let V=ut(j);return V=unescape(V),V=st(V),V=I(V),$(V)}if(j=et(F),j){const V=I(j);return $(V)}if(j=C("filename","i").exec(F),j){j=j[1];let V=ut(j);return V=I(V),$(V)}function C(V,W){return new RegExp("(?:^|;)\\s*"+V+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',W)}function q(V,W){if(V){if(!/^[\x00-\xFF]+$/.test(W))return W;try{const H=new TextDecoder(V,{fatal:!0}),Q=(0,i.stringToBytes)(W);W=H.decode(Q),tt=!1}catch{}}return W}function $(V){return tt&&/[\x80-\xff]/.test(V)&&(V=q("utf-8",V),tt&&(V=q("iso-8859-1",V))),V}function et(V){const W=[];let H;const Q=C("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(H=Q.exec(V))!==null;){let[,At,Dt,Ct]=H;if(At=parseInt(At,10),At in W){if(At===0)break;continue}W[At]=[Dt,Ct]}const ot=[];for(let At=0;At<W.length&&At in W;++At){let[Dt,Ct]=W[At];Ct=ut(Ct),Dt&&(Ct=unescape(Ct),At===0&&(Ct=st(Ct))),ot.push(Ct)}return ot.join("")}function ut(V){if(V.startsWith('"')){const W=V.slice(1).split('\\"');for(let H=0;H<W.length;++H){const Q=W[H].indexOf('"');Q!==-1&&(W[H]=W[H].slice(0,Q),W.length=H+1),W[H]=W[H].replaceAll(/\\(.)/g,"$1")}V=W.join('"')}return V}function st(V){const W=V.indexOf("'");if(W===-1)return V;const H=V.slice(0,W),Q=V.slice(W+1).replace(/^[^']*'/,"");return q(H,Q)}function I(V){return!V.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(V)?V:V.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(W,H,Q,ot){if(Q==="q"||Q==="Q")return ot=ot.replaceAll("_"," "),ot=ot.replaceAll(/=([0-9a-fA-F]{2})/g,function(At,Dt){return String.fromCharCode(parseInt(Dt,16))}),q(H,ot);try{ot=atob(ot)}catch{}return q(H,ot)})}return""}var b=w(419);function _({getResponseHeader:F,isHttp:tt,rangeChunkSize:j,disableRange:C}){const q={allowRangeRequests:!1,suggestedLength:void 0},$=parseInt(F("Content-Length"),10);return!Number.isInteger($)||(q.suggestedLength=$,$<=2*j)||C||!tt||F("Accept-Ranges")!=="bytes"||(F("Content-Encoding")||"identity")!=="identity"||(q.allowRangeRequests=!0),q}function nt(F){const tt=F("Content-Disposition");if(tt){let j=D(tt);if(j.includes("%"))try{j=decodeURIComponent(j)}catch{}if((0,b.isPdfFile)(j))return j}return null}function z(F,tt){return F===404||F===0&&tt.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+tt+'".'):new i.UnexpectedResponseException(`Unexpected server response (${F}) while retrieving PDF "${tt}".`,F)}function P(F){return F===200||F===206}},786:(f,O,w)=>{w.a(f,async(i,D)=>{try{let nt=function(W){const H=j.parse(W);return H.protocol==="file:"||H.host?H:/^[a-z]:[/\\]/i.test(W)?j.parse(`file:///${W}`):(H.host||(H.protocol="file:"),H)},z=function(W,H){return{protocol:W.protocol,auth:W.auth,host:W.hostname,port:W.port,path:W.path,method:"GET",headers:H}};w.d(O,{PDFNodeStream:()=>q});var b=w(292),_=w(490);let P,F,tt,j;b.isNodeJS&&(P=await mi(()=>import("./chunk.js"),[]),F=await mi(()=>import("./chunk.js"),[]),tt=await mi(()=>import("./chunk.js"),[]),j=await mi(()=>import("./chunk.js"),[]));const C=/^file:\/\/\/[a-zA-Z]:\//;class q{constructor(H){this.source=H,this.url=nt(H.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&H.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var H;return((H=this._fullRequestReader)==null?void 0:H._loaded)??0}getFullReader(){return(0,b.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new I(this):new ut(this),this._fullRequestReader}getRangeReader(H,Q){if(Q<=this._progressiveDataLength)return null;const ot=this.isFsUrl?new V(this,H,Q):new st(this,H,Q);return this._rangeRequestReaders.push(ot),ot}cancelAllRequests(H){var Q;(Q=this._fullRequestReader)==null||Q.cancel(H);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(H)}}class ${constructor(H){this._url=H.url,this._done=!1,this._storedError=null,this.onProgress=null;const Q=H.source;this._contentLength=Q.length,this._loaded=0,this._filename=null,this._disableRange=Q.disableRange||!1,this._rangeChunkSize=Q.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!Q.disableStream,this._isRangeSupported=!Q.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Q;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const H=this._readableStream.read();return H===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=H.length,(Q=this.onProgress)==null||Q.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(H).buffer,done:!1})}cancel(H){if(!this._readableStream){this._error(H);return}this._readableStream.destroy(H)}_error(H){this._storedError=H,this._readCapability.resolve()}_setReadableStream(H){this._readableStream=H,H.on("readable",()=>{this._readCapability.resolve()}),H.on("end",()=>{H.destroy(),this._done=!0,this._readCapability.resolve()}),H.on("error",Q=>{this._error(Q)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new b.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class et{constructor(H){this._url=H.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const Q=H.source;this._isStreamingSupported=!Q.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Q;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const H=this._readableStream.read();return H===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=H.length,(Q=this.onProgress)==null||Q.call(this,{loaded:this._loaded}),{value:new Uint8Array(H).buffer,done:!1})}cancel(H){if(!this._readableStream){this._error(H);return}this._readableStream.destroy(H)}_error(H){this._storedError=H,this._readCapability.resolve()}_setReadableStream(H){this._readableStream=H,H.on("readable",()=>{this._readCapability.resolve()}),H.on("end",()=>{H.destroy(),this._done=!0,this._readCapability.resolve()}),H.on("error",Q=>{this._error(Q)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class ut extends ${constructor(H){super(H);const Q=ot=>{if(ot.statusCode===404){const Nt=new b.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Nt,this._headersCapability.reject(Nt);return}this._headersCapability.resolve(),this._setReadableStream(ot);const At=Nt=>this._readableStream.headers[Nt.toLowerCase()],{allowRangeRequests:Dt,suggestedLength:Ct}=(0,_.validateRangeRequestCapabilities)({getResponseHeader:At,isHttp:H.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Dt,this._contentLength=Ct||this._contentLength,this._filename=(0,_.extractFilenameFromHeader)(At)};this._request=null,this._url.protocol==="http:"?this._request=F.request(z(this._url,H.httpHeaders),Q):this._request=tt.request(z(this._url,H.httpHeaders),Q),this._request.on("error",ot=>{this._storedError=ot,this._headersCapability.reject(ot)}),this._request.end()}}class st extends et{constructor(H,Q,ot){super(H),this._httpHeaders={};for(const Dt in H.httpHeaders){const Ct=H.httpHeaders[Dt];Ct!==void 0&&(this._httpHeaders[Dt]=Ct)}this._httpHeaders.Range=`bytes=${Q}-${ot-1}`;const At=Dt=>{if(Dt.statusCode===404){const Ct=new b.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Ct;return}this._setReadableStream(Dt)};this._request=null,this._url.protocol==="http:"?this._request=F.request(z(this._url,this._httpHeaders),At):this._request=tt.request(z(this._url,this._httpHeaders),At),this._request.on("error",Dt=>{this._storedError=Dt}),this._request.end()}}class I extends ${constructor(H){super(H);let Q=decodeURIComponent(this._url.path);C.test(this._url.href)&&(Q=Q.replace(/^\//,"")),P.promises.lstat(Q).then(ot=>{this._contentLength=ot.size,this._setReadableStream(P.createReadStream(Q)),this._headersCapability.resolve()},ot=>{ot.code==="ENOENT"&&(ot=new b.MissingPDFException(`Missing PDF "${Q}".`)),this._storedError=ot,this._headersCapability.reject(ot)})}}class V extends et{constructor(H,Q,ot){super(H);let At=decodeURIComponent(this._url.path);C.test(this._url.href)&&(At=At.replace(/^\//,"")),this._setReadableStream(P.createReadStream(At,{start:Q,end:ot-1}))}}D()}catch(nt){D(nt)}},1)},573:(f,O,w)=>{w.a(f,async(i,D)=>{try{w.d(O,{NodeCMapReaderFactory:()=>C,NodeCanvasFactory:()=>j,NodeFilterFactory:()=>tt,NodeStandardFontDataFactory:()=>q});var b=w(583),_=w(292);let nt,z,P;if(_.isNodeJS){nt=await mi(()=>import("./chunk.js"),[]);try{z=await mi(()=>import("./chunk.js"),[])}catch{}try{P=await mi(()=>import("./chunk2.js"),[])}catch{}}const F=function($){return nt.promises.readFile($).then(et=>new Uint8Array(et))};class tt extends b.BaseFilterFactory{}class j extends b.BaseCanvasFactory{_createCanvas(et,ut){return z.createCanvas(et,ut)}}class C extends b.BaseCMapReaderFactory{_fetchData(et,ut){return F(et).then(st=>({cMapData:st,compressionType:ut}))}}class q extends b.BaseStandardFontDataFactory{_fetchData(et){return F(et)}}D()}catch(nt){D(nt)}},1)},626:(f,O,w)=>{var z,P,F,tt,j,C,q,$,et,gr;w.d(O,{OptionalContentConfig:()=>nt});var i=w(292),D=w(651);const b=Symbol("INTERNAL");class _{constructor(I,{name:V,intent:W,usage:H}){c(this,z,!1);c(this,P,!1);c(this,F,!1);c(this,tt,!0);N(this,z,!!(I&i.RenderingIntentFlag.DISPLAY)),N(this,P,!!(I&i.RenderingIntentFlag.PRINT)),this.name=V,this.intent=W,this.usage=H}get visible(){if(t(this,F))return t(this,tt);if(!t(this,tt))return!1;const{print:I,view:V}=this.usage;return t(this,z)?(V==null?void 0:V.viewState)!=="OFF":t(this,P)?(I==null?void 0:I.printState)!=="OFF":!0}_setVisible(I,V,W=!1){I!==b&&(0,i.unreachable)("Internal method `_setVisible` called."),N(this,F,W),N(this,tt,V)}}z=new WeakMap,P=new WeakMap,F=new WeakMap,tt=new WeakMap;class nt{constructor(I,V=i.RenderingIntentFlag.DISPLAY){c(this,et);c(this,j,null);c(this,C,new Map);c(this,q,null);c(this,$,null);if(this.renderingIntent=V,this.name=null,this.creator=null,I!==null){this.name=I.name,this.creator=I.creator,N(this,$,I.order);for(const W of I.groups)t(this,C).set(W.id,new _(V,W));if(I.baseState==="OFF")for(const W of t(this,C).values())W._setVisible(b,!1);for(const W of I.on)t(this,C).get(W)._setVisible(b,!0);for(const W of I.off)t(this,C).get(W)._setVisible(b,!1);N(this,q,this.getHash())}}isVisible(I){if(t(this,C).size===0)return!0;if(!I)return(0,i.info)("Optional content group not defined."),!0;if(I.type==="OCG")return t(this,C).has(I.id)?t(this,C).get(I.id).visible:((0,i.warn)(`Optional content group not found: ${I.id}`),!0);if(I.type==="OCMD"){if(I.expression)return k(this,et,gr).call(this,I.expression);if(!I.policy||I.policy==="AnyOn"){for(const V of I.ids){if(!t(this,C).has(V))return(0,i.warn)(`Optional content group not found: ${V}`),!0;if(t(this,C).get(V).visible)return!0}return!1}else if(I.policy==="AllOn"){for(const V of I.ids){if(!t(this,C).has(V))return(0,i.warn)(`Optional content group not found: ${V}`),!0;if(!t(this,C).get(V).visible)return!1}return!0}else if(I.policy==="AnyOff"){for(const V of I.ids){if(!t(this,C).has(V))return(0,i.warn)(`Optional content group not found: ${V}`),!0;if(!t(this,C).get(V).visible)return!0}return!1}else if(I.policy==="AllOff"){for(const V of I.ids){if(!t(this,C).has(V))return(0,i.warn)(`Optional content group not found: ${V}`),!0;if(t(this,C).get(V).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${I.policy}.`),!0}return(0,i.warn)(`Unknown group type ${I.type}.`),!0}setVisibility(I,V=!0){const W=t(this,C).get(I);if(!W){(0,i.warn)(`Optional content group not found: ${I}`);return}W._setVisible(b,!!V,!0),N(this,j,null)}setOCGState({state:I,preserveRB:V}){let W;for(const H of I){switch(H){case"ON":case"OFF":case"Toggle":W=H;continue}const Q=t(this,C).get(H);if(Q)switch(W){case"ON":Q._setVisible(b,!0);break;case"OFF":Q._setVisible(b,!1);break;case"Toggle":Q._setVisible(b,!Q.visible);break}}N(this,j,null)}get hasInitialVisibility(){return t(this,q)===null||this.getHash()===t(this,q)}getOrder(){return t(this,C).size?t(this,$)?t(this,$).slice():[...t(this,C).keys()]:null}getGroups(){return t(this,C).size>0?(0,i.objectFromMap)(t(this,C)):null}getGroup(I){return t(this,C).get(I)||null}getHash(){if(t(this,j)!==null)return t(this,j);const I=new D.MurmurHash3_64;for(const[V,W]of t(this,C))I.update(`${V}:${W.visible}`);return N(this,j,I.hexdigest())}}j=new WeakMap,C=new WeakMap,q=new WeakMap,$=new WeakMap,et=new WeakSet,gr=function(I){const V=I.length;if(V<2)return!0;const W=I[0];for(let H=1;H<V;H++){const Q=I[H];let ot;if(Array.isArray(Q))ot=k(this,et,gr).call(this,Q);else if(t(this,C).has(Q))ot=t(this,C).get(Q).visible;else return(0,i.warn)(`Optional content group not found: ${Q}`),!0;switch(W){case"And":if(!ot)return!1;break;case"Or":if(ot)return!0;break;case"Not":return!ot;default:return!0}}return W==="And"}},814:(f,O,w)=>{w.d(O,{cleanupTextLayer:()=>tt,renderTextLayer:()=>ut,updateTextLayer:()=>st});var i=w(292),D=w(419);const b=1e5,_=30,nt=.8,z=new Map;let P=null;function F(){if(!P){const I=document.createElement("canvas");I.className="hiddenCanvasElement",document.body.append(I),P=I.getContext("2d",{alpha:!1})}return P}function tt(){P==null||P.canvas.remove(),P=null}function j(I){const V=z.get(I);if(V)return V;const W=F(),H=W.font;W.canvas.width=W.canvas.height=_,W.font=`${_}px ${I}`;const Q=W.measureText("");let ot=Q.fontBoundingBoxAscent,At=Math.abs(Q.fontBoundingBoxDescent);if(ot){const Ct=ot/(ot+At);return z.set(I,Ct),W.canvas.width=W.canvas.height=0,W.font=H,Ct}W.strokeStyle="red",W.clearRect(0,0,_,_),W.strokeText("g",0,0);let Dt=W.getImageData(0,0,_,_).data;At=0;for(let Ct=Dt.length-1-3;Ct>=0;Ct-=4)if(Dt[Ct]>0){At=Math.ceil(Ct/4/_);break}W.clearRect(0,0,_,_),W.strokeText("A",0,_),Dt=W.getImageData(0,0,_,_).data,ot=0;for(let Ct=0,Nt=Dt.length;Ct<Nt;Ct+=4)if(Dt[Ct]>0){ot=_-Math.floor(Ct/4/_);break}if(W.canvas.width=W.canvas.height=0,W.font=H,ot){const Ct=ot/(ot+At);return z.set(I,Ct),Ct}return z.set(I,nt),nt}function C(I,V,W){const H=document.createElement("span"),Q={angle:0,canvasWidth:0,hasText:V.str!=="",hasEOL:V.hasEOL,fontSize:0};I._textDivs.push(H);const ot=i.Util.transform(I._transform,V.transform);let At=Math.atan2(ot[1],ot[0]);const Dt=W[V.fontName];Dt.vertical&&(At+=Math.PI/2);const Ct=I._fontInspectorEnabled&&Dt.fontSubstitution||Dt.fontFamily,Nt=Math.hypot(ot[2],ot[3]),wt=Nt*j(Ct);let Tt,Pt;At===0?(Tt=ot[4],Pt=ot[5]-wt):(Tt=ot[4]+wt*Math.sin(At),Pt=ot[5]-wt*Math.cos(At));const Et="calc(var(--scale-factor)*",at=H.style;I._container===I._rootContainer?(at.left=`${(100*Tt/I._pageWidth).toFixed(2)}%`,at.top=`${(100*Pt/I._pageHeight).toFixed(2)}%`):(at.left=`${Et}${Tt.toFixed(2)}px)`,at.top=`${Et}${Pt.toFixed(2)}px)`),at.fontSize=`${Et}${Nt.toFixed(2)}px)`,at.fontFamily=Ct,Q.fontSize=Nt,H.setAttribute("role","presentation"),H.textContent=V.str,H.dir=V.dir,I._fontInspectorEnabled&&(H.dataset.fontName=Dt.fontSubstitutionLoadedName||V.fontName),At!==0&&(Q.angle=At*(180/Math.PI));let bt=!1;if(V.str.length>1)bt=!0;else if(V.str!==" "&&V.transform[0]!==V.transform[3]){const kt=Math.abs(V.transform[0]),Rt=Math.abs(V.transform[3]);kt!==Rt&&Math.max(kt,Rt)/Math.min(kt,Rt)>1.5&&(bt=!0)}bt&&(Q.canvasWidth=Dt.vertical?V.height:V.width),I._textDivProperties.set(H,Q),I._isReadableStream&&I._layoutText(H)}function q(I){const{div:V,scale:W,properties:H,ctx:Q,prevFontSize:ot,prevFontFamily:At}=I,{style:Dt}=V;let Ct="";if(H.canvasWidth!==0&&H.hasText){const{fontFamily:Nt}=Dt,{canvasWidth:wt,fontSize:Tt}=H;(ot!==Tt||At!==Nt)&&(Q.font=`${Tt*W}px ${Nt}`,I.prevFontSize=Tt,I.prevFontFamily=Nt);const{width:Pt}=Q.measureText(V.textContent);Pt>0&&(Ct=`scaleX(${wt*W/Pt})`)}H.angle!==0&&(Ct=`rotate(${H.angle}deg) ${Ct}`),Ct.length>0&&(Dt.transform=Ct)}function $(I){if(I._canceled)return;const V=I._textDivs,W=I._capability;if(V.length>b){W.resolve();return}if(!I._isReadableStream)for(const H of V)I._layoutText(H);W.resolve()}class et{constructor({textContentSource:V,container:W,viewport:H,textDivs:Q,textDivProperties:ot,textContentItemsStr:At}){var Tt;this._textContentSource=V,this._isReadableStream=V instanceof ReadableStream,this._container=this._rootContainer=W,this._textDivs=Q||[],this._textContentItemsStr=At||[],this._fontInspectorEnabled=!!((Tt=globalThis.FontInspector)!=null&&Tt.enabled),this._reader=null,this._textDivProperties=ot||new WeakMap,this._canceled=!1,this._capability=Promise.withResolvers(),this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:H.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:F()};const{pageWidth:Dt,pageHeight:Ct,pageX:Nt,pageY:wt}=H.rawDims;this._transform=[1,0,0,-1,-Nt,wt+Ct],this._pageWidth=Dt,this._pageHeight=Ct,(0,D.setLayerDimensions)(W,H),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new i.AbortException("TextLayer task cancelled."))}_processItems(V,W){for(const H of V){if(H.str===void 0){if(H.type==="beginMarkedContentProps"||H.type==="beginMarkedContent"){const Q=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),H.id!==null&&this._container.setAttribute("id",`${H.id}`),Q.append(this._container)}else H.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(H.str),C(this,H,W)}}_layoutText(V){const W=this._layoutTextParams.properties=this._textDivProperties.get(V);if(this._layoutTextParams.div=V,q(this._layoutTextParams),W.hasText&&this._container.append(V),W.hasEOL){const H=document.createElement("br");H.setAttribute("role","presentation"),this._container.append(H)}}_render(){const{promise:V,resolve:W,reject:H}=Promise.withResolvers();let Q=Object.create(null);if(this._isReadableStream){const ot=()=>{this._reader.read().then(({value:At,done:Dt})=>{if(Dt){W();return}Object.assign(Q,At.styles),this._processItems(At.items,Q),ot()},H)};this._reader=this._textContentSource.getReader(),ot()}else if(this._textContentSource){const{items:ot,styles:At}=this._textContentSource;this._processItems(ot,At),W()}else throw new Error('No "textContentSource" parameter specified.');V.then(()=>{Q=null,$(this)},this._capability.reject)}}function ut(I){const V=new et(I);return V._render(),V}function st({container:I,viewport:V,textDivs:W,textDivProperties:H,mustRotate:Q=!0,mustRescale:ot=!0}){if(Q&&(0,D.setLayerDimensions)(I,{rotation:V.rotation}),ot){const At=F(),Dt={prevFontSize:null,prevFontFamily:null,div:null,scale:V.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:At};for(const Ct of W)Dt.properties=H.get(Ct),Dt.div=Ct,q(Dt)}}},585:(f,O,w)=>{w.d(O,{PDFDataTransportStream:()=>b});var i=w(292),D=w(419);class b{constructor(P,{disableRange:F=!1,disableStream:tt=!1}){(0,i.assert)(P,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:j,initialData:C,progressiveDone:q,contentDispositionFilename:$}=P;if(this._queuedChunks=[],this._progressiveDone=q,this._contentDispositionFilename=$,(C==null?void 0:C.length)>0){const et=C instanceof Uint8Array&&C.byteLength===C.buffer.byteLength?C.buffer:new Uint8Array(C).buffer;this._queuedChunks.push(et)}this._pdfDataRangeTransport=P,this._isStreamingSupported=!tt,this._isRangeSupported=!F,this._contentLength=j,this._fullRequestReader=null,this._rangeReaders=[],P.addRangeListener((et,ut)=>{this._onReceiveData({begin:et,chunk:ut})}),P.addProgressListener((et,ut)=>{this._onProgress({loaded:et,total:ut})}),P.addProgressiveReadListener(et=>{this._onReceiveData({chunk:et})}),P.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),P.transportReady()}_onReceiveData({begin:P,chunk:F}){const tt=F instanceof Uint8Array&&F.byteLength===F.buffer.byteLength?F.buffer:new Uint8Array(F).buffer;if(P===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(tt):this._queuedChunks.push(tt);else{const j=this._rangeReaders.some(function(C){return C._begin!==P?!1:(C._enqueue(tt),!0)});(0,i.assert)(j,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var P;return((P=this._fullRequestReader)==null?void 0:P._loaded)??0}_onProgress(P){var F,tt,j,C;P.total===void 0?(tt=(F=this._rangeReaders[0])==null?void 0:F.onProgress)==null||tt.call(F,{loaded:P.loaded}):(C=(j=this._fullRequestReader)==null?void 0:j.onProgress)==null||C.call(j,{loaded:P.loaded,total:P.total})}_onProgressiveDone(){var P;(P=this._fullRequestReader)==null||P.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(P){const F=this._rangeReaders.indexOf(P);F>=0&&this._rangeReaders.splice(F,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const P=this._queuedChunks;return this._queuedChunks=null,new _(this,P,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(P,F){if(F<=this._progressiveDataLength)return null;const tt=new nt(this,P,F);return this._pdfDataRangeTransport.requestDataRange(P,F),this._rangeReaders.push(tt),tt}cancelAllRequests(P){var F;(F=this._fullRequestReader)==null||F.cancel(P);for(const tt of this._rangeReaders.slice(0))tt.cancel(P);this._pdfDataRangeTransport.abort()}}class _{constructor(P,F,tt=!1,j=null){this._stream=P,this._done=tt||!1,this._filename=(0,D.isPdfFile)(j)?j:null,this._queuedChunks=F||[],this._loaded=0;for(const C of this._queuedChunks)this._loaded+=C.byteLength;this._requests=[],this._headersReady=Promise.resolve(),P._fullRequestReader=this,this.onProgress=null}_enqueue(P){this._done||(this._requests.length>0?this._requests.shift().resolve({value:P,done:!1}):this._queuedChunks.push(P),this._loaded+=P.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const P=Promise.withResolvers();return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class nt{constructor(P,F,tt){this._stream=P,this._begin=F,this._end=tt,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(P){if(!this._done){if(this._requests.length===0)this._queuedChunk=P;else{this._requests.shift().resolve({value:P,done:!1});for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const F=this._queuedChunk;return this._queuedChunk=null,{value:F,done:!1}}if(this._done)return{value:void 0,done:!0};const P=Promise.withResolvers();return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},164:(f,O,w)=>{var D,b;w.d(O,{GlobalWorkerOptions:()=>i});class i{static get workerPort(){return t(this,D)}static set workerPort(nt){if(!(typeof Worker<"u"&&nt instanceof Worker)&&nt!==null)throw new Error("Invalid `workerPort` type.");N(this,D,nt)}static get workerSrc(){return t(this,b)}static set workerSrc(nt){if(typeof nt!="string")throw new Error("Invalid `workerSrc` type.");N(this,b,nt)}}D=new WeakMap,b=new WeakMap,c(i,D,null),c(i,b,"")},284:(f,O,w)=>{w.d(O,{XfaLayer:()=>D});var i=w(50);class D{static setupStorage(_,nt,z,P,F){const tt=P.getValue(nt,{value:null});switch(z.name){case"textarea":if(tt.value!==null&&(_.textContent=tt.value),F==="print")break;_.addEventListener("input",j=>{P.setValue(nt,{value:j.target.value})});break;case"input":if(z.attributes.type==="radio"||z.attributes.type==="checkbox"){if(tt.value===z.attributes.xfaOn?_.setAttribute("checked",!0):tt.value===z.attributes.xfaOff&&_.removeAttribute("checked"),F==="print")break;_.addEventListener("change",j=>{P.setValue(nt,{value:j.target.checked?j.target.getAttribute("xfaOn"):j.target.getAttribute("xfaOff")})})}else{if(tt.value!==null&&_.setAttribute("value",tt.value),F==="print")break;_.addEventListener("input",j=>{P.setValue(nt,{value:j.target.value})})}break;case"select":if(tt.value!==null){_.setAttribute("value",tt.value);for(const j of z.children)j.attributes.value===tt.value?j.attributes.selected=!0:j.attributes.hasOwnProperty("selected")&&delete j.attributes.selected}_.addEventListener("input",j=>{const C=j.target.options,q=C.selectedIndex===-1?"":C[C.selectedIndex].value;P.setValue(nt,{value:q})});break}}static setAttributes({html:_,element:nt,storage:z=null,intent:P,linkService:F}){const{attributes:tt}=nt,j=_ instanceof HTMLAnchorElement;tt.type==="radio"&&(tt.name=`${tt.name}-${P}`);for(const[C,q]of Object.entries(tt))if(q!=null)switch(C){case"class":q.length&&_.setAttribute(C,q.join(" "));break;case"dataId":break;case"id":_.setAttribute("data-element-id",q);break;case"style":Object.assign(_.style,q);break;case"textContent":_.textContent=q;break;default:(!j||C!=="href"&&C!=="newWindow")&&_.setAttribute(C,q)}j&&F.addLinkAttributes(_,tt.href,tt.newWindow),z&&tt.dataId&&this.setupStorage(_,tt.dataId,nt,z)}static render(_){var et,ut;const nt=_.annotationStorage,z=_.linkService,P=_.xfaHtml,F=_.intent||"display",tt=document.createElement(P.name);P.attributes&&this.setAttributes({html:tt,element:P,intent:F,linkService:z});const j=F!=="richText",C=_.div;if(C.append(tt),_.viewport){const st=`matrix(${_.viewport.transform.join(",")})`;C.style.transform=st}j&&C.setAttribute("class","xfaLayer xfaFont");const q=[];if(P.children.length===0){if(P.value){const st=document.createTextNode(P.value);tt.append(st),j&&i.XfaText.shouldBuildText(P.name)&&q.push(st)}return{textDivs:q}}const $=[[P,-1,tt]];for(;$.length>0;){const[st,I,V]=$.at(-1);if(I+1===st.children.length){$.pop();continue}const W=st.children[++$.at(-1)[1]];if(W===null)continue;const{name:H}=W;if(H==="#text"){const ot=document.createTextNode(W.value);q.push(ot),V.append(ot);continue}const Q=(et=W==null?void 0:W.attributes)!=null&&et.xmlns?document.createElementNS(W.attributes.xmlns,H):document.createElement(H);if(V.append(Q),W.attributes&&this.setAttributes({html:Q,element:W,storage:nt,intent:F,linkService:z}),((ut=W.children)==null?void 0:ut.length)>0)$.push([W,-1,Q]);else if(W.value){const ot=document.createTextNode(W.value);j&&i.XfaText.shouldBuildText(H)&&q.push(ot),Q.append(ot)}}for(const st of C.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))st.setAttribute("readOnly",!0);return{textDivs:q}}static update(_){const nt=`matrix(${_.viewport.transform.join(",")})`;_.div.style.transform=nt,_.div.hidden=!1}}},50:(f,O,w)=>{w.d(O,{XfaText:()=>i});class i{static textContent(b){const _=[],nt={items:_,styles:Object.create(null)};function z(P){var j;if(!P)return;let F=null;const tt=P.name;if(tt==="#text")F=P.value;else if(i.shouldBuildText(tt))(j=P==null?void 0:P.attributes)!=null&&j.textContent?F=P.attributes.textContent:P.value&&(F=P.value);else return;if(F!==null&&_.push({str:F}),!!P.children)for(const C of P.children)z(C)}return z(b),nt}static shouldBuildText(b){return!(b==="textarea"||b==="input"||b==="option"||b==="select")}}},228:(f,O,w)=>{w.a(f,async(i,D)=>{try{w.d(O,{AbortException:()=>b.AbortException,AnnotationEditorLayer:()=>P.AnnotationEditorLayer,AnnotationEditorParamsType:()=>b.AnnotationEditorParamsType,AnnotationEditorType:()=>b.AnnotationEditorType,AnnotationEditorUIManager:()=>F.AnnotationEditorUIManager,AnnotationLayer:()=>tt.AnnotationLayer,AnnotationMode:()=>b.AnnotationMode,CMapCompressionType:()=>b.CMapCompressionType,ColorPicker:()=>j.ColorPicker,DOMSVGFactory:()=>nt.DOMSVGFactory,DrawLayer:()=>C.DrawLayer,FeatureTest:()=>b.FeatureTest,GlobalWorkerOptions:()=>q.GlobalWorkerOptions,ImageKind:()=>b.ImageKind,InvalidPDFException:()=>b.InvalidPDFException,MissingPDFException:()=>b.MissingPDFException,OPS:()=>b.OPS,Outliner:()=>$.Outliner,PDFDataRangeTransport:()=>_.PDFDataRangeTransport,PDFDateString:()=>nt.PDFDateString,PDFWorker:()=>_.PDFWorker,PasswordResponses:()=>b.PasswordResponses,PermissionFlag:()=>b.PermissionFlag,PixelsPerInch:()=>nt.PixelsPerInch,RenderingCancelledException:()=>nt.RenderingCancelledException,UnexpectedResponseException:()=>b.UnexpectedResponseException,Util:()=>b.Util,VerbosityLevel:()=>b.VerbosityLevel,XfaLayer:()=>et.XfaLayer,build:()=>_.build,createValidAbsoluteUrl:()=>b.createValidAbsoluteUrl,fetchData:()=>nt.fetchData,getDocument:()=>_.getDocument,getFilenameFromUrl:()=>nt.getFilenameFromUrl,getPdfFilenameFromUrl:()=>nt.getPdfFilenameFromUrl,getXfaPageViewport:()=>nt.getXfaPageViewport,isDataScheme:()=>nt.isDataScheme,isPdfFile:()=>nt.isPdfFile,noContextMenu:()=>nt.noContextMenu,normalizeUnicode:()=>b.normalizeUnicode,renderTextLayer:()=>z.renderTextLayer,setLayerDimensions:()=>nt.setLayerDimensions,shadow:()=>b.shadow,updateTextLayer:()=>z.updateTextLayer,version:()=>_.version});var b=w(292),_=w(831),nt=w(419),z=w(814),P=w(731),F=w(830),tt=w(976),j=w(259),C=w(47),q=w(164),$=w(61),et=w(284),ut=i([_]);_=(ut.then?(await ut)():ut)[0];const st="4.1.392",I="fcb76a78d";D()}catch(st){D(st)}})},178:(f,O,w)=>{var z,Ka,F,Ya,j,un;w.d(O,{MessageHandler:()=>nt});var i=w(292);const D={UNKNOWN:0,DATA:1,ERROR:2},b={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function _(q){switch(q instanceof Error||typeof q=="object"&&q!==null||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),q.name){case"AbortException":return new i.AbortException(q.message);case"MissingPDFException":return new i.MissingPDFException(q.message);case"PasswordException":return new i.PasswordException(q.message,q.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(q.message,q.status);case"UnknownErrorException":return new i.UnknownErrorException(q.message,q.details);default:return new i.UnknownErrorException(q.message,q.toString())}}class nt{constructor($,et,ut){c(this,z);c(this,F);c(this,j);this.sourceName=$,this.targetName=et,this.comObj=ut,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=st=>{const I=st.data;if(I.targetName!==this.sourceName)return;if(I.stream){k(this,F,Ya).call(this,I);return}if(I.callback){const W=I.callbackId,H=this.callbackCapabilities[W];if(!H)throw new Error(`Cannot resolve callback ${W}`);if(delete this.callbackCapabilities[W],I.callback===D.DATA)H.resolve(I.data);else if(I.callback===D.ERROR)H.reject(_(I.reason));else throw new Error("Unexpected callback case");return}const V=this.actionHandler[I.action];if(!V)throw new Error(`Unknown action from worker: ${I.action}`);if(I.callbackId){const W=this.sourceName,H=I.sourceName;new Promise(function(Q){Q(V(I.data))}).then(function(Q){ut.postMessage({sourceName:W,targetName:H,callback:D.DATA,callbackId:I.callbackId,data:Q})},function(Q){ut.postMessage({sourceName:W,targetName:H,callback:D.ERROR,callbackId:I.callbackId,reason:_(Q)})});return}if(I.streamId){k(this,z,Ka).call(this,I);return}V(I.data)},ut.addEventListener("message",this._onComObjOnMessage)}on($,et){const ut=this.actionHandler;if(ut[$])throw new Error(`There is already an actionName called "${$}"`);ut[$]=et}send($,et,ut){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:$,data:et},ut)}sendWithPromise($,et,ut){const st=this.callbackId++,I=Promise.withResolvers();this.callbackCapabilities[st]=I;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:$,callbackId:st,data:et},ut)}catch(V){I.reject(V)}return I.promise}sendWithStream($,et,ut,st){const I=this.streamId++,V=this.sourceName,W=this.targetName,H=this.comObj;return new ReadableStream({start:Q=>{const ot=Promise.withResolvers();return this.streamControllers[I]={controller:Q,startCall:ot,pullCall:null,cancelCall:null,isClosed:!1},H.postMessage({sourceName:V,targetName:W,action:$,streamId:I,data:et,desiredSize:Q.desiredSize},st),ot.promise},pull:Q=>{const ot=Promise.withResolvers();return this.streamControllers[I].pullCall=ot,H.postMessage({sourceName:V,targetName:W,stream:b.PULL,streamId:I,desiredSize:Q.desiredSize}),ot.promise},cancel:Q=>{(0,i.assert)(Q instanceof Error,"cancel must have a valid reason");const ot=Promise.withResolvers();return this.streamControllers[I].cancelCall=ot,this.streamControllers[I].isClosed=!0,H.postMessage({sourceName:V,targetName:W,stream:b.CANCEL,streamId:I,reason:_(Q)}),ot.promise}},ut)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}z=new WeakSet,Ka=function($){const et=$.streamId,ut=this.sourceName,st=$.sourceName,I=this.comObj,V=this,W=this.actionHandler[$.action],H={enqueue(Q,ot=1,At){if(this.isCancelled)return;const Dt=this.desiredSize;this.desiredSize-=ot,Dt>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),I.postMessage({sourceName:ut,targetName:st,stream:b.ENQUEUE,streamId:et,chunk:Q},At)},close(){this.isCancelled||(this.isCancelled=!0,I.postMessage({sourceName:ut,targetName:st,stream:b.CLOSE,streamId:et}),delete V.streamSinks[et])},error(Q){(0,i.assert)(Q instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,I.postMessage({sourceName:ut,targetName:st,stream:b.ERROR,streamId:et,reason:_(Q)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:$.desiredSize,ready:null};H.sinkCapability.resolve(),H.ready=H.sinkCapability.promise,this.streamSinks[et]=H,new Promise(function(Q){Q(W($.data,H))}).then(function(){I.postMessage({sourceName:ut,targetName:st,stream:b.START_COMPLETE,streamId:et,success:!0})},function(Q){I.postMessage({sourceName:ut,targetName:st,stream:b.START_COMPLETE,streamId:et,reason:_(Q)})})},F=new WeakSet,Ya=function($){const et=$.streamId,ut=this.sourceName,st=$.sourceName,I=this.comObj,V=this.streamControllers[et],W=this.streamSinks[et];switch($.stream){case b.START_COMPLETE:$.success?V.startCall.resolve():V.startCall.reject(_($.reason));break;case b.PULL_COMPLETE:$.success?V.pullCall.resolve():V.pullCall.reject(_($.reason));break;case b.PULL:if(!W){I.postMessage({sourceName:ut,targetName:st,stream:b.PULL_COMPLETE,streamId:et,success:!0});break}W.desiredSize<=0&&$.desiredSize>0&&W.sinkCapability.resolve(),W.desiredSize=$.desiredSize,new Promise(function(H){var Q;H((Q=W.onPull)==null?void 0:Q.call(W))}).then(function(){I.postMessage({sourceName:ut,targetName:st,stream:b.PULL_COMPLETE,streamId:et,success:!0})},function(H){I.postMessage({sourceName:ut,targetName:st,stream:b.PULL_COMPLETE,streamId:et,reason:_(H)})});break;case b.ENQUEUE:if((0,i.assert)(V,"enqueue should have stream controller"),V.isClosed)break;V.controller.enqueue($.chunk);break;case b.CLOSE:if((0,i.assert)(V,"close should have stream controller"),V.isClosed)break;V.isClosed=!0,V.controller.close(),k(this,j,un).call(this,V,et);break;case b.ERROR:(0,i.assert)(V,"error should have stream controller"),V.controller.error(_($.reason)),k(this,j,un).call(this,V,et);break;case b.CANCEL_COMPLETE:$.success?V.cancelCall.resolve():V.cancelCall.reject(_($.reason)),k(this,j,un).call(this,V,et);break;case b.CANCEL:if(!W)break;new Promise(function(H){var Q;H((Q=W.onCancel)==null?void 0:Q.call(W,_($.reason)))}).then(function(){I.postMessage({sourceName:ut,targetName:st,stream:b.CANCEL_COMPLETE,streamId:et,success:!0})},function(H){I.postMessage({sourceName:ut,targetName:st,stream:b.CANCEL_COMPLETE,streamId:et,reason:_(H)})}),W.sinkCapability.reject(_($.reason)),W.isCancelled=!0,delete this.streamSinks[et];break;default:throw new Error("Unexpected stream case")}},j=new WeakSet,un=async function($,et){var ut,st,I;await Promise.allSettled([(ut=$.startCall)==null?void 0:ut.promise,(st=$.pullCall)==null?void 0:st.promise,(I=$.cancelCall)==null?void 0:I.promise]),delete this.streamControllers[et]}},651:(f,O,w)=>{w.d(O,{MurmurHash3_64:()=>_});const i=3285377520,D=4294901760,b=65535;class _{constructor(z){this.h1=z?z&4294967295:i,this.h2=z?z&4294967295:i}update(z){let P,F;if(typeof z=="string"){P=new Uint8Array(z.length*2),F=0;for(let H=0,Q=z.length;H<Q;H++){const ot=z.charCodeAt(H);ot<=255?P[F++]=ot:(P[F++]=ot>>>8,P[F++]=ot&255)}}else if(ArrayBuffer.isView(z))P=z.slice(),F=P.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const tt=F>>2,j=F-tt*4,C=new Uint32Array(P.buffer,0,tt);let q=0,$=0,et=this.h1,ut=this.h2;const st=3432918353,I=461845907,V=st&b,W=I&b;for(let H=0;H<tt;H++)H&1?(q=C[H],q=q*st&D|q*V&b,q=q<<15|q>>>17,q=q*I&D|q*W&b,et^=q,et=et<<13|et>>>19,et=et*5+3864292196):($=C[H],$=$*st&D|$*V&b,$=$<<15|$>>>17,$=$*I&D|$*W&b,ut^=$,ut=ut<<13|ut>>>19,ut=ut*5+3864292196);switch(q=0,j){case 3:q^=P[tt*4+2]<<16;case 2:q^=P[tt*4+1]<<8;case 1:q^=P[tt*4],q=q*st&D|q*V&b,q=q<<15|q>>>17,q=q*I&D|q*W&b,tt&1?et^=q:ut^=q}this.h1=et,this.h2=ut}hexdigest(){let z=this.h1,P=this.h2;return z^=P>>>1,z=z*3981806797&D|z*36045&b,P=P*4283543511&D|((P<<16|z>>>16)*2950163797&D)>>>16,z^=P>>>1,z=z*444984403&D|z*60499&b,P=P*3301882366&D|((P<<16|z>>>16)*3120437893&D)>>>16,z^=P>>>1,(z>>>0).toString(16).padStart(8,"0")+(P>>>0).toString(16).padStart(8,"0")}}},292:(f,O,w)=>{var l,pn,A,fr;w.d(O,{AbortException:()=>re,AnnotationBorderStyleType:()=>ut,AnnotationEditorParamsType:()=>j,AnnotationEditorPrefix:()=>F,AnnotationEditorType:()=>tt,AnnotationMode:()=>P,AnnotationPrefix:()=>m,AnnotationType:()=>et,BaseException:()=>Et,CMapCompressionType:()=>I,FONT_IDENTITY_MATRIX:()=>b,FeatureTest:()=>Ce,FormatError:()=>Kt,IDENTITY_MATRIX:()=>D,ImageKind:()=>$,InvalidPDFException:()=>kt,LINE_FACTOR:()=>nt,MAX_IMAGE_SIZE_TO_CACHE:()=>_,MissingPDFException:()=>Rt,OPS:()=>V,PasswordException:()=>at,PasswordResponses:()=>W,PermissionFlag:()=>C,RenderingIntentFlag:()=>z,TextRenderingMode:()=>q,UnexpectedResponseException:()=>Ut,UnknownErrorException:()=>bt,Util:()=>Se,VerbosityLevel:()=>st,assert:()=>Nt,bytesToString:()=>_e,createValidAbsoluteUrl:()=>Tt,getUuid:()=>d,getVerbosityLevel:()=>ot,info:()=>At,isNodeJS:()=>i,normalizeUnicode:()=>r,objectFromMap:()=>me,setVerbosityLevel:()=>Q,shadow:()=>Pt,string32:()=>he,stringToBytes:()=>ce,unreachable:()=>Ct,warn:()=>Dt});const i=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),D=[1,0,0,1,0,0],b=[.001,0,0,.001,0,0],_=1e7,nt=1.35,z={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},P={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},F="pdfjs_internal_editor_",tt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},j={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},C={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},q={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},$={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},et={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ut={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},st={ERRORS:0,WARNINGS:1,INFOS:5},I={NONE:0,BINARY:1},V={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},W={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let H=st.WARNINGS;function Q(u){Number.isInteger(u)&&(H=u)}function ot(){return H}function At(u){H>=st.INFOS&&console.log(`Info: ${u}`)}function Dt(u){H>=st.WARNINGS&&console.log(`Warning: ${u}`)}function Ct(u){throw new Error(u)}function Nt(u,o){u||Ct(o)}function wt(u){switch(u==null?void 0:u.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Tt(u,o=null,h=null){var n;if(!u)return null;try{if(h&&typeof u=="string"&&(h.addDefaultProtocol&&u.startsWith("www.")&&((n=u.match(/\./g))==null?void 0:n.length)>=2&&(u=`http://${u}`),h.tryConvertEncoding))try{u=ne(u)}catch{}const a=o?new URL(u,o):new URL(u);if(wt(a))return a}catch{}return null}function Pt(u,o,h,n=!1){return Object.defineProperty(u,o,{value:h,enumerable:!n,configurable:!0,writable:!1}),h}const Et=function(){function u(o,h){this.constructor===u&&Ct("Cannot initialize BaseException."),this.message=o,this.name=h}return u.prototype=new Error,u.constructor=u,u}();class at extends Et{constructor(o,h){super(o,"PasswordException"),this.code=h}}class bt extends Et{constructor(o,h){super(o,"UnknownErrorException"),this.details=h}}class kt extends Et{constructor(o){super(o,"InvalidPDFException")}}class Rt extends Et{constructor(o){super(o,"MissingPDFException")}}class Ut extends Et{constructor(o,h){super(o,"UnexpectedResponseException"),this.status=h}}class Kt extends Et{constructor(o){super(o,"FormatError")}}class re extends Et{constructor(o){super(o,"AbortException")}}function _e(u){(typeof u!="object"||(u==null?void 0:u.length)===void 0)&&Ct("Invalid argument for bytesToString");const o=u.length,h=8192;if(o<h)return String.fromCharCode.apply(null,u);const n=[];for(let a=0;a<o;a+=h){const g=Math.min(a+h,o),M=u.subarray(a,g);n.push(String.fromCharCode.apply(null,M))}return n.join("")}function ce(u){typeof u!="string"&&Ct("Invalid argument for stringToBytes");const o=u.length,h=new Uint8Array(o);for(let n=0;n<o;++n)h[n]=u.charCodeAt(n)&255;return h}function he(u){return String.fromCharCode(u>>24&255,u>>16&255,u>>8&255,u&255)}function me(u){const o=Object.create(null);for(const[h,n]of u)o[h]=n;return o}function jt(){const u=new Uint8Array(4);return u[0]=1,new Uint32Array(u.buffer,0,1)[0]===1}function oe(){try{return new Function(""),!0}catch{return!1}}class Ce{static get isLittleEndian(){return Pt(this,"isLittleEndian",jt())}static get isEvalSupported(){return Pt(this,"isEvalSupported",oe())}static get isOffscreenCanvasSupported(){return Pt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Pt(this,"platform",{isMac:navigator.platform.includes("Mac")}):Pt(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var o,h;return Pt(this,"isCSSRoundSupported",(h=(o=globalThis.CSS)==null?void 0:o.supports)==null?void 0:h.call(o,"width: round(1.5px, 1px)"))}}const se=Array.from(Array(256).keys(),u=>u.toString(16).padStart(2,"0"));class Se{static makeHexColor(o,h,n){return`#${se[o]}${se[h]}${se[n]}`}static scaleMinMax(o,h){let n;o[0]?(o[0]<0&&(n=h[0],h[0]=h[2],h[2]=n),h[0]*=o[0],h[2]*=o[0],o[3]<0&&(n=h[1],h[1]=h[3],h[3]=n),h[1]*=o[3],h[3]*=o[3]):(n=h[0],h[0]=h[1],h[1]=n,n=h[2],h[2]=h[3],h[3]=n,o[1]<0&&(n=h[1],h[1]=h[3],h[3]=n),h[1]*=o[1],h[3]*=o[1],o[2]<0&&(n=h[0],h[0]=h[2],h[2]=n),h[0]*=o[2],h[2]*=o[2]),h[0]+=o[4],h[1]+=o[5],h[2]+=o[4],h[3]+=o[5]}static transform(o,h){return[o[0]*h[0]+o[2]*h[1],o[1]*h[0]+o[3]*h[1],o[0]*h[2]+o[2]*h[3],o[1]*h[2]+o[3]*h[3],o[0]*h[4]+o[2]*h[5]+o[4],o[1]*h[4]+o[3]*h[5]+o[5]]}static applyTransform(o,h){const n=o[0]*h[0]+o[1]*h[2]+h[4],a=o[0]*h[1]+o[1]*h[3]+h[5];return[n,a]}static applyInverseTransform(o,h){const n=h[0]*h[3]-h[1]*h[2],a=(o[0]*h[3]-o[1]*h[2]+h[2]*h[5]-h[4]*h[3])/n,g=(-o[0]*h[1]+o[1]*h[0]+h[4]*h[1]-h[5]*h[0])/n;return[a,g]}static getAxialAlignedBoundingBox(o,h){const n=this.applyTransform(o,h),a=this.applyTransform(o.slice(2,4),h),g=this.applyTransform([o[0],o[3]],h),M=this.applyTransform([o[2],o[1]],h);return[Math.min(n[0],a[0],g[0],M[0]),Math.min(n[1],a[1],g[1],M[1]),Math.max(n[0],a[0],g[0],M[0]),Math.max(n[1],a[1],g[1],M[1])]}static inverseTransform(o){const h=o[0]*o[3]-o[1]*o[2];return[o[3]/h,-o[1]/h,-o[2]/h,o[0]/h,(o[2]*o[5]-o[4]*o[3])/h,(o[4]*o[1]-o[5]*o[0])/h]}static singularValueDecompose2dScale(o){const h=[o[0],o[2],o[1],o[3]],n=o[0]*h[0]+o[1]*h[2],a=o[0]*h[1]+o[1]*h[3],g=o[2]*h[0]+o[3]*h[2],M=o[2]*h[1]+o[3]*h[3],y=(n+M)/2,X=Math.sqrt((n+M)**2-4*(n*M-g*a))/2,Z=y+X||1,K=y-X||1;return[Math.sqrt(Z),Math.sqrt(K)]}static normalizeRect(o){const h=o.slice(0);return o[0]>o[2]&&(h[0]=o[2],h[2]=o[0]),o[1]>o[3]&&(h[1]=o[3],h[3]=o[1]),h}static intersect(o,h){const n=Math.max(Math.min(o[0],o[2]),Math.min(h[0],h[2])),a=Math.min(Math.max(o[0],o[2]),Math.max(h[0],h[2]));if(n>a)return null;const g=Math.max(Math.min(o[1],o[3]),Math.min(h[1],h[3])),M=Math.min(Math.max(o[1],o[3]),Math.max(h[1],h[3]));return g>M?null:[n,g,a,M]}static bezierBoundingBox(o,h,n,a,g,M,y,X,Z){return Z?(Z[0]=Math.min(Z[0],o,y),Z[1]=Math.min(Z[1],h,X),Z[2]=Math.max(Z[2],o,y),Z[3]=Math.max(Z[3],h,X)):Z=[Math.min(o,y),Math.min(h,X),Math.max(o,y),Math.max(h,X)],k(this,A,fr).call(this,o,n,g,y,h,a,M,X,3*(-o+3*(n-g)+y),6*(o-2*n+g),3*(n-o),Z),k(this,A,fr).call(this,o,n,g,y,h,a,M,X,3*(-h+3*(a-M)+X),6*(h-2*a+M),3*(a-h),Z),Z}}l=new WeakSet,pn=function(o,h,n,a,g,M,y,X,Z,K){if(Z<=0||Z>=1)return;const it=1-Z,p=Z*Z,L=p*Z,J=it*(it*(it*o+3*Z*h)+3*p*n)+L*a,E=it*(it*(it*g+3*Z*M)+3*p*y)+L*X;K[0]=Math.min(K[0],J),K[1]=Math.min(K[1],E),K[2]=Math.max(K[2],J),K[3]=Math.max(K[3],E)},A=new WeakSet,fr=function(o,h,n,a,g,M,y,X,Z,K,it,p){if(Math.abs(Z)<1e-12){Math.abs(K)>=1e-12&&k(this,l,pn).call(this,o,h,n,a,g,M,y,X,-it/K,p);return}const L=K**2-4*it*Z;if(L<0)return;const J=Math.sqrt(L),E=2*Z;k(this,l,pn).call(this,o,h,n,a,g,M,y,X,(-K+J)/E,p),k(this,l,pn).call(this,o,h,n,a,g,M,y,X,(-K-J)/E,p)},c(Se,l),c(Se,A);function ne(u){return decodeURIComponent(escape(u))}let lt=null,s=null;function r(u){return lt||(lt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,s=new Map([["\uFB05","\u017Ft"]])),u.replaceAll(lt,(o,h,n)=>h?h.normalize("NFKC"):s.get(n))}function d(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const u=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(u);else for(let o=0;o<32;o++)u[o]=Math.floor(Math.random()*255);return _e(u)}const m="pdfjs_internal_id_"}},Mr={};function Ci(f){var O=Mr[f];if(O!==void 0)return O.exports;var w=Mr[f]={exports:{}};return No[f](w,w.exports,Ci),w.exports}(()=>{var f=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",O=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",w=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",i=b=>{b&&b.d<1&&(b.d=1,b.forEach(_=>_.r--),b.forEach(_=>_.r--?_.r++:_()))},D=b=>b.map(_=>{if(_!==null&&typeof _=="object"){if(_[f])return _;if(_.then){var nt=[];nt.d=0,_.then(F=>{z[O]=F,i(nt)},F=>{z[w]=F,i(nt)});var z={};return z[f]=F=>F(nt),z}}var P={};return P[f]=F=>{},P[O]=_,P});Ci.a=(b,_,nt)=>{var z;nt&&((z=[]).d=-1);var P=new Set,F=b.exports,tt,j,C,q=new Promise(($,et)=>{C=et,j=$});q[O]=F,q[f]=$=>(z&&$(z),P.forEach($),q.catch(et=>{})),b.exports=q,_($=>{tt=D($);var et,ut=()=>tt.map(I=>{if(I[w])throw I[w];return I[O]}),st=new Promise(I=>{et=()=>I(ut),et.r=0;var V=W=>W!==z&&!P.has(W)&&(P.add(W),W&&!W.d&&(et.r++,W.push(et)));tt.map(W=>W[f](V))});return et.r?st:ut()},$=>($?C(q[w]=$):j(F),i(z))),z&&z.d<0&&(z.d=0)}})(),Ci.d=(f,O)=>{for(var w in O)Ci.o(O,w)&&!Ci.o(f,w)&&Object.defineProperty(f,w,{enumerable:!0,get:O[w]})},Ci.o=(f,O)=>Object.prototype.hasOwnProperty.call(f,O);var ge=Ci(228);ge=globalThis.pdfjsLib=await(globalThis.pdfjsLibPromise=ge),ge.AbortException,ge.AnnotationEditorLayer,ge.AnnotationEditorParamsType,ge.AnnotationEditorType,ge.AnnotationEditorUIManager,ge.AnnotationLayer,ge.AnnotationMode,ge.CMapCompressionType,ge.ColorPicker,ge.DOMSVGFactory,ge.DrawLayer,ge.FeatureTest;var Pr=ge.GlobalWorkerOptions;ge.ImageKind,ge.InvalidPDFException,ge.MissingPDFException,ge.OPS,ge.Outliner,ge.PDFDataRangeTransport,ge.PDFDateString,ge.PDFWorker,ge.PasswordResponses,ge.PermissionFlag,ge.PixelsPerInch,ge.RenderingCancelledException,ge.UnexpectedResponseException,ge.Util,ge.VerbosityLevel,ge.XfaLayer,ge.build,ge.createValidAbsoluteUrl,ge.fetchData;var kr=ge.getDocument;ge.getFilenameFromUrl,ge.getPdfFilenameFromUrl,ge.getXfaPageViewport,ge.isDataScheme,ge.isPdfFile,ge.noContextMenu,ge.normalizeUnicode,ge.renderTextLayer,ge.setLayerDimensions,ge.shadow,ge.updateTextLayer,ge.version;var Oo={exports:{}};(function(f,O){(function(w,i){f.exports=i()})(window,function(){return function(w){var i={};function D(b){if(i[b])return i[b].exports;var _=i[b]={i:b,l:!1,exports:{}};return w[b].call(_.exports,_,_.exports,D),_.l=!0,_.exports}return D.m=w,D.c=i,D.d=function(b,_,nt){D.o(b,_)||Object.defineProperty(b,_,{enumerable:!0,get:nt})},D.r=function(b){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})},D.t=function(b,_){if(1&_&&(b=D(b)),8&_||4&_&&typeof b=="object"&&b&&b.__esModule)return b;var nt=Object.create(null);if(D.r(nt),Object.defineProperty(nt,"default",{enumerable:!0,value:b}),2&_&&typeof b!="string")for(var z in b)D.d(nt,z,(function(P){return b[P]}).bind(null,z));return nt},D.n=function(b){var _=b&&b.__esModule?function(){return b.default}:function(){return b};return D.d(_,"a",_),_},D.o=function(b,_){return Object.prototype.hasOwnProperty.call(b,_)},D.p="",D(D.s=0)}([function(w,i,D){D.r(i);var b,_="fslightbox-",nt="".concat(_,"styles"),z="".concat(_,"cursor-grabbing"),P="".concat(_,"full-dimension"),F="".concat(_,"flex-centered"),tt="".concat(_,"open"),j="".concat(_,"transform-transition"),C="".concat(_,"absoluted"),q="".concat(_,"slide-btn"),$="".concat(q,"-container"),et="".concat(_,"fade-in"),ut="".concat(_,"fade-out"),st=et+"-strong",I=ut+"-strong",V="".concat(_,"opacity-"),W="".concat(V,"1"),H="".concat(_,"source");function Q(n){return(Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(n)}function ot(n){var a=n.stageIndexes,g=n.core.stageManager,M=n.props.sources.length-1;g.getPreviousSlideIndex=function(){return a.current===0?M:a.current-1},g.getNextSlideIndex=function(){return a.current===M?0:a.current+1},g.updateStageIndexes=M===0?function(){}:M===1?function(){a.current===0?(a.next=1,delete a.previous):(a.previous=0,delete a.next)}:function(){a.previous=g.getPreviousSlideIndex(),a.next=g.getNextSlideIndex()},g.i=M<=2?function(){return!0}:function(y){var X=a.current;if(X===0&&y===M||X===M&&y===0)return!0;var Z=X-y;return Z===-1||Z===0||Z===1}}(typeof document>"u"?"undefined":Q(document))==="object"&&((b=document.createElement("style")).className=nt,b.appendChild(document.createTextNode(".fslightbox-absoluted{position:absolute;top:0;left:0}.fslightbox-fade-in{animation:fslightbox-fade-in .3s cubic-bezier(0,0,.7,1)}.fslightbox-fade-out{animation:fslightbox-fade-out .3s ease}.fslightbox-fade-in-strong{animation:fslightbox-fade-in-strong .3s cubic-bezier(0,0,.7,1)}.fslightbox-fade-out-strong{animation:fslightbox-fade-out-strong .3s ease}@keyframes fslightbox-fade-in{from{opacity:.65}to{opacity:1}}@keyframes fslightbox-fade-out{from{opacity:.35}to{opacity:0}}@keyframes fslightbox-fade-in-strong{from{opacity:.3}to{opacity:1}}@keyframes fslightbox-fade-out-strong{from{opacity:1}to{opacity:0}}.fslightbox-cursor-grabbing{cursor:grabbing}.fslightbox-full-dimension{width:100%;height:100%}.fslightbox-open{overflow:hidden;height:100%}.fslightbox-flex-centered{display:flex;justify-content:center;align-items:center}.fslightbox-opacity-0{opacity:0!important}.fslightbox-opacity-1{opacity:1!important}.fslightbox-scrollbarfix{padding-right:17px}.fslightbox-transform-transition{transition:transform .3s}.fslightbox-container{font-family:Arial,sans-serif;position:fixed;top:0;left:0;background:linear-gradient(rgba(30,30,30,.9),#000 1810%);touch-action:pinch-zoom;z-index:1000000000;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.fslightbox-container *{box-sizing:border-box}.fslightbox-svg-path{transition:fill .15s ease;fill:#ddd}.fslightbox-nav{height:45px;width:100%;position:absolute;top:0;left:0}.fslightbox-slide-number-container{display:flex;justify-content:center;align-items:center;position:relative;height:100%;font-size:15px;color:#d7d7d7;z-index:0;max-width:55px;text-align:left}.fslightbox-slide-number-container .fslightbox-flex-centered{height:100%}.fslightbox-slash{display:block;margin:0 5px;width:1px;height:12px;transform:rotate(15deg);background:#fff}.fslightbox-toolbar{position:absolute;z-index:3;right:0;top:0;height:100%;display:flex;background:rgba(35,35,35,.65)}.fslightbox-toolbar-button{height:100%;width:45px;cursor:pointer}.fslightbox-toolbar-button:hover .fslightbox-svg-path{fill:#fff}.fslightbox-slide-btn-container{display:flex;align-items:center;padding:12px 12px 12px 6px;position:absolute;top:50%;cursor:pointer;z-index:3;transform:translateY(-50%)}@media (min-width:476px){.fslightbox-slide-btn-container{padding:22px 22px 22px 6px}}@media (min-width:768px){.fslightbox-slide-btn-container{padding:30px 30px 30px 6px}}.fslightbox-slide-btn-container:hover .fslightbox-svg-path{fill:#f1f1f1}.fslightbox-slide-btn{padding:9px;font-size:26px;background:rgba(35,35,35,.65)}@media (min-width:768px){.fslightbox-slide-btn{padding:10px}}@media (min-width:1600px){.fslightbox-slide-btn{padding:11px}}.fslightbox-slide-btn-container-previous{left:0}@media (max-width:475.99px){.fslightbox-slide-btn-container-previous{padding-left:3px}}.fslightbox-slide-btn-container-next{right:0;padding-left:12px;padding-right:3px}@media (min-width:476px){.fslightbox-slide-btn-container-next{padding-left:22px}}@media (min-width:768px){.fslightbox-slide-btn-container-next{padding-left:30px}}@media (min-width:476px){.fslightbox-slide-btn-container-next{padding-right:6px}}.fslightbox-down-event-detector{position:absolute;z-index:1}.fslightbox-slide-swiping-hoverer{z-index:4}.fslightbox-invalid-file-wrapper{font-size:22px;color:#eaebeb;margin:auto}.fslightbox-video{object-fit:cover}.fslightbox-youtube-iframe{border:0}.fslightboxl{display:block;margin:auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:67px;height:67px}.fslightboxl div{box-sizing:border-box;display:block;position:absolute;width:54px;height:54px;margin:6px;border:5px solid;border-color:#999 transparent transparent transparent;border-radius:50%;animation:fslightboxl 1.2s cubic-bezier(.5,0,.5,1) infinite}.fslightboxl div:nth-child(1){animation-delay:-.45s}.fslightboxl div:nth-child(2){animation-delay:-.3s}.fslightboxl div:nth-child(3){animation-delay:-.15s}@keyframes fslightboxl{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.fslightbox-source{position:relative;z-index:2;opacity:0}")),document.head.appendChild(b));function At(n){var a,g=n.props,M=0,y={};this.getSourceTypeFromLocalStorageByUrl=function(Z){return a[Z]?a[Z]:X(Z)},this.handleReceivedSourceTypeForUrl=function(Z,K){if(y[K]===!1&&(M--,Z!=="invalid"?y[K]=Z:delete y[K],M===0)){(function(it,p){for(var L in p)it[L]=p[L]})(a,y);try{localStorage.setItem("fslightbox-types",JSON.stringify(a))}catch{}}};var X=function(Z){M++,y[Z]=!1};if(g.disableLocalStorage)this.getSourceTypeFromLocalStorageByUrl=function(){},this.handleReceivedSourceTypeForUrl=function(){};else{try{a=JSON.parse(localStorage.getItem("fslightbox-types"))}catch{}a||(a={},this.getSourceTypeFromLocalStorageByUrl=X)}}function Dt(n,a,g,M){var y=n.data,X=n.elements.sources,Z=g/M,K=0;this.adjustSize=function(){if((K=y.maxSourceWidth/Z)<y.maxSourceHeight)return g<y.maxSourceWidth&&(K=M),it();K=M>y.maxSourceHeight?y.maxSourceHeight:M,it()};var it=function(){X[a].style.width=K*Z+"px",X[a].style.height=K+"px"}}function Ct(n,a){var g=this,M=n.collections.sourceSizers,y=n.elements,X=y.sourceAnimationWrappers,Z=y.sources,K=n.isl,it=n.resolve;function p(L,J){M[a]=it(Dt,[a,L,J]),M[a].adjustSize()}this.runActions=function(L,J){K[a]=!0,Z[a].classList.add(W),X[a].classList.add(st),X[a].removeChild(X[a].firstChild),p(L,J),g.runActions=p}}function Nt(n,a){var g,M=this,y=n.elements.sources,X=n.props,Z=(0,n.resolve)(Ct,[a]);this.handleImageLoad=function(K){var it=K.target,p=it.naturalWidth,L=it.naturalHeight;Z.runActions(p,L)},this.handleVideoLoad=function(K){var it=K.target,p=it.videoWidth,L=it.videoHeight;g=!0,Z.runActions(p,L)},this.handleNotMetaDatedVideoLoad=function(){g||M.handleYoutubeLoad()},this.handleYoutubeLoad=function(){var K=1920,it=1080;X.maxYoutubeDimensions&&(K=X.maxYoutubeDimensions.width,it=X.maxYoutubeDimensions.height),Z.runActions(K,it)},this.handleCustomLoad=function(){var K=y[a],it=K.offsetWidth,p=K.offsetHeight;it&&p?Z.runActions(it,p):setTimeout(M.handleCustomLoad)}}function wt(n,a,g){var M=n.elements.sources,y=n.props.customClasses,X=y[a]?y[a]:"";M[a].className=g+" "+X}function Tt(n,a){var g=n.elements.sources,M=n.props.customAttributes;for(var y in M[a])g[a].setAttribute(y,M[a][y])}function Pt(n,a){var g=n.collections.sourceLoadHandlers,M=n.elements,y=M.sources,X=M.sourceAnimationWrappers,Z=n.props.sources;y[a]=document.createElement("img"),wt(n,a,H),y[a].src=Z[a],y[a].onload=g[a].handleImageLoad,Tt(n,a),X[a].appendChild(y[a])}function Et(n,a){var g=n.collections.sourceLoadHandlers,M=n.elements,y=M.sources,X=M.sourceAnimationWrappers,Z=n.props,K=Z.sources,it=Z.videosPosters;y[a]=document.createElement("video"),wt(n,a,H),y[a].src=K[a],y[a].onloadedmetadata=function(L){g[a].handleVideoLoad(L)},y[a].controls=!0,Tt(n,a),it[a]&&(y[a].poster=it[a]);var p=document.createElement("source");p.src=K[a],y[a].appendChild(p),setTimeout(g[a].handleNotMetaDatedVideoLoad,3e3),X[a].appendChild(y[a])}function at(n,a){var g=n.collections.sourceLoadHandlers,M=n.elements,y=M.sources,X=M.sourceAnimationWrappers,Z=n.props.sources;y[a]=document.createElement("iframe"),wt(n,a,"".concat(H," ").concat(_,"youtube-iframe"));var K=Z[a],it=K.split("?")[1];y[a].src="https://www.youtube.com/embed/".concat(K.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/)[2],"?").concat(it||""),y[a].allowFullscreen=!0,Tt(n,a),X[a].appendChild(y[a]),g[a].handleYoutubeLoad()}function bt(n,a){var g=n.collections.sourceLoadHandlers,M=n.elements,y=M.sources,X=M.sourceAnimationWrappers,Z=n.props.sources;y[a]=Z[a],wt(n,a,"".concat(y[a].className," ").concat(H)),X[a].appendChild(y[a]),g[a].handleCustomLoad()}function kt(n,a){var g=n.elements,M=g.sources,y=g.sourceAnimationWrappers;n.props.sources,M[a]=document.createElement("div"),M[a].className="".concat(_,"invalid-file-wrapper ").concat(F),M[a].innerHTML="Invalid source",y[a].classList.add(st),y[a].removeChild(y[a].firstChild),y[a].appendChild(M[a])}function Rt(n){var a=n.collections,g=a.sourceLoadHandlers,M=a.sourcesRenderFunctions,y=n.core.sourceDisplayFacade,X=n.resolve;this.runActionsForSourceTypeAndIndex=function(Z,K){var it;switch(Z!=="invalid"&&(g[K]=X(Nt,[K])),Z){case"image":it=Pt;break;case"video":it=Et;break;case"youtube":it=at;break;case"custom":it=bt;break;default:it=kt}M[K]=function(){return it(n,K)},y.displaySourcesWhichShouldBeDisplayed()}}function Ut(){var n,a,g,M={isUrlYoutubeOne:function(X){var Z=document.createElement("a");return Z.href=X,Z.hostname==="www.youtube.com"||Z.hostname==="youtu.be"},getTypeFromResponseContentType:function(X){return X.slice(0,X.indexOf("/"))}};function y(){if(g.readyState!==4){if(g.readyState===2){var X;switch(M.getTypeFromResponseContentType(g.getResponseHeader("content-type"))){case"image":X="image";break;case"video":X="video";break;default:X="invalid"}g.onreadystatechange=null,g.abort(),a(X)}}else a("invalid")}this.setUrlToCheck=function(X){n=X},this.getSourceType=function(X){if(M.isUrlYoutubeOne(n))return X("youtube");a=X,(g=new XMLHttpRequest).onreadystatechange=y,g.open("GET",n,!0),g.send()}}function Kt(n,a,g){var M=n.props,y=M.types,X=M.type,Z=M.sources,K=n.resolve;this.getTypeSetByClientForIndex=function(it){var p;return y&&y[it]?p=y[it]:X&&(p=X),p},this.retrieveTypeWithXhrForIndex=function(it){var p=K(Ut);p.setUrlToCheck(Z[it]),p.getSourceType(function(L){a.handleReceivedSourceTypeForUrl(L,Z[it]),g.runActionsForSourceTypeAndIndex(L,it)})}}function re(n,a){var g=n.core.stageManager,M=n.elements,y=M.smw,X=M.sourceWrappersContainer,Z=n.props,K=0,it=document.createElement("div");function p(J){it.style.transform="translateX(".concat(J+K,"px)"),K=0}function L(){return(1+Z.slideDistance)*innerWidth}it.className="".concat(C," ").concat(P," ").concat(F),it.s=function(){it.style.display="flex"},it.h=function(){it.style.display="none"},it.a=function(){it.classList.add(j)},it.d=function(){it.classList.remove(j)},it.n=function(){it.style.removeProperty("transform")},it.v=function(J){return K=J,it},it.ne=function(){p(-L())},it.z=function(){p(0)},it.p=function(){p(L())},g.i(a)||it.h(),y[a]=it,X.appendChild(it),function(J,E){var v=J.elements,G=v.smw,Y=v.sourceAnimationWrappers,ht=document.createElement("div"),gt=document.createElement("div");gt.className="fslightboxl";for(var xt=0;xt<3;xt++){var Ft=document.createElement("div");gt.appendChild(Ft)}ht.appendChild(gt),G[E].appendChild(ht),Y[E]=ht}(n,a)}function _e(n,a,g,M){var y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.setAttributeNS(null,"width",a),y.setAttributeNS(null,"height",a),y.setAttributeNS(null,"viewBox",g);var X=document.createElementNS("http://www.w3.org/2000/svg","path");return X.setAttributeNS(null,"class","".concat(_,"svg-path")),X.setAttributeNS(null,"d",M),y.appendChild(X),n.appendChild(y),y}function ce(n,a){var g=document.createElement("div");return g.className="".concat(_,"toolbar-button ").concat(F),g.title=a,n.appendChild(g),g}function he(n,a){var g=document.createElement("div");g.className="".concat(_,"toolbar"),a.appendChild(g),function(M,y){var X=M.componentsServices,Z=M.data,K=M.fs,it="M4.5 11H3v4h4v-1.5H4.5V11zM3 7h1.5V4.5H7V3H3v4zm10.5 6.5H11V15h4v-4h-1.5v2.5zM11 3v1.5h2.5V7H15V3h-4z",p=ce(y);p.title="Enter fullscreen";var L=_e(p,"20px","0 0 18 18",it);X.ofs=function(){Z.ifs=!0,p.title="Exit fullscreen",L.setAttributeNS(null,"width","24px"),L.setAttributeNS(null,"height","24px"),L.setAttributeNS(null,"viewBox","0 0 950 1024"),L.firstChild.setAttributeNS(null,"d","M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z")},X.xfs=function(){Z.ifs=!1,p.title="Enter fullscreen",L.setAttributeNS(null,"width","20px"),L.setAttributeNS(null,"height","20px"),L.setAttributeNS(null,"viewBox","0 0 18 18"),L.firstChild.setAttributeNS(null,"d",it)},p.onclick=K.t}(n,g),function(M,y){var X=ce(y,"Close");X.onclick=M.core.lightboxCloser.closeLightbox,_e(X,"20px","0 0 24 24","M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z")}(n,g)}function me(n){var a=n.props.sources,g=n.elements.container,M=document.createElement("div");M.className="".concat(_,"nav"),g.appendChild(M),he(n,M),a.length>1&&function(y,X){var Z=y.componentsServices,K=y.props.sources,it=(y.stageIndexes,document.createElement("div"));it.className="".concat(_,"slide-number-container");var p=document.createElement("div");p.className=F;var L=document.createElement("span");Z.setSlideNumber=function(v){return L.innerHTML=v};var J=document.createElement("span");J.className="".concat(_,"slash");var E=document.createElement("div");E.innerHTML=K.length,it.appendChild(p),p.appendChild(L),p.appendChild(J),p.appendChild(E),X.appendChild(it),setTimeout(function(){p.offsetWidth>55&&(it.style.justifyContent="flex-start")})}(n,M)}function jt(n,a,g,M){var y=n.elements.container,X=g.charAt(0).toUpperCase()+g.slice(1),Z=document.createElement("div");Z.className="".concat($," ").concat($,"-").concat(g),Z.title="".concat(X," slide"),Z.onclick=a,function(K,it){var p=document.createElement("div");p.className="".concat(q," ").concat(F),_e(p,"20px","0 0 20 20",it),K.appendChild(p)}(Z,M),y.appendChild(Z)}function oe(n){var a=n.core,g=a.lightboxCloser,M=a.slideChangeFacade,y=n.fs;this.listener=function(X){switch(X.key){case"Escape":g.closeLightbox();break;case"ArrowLeft":M.changeToPrevious();break;case"ArrowRight":M.changeToNext();break;case"F11":X.preventDefault(),y.t()}}}function Ce(n){var a=n.elements,g=n.sourcePointerProps,M=n.stageIndexes;function y(X,Z){a.smw[X].v(g.swipedX)[Z]()}this.runActionsForEvent=function(X){var Z,K,it;a.container.contains(a.slideSwipingHoverer)||a.container.appendChild(a.slideSwipingHoverer),Z=a.container,K=z,(it=Z.classList).contains(K)||it.add(K),g.swipedX=X.screenX-g.downScreenX;var p=M.previous,L=M.next;y(M.current,"z"),p!==void 0&&g.swipedX>0?y(p,"ne"):L!==void 0&&g.swipedX<0&&y(L,"p")}}function se(n){var a=n.props.sources,g=n.resolve,M=n.sourcePointerProps,y=g(Ce);a.length===1?this.listener=function(){M.swipedX=1}:this.listener=function(X){M.isPointering&&y.runActionsForEvent(X)}}function Se(n){var a=n.core.slideIndexChanger,g=n.elements.smw,M=n.stageIndexes,y=n.sws;function X(K){var it=g[M.current];it.a(),it[K]()}function Z(K,it){K!==void 0&&(g[K].s(),g[K][it]())}this.runPositiveSwipedXActions=function(){var K=M.previous;if(K===void 0)X("z");else{X("p");var it=M.next;a.changeTo(K);var p=M.previous;y.d(p),y.b(it),X("z"),Z(p,"ne")}},this.runNegativeSwipedXActions=function(){var K=M.next;if(K===void 0)X("z");else{X("ne");var it=M.previous;a.changeTo(K);var p=M.next;y.d(p),y.b(it),X("z"),Z(p,"p")}}}function ne(n,a){n.contains(a)&&n.removeChild(a)}function lt(n){var a=n.core.lightboxCloser,g=n.elements,M=n.resolve,y=n.sourcePointerProps,X=M(Se);this.runNoSwipeActions=function(){ne(g.container,g.slideSwipingHoverer),y.isSourceDownEventTarget||a.closeLightbox(),y.isPointering=!1},this.runActions=function(){y.swipedX>0?X.runPositiveSwipedXActions():X.runNegativeSwipedXActions(),ne(g.container,g.slideSwipingHoverer),g.container.classList.remove(z),y.isPointering=!1}}function s(n){var a=n.resolve,g=n.sourcePointerProps,M=a(lt);this.listener=function(){g.isPointering&&(g.swipedX?M.runActions():M.runNoSwipeActions())}}function r(n){var a=this,g=n.core,M=g.eventsDispatcher,y=g.globalEventsController,X=g.scrollbarRecompensor,Z=n.data,K=n.elements,it=n.fs,p=n.props,L=n.sourcePointerProps;this.isLightboxFadingOut=!1,this.runActions=function(){a.isLightboxFadingOut=!0,K.container.classList.add(I),y.removeListeners(),p.exitFullscreenOnClose&&Z.ifs&&it.x(),setTimeout(function(){a.isLightboxFadingOut=!1,L.isPointering=!1,K.container.classList.remove(I),document.documentElement.classList.remove(tt),X.removeRecompense(),document.body.removeChild(K.container),M.dispatch("onClose")},270)}}function d(n,a){var g=n.classList;g.contains(a)&&g.remove(a)}function m(n){var a,g,M;g=(a=n).core.eventsDispatcher,M=a.props,g.dispatch=function(y){M[y]&&M[y]()},function(y){var X=y.componentsServices,Z=y.data,K=y.fs,it=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];function p(J){for(var E=0;E<it.length;E++)document[J](it[E],L)}function L(){document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement?X.ofs():X.xfs()}K.o=function(){X.ofs();var J=document.documentElement;J.requestFullscreen?J.requestFullscreen():J.mozRequestFullScreen?J.mozRequestFullScreen():J.webkitRequestFullscreen?J.webkitRequestFullscreen():J.msRequestFullscreen&&J.msRequestFullscreen()},K.x=function(){X.xfs(),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},K.t=function(){Z.ifs?K.x():K.o()},K.l=function(){p("addEventListener")},K.q=function(){p("removeEventListener")}}(n),function(y){var X=y.core,Z=X.globalEventsController,K=X.windowResizeActioner,it=y.fs,p=y.resolve,L=p(oe),J=p(se),E=p(s);Z.attachListeners=function(){document.addEventListener("pointermove",J.listener),document.addEventListener("pointerup",E.listener),addEventListener("resize",K.runActions),document.addEventListener("keydown",L.listener),it.l()},Z.removeListeners=function(){document.removeEventListener("pointermove",J.listener),document.removeEventListener("pointerup",E.listener),removeEventListener("resize",K.runActions),document.removeEventListener("keydown",L.listener),it.q()}}(n),function(y){var X=y.core.lightboxCloser,Z=(0,y.resolve)(r);X.closeLightbox=function(){Z.isLightboxFadingOut||Z.runActions()}}(n),function(y){var X=y.data,Z=y.core.scrollbarRecompensor;function K(){document.body.offsetHeight>innerHeight&&(document.body.style.marginRight=X.scrollbarWidth+"px")}Z.addRecompense=function(){document.readyState==="complete"?K():addEventListener("load",function(){K(),Z.addRecompense=K})},Z.removeRecompense=function(){document.body.style.removeProperty("margin-right")}}(n),function(y){var X=y.core,Z=X.slideChangeFacade,K=X.slideIndexChanger,it=X.stageManager;y.props.sources.length>1?(Z.changeToPrevious=function(){K.jumpTo(it.getPreviousSlideIndex())},Z.changeToNext=function(){K.jumpTo(it.getNextSlideIndex())}):(Z.changeToPrevious=function(){},Z.changeToNext=function(){})}(n),function(y){var X=y.componentsServices,Z=y.core,K=Z.slideIndexChanger,it=Z.sourceDisplayFacade,p=Z.stageManager,L=y.elements,J=L.smw,E=L.sourceAnimationWrappers,v=y.isl,G=y.stageIndexes,Y=y.sws;K.changeTo=function(ht){G.current=ht,p.updateStageIndexes(),X.setSlideNumber(ht+1),it.displaySourcesWhichShouldBeDisplayed()},K.jumpTo=function(ht){var gt=G.previous,xt=G.current,Ft=G.next,Xt=v[xt],ie=v[ht];K.changeTo(ht);for(var ee=0;ee<J.length;ee++)J[ee].d();Y.d(xt),Y.c(),requestAnimationFrame(function(){requestAnimationFrame(function(){var Ae=G.previous,ve=G.next;function ke(){p.i(xt)?xt===G.previous?J[xt].ne():xt===G.next&&J[xt].p():(J[xt].h(),J[xt].n())}Xt&&E[xt].classList.add(ut),ie&&E[G.current].classList.add(et),Y.a(),Ae!==void 0&&Ae!==xt&&J[Ae].ne(),J[G.current].n(),ve!==void 0&&ve!==xt&&J[ve].p(),Y.b(gt),Y.b(Ft),v[xt]?setTimeout(ke,260):ke()})})}}(n),function(y){var X=y.core.sourcesPointerDown,Z=y.elements,K=Z.smw,it=Z.sources,p=y.sourcePointerProps,L=y.stageIndexes;X.listener=function(J){J.target.tagName!=="VIDEO"&&J.preventDefault(),p.isPointering=!0,p.downScreenX=J.screenX,p.swipedX=0;var E=it[L.current];E&&E.contains(J.target)?p.isSourceDownEventTarget=!0:p.isSourceDownEventTarget=!1;for(var v=0;v<K.length;v++)K[v].d()}}(n),function(y){var X=y.collections.sourcesRenderFunctions,Z=y.core.sourceDisplayFacade,K=y.props,it=y.stageIndexes;function p(L){X[L]&&(X[L](),delete X[L])}Z.displaySourcesWhichShouldBeDisplayed=function(){if(K.loadOnlyCurrentSource)p(it.current);else for(var L in it)p(it[L])}}(n),function(y){var X=y.core.stageManager,Z=y.elements,K=Z.smw,it=Z.sourceAnimationWrappers,p=y.isl,L=y.stageIndexes,J=y.sws;J.a=function(){for(var E in L)K[L[E]].s()},J.b=function(E){E===void 0||X.i(E)||(K[E].h(),K[E].n())},J.c=function(){for(var E in L)J.d(L[E])},J.d=function(E){if(p[E]){var v=it[E];d(v,st),d(v,et),d(v,ut)}}}(n),function(y){var X=y.collections.sourceSizers,Z=y.core.windowResizeActioner,K=y.data,it=y.elements.smw,p=y.stageIndexes;Z.runActions=function(){innerWidth<992?K.maxSourceWidth=innerWidth:K.maxSourceWidth=.9*innerWidth,K.maxSourceHeight=.9*innerHeight;for(var L=0;L<it.length;L++)it[L].d(),X[L]&&X[L].adjustSize();var J=p.previous,E=p.next;J!==void 0&&it[J].ne(),E!==void 0&&it[E].p()}}(n)}function l(n){var a=n.componentsServices,g=n.core,M=g.eventsDispatcher,y=g.globalEventsController,X=g.scrollbarRecompensor,Z=g.sourceDisplayFacade,K=g.stageManager,it=g.windowResizeActioner,p=n.data,L=n.elements,J=(n.props,n.stageIndexes),E=n.sws;function v(){var G,Y;p.i=!0,p.scrollbarWidth=function(){var ht=document.createElement("div"),gt=ht.style,xt=document.createElement("div");gt.visibility="hidden",gt.width="100px",gt.msOverflowStyle="scrollbar",gt.overflow="scroll",xt.style.width="100%",document.body.appendChild(ht);var Ft=ht.offsetWidth;ht.appendChild(xt);var Xt=xt.offsetWidth;return document.body.removeChild(ht),Ft-Xt}(),m(n),L.container=document.createElement("div"),L.container.className="".concat(_,"container ").concat(P," ").concat(st),function(ht){var gt=ht.elements;gt.slideSwipingHoverer=document.createElement("div"),gt.slideSwipingHoverer.className="".concat(_,"slide-swiping-hoverer ").concat(P," ").concat(C)}(n),me(n),function(ht){var gt=ht.core.sourcesPointerDown,xt=ht.elements,Ft=ht.props.sources,Xt=document.createElement("div");Xt.className="".concat(C," ").concat(P),xt.container.appendChild(Xt),Xt.addEventListener("pointerdown",gt.listener),xt.sourceWrappersContainer=Xt;for(var ie=0;ie<Ft.length;ie++)re(ht,ie)}(n),n.props.sources.length>1&&(Y=(G=n).core.slideChangeFacade,jt(G,Y.changeToPrevious,"previous","M18.271,9.212H3.615l4.184-4.184c0.306-0.306,0.306-0.801,0-1.107c-0.306-0.306-0.801-0.306-1.107,0L1.21,9.403C1.194,9.417,1.174,9.421,1.158,9.437c-0.181,0.181-0.242,0.425-0.209,0.66c0.005,0.038,0.012,0.071,0.022,0.109c0.028,0.098,0.075,0.188,0.142,0.271c0.021,0.026,0.021,0.061,0.045,0.085c0.015,0.016,0.034,0.02,0.05,0.033l5.484,5.483c0.306,0.307,0.801,0.307,1.107,0c0.306-0.305,0.306-0.801,0-1.105l-4.184-4.185h14.656c0.436,0,0.788-0.353,0.788-0.788S18.707,9.212,18.271,9.212z"),jt(G,Y.changeToNext,"next","M1.729,9.212h14.656l-4.184-4.184c-0.307-0.306-0.307-0.801,0-1.107c0.305-0.306,0.801-0.306,1.106,0l5.481,5.482c0.018,0.014,0.037,0.019,0.053,0.034c0.181,0.181,0.242,0.425,0.209,0.66c-0.004,0.038-0.012,0.071-0.021,0.109c-0.028,0.098-0.075,0.188-0.143,0.271c-0.021,0.026-0.021,0.061-0.045,0.085c-0.015,0.016-0.034,0.02-0.051,0.033l-5.483,5.483c-0.306,0.307-0.802,0.307-1.106,0c-0.307-0.305-0.307-0.801,0-1.105l4.184-4.185H1.729c-0.436,0-0.788-0.353-0.788-0.788S1.293,9.212,1.729,9.212z")),function(ht){for(var gt=ht.props.sources,xt=ht.resolve,Ft=xt(At),Xt=xt(Rt),ie=xt(Kt,[Ft,Xt]),ee=0;ee<gt.length;ee++)if(typeof gt[ee]=="string"){var Ae=ie.getTypeSetByClientForIndex(ee);if(Ae)Xt.runActionsForSourceTypeAndIndex(Ae,ee);else{var ve=Ft.getSourceTypeFromLocalStorageByUrl(gt[ee]);ve?Xt.runActionsForSourceTypeAndIndex(ve,ee):ie.retrieveTypeWithXhrForIndex(ee)}}else Xt.runActionsForSourceTypeAndIndex("custom",ee)}(n),M.dispatch("onInit")}n.open=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Y=J.previous,ht=J.current,gt=J.next;J.current=G,p.i||ot(n),K.updateStageIndexes(),p.i?(E.c(),E.a(),E.b(Y),E.b(ht),E.b(gt),M.dispatch("onShow")):v(),Z.displaySourcesWhichShouldBeDisplayed(),a.setSlideNumber(G+1),document.body.appendChild(L.container),document.documentElement.classList.add(tt),X.addRecompense(),y.attachListeners(),it.runActions(),L.smw[J.current].n(),M.dispatch("onOpen")}}function x(n,a,g){return(x=A()?Reflect.construct.bind():function(M,y,X){var Z=[null];Z.push.apply(Z,y);var K=new(Function.bind.apply(M,Z));return X&&S(K,X.prototype),K}).apply(null,arguments)}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(n,a){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,M){return g.__proto__=M,g})(n,a)}function u(n){return function(a){if(Array.isArray(a))return o(a)}(n)||function(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}(n)||function(a,g){if(a){if(typeof a=="string")return o(a,g);var M=Object.prototype.toString.call(a).slice(8,-1);if(M==="Object"&&a.constructor&&(M=a.constructor.name),M==="Map"||M==="Set")return Array.from(a);if(M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M))return o(a,g)}}(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function o(n,a){(a==null||a>n.length)&&(a=n.length);for(var g=0,M=new Array(a);g<a;g++)M[g]=n[g];return M}function h(){for(var n=document.getElementsByTagName("a"),a=function(y){if(!n[y].hasAttribute("data-fslightbox"))return"continue";var X=n[y].hasAttribute("data-href")?n[y].getAttribute("data-href"):n[y].getAttribute("href");if(!X)return console.warn('The "data-fslightbox" attribute was set without the "href" attribute.'),"continue";var Z=n[y].getAttribute("data-fslightbox");fsLightboxInstances[Z]||(fsLightboxInstances[Z]=new FsLightbox);var K=null;X.charAt(0)==="#"?(K=document.getElementById(X.substring(1)).cloneNode(!0)).removeAttribute("id"):K=X,fsLightboxInstances[Z].props.sources.push(K),fsLightboxInstances[Z].elements.a.push(n[y]);var it=fsLightboxInstances[Z].props.sources.length-1;n[y].onclick=function(Y){Y.preventDefault(),fsLightboxInstances[Z].open(it)},G("types","data-type"),G("videosPosters","data-video-poster"),G("customClasses","data-class"),G("customClasses","data-custom-class");for(var p=["href","data-fslightbox","data-href","data-type","data-video-poster","data-class","data-custom-class"],L=n[y].attributes,J=fsLightboxInstances[Z].props.customAttributes,E=0;E<L.length;E++)if(p.indexOf(L[E].name)===-1&&L[E].name.substr(0,5)==="data-"){J[it]||(J[it]={});var v=L[E].name.substr(5);J[it][v]=L[E].value}function G(Y,ht){n[y].hasAttribute(ht)&&(fsLightboxInstances[Z].props[Y][it]=n[y].getAttribute(ht))}},g=0;g<n.length;g++)a(g);var M=Object.keys(fsLightboxInstances);window.fsLightbox=fsLightboxInstances[M[M.length-1]]}window.FsLightbox=function(){var n=this;this.props={sources:[],customAttributes:[],customClasses:[],types:[],videosPosters:[],slideDistance:.3},this.data={isFullscreenOpen:!1,maxSourceWidth:0,maxSourceHeight:0,scrollbarWidth:0},this.isl=[],this.sourcePointerProps={downScreenX:null,isPointering:!1,isSourceDownEventTarget:!1,swipedX:0},this.stageIndexes={},this.elements={a:[],container:null,slideSwipingHoverer:null,smw:[],sourceWrappersContainer:null,sources:[],sourceAnimationWrappers:[]},this.componentsServices={setSlideNumber:function(){}},this.resolve=function(a){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return g.unshift(n),x(a,u(g))},this.collections={sourceLoadHandlers:[],sourcesRenderFunctions:[],sourceSizers:[]},this.core={eventsDispatcher:{},globalEventsController:{},lightboxCloser:{},lightboxUpdater:{},scrollbarRecompensor:{},slideChangeFacade:{},slideIndexChanger:{},sourcesPointerDown:{},sourceDisplayFacade:{},stageManager:{},windowResizeActioner:{}},this.fs={},this.sws={},l(this),this.close=function(){return n.core.lightboxCloser.closeLightbox()}},window.fsLightboxInstances={},h(),window.refreshFsLightbox=function(){for(var n in fsLightboxInstances){var a=fsLightboxInstances[n].props;fsLightboxInstances[n]=new FsLightbox,fsLightboxInstances[n].props=a,fsLightboxInstances[n].props.sources=[],fsLightboxInstances[n].elements.a=[]}h()}}])})})(Oo);const Rr="https://cdn.jsdelivr.net/gh/DaimlarTech/blitz-ui-demo-cdn/cdn/cmaps/",Fr="https://cdn.jsdelivr.net/gh/DaimlarTech/blitz-ui-demo-cdn/cdn/pdf.worker.mjs";class Ho{constructor(O,w=2){if(!O||!O.dataset.url)throw new Error("invalid element!");this.element=O,this.url=O.dataset.url,this.scale=w,this.data=[]}loading(O){O?this.element.classList.add("pdf-preview__loading"):this.element.classList.remove("pdf-preview__loading")}blobtoDataUrl(O){return new Promise(w=>{const i=new FileReader;i.readAsDataURL(O),i.onload=()=>{w(i.result.replace("data:application/pdf;base64,",""))}})}draw(O){Pr.workerSrc=Fr,kr({data:atob(O),cMapUrl:Rr,cMapPacked:!0}).promise.then(async w=>{for(let i=1;i<=w.numPages;i++)await this.getPage(i,w)},w=>{console.error(w)}).then(()=>{const w=document.createElement("img");w.setAttribute("class","pdf-preview__image"),w.onload=()=>{this.element.addEventListener("click",this.display(this.data)),this.element.appendChild(w),this.loading(!1)},w.src=this.data[0]})}display(O){var w=new FsLightbox;return w.props.sources=O,refreshFsLightbox(),()=>{w.open()}}async getPage(O,w){const i=this.scale,D=this.data;return new Promise(b=>{w.getPage(O).then(function(_){var nt=_.getViewport({scale:i});let z=200/72;var P=document.createElement("canvas"),F=P.getContext("2d");P.height=nt.height*z,P.width=nt.width*z;var tt={canvasContext:F,viewport:nt,transform:[z,0,0,z,0,0]},j=_.render(tt);j.promise.then(async()=>{D.push(P.toDataURL("image/png")),b()})})})}async fetchFile(){return this.loading(!0),fetch(this.url,{headers:{"Content-Type":"application/pdf"}}).then(O=>O.blob()).then(O=>{var w=new Blob([O],{type:"application/pdf"});return Ir(w)}).then(O=>this.draw(O))}}class Bo{constructor(O,w=2,i=(D,b)=>{}){if(!O||!O.dataset.url)throw new Error("PdfConvert: failed to instanciate");this.element=O,this.url=O.dataset.url,this.scale=w,this.data=[],this.callback=i}async init(){fetch(this.url,{headers:{"Content-Type":"application/pdf"}}).then(O=>O.blob()).then(O=>{var w=new Blob([O],{type:"application/pdf"});return Ir(w)}).then(O=>this.convertFiles(O)).catch(O=>{this.loading=!1,this.error=O})}convertFiles(O){Pr.workerSrc=Fr,kr({data:atob(O),cMapUrl:Rr,cMapPacked:!0}).promise.then(async w=>{for(let i=1;i<=w.numPages;i++)await this.pdf2png(i,w)},w=>{console.error(w)}).then(()=>{this.callback(this.data,this.element)})}async pdf2png(O,w){const i=this.scale,D=this.data;return new Promise(b=>{w.getPage(O).then(function(_){var nt=_.getViewport({scale:i});let z=200/72;var P=document.createElement("canvas"),F=P.getContext("2d");P.height=nt.height*z,P.width=nt.width*z;var tt={canvasContext:F,viewport:nt,transform:[z,0,0,z,0,0]},j=_.render(tt);j.promise.then(async()=>{D.push(P.toDataURL("image/png")),b()})})})}}function Ir(f){return new Promise(O=>{const w=new FileReader;w.readAsDataURL(f),w.onload=()=>{O(w.result.replace("data:application/pdf;base64,",""))}})}document.querySelectorAll('[data-role="pdf-preview"]').forEach(f=>{new Ho(f).fetchFile()}),document.querySelectorAll('[data-role="pdf-preview-dl"]').forEach(f=>{const O=i=>function D(){D.read||(D.read=Math.abs(this.scrollHeight-this.clientHeight-this.scrollTop)<1,D.read&&window.dispatchEvent(new CustomEvent("readend",{detail:i})))},w=(i,D)=>{const b=document.createElement("div");b.classList.add("pdf-preview__container"),i.forEach((_,nt)=>{const z=document.createElement("img");z.classList.add("pdf-popup__img"),z.onload=()=>{if(b.appendChild(z),nt===i.length-1){D.innerHTML=null,D.appendChild(b);const P=document.querySelectorAll('[data-role="scroll-check"]');window.addEventListener("readend",F=>{const tt=document.querySelector(F.detail);tt&&(tt.disabled=!1)}),P.forEach(F=>{document.querySelector(F.dataset.target).addEventListener("scroll",O(`#${F.id}`))})}},z.src=_})};new Bo(f,2,w).init()}),document.querySelectorAll('[data-role="pdf-popup-btn"]').forEach(f=>{f.addEventListener("click",()=>{document.querySelector(f.dataset.target).classList.toggle("pdf-popup__hidden")})}),document.querySelectorAll('[data-role="scroll-check-btn"]').forEach(f=>{document.querySelector(f.dataset.target).addEventListener("change",O=>{f.disabled=!O.target.checked}),f.addEventListener("click",()=>{document.querySelector(f.dataset.download).click();const O=document.querySelector(`[name="${f.dataset.result}"]`);O.value=new Date().toISOString(),O.dispatchEvent(new Event("change")),document.querySelector(f.dataset.modal).classList.toggle("pdf-popup__hidden")})}),document.querySelectorAll('[data-role="download-result-display"]').forEach(f=>{document.querySelector(`[name="${f.dataset.target}"]`).addEventListener("change",O=>{f.textContent=O.target.value.length===0?"\u672A\u627F\u8AFE":"\u627F\u8AFE\u6E08\u307F"})});const Dr=document.querySelector('[data-role="zip-search_input"]'),Ps=document.querySelector('[data-role="zip-search_btn"'),zo=document.querySelector("#prefecture"),jo=document.querySelector("#city"),Go=document.querySelector("#street"),Uo=document.querySelector("#js-zip_error"),qo="https://api.zipaddress.net/";var vn="",ks="";Dr&&Ps&&(Dr.addEventListener("input",$o),Ps.addEventListener("click",Xo));async function Wo(){const f=`${qo}?zipcode=${vn}`;return fetch(f).then(O=>O.json()).then(O=>O.code!==200?{data:O.message,error:!0}:{data:O.data,error:!1})}function $o(f){const O=f.target.value;Ps.disabled=!0,ks="",O.length===7?(vn=O,Ps.disabled=!1):O.length!=0&&(ks="7\u6841\u306E\u6570\u5B57\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002"),Nr()}async function Xo(){var f;if(vn.length===7){const O=await Wo();if(O.error){ks=O.data,Nr();return}zo.value=bn[f=O.data.pref]??(bn[f]=""),jo.value=O.data.city,Go.value=O.data.town}}function Nr(){Uo.textContent=ks}const bn={\u5317\u6D77\u9053:1,\u9752\u68EE\u770C:2,\u5CA9\u624B\u770C:3,\u5BAE\u57CE\u770C:4,\u79CB\u7530\u770C:5,\u5C71\u5F62\u770C:6,\u798F\u5CF6\u770C:7,\u8328\u57CE\u770C:8,\u6803\u6728\u770C:9,\u7FA4\u99AC\u770C:10,\u57FC\u7389\u770C:11,\u5343\u8449\u770C:12,\u6771\u4EAC\u90FD:13,\u795E\u5948\u5DDD\u770C:14,\u65B0\u6F5F\u770C:15,\u5BCC\u5C71\u770C:16,\u77F3\u5DDD\u770C:17,\u798F\u4E95\u770C:18,\u5C71\u68A8\u770C:19,\u9577\u91CE\u770C:20,\u5C90\u961C\u770C:21,\u9759\u5CA1\u770C:22,\u611B\u77E5\u770C:23,\u4E09\u91CD\u770C:24,\u6ECB\u8CC0\u770C:25,\u4EAC\u90FD\u5E9C:26,\u5927\u962A\u5E9C:27,\u5175\u5EAB\u770C:28,\u5948\u826F\u770C:29,\u548C\u6B4C\u5C71\u770C:30,\u9CE5\u53D6\u770C:31,\u5CF6\u6839\u770C:32,\u5CA1\u5C71\u770C:33,\u5E83\u5CF6\u770C:34,\u5C71\u53E3\u770C:35,\u5FB3\u5CF6\u770C:36,\u9999\u5DDD\u770C:37,\u611B\u5A9B\u770C:38,\u9AD8\u77E5\u770C:39,\u798F\u5CA1\u770C:40,\u4F50\u8CC0\u770C:41,\u9577\u5D0E\u770C:42,\u718A\u672C\u770C:43,\u5927\u5206\u770C:44,\u5BAE\u5D0E\u770C:45,\u9E7F\u5150\u5CF6\u770C:46,\u6C96\u7E04\u770C:47}})();
