var Qo=Object.defineProperty;var Jo=(Ie,Fe,Ne)=>Fe in Ie?Qo(Ie,Fe,{enumerable:!0,configurable:!0,writable:!0,value:Ne}):Ie[Fe]=Ne;var be=(Ie,Fe,Ne)=>(Jo(Ie,typeof Fe!="symbol"?Fe+"":Fe,Ne),Ne),En=(Ie,Fe,Ne)=>{if(!Fe.has(Ie))throw TypeError("Cannot "+Ne)};var t=(Ie,Fe,Ne)=>(En(Ie,Fe,"read from private field"),Ne?Ne.call(Ie):Fe.get(Ie)),c=(Ie,Fe,Ne)=>{if(Fe.has(Ie))throw TypeError("Cannot add the same private member more than once");Fe instanceof WeakSet?Fe.add(Ie):Fe.set(Ie,Ne)},N=(Ie,Fe,Ne,Ti)=>(En(Ie,Fe,"write to private field"),Ti?Ti.call(Ie,Ne):Fe.set(Ie,Ne),Ne);var mi=(Ie,Fe,Ne,Ti)=>({set _(fn){N(Ie,Fe,fn,Ne)},get _(){return t(Ie,Fe,Ti)}}),F=(Ie,Fe,Ne)=>(En(Ie,Fe,"access private method"),Ne);(async()=>{(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))m(e);new MutationObserver(e=>{for(const E of e)if(E.type==="childList")for(const A of E.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&m(A)}).observe(document,{childList:!0,subtree:!0});function C(e){const E={};return e.integrity&&(E.integrity=e.integrity),e.referrerPolicy&&(E.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?E.credentials="include":e.crossOrigin==="anonymous"?E.credentials="omit":E.credentials="same-origin",E}function m(e){if(e.ep)return;e.ep=!0;const E=C(e);fetch(e.href,E)}})();const Ie=document.querySelectorAll(".drawer"),Fe=document.querySelectorAll(".drawer__dialog"),Ne=document.querySelectorAll('[data-role="drawer"]');Ne.forEach(d=>d.addEventListener("click",Ti)),Ie.forEach(d=>d.addEventListener("click",Ti)),Fe.forEach(d=>d.addEventListener("click",C=>{C.stopPropagation()}));function Ti(){Ie.forEach(d=>d.classList.toggle("drawer_show")),Ne.forEach(d=>d.classList.toggle("toggler_show"))}const fn=document.querySelectorAll('[data-role="drop-down"]'),to=document.querySelectorAll(".drop-down");fn.forEach(d=>d.addEventListener("click",eo));function eo(){const d=document.querySelector(this.dataset.target);to.forEach(C=>{C.id!==d.id&&C.classList.remove("drop-down_open")}),d.classList.toggle("drop-down_open")}const io=document.getElementById("js-modal-area"),so=document.querySelectorAll(".MODAL"),no=document.querySelectorAll('[data-role="modal"]'),ro=document.querySelectorAll(".MODAL__dialog");so.forEach(d=>{lo(),document.getElementById("js-modal-area").appendChild(d)}),no.forEach(d=>{d.addEventListener("click",ao)}),ro.forEach(d=>d.addEventListener("click",oo));function ao(){document.querySelector(this.dataset.target).classList.toggle("MODAL_open")}function oo(d){d.stopPropagation()}function lo(){if(!io){const d=document.createElement("div");d.setAttribute("id","js-modal-area"),d.style.zIndex="100",d.style.position="relative",document.body.appendChild(d)}}function ho(){const d=document.querySelector('[data-role="modal-open"]');d&&d.dataset.errors!="{}"&&document.querySelector(d.dataset.target).classList.add("MODAL_open")}window.onload=ho,document.addEventListener("DOMContentLoaded",function(){const d=document.getElementById("agreement-box"),C=document.getElementById("agreement-check"),m=document.getElementById("agree_chk_id");if(m&&d){let e=function(A,_){let it;return function(...H){const M=()=>{clearTimeout(it),A(...H)};clearTimeout(it),it=setTimeout(M,_)}},E=function(){Math.abs(d.scrollHeight-d.clientHeight-d.scrollTop)<=1&&m.disabled&&(m.disabled=!1,C.classList.remove("check-disabled"),C.classList.add("check-enabled"),m.classList.add("check-enabled"))};m.disabled=!0,d.addEventListener("scroll",e(E,100)),window.addEventListener("load",E)}}),document.addEventListener("DOMContentLoaded",function(){const d="noantisocial",C="edelivery",m=document.getElementById("confirmButton");if(m){let e=function(){const A=document.getElementById(d).checked,_=document.getElementById(C).checked;m.disabled=!(A&&_)},E=function(A,_,it,H,M,T,tt){const z=document.getElementById(A),L=document.getElementById(_),q=document.getElementById(it),W=document.getElementById(H),et=document.getElementById(M),ut=document.getElementById(T),nt=document.getElementById(tt);W.disabled=!0,et.disabled=!0;function O(){let V=!(L.clientHeight<q.scrollHeight)||L.scrollHeight-L.scrollTop<=L.clientHeight+1;W.disabled=!V}z.addEventListener("shown.bs.modal",function(){O(),L.addEventListener("scroll",O)}),W.addEventListener("click",function(){this.disabled||(ut.style.display="none",et.disabled=!1,nt.classList.remove("check-disabled"),nt.classList.add("check-enabled"),et.classList.remove("check-disabled"),et.classList.add("check-enabled"))}),et.addEventListener("change",e)};m.disabled=!0,E("noantisocialModal","noantisocialBox","noantisocialItem","noantisocialButton",d,"noantisocialText","noantisocialLabel"),E("edeliveryModal","edeliveryBox","edeliveryItem","edeliveryButton",C,"edeliveryText","edeliveryLabel"),e()}}),document.querySelectorAll(".password__toggler").forEach(d=>d.addEventListener("click",co));function co(){const d=document.querySelector(this.dataset.target);d.type=d.type==="password"?"text":"password"}const uo=document.querySelectorAll(".format_num"),po=document.querySelectorAll(".format_date"),go=document.querySelectorAll(".format_datetime"),Si="--";uo.forEach(d=>{if(d.textContent){let C;d.classList.contains("format_area")&&(C={minimumFractionDigits:2});const m=Number(d.textContent).toLocaleString(void 0,C);d.innerHTML=isNaN(parseFloat(d.textContent))?d.textContent:m}}),po.forEach(d=>{if(d.textContent){let C=d.textContent.replaceAll(`
`,"").replaceAll(" ","").split("/");d.innerHTML=`${C[0]??(C[0]=Si)}`,d.innerHTML+='<span class="format_unit">\u5E74 </span>',d.innerHTML+=`${C[1]??(C[1]=Si)}`,d.innerHTML+='<span class="format_unit">\u6708 </span>',d.innerHTML+=`${C[2]??(C[2]=Si)}`,d.innerHTML+='<span class="format_unit">\u65E5</span>'}}),go.forEach(d=>{if(d.textContent){let C=new Date(d.textContent);C!="Invalid Date"?(d.innerHTML=C.getFullYear(),d.innerHTML+='<span class="format_unit">\u5E74 </span>',d.innerHTML+=C.getMonth()+1,d.innerHTML+='<span class="format_unit">\u6708 </span>',d.innerHTML+=C.getDate(),d.innerHTML+='<span class="format_unit">\u65E5 </span>',d.innerHTML+=`${C.getHours()}:${C.getMinutes()<10?"0":""}${C.getMinutes()}`):(d.innerHTML=`${Si}`,d.innerHTML+='<span class="format_unit">\u5E74 </span>',d.innerHTML+=`${Si}`,d.innerHTML+='<span class="format_unit">\u6708 </span>',d.innerHTML+=`${Si}`,d.innerHTML+='<span class="format_unit">\u65E5 </span>',d.innerHTML+=`${Si}`)}});const fo=document.querySelectorAll('[data-role="auth-menu"'),Ar=document.querySelector(".main-header__auth-menu"),yr=document.querySelector(".main-header__auth-bg");Ar&&yr&&(fo.forEach(d=>d.addEventListener("click",wr)),yr.addEventListener("click",wr));function wr(){Ar.classList.toggle("main-header__auth-menu_open")}const xr=document.querySelectorAll('[data-role="toggle-section"]'),mo=document.querySelectorAll(".toggle-section__item");xr.forEach(d=>d.addEventListener("click",vo));function vo(){mo.forEach(d=>d.classList.remove("toggle-section__item_show")),xr.forEach(d=>d.classList.remove("toggle-btn__item_active")),document.querySelector(this.dataset.target).classList.add("toggle-section__item_show"),this.classList.add("toggle-btn__item_active"),window.scrollTo({top:window.scrollY+document.querySelector(".fund-detail__thumbnail").getBoundingClientRect().bottom-57})}document.querySelectorAll(".schedule__status").forEach(d=>{if(d.dataset){const C=new Date,m=new Date(d.dataset.start),e=new Date(d.dataset.end);m!=="Invalid Date"&&e!=="Invalid Date"?C>e?(d.classList.remove("schedule__status_yet"),d.classList.add("schedule__status_complete")):m<=C&&C<=e&&(d.classList.remove("schedule__status_yet"),d.classList.add("schedule__status_current")):console.log("invalid date!",`
 start: ${m}`,`
end: ${e}`)}else console.log(d.dataset)});var Hi=function(){return Hi=Object.assign||function(d){for(var C,m=1,e=arguments.length;m<e;m++)for(var E in C=arguments[m])Object.prototype.hasOwnProperty.call(C,E)&&(d[E]=C[E]);return d},Hi.apply(this,arguments)};function _r(d,C,m){if(m||arguments.length===2)for(var e,E=0,A=C.length;E<A;E++)!e&&E in C||(e||(e=Array.prototype.slice.call(C,0,E)),e[E]=C[E]);return d.concat(e||Array.prototype.slice.call(C))}function Er(d){return Array.prototype.slice.call(d)}function Tr(d,C){var m=Math.floor(d);return m===C||m+1===C?d:C}function Sr(){return Date.now()}function mn(d,C,m){if(C="data-keen-slider-"+C,m===null)return d.removeAttribute(C);d.setAttribute(C,m||"")}function Ls(d,C){return C=C||document,typeof d=="function"&&(d=d(C)),Array.isArray(d)?d:typeof d=="string"?Er(C.querySelectorAll(d)):d instanceof HTMLElement?[d]:d instanceof NodeList?Er(d):[]}function is(d){d.raw&&(d=d.raw),d.cancelable&&!d.defaultPrevented&&d.preventDefault()}function ss(d){d.raw&&(d=d.raw),d.stopPropagation&&d.stopPropagation()}function Cr(){var d=[];return{add:function(C,m,e,E){C.addListener?C.addListener(e):C.addEventListener(m,e,E),d.push([C,m,e,E])},input:function(C,m,e,E){this.add(C,m,function(A){return function(_){_.nativeEvent&&(_=_.nativeEvent);var it=_.changedTouches||[],H=_.targetTouches||[],M=_.detail&&_.detail.x?_.detail:null;return A({id:M?M.identifier?M.identifier:"i":H[0]?H[0]?H[0].identifier:"e":"d",idChanged:M?M.identifier?M.identifier:"i":it[0]?it[0]?it[0].identifier:"e":"d",raw:_,x:M&&M.x?M.x:H[0]?H[0].screenX:M?M.x:_.pageX,y:M&&M.y?M.y:H[0]?H[0].screenY:M?M.y:_.pageY})}}(e),E)},purge:function(){d.forEach(function(C){C[0].removeListener?C[0].removeListener(C[2]):C[0].removeEventListener(C[1],C[2],C[3])}),d=[]}}}function vn(d,C,m){return Math.min(Math.max(d,C),m)}function ii(d){return(d>0?1:0)-(d<0?1:0)||+d}function Mr(d){var C=d.getBoundingClientRect();return{height:Tr(C.height,d.offsetHeight),width:Tr(C.width,d.offsetWidth)}}function We(d,C,m,e){var E=d&&d[C];return E==null?m:e&&typeof E=="function"?E():E}function ei(d){return Math.round(1e6*d)/1e6}function bo(d){var C,m,e,E,A,_;function it(z){_||(_=z),H(!0);var L=z-_;L>e&&(L=e);var q=E[m];if(q[3]<L)return m++,it(z);var W=q[2],et=q[4],ut=q[0],nt=q[1]*(0,q[5])(et===0?1:(L-W)/et);if(nt&&d.track.to(ut+nt),L<e)return T();_=null,H(!1),M(null),d.emit("animationEnded")}function H(z){C.active=z}function M(z){C.targetIdx=z}function T(){var z;z=it,A=window.requestAnimationFrame(z)}function tt(){var z;z=A,window.cancelAnimationFrame(z),H(!1),M(null),_&&d.emit("animationStopped"),_=null}return C={active:!1,start:function(z){if(tt(),d.track.details){var L=0,q=d.track.details.position;m=0,e=0,E=z.map(function(W){var et,ut=Number(q),nt=(et=W.earlyExit)!==null&&et!==void 0?et:W.duration,O=W.easing,V=W.distance*O(nt/W.duration)||0;q+=V;var $=e;return e+=nt,L+=V,[ut,W.distance,$,e,W.duration,O]}),M(d.track.distToIdx(L)),T(),d.emit("animationStarted")}},stop:tt,targetIdx:null}}function Ao(d){var C,m,e,E,A,_,it,H,M,T,tt,z,L,q,W=1/0,et=[],ut=null,nt=0;function O(Ct){Ot(nt+Ct)}function V(Ct){var Lt=$(nt+Ct).abs;return ot(Lt)?Lt:null}function $(Ct){var Lt=Math.floor(Math.abs(ei(Ct/m))),Tt=ei((Ct%m+m)%m);Tt===m&&(Tt=0);var at=ii(Ct),bt=it.indexOf(_r([],it,!0).reduce(function(Rt,Ut){return Math.abs(Ut-Tt)<Math.abs(Rt-Tt)?Ut:Rt})),Pt=bt;return at<0&&Lt++,bt===_&&(Pt=0,Lt+=at>0?1:-1),{abs:Pt+Lt*_*at,origin:bt,rel:Pt}}function B(Ct,Lt,Tt){var at;if(Lt||!Dt())return Q(Ct,Tt);if(!ot(Ct))return null;var bt=$(Tt??nt),Pt=bt.abs,Rt=Ct-bt.rel,Ut=Pt+Rt;at=Q(Ut);var Yt=Q(Ut-_*ii(Rt));return(Yt!==null&&Math.abs(Yt)<Math.abs(at)||at===null)&&(at=Yt),ei(at)}function Q(Ct,Lt){if(Lt==null&&(Lt=ei(nt)),!ot(Ct)||Ct===null)return null;Ct=Math.round(Ct);var Tt=$(Lt),at=Tt.abs,bt=Tt.rel,Pt=Tt.origin,Rt=St(Ct),Ut=(Lt%m+m)%m,Yt=it[Pt],re=Math.floor((Ct-(at-bt))/_)*m;return ei(Yt-Ut-Yt+it[Rt]+re+(Pt===_?m:0))}function ot(Ct){return At(Ct)===Ct}function At(Ct){return vn(Ct,M,T)}function Dt(){return E.loop}function St(Ct){return(Ct%_+_)%_}function Ot(Ct){var Lt;Lt=Ct-nt,et.push({distance:Lt,timestamp:Sr()}),et.length>6&&(et=et.slice(-6)),nt=ei(Ct);var Tt=wt().abs;if(Tt!==ut){var at=ut!==null;ut=Tt,at&&d.emit("slideChanged")}}function wt(Ct){var Lt=Ct?null:function(){if(_){var Tt=Dt(),at=Tt?(nt%m+m)%m:nt,bt=(Tt?nt%m:nt)-A[0][2],Pt=0-(bt<0&&Tt?m-Math.abs(bt):bt),Rt=0,Ut=$(nt),Yt=Ut.abs,re=Ut.rel,_e=A[re][2],ce=A.map(function(he,me){var zt=Pt+Rt;(zt<0-he[0]||zt>1)&&(zt+=(Math.abs(zt)>m-1&&Tt?m:0)*ii(-zt));var oe=me-re,Se=ii(oe),se=oe+Yt;Tt&&(Se===-1&&zt>_e&&(se+=_),Se===1&&zt<_e&&(se-=_),tt!==null&&se<tt&&(zt+=m),z!==null&&se>z&&(zt-=m));var Ee=zt+he[0]+he[1],ne=Math.max(zt>=0&&Ee<=1?1:Ee<0||zt>1?0:zt<0?Math.min(1,(he[0]+zt)/he[0]):(1-zt)/he[0],0);return Rt+=he[0]+he[1],{abs:se,distance:E.rtl?-1*zt+1-he[0]:zt,portion:ne,size:he[0]}});return Yt=At(Yt),re=St(Yt),{abs:At(Yt),length:e,max:q,maxIdx:T,min:L,minIdx:M,position:nt,progress:Tt?at/m:nt/e,rel:re,slides:ce,slidesLength:m}}}();return C.details=Lt,d.emit("detailsChanged"),Lt}return C={absToRel:St,add:O,details:null,distToIdx:V,idxToDist:B,init:function(Ct){if(function(){if(E=d.options,A=(E.trackConfig||[]).map(function(bt){return[We(bt,"size",1),We(bt,"spacing",0),We(bt,"origin",0)]}),_=A.length){m=ei(A.reduce(function(bt,Pt){return bt+Pt[0]+Pt[1]},0));var Tt,at=_-1;e=ei(m+A[0][2]-A[at][0]-A[at][2]-A[at][1]),it=A.reduce(function(bt,Pt){if(!bt)return[0];var Rt=A[bt.length-1],Ut=bt[bt.length-1]+(Rt[0]+Rt[2])+Rt[1];return Ut-=Pt[2],bt[bt.length-1]>Ut&&(Ut=bt[bt.length-1]),Ut=ei(Ut),bt.push(Ut),(!Tt||Tt<Ut)&&(H=bt.length-1),Tt=Ut,bt},null),e===0&&(H=0),it.push(ei(m))}}(),!_)return wt(!0);var Lt;(function(){var Tt=d.options.range,at=d.options.loop;tt=M=at?We(at,"min",-1/0):0,z=T=at?We(at,"max",W):H;var bt=We(Tt,"min",null),Pt=We(Tt,"max",null);bt!==null&&(M=bt),Pt!==null&&(T=Pt),L=M===-1/0?M:d.track.idxToDist(M||0,!0,0),q=T===W?T:B(T,!0,0),Pt===null&&(z=T),We(Tt,"align",!1)&&T!==W&&A[St(T)][2]===0&&(q-=1-A[St(T)][0],T=V(q-nt)),L=ei(L),q=ei(q)})(),Lt=Ct,Number(Lt)===Lt?O(Q(At(Ct))):wt()},to:Ot,velocity:function(){var Ct=Sr(),Lt=et.reduce(function(Tt,at){var bt=at.distance,Pt=at.timestamp;return Ct-Pt>200||(ii(bt)!==ii(Tt.distance)&&Tt.distance&&(Tt={distance:0,lastTimestamp:0,time:0}),Tt.time&&(Tt.distance+=bt),Tt.lastTimestamp&&(Tt.time+=Pt-Tt.lastTimestamp),Tt.lastTimestamp=Pt),Tt},{distance:0,lastTimestamp:0,time:0});return Lt.distance/Lt.time||0}}}function yo(d){var C,m,e,E,A,_,it,H;function M(ut){return 2*ut}function T(ut){return vn(ut,it,H)}function tt(ut){return 1-Math.pow(1-ut,3)}function z(){return e?d.track.velocity():0}function L(){et();var ut=d.options.mode==="free-snap",nt=d.track,O=z();E=ii(O);var V=d.track.details,$=[];if(O||!ut){var B=q(O),Q=B.dist,ot=B.dur;if(ot=M(ot),Q*=E,ut){var At=nt.idxToDist(nt.distToIdx(Q),!0);At&&(Q=At)}$.push({distance:Q,duration:ot,easing:tt});var Dt=V.position,St=Dt+Q;if(St<A||St>_){var Ot=St<A?A-Dt:_-Dt,wt=0,Ct=O;if(ii(Ot)===E){var Lt=Math.min(Math.abs(Ot)/Math.abs(Q),1),Tt=function(Pt){return 1-Math.pow(1-Pt,1/3)}(Lt)*ot;$[0].earlyExit=Tt,Ct=O*(1-Lt)}else $[0].earlyExit=0,wt+=Ot;var at=q(Ct,100),bt=at.dist*E;d.options.rubberband&&($.push({distance:bt,duration:M(at.dur),easing:tt}),$.push({distance:-bt+wt,duration:500,easing:tt}))}d.animator.start($)}else d.moveToIdx(T(V.abs),!0,{duration:500,easing:function(Pt){return 1+--Pt*Pt*Pt*Pt*Pt}})}function q(ut,nt){nt===void 0&&(nt=1e3);var O=147e-9+(ut=Math.abs(ut))/nt;return{dist:Math.pow(ut,2)/O,dur:ut/O}}function W(){var ut=d.track.details;ut&&(A=ut.min,_=ut.max,it=ut.minIdx,H=ut.maxIdx)}function et(){d.animator.stop()}d.on("updated",W),d.on("optionsChanged",W),d.on("created",W),d.on("dragStarted",function(){e=!1,et(),C=m=d.track.details.abs}),d.on("dragChecked",function(){e=!0}),d.on("dragEnded",function(){var ut=d.options.mode;ut==="snap"&&function(){var nt=d.track,O=d.track.details,V=O.position,$=ii(z());(V>_||V<A)&&($=0);var B=C+$;O.slides[nt.absToRel(B)].portion===0&&(B-=$),C!==m&&(B=m),ii(nt.idxToDist(B,!0))!==$&&(B+=$),B=T(B);var Q=nt.idxToDist(B,!0);d.animator.start([{distance:Q,duration:500,easing:function(ot){return 1+--ot*ot*ot*ot*ot}}])}(),ut!=="free"&&ut!=="free-snap"||L()}),d.on("dragged",function(){m=d.track.details.abs})}function wo(d){var C,m,e,E,A,_,it,H,M,T,tt,z,L,q,W,et,ut,nt,O=Cr();function V(wt){if(_&&H===wt.id){var Ct=ot(wt);if(M){if(!Q(wt))return B(wt);T=Ct,M=!1,d.emit("dragChecked")}if(et)return T=Ct;is(wt);var Lt=function(at){if(ut===-1/0&&nt===1/0)return at;var bt=d.track.details,Pt=bt.length,Rt=bt.position,Ut=vn(at,ut-Rt,nt-Rt);if(Pt===0)return 0;if(!d.options.rubberband)return Ut;if(Rt<=nt&&Rt>=ut||Rt<ut&&m>0||Rt>nt&&m<0)return at;var Yt=(Rt<ut?Rt-ut:Rt-nt)/Pt,re=E*Pt,_e=Math.abs(Yt*re),ce=Math.max(0,1-_e/A*2);return ce*ce*at}(it(T-Ct)/E*e);m=ii(Lt);var Tt=d.track.details.position;(Tt>ut&&Tt<nt||Tt===ut&&m>0||Tt===nt&&m<0)&&ss(wt),tt+=Lt,!z&&Math.abs(tt*E)>5&&(z=!0),d.track.add(Lt),T=Ct,d.emit("dragged")}}function $(wt){!_&&d.track.details&&d.track.details.length&&(tt=0,_=!0,z=!1,M=!0,H=wt.id,Q(wt),T=ot(wt),d.emit("dragStarted"))}function B(wt){_&&H===wt.idChanged&&(_=!1,d.emit("dragEnded"))}function Q(wt){var Ct=At(),Lt=Ct?wt.y:wt.x,Tt=Ct?wt.x:wt.y,at=L!==void 0&&q!==void 0&&Math.abs(q-Tt)<=Math.abs(L-Lt);return L=Lt,q=Tt,at}function ot(wt){return At()?wt.y:wt.x}function At(){return d.options.vertical}function Dt(){E=d.size,A=At()?window.innerHeight:window.innerWidth;var wt=d.track.details;wt&&(ut=wt.min,nt=wt.max)}function St(wt){z&&(ss(wt),is(wt))}function Ot(){if(O.purge(),d.options.drag&&!d.options.disabled){var wt;wt=d.options.dragSpeed||1,it=typeof wt=="function"?wt:function(Lt){return Lt*wt},e=d.options.rtl?-1:1,Dt(),C=d.container,function(){var Lt="data-keen-slider-clickable";Ls("[".concat(Lt,"]:not([").concat(Lt,"=false])"),C).map(function(Tt){O.add(Tt,"dragstart",ss),O.add(Tt,"mousedown",ss),O.add(Tt,"touchstart",ss)})}(),O.add(C,"dragstart",function(Lt){is(Lt)}),O.add(C,"click",St,{capture:!0}),O.input(C,"ksDragStart",$),O.input(C,"ksDrag",V),O.input(C,"ksDragEnd",B),O.input(C,"mousedown",$),O.input(C,"mousemove",V),O.input(C,"mouseleave",B),O.input(C,"mouseup",B),O.input(C,"touchstart",$,{passive:!0}),O.input(C,"touchmove",V,{passive:!1}),O.input(C,"touchend",B),O.input(C,"touchcancel",B),O.add(window,"wheel",function(Lt){_&&is(Lt)});var Ct="data-keen-slider-scrollable";Ls("[".concat(Ct,"]:not([").concat(Ct,"=false])"),d.container).map(function(Lt){return function(Tt){var at;O.input(Tt,"touchstart",function(bt){at=ot(bt),et=!0,W=!0},{passive:!0}),O.input(Tt,"touchmove",function(bt){var Pt=At(),Rt=Pt?Tt.scrollHeight-Tt.clientHeight:Tt.scrollWidth-Tt.clientWidth,Ut=at-ot(bt),Yt=Pt?Tt.scrollTop:Tt.scrollLeft,re=Pt&&Tt.style.overflowY==="scroll"||!Pt&&Tt.style.overflowX==="scroll";if(at=ot(bt),(Ut<0&&Yt>0||Ut>0&&Yt<Rt)&&W&&re)return et=!0;W=!1,is(bt),et=!1}),O.input(Tt,"touchend",function(){et=!1})}(Lt)})}}d.on("updated",Dt),d.on("optionsChanged",Ot),d.on("created",Ot),d.on("destroyed",O.purge)}function xo(d){var C,m,e=null;function E(L,q,W){d.animator.active?_(L,q,W):requestAnimationFrame(function(){return _(L,q,W)})}function A(){E(!1,!1,m)}function _(L,q,W){var et=0,ut=d.size,nt=d.track.details;if(nt&&C){var O=nt.slides;C.forEach(function(V,$){if(L)!e&&q&&H(V,null,W),M(V,null,W);else{if(!O[$])return;var B=O[$].size*ut;!e&&q&&H(V,B,W),M(V,O[$].distance*ut-et,W),et+=B}})}}function it(L){return d.options.renderMode==="performance"?Math.round(L):L}function H(L,q,W){var et=W?"height":"width";q!==null&&(q=it(q)+"px"),L.style["min-"+et]=q,L.style["max-"+et]=q}function M(L,q,W){if(q!==null){q=it(q);var et=W?q:0;q="translate3d(".concat(W?0:q,"px, ").concat(et,"px, 0)")}L.style.transform=q,L.style["-webkit-transform"]=q}function T(){C&&(_(!0,!0,m),C=null),d.on("detailsChanged",A,!0)}function tt(){E(!1,!0,m)}function z(){T(),m=d.options.vertical,d.options.disabled||d.options.renderMode==="custom"||(e=We(d.options.slides,"perView",null)==="auto",d.on("detailsChanged",A),(C=d.slides).length&&tt())}d.on("created",z),d.on("optionsChanged",z),d.on("beforeOptionsChanged",function(){T()}),d.on("updated",tt),d.on("destroyed",T)}function _o(d,C){return function(m){var e,E,A,_,it,H=Cr();function M(Q){var ot;mn(m.container,"reverse",(ot=m.container,window.getComputedStyle(ot,null).getPropertyValue("direction")!=="rtl"||Q?null:"")),mn(m.container,"v",m.options.vertical&&!Q?"":null),mn(m.container,"disabled",m.options.disabled&&!Q?"":null)}function T(){tt()&&et()}function tt(){var Q=null;if(_.forEach(function(At){At.matches&&(Q=At.__media)}),Q===e)return!1;e||m.emit("beforeOptionsChanged"),e=Q;var ot=Q?A.breakpoints[Q]:A;return m.options=Hi(Hi({},A),ot),M(),$(),B(),nt(),!0}function z(Q){var ot=Mr(Q);return(m.options.vertical?ot.height:ot.width)/m.size||1}function L(){return m.options.trackConfig.length}function q(Q){for(var ot in e=!1,A=Hi(Hi({},C),Q),H.purge(),E=m.size,_=[],A.breakpoints||[]){var At=window.matchMedia(ot);At.__media=ot,_.push(At),H.add(At,"change",T)}H.add(window,"orientationchange",V),H.add(window,"resize",O),tt()}function W(Q){m.animator.stop();var ot=m.track.details;m.track.init(Q??(ot?ot.abs:0))}function et(Q){W(Q),m.emit("optionsChanged")}function ut(Q,ot){if(Q)return q(Q),void et(ot);$(),B();var At=L();nt(),L()!==At?et(ot):W(ot),m.emit("updated")}function nt(){var Q=m.options.slides;if(typeof Q=="function")return m.options.trackConfig=Q(m.size,m.slides);for(var ot=m.slides,At=ot.length,Dt=typeof Q=="number"?Q:We(Q,"number",At,!0),St=[],Ot=We(Q,"perView",1,!0),wt=We(Q,"spacing",0,!0)/m.size||0,Ct=Ot==="auto"?wt:wt/Ot,Lt=We(Q,"origin","auto"),Tt=0,at=0;at<Dt;at++){var bt=Ot==="auto"?z(ot[at]):1/Ot-wt+Ct,Pt=Lt==="center"?.5-bt/2:Lt==="auto"?0:Lt;St.push({origin:Pt,size:bt,spacing:wt}),Tt+=bt}if(Tt+=wt*(Dt-1),Lt==="auto"&&!m.options.loop&&Ot!==1){var Rt=0;St.map(function(Ut){var Yt=Tt-Rt;return Rt+=Ut.size+wt,Yt>=1||(Ut.origin=1-Yt-(Tt>1?0:1-Tt)),Ut})}m.options.trackConfig=St}function O(){$();var Q=m.size;m.options.disabled||Q===E||(E=Q,ut())}function V(){O(),setTimeout(O,500),setTimeout(O,2e3)}function $(){var Q=Mr(m.container);m.size=(m.options.vertical?Q.height:Q.width)||1}function B(){m.slides=Ls(m.options.selector,m.container)}m.container=(it=Ls(d,document)).length?it[0]:null,m.destroy=function(){H.purge(),m.emit("destroyed"),M(!0)},m.prev=function(){m.moveToIdx(m.track.details.abs-1,!0)},m.next=function(){m.moveToIdx(m.track.details.abs+1,!0)},m.update=ut,q(m.options)}}var Eo=function(d,C,m){try{return function(e,E){var A,_={};return A={emit:function(it){_[it]&&_[it].forEach(function(M){M(A)});var H=A.options&&A.options[it];H&&H(A)},moveToIdx:function(it,H,M){var T=A.track.idxToDist(it,H);if(T){var tt=A.options.defaultAnimation;A.animator.start([{distance:T,duration:We(M||tt,"duration",500),easing:We(M||tt,"easing",function(z){return 1+--z*z*z*z*z})}])}},on:function(it,H,M){M===void 0&&(M=!1),_[it]||(_[it]=[]);var T=_[it].indexOf(H);T>-1?M&&delete _[it][T]:M||_[it].push(H)},options:e},function(){if(A.track=Ao(A),A.animator=bo(A),E)for(var it=0,H=E;it<H.length;it++)(0,H[it])(A);A.track.init(A.options.initial||0),A.emit("created")}(),A}(C,_r([_o(d,{drag:!0,mode:"snap",renderMode:"precision",rubberband:!0,selector:".keen-slider__slide"}),xo,wo,yo],m||[],!0))}catch(e){console.error(e)}};const To=document.querySelectorAll('[data-role="slider-thumbnail"]'),kr=document.getElementById("js-main-slider");function So(d){return C=>{function m(){d.forEach(e=>{e.addEventListener("click",()=>{C.moveToIdx(Number(e.dataset.target)),d.forEach(E=>{E.dataset.target!=e.dataset.target?E.classList.remove("slider-thumbnail__img_active"):E.classList.add("slider-thumbnail__img_active")})})})}C.on("created",()=>{m()}),C.on("animationEnded",()=>{const e=C.track.details.rel;d.forEach(E=>{E.dataset.target==e?E.classList.add("slider-thumbnail__img_active"):E.classList.remove("slider-thumbnail__img_active")})})}}kr&&new Eo(kr,{slides:{perView:1},defaultAnimation:{duration:0}},[So(To)]),document.querySelectorAll('[data-role="zengin-input"]').forEach(d=>{d.addEventListener("change",Co)});function Co(d){let C=d.target.value;if(C){const m=Mo(C);d.target.value=m}}function Mo(d){const C=/[^0-9A-Zｱｲｳｴｵｶｷｸｹｺｻｼｽｾｿﾀﾁﾂﾃﾄﾅﾆﾇﾈﾉﾊﾋﾌﾍﾎﾏﾐﾑﾒﾓﾔﾕﾖﾗﾘﾙﾚﾛﾜﾝﾞﾟ\(\)｢｣\/\-\.\\ ]/g,m=["\uFF70","\uFF67","\uFF68","\uFF69","\uFF6A","\uFF6B","\uFF6F","\uFF6C","\uFF6D","\uFF6E","\uFF08","\uFF09"],e=["-","\uFF71","\uFF72","\uFF73","\uFF74","\uFF75","\uFF82","\uFF94","\uFF95","\uFF96","(",")"];let E;return E=d.toUpperCase(),E=ko(E,"khsa"),m.forEach((A,_)=>{E=E.replaceAll(A,e[_])}),E=E.replace(C,""),E}function ko(d,C){var m,e,E,A,_,it;if(m=["\uFF76\uFF9E","\uFF77\uFF9E","\uFF78\uFF9E","\uFF79\uFF9E","\uFF7A\uFF9E","\uFF7B\uFF9E","\uFF7C\uFF9E","\uFF7D\uFF9E","\uFF7E\uFF9E","\uFF7F\uFF9E","\uFF80\uFF9E","\uFF81\uFF9E","\uFF82\uFF9E","\uFF83\uFF9E","\uFF84\uFF9E","\uFF8A\uFF9E","\uFF8A\uFF9F","\uFF8B\uFF9E","\uFF8B\uFF9F","\uFF8C\uFF9E","\uFF8C\uFF9F","\uFF8D\uFF9E","\uFF8D\uFF9F","\uFF8E\uFF9E","\uFF8E\uFF9F","\uFF73\uFF9E","\uFF70","\uFF67","\uFF71","\uFF68","\uFF72","\uFF69","\uFF73","\uFF6A","\uFF74","\uFF6B","\uFF75","\uFF76","\uFF77","\uFF78","\uFF79","\uFF7A","\uFF7B","\uFF7C","\uFF7D","\uFF7E","\uFF7F","\uFF80","\uFF81","\uFF6F","\uFF82","\uFF83","\uFF84","\uFF85","\uFF86","\uFF87","\uFF88","\uFF89","\uFF8A","\uFF8B","\uFF8C","\uFF8D","\uFF8E","\uFF8F","\uFF90","\uFF91","\uFF92","\uFF93","\uFF6C","\uFF94","\uFF6D","\uFF95","\uFF6E","\uFF96","\uFF97","\uFF98","\uFF99","\uFF9A","\uFF9B","\uFF9C","\uFF66","\uFF9D","\uFF76","\uFF79","\uFF9C","\uFF72","\uFF74","\uFF9E","\uFF9F"],e=["\u30AC","\u30AE","\u30B0","\u30B2","\u30B4","\u30B6","\u30B8","\u30BA","\u30BC","\u30BE","\u30C0","\u30C2","\u30C5","\u30C7","\u30C9","\u30D0","\u30D1","\u30D3","\u30D4","\u30D6","\u30D7","\u30D9","\u30DA","\u30DC","\u30DD","\u30F4","\u30FC","\u30A1","\u30A2","\u30A3","\u30A4","\u30A5","\u30A6","\u30A7","\u30A8","\u30A9","\u30AA","\u30AB","\u30AD","\u30AF","\u30B1","\u30B3","\u30B5","\u30B7","\u30B9","\u30BB","\u30BD","\u30BF","\u30C1","\u30C3","\u30C4","\u30C6","\u30C8","\u30CA","\u30CB","\u30CC","\u30CD","\u30CE","\u30CF","\u30D2","\u30D5","\u30D8","\u30DB","\u30DE","\u30DF","\u30E0","\u30E1","\u30E2","\u30E3","\u30E4","\u30E5","\u30E6","\u30E7","\u30E8","\u30E9","\u30EA","\u30EB","\u30EC","\u30ED","\u30EF","\u30F2","\u30F3","\u30F5","\u30F6","\u30EE","\u30F0","\u30F1","\u309B","\u309C"],E=["\u304C","\u304E","\u3050","\u3052","\u3054","\u3056","\u3058","\u305A","\u305C","\u305E","\u3060","\u3062","\u3065","\u3067","\u3069","\u3070","\u3071","\u3073","\u3074","\u3076","\u3077","\u3079","\u307A","\u307C","\u307D","\u30F4","\u30FC","\u3041","\u3042","\u3043","\u3044","\u3045","\u3046","\u3047","\u3048","\u3049","\u304A","\u304B","\u304D","\u304F","\u3051","\u3053","\u3055","\u3057","\u3059","\u305B","\u305D","\u305F","\u3061","\u3063","\u3064","\u3066","\u3068","\u306A","\u306B","\u306C","\u306D","\u306E","\u306F","\u3072","\u3075","\u3078","\u307B","\u307E","\u307F","\u3080","\u3081","\u3082","\u3083","\u3084","\u3085","\u3086","\u3087","\u3088","\u3089","\u308A","\u308B","\u308C","\u308D","\u308F","\u3092","\u3093","\u304B","\u3051","\u308E","\u3090","\u3091","\u309B","\u309C"],A=m.length,C.match(/[ra]/)&&(d=d.replace(/[Ａ-ｚ]/g,function(H){return String.fromCharCode(parseInt(H.charCodeAt(0))-65248)})),C.match(/[RA]/)&&(d=d.replace(/[A-z]/g,function(H){return String.fromCharCode(parseInt(H.charCodeAt(0))+65248)})),C.match(/[na]/)&&(d=d.replace(/[０-９]/g,function(H){return String.fromCharCode(parseInt(H.charCodeAt(0))-65248)})),C.match(/[NA]/)&&(d=d.replace(/[0-9]/g,function(H){return String.fromCharCode(parseInt(H.charCodeAt(0))+65248)})),C.match(/s/)&&(d=d.replace(/　/g," ")),C.match(/S/)&&(d=d.replace(/ /g,"\u3000")),C.match(/k/))for(_=0;_<A;_++)it=new RegExp(e[_],"g"),d=d.replace(it,m[_]);if(C.match(/K/))for(C.match(/V/)||(d=d.replace(/ﾞ/g,"\u309B"),d=d.replace(/ﾟ/g,"\u309C")),_=0;_<A;_++)it=new RegExp(m[_],"g"),d=d.replace(it,e[_]);if(C.match(/h/))for(_=0;_<A;_++)it=new RegExp(E[_],"g"),d=d.replace(it,m[_]);if(C.match(/H/))for(C.match(/V/)||(d=d.replace(/ﾞ/g,"\u309B"),d=d.replace(/ﾟ/g,"\u309C")),_=0;_<A;_++)it=new RegExp(m[_],"g"),d=d.replace(it,E[_]);if(C.match(/c/))for(_=0;_<A;_++)it=new RegExp(e[_],"g"),d=d.replace(it,E[_]);if(C.match(/C/))for(_=0;_<A;_++)it=new RegExp(E[_],"g"),d=d.replace(it,e[_]);return d}document.querySelectorAll('[data-role="toggle-input--btn"]').forEach(d=>{d.addEventListener("click",C=>{const m=C.target.dataset.group;document.querySelectorAll(`[data-group="${m}"][data-role="toggle-input--value"], [data-group="${m}"][data-role="toggle-input--input"]`).forEach(e=>{e.classList.toggle("toggle-input_show")})})});const Lo=document.querySelectorAll('[data-role="resize"]');window.addEventListener("load",()=>{Lo.forEach(d=>{const C=d.dataset.field,m=document.querySelector(`[name="uploadFilesBlock${C}"]`),e=document.querySelector(`input[name='selectFiles${C}']`),E=document.createElement("div"),A=document.createElement("div"),_=document.createElement("div"),it=document.createElement("input"),H=document.createElement("p"),M=document.createElement("button");it.setAttribute("type","file"),it.style.display="none",it.addEventListener("change",T=>{const tt=T.target.files[0];Lr(tt,e)}),A.appendChild(E),A.classList.add("coverDiv"),A.addEventListener("dragstart",T=>{T.dataTransfer.clearData(),bn(T)}),A.addEventListener("dragover",T=>{bn(T)}),A.addEventListener("dragleave",T=>{}),A.addEventListener("drop",T=>{bn(T);const tt=T.target.files||T.dataTransfer.files;tt.length>0&&Lr(tt[0],e)}),E.appendChild(_),E.classList.add("sp-flex-align-center","sp-flex-content-center","sp-flex","sp-from-file-default-drag-drop-area"),E.addEventListener("dragover",T=>{E.classList.remove("sp-from-file-ondragleave-drag-drop-area"),E.classList.remove("sp-from-file-ondrop-drag-drop-area"),E.classList.add("sp-from-file-ondraghover-drag-drop-area")}),E.addEventListener("dragleave",T=>{E.classList.add("sp-from-file-ondragleave-drag-drop-area"),E.classList.remove("sp-from-file-ondrop-drag-drop-area"),E.classList.remove("sp-from-file-ondraghover-drag-drop-area")}),E.addEventListener("drop",T=>{E.classList.remove("sp-from-file-ondragleave-drag-drop-area"),E.classList.add("sp-from-file-ondrop-drag-drop-area"),E.classList.remove("sp-from-file-ondraghover-drag-drop-area")}),_.appendChild(H),_.appendChild(M),_.appendChild(it),H.textContent="\u3053\u3053\u306B\u30D5\u30A1\u30A4\u30EB\u3092\u30C9\u30ED\u30C3\u30D7\u3057\u3066\u304F\u3060\u3055\u3044",H.classList.add("small"),M.type="button",M.textContent="\u30D5\u30A1\u30A4\u30EB\u53C2\u7167",M.classList.add("sp-form-file-button"),M.addEventListener("click",()=>it.click()),it.accept=".jpg,.png,.jpeg,.webp",m.style.position="relative",m.appendChild(A)})});const Po=/^(image\/jpg|image\/jpeg|image\/png|image\/webp)$/,Ro=256;async function Lr(d,C){if(!C)throw new Error("spiral input not found");const m=Io(d)?await Fo(d):d,e=new DataTransfer;e.items.add(m),C.files=e.files,C.dispatchEvent(new Event("change"))}function Io(d){return!(!d.type.match(Po)||d.name>Ro)}function Fo(d){const C=d.name.split(".").slice(0,-1).join(".");let m=new FileReader;return new Promise((e,E)=>{m.onload=async()=>{const A=m.result,_=await Do(A),it=await(await fetch(_)).blob();e(new File([it],`${C}.jpeg`,{type:"image/jpeg"}))},m.readAsDataURL(d)})}async function Do(d){const C=await new Promise((A,_)=>{const it=new Image;it.onload=()=>{A(it)},it.onerror=()=>{_()},it.src=d}),m=document.createElement("canvas");let e=C.naturalWidth,E=C.naturalHeight;for(;e*E>5e5;)e/=10,E/=10;return m.width=e,m.height=E,m.getContext("2d").drawImage(C,0,0,e,E),m.toDataURL("image/jpeg")}function bn(d){d.stopPropagation(),d.preventDefault()}const Oo="modulepreload",No=function(d){return"/"+d},Pr={},vi=function(d,C,m){let e=Promise.resolve();if(C&&C.length>0){const E=document.getElementsByTagName("link"),A=document.querySelector("meta[property=csp-nonce]"),_=(A==null?void 0:A.nonce)||(A==null?void 0:A.getAttribute("nonce"));e=Promise.all(C.map(it=>{if(it=No(it),it in Pr)return;Pr[it]=!0;const H=it.endsWith(".css"),M=H?'[rel="stylesheet"]':"";if(m)for(let tt=E.length-1;tt>=0;tt--){const z=E[tt];if(z.href===it&&(!H||z.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${it}"]${M}`))return;const T=document.createElement("link");if(T.rel=H?"stylesheet":Oo,H||(T.as="script",T.crossOrigin=""),T.href=it,_&&T.setAttribute("nonce",_),document.head.appendChild(T),H)return new Promise((tt,z)=>{T.addEventListener("load",tt),T.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${it}`)))})}))}return e.then(()=>d()).catch(E=>{const A=new Event("vite:preloadError",{cancelable:!0});if(A.payload=E,window.dispatchEvent(A),!A.defaultPrevented)throw E})};var Ho={976:(d,C,m)=>{var he,zt,Di,Se,Gr,Ee,Ur,lt,s,r,u,v,l,x,y,S,p,o,h,n,a,f,I,w,X,qr,Y,Ws,g,Tn,J,Sn,b,G,K,ht,gt,xt,It,Cn,ie,ee,Ae,ve,$r,fe,Mn;m.d(C,{AnnotationLayer:()=>ce,FreeTextAnnotationElement:()=>St,InkAnnotationElement:()=>bt,StampAnnotationElement:()=>re});var e=m(292),E=m(419),A=m(792);function _(ae){return Math.floor(Math.max(0,Math.min(1,ae))*255).toString(16).padStart(2,"0")}function it(ae){return Math.max(0,Math.min(255,255*ae))}class H{static CMYK_G([j,P,rt,dt]){return["G",1-Math.min(1,.3*j+.59*rt+.11*P+dt)]}static G_CMYK([j]){return["CMYK",0,0,0,1-j]}static G_RGB([j]){return["RGB",j,j,j]}static G_rgb([j]){return j=it(j),[j,j,j]}static G_HTML([j]){const P=_(j);return`#${P}${P}${P}`}static RGB_G([j,P,rt]){return["G",.3*j+.59*P+.11*rt]}static RGB_rgb(j){return j.map(it)}static RGB_HTML(j){return`#${j.map(_).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([j,P,rt,dt]){return["RGB",1-Math.min(1,j+dt),1-Math.min(1,rt+dt),1-Math.min(1,P+dt)]}static CMYK_rgb([j,P,rt,dt]){return[it(1-Math.min(1,j+dt)),it(1-Math.min(1,rt+dt)),it(1-Math.min(1,P+dt))]}static CMYK_HTML(j){const P=this.CMYK_RGB(j).slice(1);return this.RGB_HTML(P)}static RGB_CMYK([j,P,rt]){const dt=1-j,ft=1-P,Et=1-rt,_t=Math.min(dt,ft,Et);return["CMYK",dt,ft,Et,_t]}}var M=m(284);const T=1e3,tt=9,z=new WeakSet;function L(ae){return{width:ae[2]-ae[0],height:ae[3]-ae[1]}}class q{static create(j){switch(j.data.annotationType){case e.AnnotationType.LINK:return new et(j);case e.AnnotationType.TEXT:return new ut(j);case e.AnnotationType.WIDGET:switch(j.data.fieldType){case"Tx":return new O(j);case"Btn":return j.data.radioButton?new B(j):j.data.checkBox?new $(j):new Q(j);case"Ch":return new ot(j);case"Sig":return new V(j)}return new nt(j);case e.AnnotationType.POPUP:return new At(j);case e.AnnotationType.FREETEXT:return new St(j);case e.AnnotationType.LINE:return new Ot(j);case e.AnnotationType.SQUARE:return new wt(j);case e.AnnotationType.CIRCLE:return new Ct(j);case e.AnnotationType.POLYLINE:return new Lt(j);case e.AnnotationType.CARET:return new at(j);case e.AnnotationType.INK:return new bt(j);case e.AnnotationType.POLYGON:return new Tt(j);case e.AnnotationType.HIGHLIGHT:return new Pt(j);case e.AnnotationType.UNDERLINE:return new Rt(j);case e.AnnotationType.SQUIGGLY:return new Ut(j);case e.AnnotationType.STRIKEOUT:return new Yt(j);case e.AnnotationType.STAMP:return new re(j);case e.AnnotationType.FILEATTACHMENT:return new _e(j);default:return new W(j)}}}const me=class me{constructor(j,{isRenderable:P=!1,ignoreBorder:rt=!1,createQuadrilaterals:dt=!1}={}){c(this,he,!1);this.isRenderable=P,this.data=j.data,this.layer=j.layer,this.linkService=j.linkService,this.downloadManager=j.downloadManager,this.imageResourcesPath=j.imageResourcesPath,this.renderForms=j.renderForms,this.svgFactory=j.svgFactory,this.annotationStorage=j.annotationStorage,this.enableScripting=j.enableScripting,this.hasJSActions=j.hasJSActions,this._fieldObjects=j.fieldObjects,this.parent=j.parent,P&&(this.container=this._createContainer(rt)),dt&&this._createQuadrilaterals()}static _hasPopupData({titleObj:j,contentsObj:P,richText:rt}){return!!(j!=null&&j.str||P!=null&&P.str||rt!=null&&rt.str)}get hasPopupData(){return me._hasPopupData(this.data)}_createContainer(j){const{data:P,parent:{page:rt,viewport:dt}}=this,ft=document.createElement("section");ft.setAttribute("data-annotation-id",P.id),this instanceof nt||(ft.tabIndex=T),ft.style.zIndex=this.parent.zIndex++,P.popupRef&&ft.setAttribute("aria-haspopup","dialog"),P.alternativeText&&(ft.title=P.alternativeText),P.noRotate&&ft.classList.add("norotate");const{pageWidth:Et,pageHeight:_t,pageX:Wt,pageY:qt}=dt.rawDims;if(!P.rect||this instanceof At){const{rotation:Bt}=P;return!P.hasOwnCanvas&&Bt!==0&&this.setRotation(Bt,ft),ft}const{width:Nt,height:Qt}=L(P.rect),Gt=e.Util.normalizeRect([P.rect[0],rt.view[3]-P.rect[1]+rt.view[1],P.rect[2],rt.view[3]-P.rect[3]+rt.view[1]]);if(!j&&P.borderStyle.width>0){ft.style.borderWidth=`${P.borderStyle.width}px`;const Bt=P.borderStyle.horizontalCornerRadius,Zt=P.borderStyle.verticalCornerRadius;if(Bt>0||Zt>0){const de=`calc(${Bt}px * var(--scale-factor)) / calc(${Zt}px * var(--scale-factor))`;ft.style.borderRadius=de}else if(this instanceof B){const de=`calc(${Nt}px * var(--scale-factor)) / calc(${Qt}px * var(--scale-factor))`;ft.style.borderRadius=de}switch(P.borderStyle.style){case e.AnnotationBorderStyleType.SOLID:ft.style.borderStyle="solid";break;case e.AnnotationBorderStyleType.DASHED:ft.style.borderStyle="dashed";break;case e.AnnotationBorderStyleType.BEVELED:(0,e.warn)("Unimplemented border style: beveled");break;case e.AnnotationBorderStyleType.INSET:(0,e.warn)("Unimplemented border style: inset");break;case e.AnnotationBorderStyleType.UNDERLINE:ft.style.borderBottomStyle="solid";break}const ue=P.borderColor||null;ue?(N(this,he,!0),ft.style.borderColor=e.Util.makeHexColor(ue[0]|0,ue[1]|0,ue[2]|0)):ft.style.borderWidth=0}ft.style.left=`${100*(Gt[0]-Wt)/Et}%`,ft.style.top=`${100*(Gt[1]-qt)/_t}%`;const{rotation:Mt}=P;return P.hasOwnCanvas||Mt===0?(ft.style.width=`${100*Nt/Et}%`,ft.style.height=`${100*Qt/_t}%`):this.setRotation(Mt,ft),ft}setRotation(j,P=this.container){if(!this.data.rect)return;const{pageWidth:rt,pageHeight:dt}=this.parent.viewport.rawDims,{width:ft,height:Et}=L(this.data.rect);let _t,Wt;j%180===0?(_t=100*ft/rt,Wt=100*Et/dt):(_t=100*Et/rt,Wt=100*ft/dt),P.style.width=`${_t}%`,P.style.height=`${Wt}%`,P.setAttribute("data-main-rotation",(360-j)%360)}get _commonActions(){const j=(P,rt,dt)=>{const ft=dt.detail[P],Et=ft[0],_t=ft.slice(1);dt.target.style[rt]=H[`${Et}_HTML`](_t),this.annotationStorage.setValue(this.data.id,{[rt]:H[`${Et}_rgb`](_t)})};return(0,e.shadow)(this,"_commonActions",{display:P=>{const{display:rt}=P.detail,dt=rt%2===1;this.container.style.visibility=dt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:dt,noPrint:rt===1||rt===2})},print:P=>{this.annotationStorage.setValue(this.data.id,{noPrint:!P.detail.print})},hidden:P=>{const{hidden:rt}=P.detail;this.container.style.visibility=rt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:rt,noView:rt})},focus:P=>{setTimeout(()=>P.target.focus({preventScroll:!1}),0)},userName:P=>{P.target.title=P.detail.userName},readonly:P=>{P.target.disabled=P.detail.readonly},required:P=>{this._setRequired(P.target,P.detail.required)},bgColor:P=>{j("bgColor","backgroundColor",P)},fillColor:P=>{j("fillColor","backgroundColor",P)},fgColor:P=>{j("fgColor","color",P)},textColor:P=>{j("textColor","color",P)},borderColor:P=>{j("borderColor","borderColor",P)},strokeColor:P=>{j("strokeColor","borderColor",P)},rotation:P=>{const rt=P.detail.rotation;this.setRotation(rt),this.annotationStorage.setValue(this.data.id,{rotation:rt})}})}_dispatchEventFromSandbox(j,P){var dt;const rt=this._commonActions;for(const ft of Object.keys(P.detail))(dt=j[ft]||rt[ft])==null||dt(P)}_setDefaultPropertiesFromJS(j){if(!this.enableScripting)return;const P=this.annotationStorage.getRawValue(this.data.id);if(!P)return;const rt=this._commonActions;for(const[dt,ft]of Object.entries(P)){const Et=rt[dt];if(Et){const _t={detail:{[dt]:ft},target:j};Et(_t),delete P[dt]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:j}=this.data;if(!j)return;const[P,rt,dt,ft]=this.data.rect;if(j.length===1){const[,{x:Zt,y:ue},{x:de,y:Te}]=j[0];if(dt===Zt&&ft===ue&&P===de&&rt===Te)return}const{style:Et}=this.container;let _t;if(t(this,he)){const{borderColor:Zt,borderWidth:ue}=Et;Et.borderWidth=0,_t=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Zt}" stroke-width="${ue}">`],this.container.classList.add("hasBorder")}const Wt=dt-P,qt=ft-rt,{svgFactory:Nt}=this,Qt=Nt.createElement("svg");Qt.classList.add("quadrilateralsContainer"),Qt.setAttribute("width",0),Qt.setAttribute("height",0);const Gt=Nt.createElement("defs");Qt.append(Gt);const Mt=Nt.createElement("clipPath"),Bt=`clippath_${this.data.id}`;Mt.setAttribute("id",Bt),Mt.setAttribute("clipPathUnits","objectBoundingBox"),Gt.append(Mt);for(const[,{x:Zt,y:ue},{x:de,y:Te}]of j){const Me=Nt.createElement("rect"),Ze=(de-P)/Wt,Xe=(ft-ue)/qt,Ve=(Zt-de)/Wt,si=(ue-Te)/qt;Me.setAttribute("x",Ze),Me.setAttribute("y",Xe),Me.setAttribute("width",Ve),Me.setAttribute("height",si),Mt.append(Me),_t==null||_t.push(`<rect vector-effect="non-scaling-stroke" x="${Ze}" y="${Xe}" width="${Ve}" height="${si}"/>`)}t(this,he)&&(_t.push("</g></svg>')"),Et.backgroundImage=_t.join("")),this.container.append(Qt),this.container.style.clipPath=`url(#${Bt})`}_createPopup(){const{container:j,data:P}=this;j.setAttribute("aria-haspopup","dialog");const rt=new At({data:{color:P.color,titleObj:P.titleObj,modificationDate:P.modificationDate,contentsObj:P.contentsObj,richText:P.richText,parentRect:P.rect,borderStyle:0,id:`popup_${P.id}`,rotation:P.rotation},parent:this.parent,elements:[this]});this.parent.div.append(rt.render())}render(){(0,e.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(j,P=null){const rt=[];if(this._fieldObjects){const dt=this._fieldObjects[j];if(dt)for(const{page:ft,id:Et,exportValues:_t}of dt){if(ft===-1||Et===P)continue;const Wt=typeof _t=="string"?_t:null,qt=document.querySelector(`[data-element-id="${Et}"]`);if(qt&&!z.has(qt)){(0,e.warn)(`_getElementsByName - element not allowed: ${Et}`);continue}rt.push({id:Et,exportValue:Wt,domElement:qt})}return rt}for(const dt of document.getElementsByName(j)){const{exportValue:ft}=dt,Et=dt.getAttribute("data-element-id");Et!==P&&z.has(dt)&&rt.push({id:Et,exportValue:ft,domElement:dt})}return rt}show(){var j;this.container&&(this.container.hidden=!1),(j=this.popup)==null||j.maybeShow()}hide(){var j;this.container&&(this.container.hidden=!0),(j=this.popup)==null||j.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const j=this.getElementsToTriggerPopup();if(Array.isArray(j))for(const P of j)P.classList.add("highlightArea");else j.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:j,data:{id:P}}=this;this.container.addEventListener("dblclick",()=>{var rt;(rt=this.linkService.eventBus)==null||rt.dispatch("switchannotationeditormode",{source:this,mode:j,editId:P})})}};he=new WeakMap;let W=me;class et extends W{constructor(P,rt=null){super(P,{isRenderable:!0,ignoreBorder:!!(rt!=null&&rt.ignoreBorder),createQuadrilaterals:!0});c(this,zt);c(this,Se);c(this,Ee);this.isTooltipOnly=P.data.isTooltipOnly}render(){const{data:P,linkService:rt}=this,dt=document.createElement("a");dt.setAttribute("data-element-id",P.id);let ft=!1;return P.url?(rt.addLinkAttributes(dt,P.url,P.newWindow),ft=!0):P.action?(this._bindNamedAction(dt,P.action),ft=!0):P.attachment?(F(this,Se,Gr).call(this,dt,P.attachment,P.attachmentDest),ft=!0):P.setOCGState?(F(this,Ee,Ur).call(this,dt,P.setOCGState),ft=!0):P.dest?(this._bindLink(dt,P.dest),ft=!0):(P.actions&&(P.actions.Action||P.actions["Mouse Up"]||P.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(dt,P),ft=!0),P.resetForm?(this._bindResetFormAction(dt,P.resetForm),ft=!0):this.isTooltipOnly&&!ft&&(this._bindLink(dt,""),ft=!0)),this.container.classList.add("linkAnnotation"),ft&&this.container.append(dt),this.container}_bindLink(P,rt){P.href=this.linkService.getDestinationHash(rt),P.onclick=()=>(rt&&this.linkService.goToDestination(rt),!1),(rt||rt==="")&&F(this,zt,Di).call(this)}_bindNamedAction(P,rt){P.href=this.linkService.getAnchorUrl(""),P.onclick=()=>(this.linkService.executeNamedAction(rt),!1),F(this,zt,Di).call(this)}_bindJSAction(P,rt){P.href=this.linkService.getAnchorUrl("");const dt=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const ft of Object.keys(rt.actions)){const Et=dt.get(ft);Et&&(P[Et]=()=>{var _t;return(_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:rt.id,name:ft}}),!1})}P.onclick||(P.onclick=()=>!1),F(this,zt,Di).call(this)}_bindResetFormAction(P,rt){const dt=P.onclick;if(dt||(P.href=this.linkService.getAnchorUrl("")),F(this,zt,Di).call(this),!this._fieldObjects){(0,e.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),dt||(P.onclick=()=>!1);return}P.onclick=()=>{var Qt;dt==null||dt();const{fields:ft,refs:Et,include:_t}=rt,Wt=[];if(ft.length!==0||Et.length!==0){const Gt=new Set(Et);for(const Mt of ft){const Bt=this._fieldObjects[Mt]||[];for(const{id:Zt}of Bt)Gt.add(Zt)}for(const Mt of Object.values(this._fieldObjects))for(const Bt of Mt)Gt.has(Bt.id)===_t&&Wt.push(Bt)}else for(const Gt of Object.values(this._fieldObjects))Wt.push(...Gt);const qt=this.annotationStorage,Nt=[];for(const Gt of Wt){const{id:Mt}=Gt;switch(Nt.push(Mt),Gt.type){case"text":{const Zt=Gt.defaultValue||"";qt.setValue(Mt,{value:Zt});break}case"checkbox":case"radiobutton":{const Zt=Gt.defaultValue===Gt.exportValues;qt.setValue(Mt,{value:Zt});break}case"combobox":case"listbox":{const Zt=Gt.defaultValue||"";qt.setValue(Mt,{value:Zt});break}default:continue}const Bt=document.querySelector(`[data-element-id="${Mt}"]`);if(Bt){if(!z.has(Bt)){(0,e.warn)(`_bindResetFormAction - element not allowed: ${Mt}`);continue}}else continue;Bt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Qt=this.linkService.eventBus)==null||Qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Nt,name:"ResetForm"}})),!1}}}zt=new WeakSet,Di=function(){this.container.setAttribute("data-internal-link","")},Se=new WeakSet,Gr=function(P,rt,dt=null){P.href=this.linkService.getAnchorUrl(""),P.onclick=()=>{var ft;return(ft=this.downloadManager)==null||ft.openOrDownloadData(rt.content,rt.filename,dt),!1},F(this,zt,Di).call(this)},Ee=new WeakSet,Ur=function(P,rt){P.href=this.linkService.getAnchorUrl(""),P.onclick=()=>(this.linkService.executeSetOCGState(rt),!1),F(this,zt,Di).call(this)};class ut extends W{constructor(j){super(j,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const j=document.createElement("img");return j.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",j.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),j.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(j),this.container}}class nt extends W{render(){return this.container}showElementAndHideCanvas(j){var P;this.data.hasOwnCanvas&&(((P=j.previousSibling)==null?void 0:P.nodeName)==="CANVAS"&&(j.previousSibling.hidden=!0),j.hidden=!1)}_getKeyModifier(j){return e.FeatureTest.platform.isMac?j.metaKey:j.ctrlKey}_setEventListener(j,P,rt,dt,ft){rt.includes("mouse")?j.addEventListener(rt,Et=>{var _t;(_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:dt,value:ft(Et),shift:Et.shiftKey,modifier:this._getKeyModifier(Et)}})}):j.addEventListener(rt,Et=>{var _t;if(rt==="blur"){if(!P.focused||!Et.relatedTarget)return;P.focused=!1}else if(rt==="focus"){if(P.focused)return;P.focused=!0}ft&&((_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:dt,value:ft(Et)}}))})}_setEventListeners(j,P,rt,dt){var ft,Et,_t;for(const[Wt,qt]of rt)(qt==="Action"||(ft=this.data.actions)!=null&&ft[qt])&&((qt==="Focus"||qt==="Blur")&&(P||(P={focused:!1})),this._setEventListener(j,P,Wt,qt,dt),qt==="Focus"&&!((Et=this.data.actions)!=null&&Et.Blur)?this._setEventListener(j,P,"blur","Blur",null):qt==="Blur"&&!((_t=this.data.actions)!=null&&_t.Focus)&&this._setEventListener(j,P,"focus","Focus",null))}_setBackgroundColor(j){const P=this.data.backgroundColor||null;j.style.backgroundColor=P===null?"transparent":e.Util.makeHexColor(P[0],P[1],P[2])}_setTextStyle(j){const P=["left","center","right"],{fontColor:rt}=this.data.defaultAppearanceData,dt=this.data.defaultAppearanceData.fontSize||tt,ft=j.style;let Et;const _t=2,Wt=qt=>Math.round(10*qt)/10;if(this.data.multiLine){const qt=Math.abs(this.data.rect[3]-this.data.rect[1]-_t),Nt=Math.round(qt/(e.LINE_FACTOR*dt))||1,Qt=qt/Nt;Et=Math.min(dt,Wt(Qt/e.LINE_FACTOR))}else{const qt=Math.abs(this.data.rect[3]-this.data.rect[1]-_t);Et=Math.min(dt,Wt(qt/e.LINE_FACTOR))}ft.fontSize=`calc(${Et}px * var(--scale-factor))`,ft.color=e.Util.makeHexColor(rt[0],rt[1],rt[2]),this.data.textAlignment!==null&&(ft.textAlign=P[this.data.textAlignment])}_setRequired(j,P){P?j.setAttribute("required",!0):j.removeAttribute("required"),j.setAttribute("aria-required",P)}}class O extends nt{constructor(j){const P=j.renderForms||j.data.hasOwnCanvas||!j.data.hasAppearance&&!!j.data.fieldValue;super(j,{isRenderable:P})}setPropertyOnSiblings(j,P,rt,dt){const ft=this.annotationStorage;for(const Et of this._getElementsByName(j.name,j.id))Et.domElement&&(Et.domElement[P]=rt),ft.setValue(Et.id,{[dt]:rt})}render(){var dt,ft;const j=this.annotationStorage,P=this.data.id;this.container.classList.add("textWidgetAnnotation");let rt=null;if(this.renderForms){const Et=j.getValue(P,{value:this.data.fieldValue});let _t=Et.value||"";const Wt=j.getValue(P,{charLimit:this.data.maxLen}).charLimit;Wt&&_t.length>Wt&&(_t=_t.slice(0,Wt));let qt=Et.formattedValue||((dt=this.data.textContent)==null?void 0:dt.join(`
`))||null;qt&&this.data.comb&&(qt=qt.replaceAll(/\s+/g,""));const Nt={userValue:_t,formattedValue:qt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(rt=document.createElement("textarea"),rt.textContent=qt??_t,this.data.doNotScroll&&(rt.style.overflowY="hidden")):(rt=document.createElement("input"),rt.type="text",rt.setAttribute("value",qt??_t),this.data.doNotScroll&&(rt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(rt.hidden=!0),z.add(rt),rt.setAttribute("data-element-id",P),rt.disabled=this.data.readOnly,rt.name=this.data.fieldName,rt.tabIndex=T,this._setRequired(rt,this.data.required),Wt&&(rt.maxLength=Wt),rt.addEventListener("input",Gt=>{j.setValue(P,{value:Gt.target.value}),this.setPropertyOnSiblings(rt,"value",Gt.target.value,"value"),Nt.formattedValue=null}),rt.addEventListener("resetform",Gt=>{const Mt=this.data.defaultFieldValue??"";rt.value=Nt.userValue=Mt,Nt.formattedValue=null});let Qt=Gt=>{const{formattedValue:Mt}=Nt;Mt!=null&&(Gt.target.value=Mt),Gt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){rt.addEventListener("focus",Mt=>{var Zt;if(Nt.focused)return;const{target:Bt}=Mt;Nt.userValue&&(Bt.value=Nt.userValue),Nt.lastCommittedValue=Bt.value,Nt.commitKey=1,(Zt=this.data.actions)!=null&&Zt.Focus||(Nt.focused=!0)}),rt.addEventListener("updatefromsandbox",Mt=>{this.showElementAndHideCanvas(Mt.target);const Bt={value(Zt){Nt.userValue=Zt.detail.value??"",j.setValue(P,{value:Nt.userValue.toString()}),Zt.target.value=Nt.userValue},formattedValue(Zt){const{formattedValue:ue}=Zt.detail;Nt.formattedValue=ue,ue!=null&&Zt.target!==document.activeElement&&(Zt.target.value=ue),j.setValue(P,{formattedValue:ue})},selRange(Zt){Zt.target.setSelectionRange(...Zt.detail.selRange)},charLimit:Zt=>{var Me;const{charLimit:ue}=Zt.detail,{target:de}=Zt;if(ue===0){de.removeAttribute("maxLength");return}de.setAttribute("maxLength",ue);let Te=Nt.userValue;!Te||Te.length<=ue||(Te=Te.slice(0,ue),de.value=Nt.userValue=Te,j.setValue(P,{value:Te}),(Me=this.linkService.eventBus)==null||Me.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:Te,willCommit:!0,commitKey:1,selStart:de.selectionStart,selEnd:de.selectionEnd}}))}};this._dispatchEventFromSandbox(Bt,Mt)}),rt.addEventListener("keydown",Mt=>{var ue;Nt.commitKey=1;let Bt=-1;if(Mt.key==="Escape"?Bt=0:Mt.key==="Enter"&&!this.data.multiLine?Bt=2:Mt.key==="Tab"&&(Nt.commitKey=3),Bt===-1)return;const{value:Zt}=Mt.target;Nt.lastCommittedValue!==Zt&&(Nt.lastCommittedValue=Zt,Nt.userValue=Zt,(ue=this.linkService.eventBus)==null||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:Zt,willCommit:!0,commitKey:Bt,selStart:Mt.target.selectionStart,selEnd:Mt.target.selectionEnd}}))});const Gt=Qt;Qt=null,rt.addEventListener("blur",Mt=>{var Zt,ue;if(!Nt.focused||!Mt.relatedTarget)return;(Zt=this.data.actions)!=null&&Zt.Blur||(Nt.focused=!1);const{value:Bt}=Mt.target;Nt.userValue=Bt,Nt.lastCommittedValue!==Bt&&((ue=this.linkService.eventBus)==null||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:Bt,willCommit:!0,commitKey:Nt.commitKey,selStart:Mt.target.selectionStart,selEnd:Mt.target.selectionEnd}})),Gt(Mt)}),(ft=this.data.actions)!=null&&ft.Keystroke&&rt.addEventListener("beforeinput",Mt=>{var Xe;Nt.lastCommittedValue=null;const{data:Bt,target:Zt}=Mt,{value:ue,selectionStart:de,selectionEnd:Te}=Zt;let Me=de,Ze=Te;switch(Mt.inputType){case"deleteWordBackward":{const Ve=ue.substring(0,de).match(/\w*[^\w]*$/);Ve&&(Me-=Ve[0].length);break}case"deleteWordForward":{const Ve=ue.substring(de).match(/^[^\w]*\w*/);Ve&&(Ze+=Ve[0].length);break}case"deleteContentBackward":de===Te&&(Me-=1);break;case"deleteContentForward":de===Te&&(Ze+=1);break}Mt.preventDefault(),(Xe=this.linkService.eventBus)==null||Xe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:ue,change:Bt||"",willCommit:!1,selStart:Me,selEnd:Ze}})}),this._setEventListeners(rt,Nt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Mt=>Mt.target.value)}if(Qt&&rt.addEventListener("blur",Qt),this.data.comb){const Gt=(this.data.rect[2]-this.data.rect[0])/Wt;rt.classList.add("comb"),rt.style.letterSpacing=`calc(${Gt}px * var(--scale-factor) - 1ch)`}}else rt=document.createElement("div"),rt.textContent=this.data.fieldValue,rt.style.verticalAlign="middle",rt.style.display="table-cell",this.data.hasOwnCanvas&&(rt.hidden=!0);return this._setTextStyle(rt),this._setBackgroundColor(rt),this._setDefaultPropertiesFromJS(rt),this.container.append(rt),this.container}}class V extends nt{constructor(j){super(j,{isRenderable:!!j.data.hasOwnCanvas})}}class $ extends nt{constructor(j){super(j,{isRenderable:j.renderForms})}render(){const j=this.annotationStorage,P=this.data,rt=P.id;let dt=j.getValue(rt,{value:P.exportValue===P.fieldValue}).value;typeof dt=="string"&&(dt=dt!=="Off",j.setValue(rt,{value:dt})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const ft=document.createElement("input");return z.add(ft),ft.setAttribute("data-element-id",rt),ft.disabled=P.readOnly,this._setRequired(ft,this.data.required),ft.type="checkbox",ft.name=P.fieldName,dt&&ft.setAttribute("checked",!0),ft.setAttribute("exportValue",P.exportValue),ft.tabIndex=T,ft.addEventListener("change",Et=>{const{name:_t,checked:Wt}=Et.target;for(const qt of this._getElementsByName(_t,rt)){const Nt=Wt&&qt.exportValue===P.exportValue;qt.domElement&&(qt.domElement.checked=Nt),j.setValue(qt.id,{value:Nt})}j.setValue(rt,{value:Wt})}),ft.addEventListener("resetform",Et=>{const _t=P.defaultFieldValue||"Off";Et.target.checked=_t===P.exportValue}),this.enableScripting&&this.hasJSActions&&(ft.addEventListener("updatefromsandbox",Et=>{const _t={value(Wt){Wt.target.checked=Wt.detail.value!=="Off",j.setValue(rt,{value:Wt.target.checked})}};this._dispatchEventFromSandbox(_t,Et)}),this._setEventListeners(ft,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Et=>Et.target.checked)),this._setBackgroundColor(ft),this._setDefaultPropertiesFromJS(ft),this.container.append(ft),this.container}}class B extends nt{constructor(j){super(j,{isRenderable:j.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const j=this.annotationStorage,P=this.data,rt=P.id;let dt=j.getValue(rt,{value:P.fieldValue===P.buttonValue}).value;if(typeof dt=="string"&&(dt=dt!==P.buttonValue,j.setValue(rt,{value:dt})),dt)for(const Et of this._getElementsByName(P.fieldName,rt))j.setValue(Et.id,{value:!1});const ft=document.createElement("input");if(z.add(ft),ft.setAttribute("data-element-id",rt),ft.disabled=P.readOnly,this._setRequired(ft,this.data.required),ft.type="radio",ft.name=P.fieldName,dt&&ft.setAttribute("checked",!0),ft.tabIndex=T,ft.addEventListener("change",Et=>{const{name:_t,checked:Wt}=Et.target;for(const qt of this._getElementsByName(_t,rt))j.setValue(qt.id,{value:!1});j.setValue(rt,{value:Wt})}),ft.addEventListener("resetform",Et=>{const _t=P.defaultFieldValue;Et.target.checked=_t!=null&&_t===P.buttonValue}),this.enableScripting&&this.hasJSActions){const Et=P.buttonValue;ft.addEventListener("updatefromsandbox",_t=>{const Wt={value:qt=>{const Nt=Et===qt.detail.value;for(const Qt of this._getElementsByName(qt.target.name)){const Gt=Nt&&Qt.id===rt;Qt.domElement&&(Qt.domElement.checked=Gt),j.setValue(Qt.id,{value:Gt})}}};this._dispatchEventFromSandbox(Wt,_t)}),this._setEventListeners(ft,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_t=>_t.target.checked)}return this._setBackgroundColor(ft),this._setDefaultPropertiesFromJS(ft),this.container.append(ft),this.container}}class Q extends et{constructor(j){super(j,{ignoreBorder:j.data.hasAppearance})}render(){const j=super.render();j.classList.add("buttonWidgetAnnotation","pushButton");const P=j.lastChild;return this.enableScripting&&this.hasJSActions&&P&&(this._setDefaultPropertiesFromJS(P),P.addEventListener("updatefromsandbox",rt=>{this._dispatchEventFromSandbox({},rt)})),j}}class ot extends nt{constructor(j){super(j,{isRenderable:j.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const j=this.annotationStorage,P=this.data.id,rt=j.getValue(P,{value:this.data.fieldValue}),dt=document.createElement("select");z.add(dt),dt.setAttribute("data-element-id",P),dt.disabled=this.data.readOnly,this._setRequired(dt,this.data.required),dt.name=this.data.fieldName,dt.tabIndex=T;let ft=this.data.combo&&this.data.options.length>0;this.data.combo||(dt.size=this.data.options.length,this.data.multiSelect&&(dt.multiple=!0)),dt.addEventListener("resetform",Nt=>{const Qt=this.data.defaultFieldValue;for(const Gt of dt.options)Gt.selected=Gt.value===Qt});for(const Nt of this.data.options){const Qt=document.createElement("option");Qt.textContent=Nt.displayValue,Qt.value=Nt.exportValue,rt.value.includes(Nt.exportValue)&&(Qt.setAttribute("selected",!0),ft=!1),dt.append(Qt)}let Et=null;if(ft){const Nt=document.createElement("option");Nt.value=" ",Nt.setAttribute("hidden",!0),Nt.setAttribute("selected",!0),dt.prepend(Nt),Et=()=>{Nt.remove(),dt.removeEventListener("input",Et),Et=null},dt.addEventListener("input",Et)}const _t=Nt=>{const Qt=Nt?"value":"textContent",{options:Gt,multiple:Mt}=dt;return Mt?Array.prototype.filter.call(Gt,Bt=>Bt.selected).map(Bt=>Bt[Qt]):Gt.selectedIndex===-1?null:Gt[Gt.selectedIndex][Qt]};let Wt=_t(!1);const qt=Nt=>{const Qt=Nt.target.options;return Array.prototype.map.call(Qt,Gt=>({displayValue:Gt.textContent,exportValue:Gt.value}))};return this.enableScripting&&this.hasJSActions?(dt.addEventListener("updatefromsandbox",Nt=>{const Qt={value(Gt){Et==null||Et();const Mt=Gt.detail.value,Bt=new Set(Array.isArray(Mt)?Mt:[Mt]);for(const Zt of dt.options)Zt.selected=Bt.has(Zt.value);j.setValue(P,{value:_t(!0)}),Wt=_t(!1)},multipleSelection(Gt){dt.multiple=!0},remove(Gt){const Mt=dt.options,Bt=Gt.detail.remove;Mt[Bt].selected=!1,dt.remove(Bt),Mt.length>0&&Array.prototype.findIndex.call(Mt,Zt=>Zt.selected)===-1&&(Mt[0].selected=!0),j.setValue(P,{value:_t(!0),items:qt(Gt)}),Wt=_t(!1)},clear(Gt){for(;dt.length!==0;)dt.remove(0);j.setValue(P,{value:null,items:[]}),Wt=_t(!1)},insert(Gt){const{index:Mt,displayValue:Bt,exportValue:Zt}=Gt.detail.insert,ue=dt.children[Mt],de=document.createElement("option");de.textContent=Bt,de.value=Zt,ue?ue.before(de):dt.append(de),j.setValue(P,{value:_t(!0),items:qt(Gt)}),Wt=_t(!1)},items(Gt){const{items:Mt}=Gt.detail;for(;dt.length!==0;)dt.remove(0);for(const Bt of Mt){const{displayValue:Zt,exportValue:ue}=Bt,de=document.createElement("option");de.textContent=Zt,de.value=ue,dt.append(de)}dt.options.length>0&&(dt.options[0].selected=!0),j.setValue(P,{value:_t(!0),items:qt(Gt)}),Wt=_t(!1)},indices(Gt){const Mt=new Set(Gt.detail.indices);for(const Bt of Gt.target.options)Bt.selected=Mt.has(Bt.index);j.setValue(P,{value:_t(!0)}),Wt=_t(!1)},editable(Gt){Gt.target.disabled=!Gt.detail.editable}};this._dispatchEventFromSandbox(Qt,Nt)}),dt.addEventListener("input",Nt=>{var Gt;const Qt=_t(!0);j.setValue(P,{value:Qt}),Nt.preventDefault(),(Gt=this.linkService.eventBus)==null||Gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:Wt,changeEx:Qt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(dt,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Nt=>Nt.target.value)):dt.addEventListener("input",function(Nt){j.setValue(P,{value:_t(!0)})}),this.data.combo&&this._setTextStyle(dt),this._setBackgroundColor(dt),this._setDefaultPropertiesFromJS(dt),this.container.append(dt),this.container}}class At extends W{constructor(j){const{data:P,elements:rt}=j;super(j,{isRenderable:W._hasPopupData(P)}),this.elements=rt}render(){this.container.classList.add("popupAnnotation");const j=new Dt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),P=[];for(const rt of this.elements)rt.popup=j,P.push(rt.data.id),rt.addHighlightArea();return this.container.setAttribute("aria-controls",P.map(rt=>`${e.AnnotationPrefix}${rt}`).join(",")),this.container}}class Dt{constructor({container:j,color:P,elements:rt,titleObj:dt,modificationDate:ft,contentsObj:Et,richText:_t,parent:Wt,rect:qt,parentRect:Nt,open:Qt}){c(this,X);c(this,Y);c(this,g);c(this,J);c(this,lt,F(this,X,qr).bind(this));c(this,s,F(this,J,Sn).bind(this));c(this,r,F(this,g,Tn).bind(this));c(this,u,F(this,Y,Ws).bind(this));c(this,v,null);c(this,l,null);c(this,x,null);c(this,y,null);c(this,S,null);c(this,p,null);c(this,o,null);c(this,h,!1);c(this,n,null);c(this,a,null);c(this,f,null);c(this,I,null);c(this,w,!1);var Gt;N(this,l,j),N(this,I,dt),N(this,x,Et),N(this,f,_t),N(this,p,Wt),N(this,v,P),N(this,a,qt),N(this,o,Nt),N(this,S,rt),N(this,y,E.PDFDateString.toDateObject(ft)),this.trigger=rt.flatMap(Mt=>Mt.getElementsToTriggerPopup());for(const Mt of this.trigger)Mt.addEventListener("click",t(this,u)),Mt.addEventListener("mouseenter",t(this,r)),Mt.addEventListener("mouseleave",t(this,s)),Mt.classList.add("popupTriggerArea");for(const Mt of rt)(Gt=Mt.container)==null||Gt.addEventListener("keydown",t(this,lt));t(this,l).hidden=!0,Qt&&F(this,Y,Ws).call(this)}render(){if(t(this,n))return;const{page:{view:j},viewport:{rawDims:{pageWidth:P,pageHeight:rt,pageX:dt,pageY:ft}}}=t(this,p),Et=N(this,n,document.createElement("div"));if(Et.className="popup",t(this,v)){const Te=Et.style.outlineColor=e.Util.makeHexColor(...t(this,v));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Et.style.backgroundColor=`color-mix(in srgb, ${Te} 30%, white)`:Et.style.backgroundColor=e.Util.makeHexColor(...t(this,v).map(Me=>Math.floor(.7*(255-Me)+Me)))}const _t=document.createElement("span");_t.className="header";const Wt=document.createElement("h1");if(_t.append(Wt),{dir:Wt.dir,str:Wt.textContent}=t(this,I),Et.append(_t),t(this,y)){const Te=document.createElement("span");Te.classList.add("popupDate"),Te.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),Te.setAttribute("data-l10n-args",JSON.stringify({date:t(this,y).toLocaleDateString(),time:t(this,y).toLocaleTimeString()})),_t.append(Te)}const qt=t(this,x),Nt=t(this,f);if(Nt!=null&&Nt.str&&(!(qt!=null&&qt.str)||qt.str===Nt.str))M.XfaLayer.render({xfaHtml:Nt.html,intent:"richText",div:Et}),Et.lastChild.classList.add("richText","popupContent");else{const Te=this._formatContents(qt);Et.append(Te)}let Qt=!!t(this,o),Gt=Qt?t(this,o):t(this,a);for(const Te of t(this,S))if(!Gt||e.Util.intersect(Te.data.rect,Gt)!==null){Gt=Te.data.rect,Qt=!0;break}const Mt=e.Util.normalizeRect([Gt[0],j[3]-Gt[1]+j[1],Gt[2],j[3]-Gt[3]+j[1]]),Bt=Qt?Gt[2]-Gt[0]+5:0,Zt=Mt[0]+Bt,ue=Mt[1],{style:de}=t(this,l);de.left=`${100*(Zt-dt)/P}%`,de.top=`${100*(ue-ft)/rt}%`,t(this,l).append(Et)}_formatContents({str:j,dir:P}){const rt=document.createElement("p");rt.classList.add("popupContent"),rt.dir=P;const dt=j.split(/(?:\r\n?|\n)/);for(let ft=0,Et=dt.length;ft<Et;++ft){const _t=dt[ft];rt.append(document.createTextNode(_t)),ft<Et-1&&rt.append(document.createElement("br"))}return rt}forceHide(){N(this,w,this.isVisible),t(this,w)&&(t(this,l).hidden=!0)}maybeShow(){t(this,w)&&(N(this,w,!1),t(this,l).hidden=!1)}get isVisible(){return t(this,l).hidden===!1}}lt=new WeakMap,s=new WeakMap,r=new WeakMap,u=new WeakMap,v=new WeakMap,l=new WeakMap,x=new WeakMap,y=new WeakMap,S=new WeakMap,p=new WeakMap,o=new WeakMap,h=new WeakMap,n=new WeakMap,a=new WeakMap,f=new WeakMap,I=new WeakMap,w=new WeakMap,X=new WeakSet,qr=function(j){j.altKey||j.shiftKey||j.ctrlKey||j.metaKey||(j.key==="Enter"||j.key==="Escape"&&t(this,h))&&F(this,Y,Ws).call(this)},Y=new WeakSet,Ws=function(){N(this,h,!t(this,h)),t(this,h)?(F(this,g,Tn).call(this),t(this,l).addEventListener("click",t(this,u)),t(this,l).addEventListener("keydown",t(this,lt))):(F(this,J,Sn).call(this),t(this,l).removeEventListener("click",t(this,u)),t(this,l).removeEventListener("keydown",t(this,lt)))},g=new WeakSet,Tn=function(){t(this,n)||this.render(),this.isVisible?t(this,h)&&t(this,l).classList.add("focused"):(t(this,l).hidden=!1,t(this,l).style.zIndex=parseInt(t(this,l).style.zIndex)+1e3)},J=new WeakSet,Sn=function(){t(this,l).classList.remove("focused"),!(t(this,h)||!this.isVisible)&&(t(this,l).hidden=!0,t(this,l).style.zIndex=parseInt(t(this,l).style.zIndex)-1e3)};class St extends W{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0}),this.textContent=j.data.textContent,this.textPosition=j.data.textPosition,this.annotationEditorType=e.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const j=document.createElement("div");j.classList.add("annotationTextContent"),j.setAttribute("role","comment");for(const P of this.textContent){const rt=document.createElement("span");rt.textContent=P,j.append(rt)}this.container.append(j)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class Ot extends W{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0});c(this,b,null)}render(){this.container.classList.add("lineAnnotation");const P=this.data,{width:rt,height:dt}=L(P.rect),ft=this.svgFactory.create(rt,dt,!0),Et=N(this,b,this.svgFactory.createElement("svg:line"));return Et.setAttribute("x1",P.rect[2]-P.lineCoordinates[0]),Et.setAttribute("y1",P.rect[3]-P.lineCoordinates[1]),Et.setAttribute("x2",P.rect[2]-P.lineCoordinates[2]),Et.setAttribute("y2",P.rect[3]-P.lineCoordinates[3]),Et.setAttribute("stroke-width",P.borderStyle.width||1),Et.setAttribute("stroke","transparent"),Et.setAttribute("fill","transparent"),ft.append(Et),this.container.append(ft),!P.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,b)}addHighlightArea(){this.container.classList.add("highlightArea")}}b=new WeakMap;class wt extends W{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0});c(this,G,null)}render(){this.container.classList.add("squareAnnotation");const P=this.data,{width:rt,height:dt}=L(P.rect),ft=this.svgFactory.create(rt,dt,!0),Et=P.borderStyle.width,_t=N(this,G,this.svgFactory.createElement("svg:rect"));return _t.setAttribute("x",Et/2),_t.setAttribute("y",Et/2),_t.setAttribute("width",rt-Et),_t.setAttribute("height",dt-Et),_t.setAttribute("stroke-width",Et||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),ft.append(_t),this.container.append(ft),!P.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,G)}addHighlightArea(){this.container.classList.add("highlightArea")}}G=new WeakMap;class Ct extends W{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0});c(this,K,null)}render(){this.container.classList.add("circleAnnotation");const P=this.data,{width:rt,height:dt}=L(P.rect),ft=this.svgFactory.create(rt,dt,!0),Et=P.borderStyle.width,_t=N(this,K,this.svgFactory.createElement("svg:ellipse"));return _t.setAttribute("cx",rt/2),_t.setAttribute("cy",dt/2),_t.setAttribute("rx",rt/2-Et/2),_t.setAttribute("ry",dt/2-Et/2),_t.setAttribute("stroke-width",Et||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),ft.append(_t),this.container.append(ft),!P.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,K)}addHighlightArea(){this.container.classList.add("highlightArea")}}K=new WeakMap;class Lt extends W{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0});c(this,ht,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const P=this.data,{width:rt,height:dt}=L(P.rect),ft=this.svgFactory.create(rt,dt,!0);let Et=[];for(const Wt of P.vertices){const qt=Wt.x-P.rect[0],Nt=P.rect[3]-Wt.y;Et.push(qt+","+Nt)}Et=Et.join(" ");const _t=N(this,ht,this.svgFactory.createElement(this.svgElementName));return _t.setAttribute("points",Et),_t.setAttribute("stroke-width",P.borderStyle.width||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),ft.append(_t),this.container.append(ft),!P.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,ht)}addHighlightArea(){this.container.classList.add("highlightArea")}}ht=new WeakMap;class Tt extends Lt{constructor(j){super(j),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class at extends W{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class bt extends W{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0});c(this,gt,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=e.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const P=this.data,{width:rt,height:dt}=L(P.rect),ft=this.svgFactory.create(rt,dt,!0);for(const Et of P.inkLists){let _t=[];for(const qt of Et){const Nt=qt.x-P.rect[0],Qt=P.rect[3]-qt.y;_t.push(`${Nt},${Qt}`)}_t=_t.join(" ");const Wt=this.svgFactory.createElement(this.svgElementName);t(this,gt).push(Wt),Wt.setAttribute("points",_t),Wt.setAttribute("stroke-width",P.borderStyle.width||1),Wt.setAttribute("stroke","transparent"),Wt.setAttribute("fill","transparent"),!P.popupRef&&this.hasPopupData&&this._createPopup(),ft.append(Wt)}return this.container.append(ft),this.container}getElementsToTriggerPopup(){return t(this,gt)}addHighlightArea(){this.container.classList.add("highlightArea")}}gt=new WeakMap;class Pt extends W{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Rt extends W{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Ut extends W{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Yt extends W{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class re extends W{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class _e extends W{constructor(P){var ft;super(P,{isRenderable:!0});c(this,It);c(this,xt,null);const{filename:rt,content:dt}=this.data.file;this.filename=(0,E.getFilenameFromUrl)(rt,!0),this.content=dt,(ft=this.linkService.eventBus)==null||ft.dispatch("fileattachmentannotation",{source:this,filename:rt,content:dt})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:P,data:rt}=this;let dt;rt.hasAppearance||rt.fillAlpha===0?dt=document.createElement("div"):(dt=document.createElement("img"),dt.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(rt.name)?"paperclip":"pushpin"}.svg`,rt.fillAlpha&&rt.fillAlpha<1&&(dt.style=`filter: opacity(${Math.round(rt.fillAlpha*100)}%);`)),dt.addEventListener("dblclick",F(this,It,Cn).bind(this)),N(this,xt,dt);const{isMac:ft}=e.FeatureTest.platform;return P.addEventListener("keydown",Et=>{Et.key==="Enter"&&(ft?Et.metaKey:Et.ctrlKey)&&F(this,It,Cn).call(this)}),!rt.popupRef&&this.hasPopupData?this._createPopup():dt.classList.add("popupTriggerArea"),P.append(dt),P}getElementsToTriggerPopup(){return t(this,xt)}addHighlightArea(){this.container.classList.add("highlightArea")}}xt=new WeakMap,It=new WeakSet,Cn=function(){var P;(P=this.downloadManager)==null||P.openOrDownloadData(this.content,this.filename)};class ce{constructor({div:j,accessibilityManager:P,annotationCanvasMap:rt,page:dt,viewport:ft}){c(this,ve);c(this,fe);c(this,ie,null);c(this,ee,null);c(this,Ae,new Map);this.div=j,N(this,ie,P),N(this,ee,rt),this.page=dt,this.viewport=ft,this.zIndex=0}async render(j){const{annotations:P}=j,rt=this.div;(0,E.setLayerDimensions)(rt,this.viewport);const dt=new Map,ft={data:null,layer:rt,linkService:j.linkService,downloadManager:j.downloadManager,imageResourcesPath:j.imageResourcesPath||"",renderForms:j.renderForms!==!1,svgFactory:new E.DOMSVGFactory,annotationStorage:j.annotationStorage||new A.AnnotationStorage,enableScripting:j.enableScripting===!0,hasJSActions:j.hasJSActions,fieldObjects:j.fieldObjects,parent:this,elements:null};for(const Et of P){if(Et.noHTML)continue;const _t=Et.annotationType===e.AnnotationType.POPUP;if(_t){const Nt=dt.get(Et.id);if(!Nt)continue;ft.elements=Nt}else{const{width:Nt,height:Qt}=L(Et.rect);if(Nt<=0||Qt<=0)continue}ft.data=Et;const Wt=q.create(ft);if(!Wt.isRenderable)continue;if(!_t&&Et.popupRef){const Nt=dt.get(Et.popupRef);Nt?Nt.push(Wt):dt.set(Et.popupRef,[Wt])}Wt.annotationEditorType>0&&t(this,Ae).set(Wt.data.id,Wt);const qt=Wt.render();Et.hidden&&(qt.style.visibility="hidden"),F(this,ve,$r).call(this,qt,Et.id)}F(this,fe,Mn).call(this)}update({viewport:j}){const P=this.div;this.viewport=j,(0,E.setLayerDimensions)(P,{rotation:j.rotation}),F(this,fe,Mn).call(this),P.hidden=!1}getEditableAnnotations(){return Array.from(t(this,Ae).values())}getEditableAnnotation(j){return t(this,Ae).get(j)}}ie=new WeakMap,ee=new WeakMap,Ae=new WeakMap,ve=new WeakSet,$r=function(j,P){var dt;const rt=j.firstChild||j;rt.id=`${e.AnnotationPrefix}${P}`,this.div.append(j),(dt=t(this,ie))==null||dt.moveElementInDOM(this.div,j,rt,!1)},fe=new WeakSet,Mn=function(){if(!t(this,ee))return;const j=this.div;for(const[P,rt]of t(this,ee)){const dt=j.querySelector(`[data-annotation-id="${P}"]`);if(!dt)continue;const{firstChild:ft}=dt;ft?ft.nodeName==="CANVAS"?ft.replaceWith(rt):ft.before(rt):dt.append(rt)}t(this,ee).clear()}},792:(d,C,m)=>{var M,T,tt,Wr,L;m.d(C,{AnnotationStorage:()=>it,PrintAnnotationStorage:()=>H,SerializableEmpty:()=>_});var e=m(292),E=m(310),A=m(651);const _=Object.freeze({map:null,hash:"",transfer:void 0});class it{constructor(){c(this,tt);c(this,M,!1);c(this,T,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(W,et){const ut=t(this,T).get(W);return ut===void 0?et:Object.assign(et,ut)}getRawValue(W){return t(this,T).get(W)}remove(W){if(t(this,T).delete(W),t(this,T).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const et of t(this,T).values())if(et instanceof E.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(W,et){const ut=t(this,T).get(W);let nt=!1;if(ut!==void 0)for(const[O,V]of Object.entries(et))ut[O]!==V&&(nt=!0,ut[O]=V);else nt=!0,t(this,T).set(W,et);nt&&F(this,tt,Wr).call(this),et instanceof E.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(et.constructor._type)}has(W){return t(this,T).has(W)}getAll(){return t(this,T).size>0?(0,e.objectFromMap)(t(this,T)):null}setAll(W){for(const[et,ut]of Object.entries(W))this.setValue(et,ut)}get size(){return t(this,T).size}resetModified(){t(this,M)&&(N(this,M,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new H(this)}get serializable(){if(t(this,T).size===0)return _;const W=new Map,et=new A.MurmurHash3_64,ut=[],nt=Object.create(null);let O=!1;for(const[V,$]of t(this,T)){const B=$ instanceof E.AnnotationEditor?$.serialize(!1,nt):$;B&&(W.set(V,B),et.update(`${V}:${JSON.stringify(B)}`),O||(O=!!B.bitmap))}if(O)for(const V of W.values())V.bitmap&&ut.push(V.bitmap);return W.size>0?{map:W,hash:et.hexdigest(),transfer:ut}:_}get editorStats(){let W=null;const et=new Map;for(const ut of t(this,T).values()){if(!(ut instanceof E.AnnotationEditor))continue;const nt=ut.telemetryFinalData;if(!nt)continue;const{type:O}=nt;et.has(O)||et.set(O,Object.getPrototypeOf(ut).constructor),W||(W=Object.create(null));const V=W[O]||(W[O]=new Map);for(const[$,B]of Object.entries(nt)){if($==="type")continue;let Q=V.get($);Q||(Q=new Map,V.set($,Q));const ot=Q.get(B)??0;Q.set(B,ot+1)}}for(const[ut,nt]of et)W[ut]=nt.computeTelemetryFinalData(W[ut]);return W}}M=new WeakMap,T=new WeakMap,tt=new WeakSet,Wr=function(){t(this,M)||(N(this,M,!0),typeof this.onSetModified=="function"&&this.onSetModified())};class H extends it{constructor(et){super();c(this,L,void 0);const{map:ut,hash:nt,transfer:O}=et.serializable,V=structuredClone(ut,O?{transfer:O}:null);N(this,L,{map:V,hash:nt,transfer:O})}get print(){(0,e.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,L)}}L=new WeakMap},831:(d,C,m)=>{m.a(d,async(e,E)=>{var B,Q,ot,At,Ki,St,Xs,wt,Ct,Lt,Tt,at,Vs,Pt,Rt,Ut,Yt,re,bs,ce,he,kn,zt,oe;try{let Se=function(k){if(typeof k=="string"||k instanceof URL?k={url:k}:(k instanceof ArrayBuffer||ArrayBuffer.isView(k))&&(k={data:k}),typeof k!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!k.url&&!k.data&&!k.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const b=new y,{docId:G}=b,K=k.url?se(k.url):null,ht=k.data?Ee(k.data):null,gt=k.httpHeaders||null,xt=k.withCredentials===!0,It=k.password??null,Xt=k.range instanceof S?k.range:null,ie=Number.isInteger(k.rangeChunkSize)&&k.rangeChunkSize>0?k.rangeChunkSize:ne;let ee=k.worker instanceof a?k.worker:null;const Ae=k.verbosity,ve=typeof k.docBaseUrl=="string"&&!(0,it.isDataScheme)(k.docBaseUrl)?k.docBaseUrl:null,Pe=typeof k.cMapUrl=="string"?k.cMapUrl:null,fe=k.cMapPacked!==!1,Le=k.CMapReaderFactory||u,ae=typeof k.standardFontDataUrl=="string"?k.standardFontDataUrl:null,j=k.StandardFontDataFactory||l,P=k.stopAtErrors!==!0,rt=Number.isInteger(k.maxImageSize)&&k.maxImageSize>-1?k.maxImageSize:-1,dt=k.isEvalSupported!==!1,ft=typeof k.isOffscreenCanvasSupported=="boolean"?k.isOffscreenCanvasSupported:!A.isNodeJS,Et=Number.isInteger(k.canvasMaxAreaInBytes)?k.canvasMaxAreaInBytes:-1,_t=typeof k.disableFontFace=="boolean"?k.disableFontFace:A.isNodeJS,Wt=k.fontExtraProperties===!0,qt=k.enableXfa===!0,Nt=k.ownerDocument||globalThis.document,Qt=k.disableRange===!0,Gt=k.disableStream===!0,Mt=k.disableAutoFetch===!0,Bt=k.pdfBug===!0,Zt=Xt?Xt.length:k.length??NaN,ue=typeof k.useSystemFonts=="boolean"?k.useSystemFonts:!A.isNodeJS&&!_t,de=typeof k.useWorkerFetch=="boolean"?k.useWorkerFetch:Le===it.DOMCMapReaderFactory&&j===it.DOMStandardFontDataFactory&&Pe&&ae&&(0,it.isValidFetchUrl)(Pe,document.baseURI)&&(0,it.isValidFetchUrl)(ae,document.baseURI),Te=k.canvasFactory||new r({ownerDocument:Nt}),Me=k.filterFactory||new v({docId:G,ownerDocument:Nt}),Ze=null;(0,A.setVerbosityLevel)(Ae);const Xe={canvasFactory:Te,filterFactory:Me};if(de||(Xe.cMapReaderFactory=new Le({baseUrl:Pe,isCompressed:fe}),Xe.standardFontDataFactory=new j({baseUrl:ae})),!ee){const Ge={verbosity:Ae,port:z.GlobalWorkerOptions.workerPort};ee=Ge.port?a.fromPort(Ge):new a(Ge),b._worker=ee}const Ve={docId:G,apiVersion:"4.1.392",data:ht,password:It,disableAutoFetch:Mt,rangeChunkSize:ie,length:Zt,docBaseUrl:ve,enableXfa:qt,evaluatorOptions:{maxImageSize:rt,disableFontFace:_t,ignoreErrors:P,isEvalSupported:dt,isOffscreenCanvasSupported:ft,canvasMaxAreaInBytes:Et,fontExtraProperties:Wt,useSystemFonts:ue,cMapUrl:de?Pe:null,standardFontDataUrl:de?ae:null}},si={ignoreErrors:P,isEvalSupported:dt,disableFontFace:_t,fontExtraProperties:Wt,enableXfa:qt,ownerDocument:Nt,disableAutoFetch:Mt,pdfBug:Bt,styleElement:Ze};return ee.promise.then(function(){if(b.destroyed)throw new Error("Loading aborted");const Ge=x(ee,Ve),U=new Promise(function(mt){let Ht;Xt?Ht=new et.PDFDataTransportStream(Xt,{disableRange:Qt,disableStream:Gt}):ht||(Ht=(jt=>A.isNodeJS?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&(0,it.isValidFetchUrl)(jt.url)?new ut.PDFFetchStream(jt):new O.PDFNodeStream(jt):(0,it.isValidFetchUrl)(jt.url)?new ut.PDFFetchStream(jt):new nt.PDFNetworkStream(jt))({url:K,length:Zt,httpHeaders:gt,withCredentials:xt,rangeChunkSize:ie,disableRange:Qt,disableStream:Gt})),mt(Ht)});return Promise.all([Ge,U]).then(function([mt,Ht]){if(b.destroyed)throw new Error("Loading aborted");const jt=new L.MessageHandler(G,mt,ee.port),Jt=new f(jt,b,Ht,si,Xe);b._transport=Jt,jt.send("Ready",null)})}).catch(b._capability.reject),b},se=function(k){if(k instanceof URL)return k.href;try{return new URL(k,window.location).href}catch{if(A.isNodeJS&&typeof k=="string")return k}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")},Ee=function(k){if(A.isNodeJS&&typeof Buffer<"u"&&k instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(k instanceof Uint8Array&&k.byteLength===k.buffer.byteLength)return k;if(typeof k=="string")return(0,A.stringToBytes)(k);if(k instanceof ArrayBuffer||ArrayBuffer.isView(k)||typeof k=="object"&&!isNaN(k==null?void 0:k.length))return new Uint8Array(k);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")};m.d(C,{PDFDataRangeTransport:()=>S,PDFWorker:()=>a,build:()=>st,getDocument:()=>Se,version:()=>Y});var A=m(292),_=m(792),it=m(419),H=m(10),M=m(573),T=m(923),tt=m(814),z=m(164),L=m(178),q=m(62),W=m(626),et=m(585),ut=m(94),nt=m(457),O=m(786),V=m(50),$=e([M,O]);[M,O]=$.then?(await $)():$;const ne=65536,lt=100,s=5e3,r=A.isNodeJS?M.NodeCanvasFactory:it.DOMCanvasFactory,u=A.isNodeJS?M.NodeCMapReaderFactory:it.DOMCMapReaderFactory,v=A.isNodeJS?M.NodeFilterFactory:it.DOMFilterFactory,l=A.isNodeJS?M.NodeStandardFontDataFactory:it.DOMStandardFontDataFactory;async function x(k,b){if(k.destroyed)throw new Error("Worker was destroyed");const G=await k.messageHandler.sendWithPromise("GetDocRequest",b,b.data?[b.data.buffer]:null);if(k.destroyed)throw new Error("Worker was destroyed");return G}const g=class g{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${mi(g,B)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var b,G,K;this.destroyed=!0;try{(b=this._worker)!=null&&b.port&&(this._worker._pendingDestroy=!0),await((G=this._transport)==null?void 0:G.destroy())}catch(ht){throw(K=this._worker)!=null&&K.port&&delete this._worker._pendingDestroy,ht}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};B=new WeakMap,c(g,B,0);let y=g;class S{constructor(b,G,K=!1,ht=null){this.length=b,this.initialData=G,this.progressiveDone=K,this.contentDispositionFilename=ht,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(b){this._rangeListeners.push(b)}addProgressListener(b){this._progressListeners.push(b)}addProgressiveReadListener(b){this._progressiveReadListeners.push(b)}addProgressiveDoneListener(b){this._progressiveDoneListeners.push(b)}onDataRange(b,G){for(const K of this._rangeListeners)K(b,G)}onDataProgress(b,G){this._readyCapability.promise.then(()=>{for(const K of this._progressListeners)K(b,G)})}onDataProgressiveRead(b){this._readyCapability.promise.then(()=>{for(const G of this._progressiveReadListeners)G(b)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const b of this._progressiveDoneListeners)b()})}transportReady(){this._readyCapability.resolve()}requestDataRange(b,G){(0,A.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class p{constructor(b,G){this._pdfInfo=b,this._transport=G}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,A.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(b){return this._transport.getPage(b)}getPageIndex(b){return this._transport.getPageIndex(b)}getDestinations(){return this._transport.getDestinations()}getDestination(b){return this._transport.getDestination(b)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:b="display"}={}){const{renderingIntent:G}=this._transport.getRenderingIntent(b);return this._transport.getOptionalContentConfig(G)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(b=!1){return this._transport.startCleanup(b||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class o{constructor(b,G,K,ht=!1){c(this,At);c(this,St);c(this,Q,null);c(this,ot,!1);this._pageIndex=b,this._pageInfo=G,this._transport=K,this._stats=ht?new it.StatTimer:null,this._pdfBug=ht,this.commonObjs=K.commonObjs,this.objs=new w,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:b,rotation:G=this.rotate,offsetX:K=0,offsetY:ht=0,dontFlip:gt=!1}={}){return new it.PageViewport({viewBox:this.view,scale:b,rotation:G,offsetX:K,offsetY:ht,dontFlip:gt})}getAnnotations({intent:b="display"}={}){const{renderingIntent:G}=this._transport.getRenderingIntent(b);return this._transport.getAnnotations(this._pageIndex,G)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,A.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var b;return((b=this._transport._htmlForXfa)==null?void 0:b.children[this._pageIndex])||null}render({canvasContext:b,viewport:G,intent:K="display",annotationMode:ht=A.AnnotationMode.ENABLE,transform:gt=null,background:xt=null,optionalContentConfigPromise:It=null,annotationCanvasMap:Xt=null,pageColors:ie=null,printAnnotationStorage:ee=null}){var rt,dt;(rt=this._stats)==null||rt.time("Overall");const Ae=this._transport.getRenderingIntent(K,ht,ee),{renderingIntent:ve,cacheKey:Pe}=Ae;N(this,ot,!1),F(this,St,Xs).call(this),It||(It=this._transport.getOptionalContentConfig(ve));let fe=this._intentStates.get(Pe);fe||(fe=Object.create(null),this._intentStates.set(Pe,fe)),fe.streamReaderCancelTimeout&&(clearTimeout(fe.streamReaderCancelTimeout),fe.streamReaderCancelTimeout=null);const Le=!!(ve&A.RenderingIntentFlag.PRINT);fe.displayReadyCapability||(fe.displayReadyCapability=Promise.withResolvers(),fe.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(dt=this._stats)==null||dt.time("Page Request"),this._pumpOperatorList(Ae));const ae=ft=>{var Et,_t;fe.renderTasks.delete(j),(this._maybeCleanupAfterRender||Le)&&N(this,ot,!0),F(this,At,Ki).call(this,!Le),ft?(j.capability.reject(ft),this._abortOperatorList({intentState:fe,reason:ft instanceof Error?ft:new Error(ft)})):j.capability.resolve(),(Et=this._stats)==null||Et.timeEnd("Rendering"),(_t=this._stats)==null||_t.timeEnd("Overall")},j=new Z({callback:ae,params:{canvasContext:b,viewport:G,transform:gt,background:xt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Xt,operatorList:fe.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Le,pdfBug:this._pdfBug,pageColors:ie});(fe.renderTasks||(fe.renderTasks=new Set)).add(j);const P=j.task;return Promise.all([fe.displayReadyCapability.promise,It]).then(([ft,Et])=>{var _t;if(this.destroyed){ae();return}if((_t=this._stats)==null||_t.time("Rendering"),!(Et.renderingIntent&ve))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");j.initializeGraphics({transparency:ft,optionalContentConfig:Et}),j.operatorListChanged()}).catch(ae),P}getOperatorList({intent:b="display",annotationMode:G=A.AnnotationMode.ENABLE,printAnnotationStorage:K=null}={}){var Xt;function ht(){xt.operatorList.lastChunk&&(xt.opListReadCapability.resolve(xt.operatorList),xt.renderTasks.delete(It))}const gt=this._transport.getRenderingIntent(b,G,K,!0);let xt=this._intentStates.get(gt.cacheKey);xt||(xt=Object.create(null),this._intentStates.set(gt.cacheKey,xt));let It;return xt.opListReadCapability||(It=Object.create(null),It.operatorListChanged=ht,xt.opListReadCapability=Promise.withResolvers(),(xt.renderTasks||(xt.renderTasks=new Set)).add(It),xt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Xt=this._stats)==null||Xt.time("Page Request"),this._pumpOperatorList(gt)),xt.opListReadCapability.promise}streamTextContent({includeMarkedContent:b=!1,disableNormalization:G=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:b===!0,disableNormalization:G===!0},{highWaterMark:100,size(K){return K.items.length}})}getTextContent(b={}){if(this._transport._htmlForXfa)return this.getXfa().then(K=>V.XfaText.textContent(K));const G=this.streamTextContent(b);return new Promise(function(K,ht){function gt(){xt.read().then(function({value:Xt,done:ie}){if(ie){K(It);return}Object.assign(It.styles,Xt.styles),It.items.push(...Xt.items),gt()},ht)}const xt=G.getReader(),It={items:[],styles:Object.create(null)};gt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const b=[];for(const G of this._intentStates.values())if(this._abortOperatorList({intentState:G,reason:new Error("Page was destroyed."),force:!0}),!G.opListReadCapability)for(const K of G.renderTasks)b.push(K.completed),K.cancel();return this.objs.clear(),N(this,ot,!1),F(this,St,Xs).call(this),Promise.all(b)}cleanup(b=!1){N(this,ot,!0);const G=F(this,At,Ki).call(this,!1);return b&&G&&this._stats&&(this._stats=new it.StatTimer),G}_startRenderPage(b,G){var ht,gt;const K=this._intentStates.get(G);K&&((ht=this._stats)==null||ht.timeEnd("Page Request"),(gt=K.displayReadyCapability)==null||gt.resolve(b))}_renderPageChunk(b,G){for(let K=0,ht=b.length;K<ht;K++)G.operatorList.fnArray.push(b.fnArray[K]),G.operatorList.argsArray.push(b.argsArray[K]);G.operatorList.lastChunk=b.lastChunk,G.operatorList.separateAnnots=b.separateAnnots;for(const K of G.renderTasks)K.operatorListChanged();b.lastChunk&&F(this,At,Ki).call(this,!0)}_pumpOperatorList({renderingIntent:b,cacheKey:G,annotationStorageSerializable:K}){const{map:ht,transfer:gt}=K,xt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:b,cacheKey:G,annotationStorage:ht},gt).getReader(),It=this._intentStates.get(G);It.streamReader=xt;const Xt=()=>{xt.read().then(({value:ie,done:ee})=>{if(ee){It.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(ie,It),Xt())},ie=>{if(It.streamReader=null,!this._transport.destroyed){if(It.operatorList){It.operatorList.lastChunk=!0;for(const ee of It.renderTasks)ee.operatorListChanged();F(this,At,Ki).call(this,!0)}if(It.displayReadyCapability)It.displayReadyCapability.reject(ie);else if(It.opListReadCapability)It.opListReadCapability.reject(ie);else throw ie}})};Xt()}_abortOperatorList({intentState:b,reason:G,force:K=!1}){if(b.streamReader){if(b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null),!K){if(b.renderTasks.size>0)return;if(G instanceof it.RenderingCancelledException){let ht=lt;G.extraDelay>0&&G.extraDelay<1e3&&(ht+=G.extraDelay),b.streamReaderCancelTimeout=setTimeout(()=>{b.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:b,reason:G,force:!0})},ht);return}}if(b.streamReader.cancel(new A.AbortException(G.message)).catch(()=>{}),b.streamReader=null,!this._transport.destroyed){for(const[ht,gt]of this._intentStates)if(gt===b){this._intentStates.delete(ht);break}this.cleanup()}}}get stats(){return this._stats}}Q=new WeakMap,ot=new WeakMap,At=new WeakSet,Ki=function(b=!1){if(F(this,St,Xs).call(this),!t(this,ot)||this.destroyed)return!1;if(b)return N(this,Q,setTimeout(()=>{N(this,Q,null),F(this,At,Ki).call(this,!1)},s)),!1;for(const{renderTasks:G,operatorList:K}of this._intentStates.values())if(G.size>0||!K.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),N(this,ot,!1),!0},St=new WeakSet,Xs=function(){t(this,Q)&&(clearTimeout(t(this,Q)),N(this,Q,null))};class h{constructor(){c(this,wt,new Set);c(this,Ct,Promise.resolve())}postMessage(b,G){const K={data:structuredClone(b,G?{transfer:G}:null)};t(this,Ct).then(()=>{for(const ht of t(this,wt))ht.call(this,K)})}addEventListener(b,G){t(this,wt).add(G)}removeEventListener(b,G){t(this,wt).delete(G)}terminate(){t(this,wt).clear()}}wt=new WeakMap,Ct=new WeakMap;const n={isWorkerDisabled:!1,fakeWorkerId:0};A.isNodeJS&&(n.isWorkerDisabled=!0,(Lt=z.GlobalWorkerOptions).workerSrc||(Lt.workerSrc="./pdf.worker.mjs")),n.isSameOrigin=function(k,b){let G;try{if(G=new URL(k),!G.origin||G.origin==="null")return!1}catch{return!1}const K=new URL(b,G);return G.origin===K.origin},n.createCDNWrapper=function(k){const b=`await import("${k}");`;return URL.createObjectURL(new Blob([b],{type:"text/javascript"}))};const R=class R{constructor({name:b=null,port:G=null,verbosity:K=(0,A.getVerbosityLevel)()}={}){var ht;if(this.name=b,this.destroyed=!1,this.verbosity=K,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,G){if((ht=t(R,Tt))!=null&&ht.has(G))throw new Error("Cannot use more than one PDFWorker per port.");(t(R,Tt)||N(R,Tt,new WeakMap)).set(G,this),this._initializeFromPort(G);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(b){this._port=b,this._messageHandler=new L.MessageHandler("main","worker",b),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!n.isWorkerDisabled&&!t(R,at,Vs)){let{workerSrc:b}=R;try{n.isSameOrigin(window.location.href,b)||(b=n.createCDNWrapper(new URL(b,window.location).href));const G=new Worker(b,{type:"module"}),K=new L.MessageHandler("main","worker",G),ht=()=>{G.removeEventListener("error",gt),K.destroy(),G.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},gt=()=>{this._webWorker||ht()};G.addEventListener("error",gt),K.on("test",It=>{if(G.removeEventListener("error",gt),this.destroyed){ht();return}It?(this._messageHandler=K,this._port=G,this._webWorker=G,this._readyCapability.resolve(),K.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),K.destroy(),G.terminate())}),K.on("ready",It=>{if(G.removeEventListener("error",gt),this.destroyed){ht();return}try{xt()}catch{this._setupFakeWorker()}});const xt=()=>{const It=new Uint8Array;K.send("test",It,[It.buffer])};xt();return}catch{(0,A.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){n.isWorkerDisabled||((0,A.warn)("Setting up fake worker."),n.isWorkerDisabled=!0),R._setupFakeWorkerGlobal.then(b=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const G=new h;this._port=G;const K=`fake${n.fakeWorkerId++}`,ht=new L.MessageHandler(K+"_worker",K,G);b.setup(ht,G);const gt=new L.MessageHandler(K,K+"_worker",G);this._messageHandler=gt,this._readyCapability.resolve(),gt.send("configure",{verbosity:this.verbosity})}).catch(b=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${b.message}".`))})}destroy(){var b;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(b=t(R,Tt))==null||b.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(b){var K;if(!(b!=null&&b.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const G=(K=t(this,Tt))==null?void 0:K.get(b.port);if(G){if(G._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return G}return new R(b)}static get workerSrc(){if(z.GlobalWorkerOptions.workerSrc)return z.GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){const b=async()=>t(this,at,Vs)?t(this,at,Vs):(await vi(()=>import(this.workerSrc).then(async G=>(await G.__tla,G)),[])).WorkerMessageHandler;return(0,A.shadow)(this,"_setupFakeWorkerGlobal",b())}};Tt=new WeakMap,at=new WeakSet,Vs=function(){var b;try{return((b=globalThis.pdfjsWorker)==null?void 0:b.WorkerMessageHandler)||null}catch{return null}},c(R,at),c(R,Tt,void 0);let a=R;class f{constructor(b,G,K,ht,gt){c(this,re);c(this,Pt,new Map);c(this,Rt,new Map);c(this,Ut,new Map);c(this,Yt,null);this.messageHandler=b,this.loadingTask=G,this.commonObjs=new w,this.fontLoader=new H.FontLoader({ownerDocument:ht.ownerDocument,styleElement:ht.styleElement}),this._params=ht,this.canvasFactory=gt.canvasFactory,this.filterFactory=gt.filterFactory,this.cMapReaderFactory=gt.cMapReaderFactory,this.standardFontDataFactory=gt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=K,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return(0,A.shadow)(this,"annotationStorage",new _.AnnotationStorage)}getRenderingIntent(b,G=A.AnnotationMode.ENABLE,K=null,ht=!1){let gt=A.RenderingIntentFlag.DISPLAY,xt=_.SerializableEmpty;switch(b){case"any":gt=A.RenderingIntentFlag.ANY;break;case"display":break;case"print":gt=A.RenderingIntentFlag.PRINT;break;default:(0,A.warn)(`getRenderingIntent - invalid intent: ${b}`)}switch(G){case A.AnnotationMode.DISABLE:gt+=A.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case A.AnnotationMode.ENABLE:break;case A.AnnotationMode.ENABLE_FORMS:gt+=A.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case A.AnnotationMode.ENABLE_STORAGE:gt+=A.RenderingIntentFlag.ANNOTATIONS_STORAGE,xt=(gt&A.RenderingIntentFlag.PRINT&&K instanceof _.PrintAnnotationStorage?K:this.annotationStorage).serializable;break;default:(0,A.warn)(`getRenderingIntent - invalid annotationMode: ${G}`)}return ht&&(gt+=A.RenderingIntentFlag.OPLIST),{renderingIntent:gt,cacheKey:`${gt}_${xt.hash}`,annotationStorageSerializable:xt}}destroy(){var K;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(K=t(this,Yt))==null||K.reject(new Error("Worker was destroyed during onPassword callback"));const b=[];for(const ht of t(this,Rt).values())b.push(ht._destroy());t(this,Rt).clear(),t(this,Ut).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const G=this.messageHandler.sendWithPromise("Terminate",null);return b.push(G),Promise.all(b).then(()=>{var ht;this.commonObjs.clear(),this.fontLoader.clear(),t(this,Pt).clear(),this.filterFactory.destroy(),(0,tt.cleanupTextLayer)(),(ht=this._networkStream)==null||ht.cancelAllRequests(new A.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:b,loadingTask:G}=this;b.on("GetReader",(K,ht)=>{(0,A.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=gt=>{this._lastProgress={loaded:gt.loaded,total:gt.total}},ht.onPull=()=>{this._fullReader.read().then(function({value:gt,done:xt}){if(xt){ht.close();return}(0,A.assert)(gt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),ht.enqueue(new Uint8Array(gt),1,[gt])}).catch(gt=>{ht.error(gt)})},ht.onCancel=gt=>{this._fullReader.cancel(gt),ht.ready.catch(xt=>{if(!this.destroyed)throw xt})}}),b.on("ReaderHeadersReady",K=>{const ht=Promise.withResolvers(),gt=this._fullReader;return gt.headersReady.then(()=>{var xt;(!gt.isStreamingSupported||!gt.isRangeSupported)&&(this._lastProgress&&((xt=G.onProgress)==null||xt.call(G,this._lastProgress)),gt.onProgress=It=>{var Xt;(Xt=G.onProgress)==null||Xt.call(G,{loaded:It.loaded,total:It.total})}),ht.resolve({isStreamingSupported:gt.isStreamingSupported,isRangeSupported:gt.isRangeSupported,contentLength:gt.contentLength})},ht.reject),ht.promise}),b.on("GetRangeReader",(K,ht)=>{(0,A.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const gt=this._networkStream.getRangeReader(K.begin,K.end);if(!gt){ht.close();return}ht.onPull=()=>{gt.read().then(function({value:xt,done:It}){if(It){ht.close();return}(0,A.assert)(xt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),ht.enqueue(new Uint8Array(xt),1,[xt])}).catch(xt=>{ht.error(xt)})},ht.onCancel=xt=>{gt.cancel(xt),ht.ready.catch(It=>{if(!this.destroyed)throw It})}}),b.on("GetDoc",({pdfInfo:K})=>{this._numPages=K.numPages,this._htmlForXfa=K.htmlForXfa,delete K.htmlForXfa,G._capability.resolve(new p(K,this))}),b.on("DocException",function(K){let ht;switch(K.name){case"PasswordException":ht=new A.PasswordException(K.message,K.code);break;case"InvalidPDFException":ht=new A.InvalidPDFException(K.message);break;case"MissingPDFException":ht=new A.MissingPDFException(K.message);break;case"UnexpectedResponseException":ht=new A.UnexpectedResponseException(K.message,K.status);break;case"UnknownErrorException":ht=new A.UnknownErrorException(K.message,K.details);break;default:(0,A.unreachable)("DocException - expected a valid Error.")}G._capability.reject(ht)}),b.on("PasswordRequest",K=>{if(N(this,Yt,Promise.withResolvers()),G.onPassword){const ht=gt=>{gt instanceof Error?t(this,Yt).reject(gt):t(this,Yt).resolve({password:gt})};try{G.onPassword(ht,K.code)}catch(gt){t(this,Yt).reject(gt)}}else t(this,Yt).reject(new A.PasswordException(K.message,K.code));return t(this,Yt).promise}),b.on("DataLoaded",K=>{var ht;(ht=G.onProgress)==null||ht.call(G,{loaded:K.length,total:K.length}),this.downloadInfoCapability.resolve(K)}),b.on("StartRenderPage",K=>{this.destroyed||t(this,Rt).get(K.pageIndex)._startRenderPage(K.transparency,K.cacheKey)}),b.on("commonobj",([K,ht,gt])=>{var xt;if(this.destroyed||this.commonObjs.has(K))return null;switch(ht){case"Font":const It=this._params;if("error"in gt){const Ae=gt.error;(0,A.warn)(`Error during font loading: ${Ae}`),this.commonObjs.resolve(K,Ae);break}const Xt=It.pdfBug&&((xt=globalThis.FontInspector)!=null&&xt.enabled)?(Ae,ve)=>globalThis.FontInspector.fontAdded(Ae,ve):null,ie=new H.FontFaceObject(gt,{isEvalSupported:It.isEvalSupported,disableFontFace:It.disableFontFace,ignoreErrors:It.ignoreErrors,inspectFont:Xt});this.fontLoader.bind(ie).catch(()=>b.sendWithPromise("FontFallback",{id:K})).finally(()=>{!It.fontExtraProperties&&ie.data&&(ie.data=null),this.commonObjs.resolve(K,ie)});break;case"CopyLocalImage":const{imageRef:ee}=gt;(0,A.assert)(ee,"The imageRef must be defined.");for(const Ae of t(this,Rt).values())for(const[,ve]of Ae.objs)if(ve.ref===ee)return ve.dataLen?(this.commonObjs.resolve(K,structuredClone(ve)),ve.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(K,gt);break;default:throw new Error(`Got unknown common object type ${ht}`)}return null}),b.on("obj",([K,ht,gt,xt])=>{var Xt;if(this.destroyed)return;const It=t(this,Rt).get(ht);if(!It.objs.has(K)){if(It._intentStates.size===0){(Xt=xt==null?void 0:xt.bitmap)==null||Xt.close();return}switch(gt){case"Image":It.objs.resolve(K,xt),(xt==null?void 0:xt.dataLen)>A.MAX_IMAGE_SIZE_TO_CACHE&&(It._maybeCleanupAfterRender=!0);break;case"Pattern":It.objs.resolve(K,xt);break;default:throw new Error(`Got unknown object type ${gt}`)}}}),b.on("DocProgress",K=>{var ht;this.destroyed||((ht=G.onProgress)==null||ht.call(G,{loaded:K.loaded,total:K.total}))}),b.on("FetchBuiltInCMap",K=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(K):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),b.on("FetchStandardFontData",K=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(K):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var K;this.annotationStorage.size<=0&&(0,A.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:b,transfer:G}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:b,filename:((K=this._fullReader)==null?void 0:K.filename)??null},G).finally(()=>{this.annotationStorage.resetModified()})}getPage(b){if(!Number.isInteger(b)||b<=0||b>this._numPages)return Promise.reject(new Error("Invalid page request."));const G=b-1,K=t(this,Ut).get(G);if(K)return K;const ht=this.messageHandler.sendWithPromise("GetPage",{pageIndex:G}).then(gt=>{if(this.destroyed)throw new Error("Transport destroyed");const xt=new o(G,gt,this,this._params.pdfBug);return t(this,Rt).set(G,xt),xt});return t(this,Ut).set(G,ht),ht}getPageIndex(b){return typeof b!="object"||b===null||!Number.isInteger(b.num)||b.num<0||!Number.isInteger(b.gen)||b.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:b.num,gen:b.gen})}getAnnotations(b,G){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:b,intent:G})}getFieldObjects(){return F(this,re,bs).call(this,"GetFieldObjects")}hasJSActions(){return F(this,re,bs).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(b){return typeof b!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:b})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return F(this,re,bs).call(this,"GetDocJSActions")}getPageJSActions(b){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:b})}getStructTree(b){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:b})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(b){return F(this,re,bs).call(this,"GetOptionalContentConfig").then(G=>new W.OptionalContentConfig(G,b))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const b="GetMetadata",G=t(this,Pt).get(b);if(G)return G;const K=this.messageHandler.sendWithPromise(b,null).then(ht=>{var gt,xt;return{info:ht[0],metadata:ht[1]?new q.Metadata(ht[1]):null,contentDispositionFilename:((gt=this._fullReader)==null?void 0:gt.filename)??null,contentLength:((xt=this._fullReader)==null?void 0:xt.contentLength)??null}});return t(this,Pt).set(b,K),K}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(b=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const G of t(this,Rt).values())if(!G.cleanup())throw new Error(`startCleanup: Page ${G.pageNumber} is currently rendering.`);this.commonObjs.clear(),b||this.fontLoader.clear(),t(this,Pt).clear(),this.filterFactory.destroy(!0),(0,tt.cleanupTextLayer)()}}get loadingParams(){const{disableAutoFetch:b,enableXfa:G}=this._params;return(0,A.shadow)(this,"loadingParams",{disableAutoFetch:b,enableXfa:G})}}Pt=new WeakMap,Rt=new WeakMap,Ut=new WeakMap,Yt=new WeakMap,re=new WeakSet,bs=function(b,G=null){const K=t(this,Pt).get(b);if(K)return K;const ht=this.messageHandler.sendWithPromise(b,G);return t(this,Pt).set(b,ht),ht};const I=Symbol("INITIAL_DATA");class w{constructor(){c(this,he);c(this,ce,Object.create(null))}get(b,G=null){if(G){const ht=F(this,he,kn).call(this,b);return ht.promise.then(()=>G(ht.data)),null}const K=t(this,ce)[b];if(!K||K.data===I)throw new Error(`Requesting object that isn't resolved yet ${b}.`);return K.data}has(b){const G=t(this,ce)[b];return!!G&&G.data!==I}resolve(b,G=null){const K=F(this,he,kn).call(this,b);K.data=G,K.resolve()}clear(){var b;for(const G in t(this,ce)){const{data:K}=t(this,ce)[G];(b=K==null?void 0:K.bitmap)==null||b.close()}N(this,ce,Object.create(null))}*[Symbol.iterator](){for(const b in t(this,ce)){const{data:G}=t(this,ce)[b];G!==I&&(yield[b,G])}}}ce=new WeakMap,he=new WeakSet,kn=function(b){var G;return(G=t(this,ce))[b]||(G[b]={...Promise.withResolvers(),data:I})};class X{constructor(b){c(this,zt,null);N(this,zt,b),this.onContinue=null}get promise(){return t(this,zt).capability.promise}cancel(b=0){t(this,zt).cancel(null,b)}get separateAnnots(){const{separateAnnots:b}=t(this,zt).operatorList;if(!b)return!1;const{annotationCanvasMap:G}=t(this,zt);return b.form||b.canvas&&(G==null?void 0:G.size)>0}}zt=new WeakMap;const J=class J{constructor({callback:b,params:G,objs:K,commonObjs:ht,annotationCanvasMap:gt,operatorList:xt,pageIndex:It,canvasFactory:Xt,filterFactory:ie,useRequestAnimationFrame:ee=!1,pdfBug:Ae=!1,pageColors:ve=null}){this.callback=b,this.params=G,this.objs=K,this.commonObjs=ht,this.annotationCanvasMap=gt,this.operatorListIdx=null,this.operatorList=xt,this._pageIndex=It,this.canvasFactory=Xt,this.filterFactory=ie,this._pdfBug=Ae,this.pageColors=ve,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=ee===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new X(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=G.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:b=!1,optionalContentConfig:G}){var It,Xt;if(this.cancelled)return;if(this._canvas){if(t(J,oe).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(J,oe).add(this._canvas)}this._pdfBug&&((It=globalThis.StepperManager)!=null&&It.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:K,viewport:ht,transform:gt,background:xt}=this.params;this.gfx=new T.CanvasGraphics(K,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:G},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:gt,viewport:ht,transparency:b,background:xt}),this.operatorListIdx=0,this.graphicsReady=!0,(Xt=this.graphicsReadyCallback)==null||Xt.call(this)}cancel(b=null,G=0){var K;this.running=!1,this.cancelled=!0,(K=this.gfx)==null||K.endDrawing(),t(J,oe).delete(this._canvas),this.callback(b||new it.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,G))}operatorListChanged(){var b;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(b=this.stepper)==null||b.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),t(J,oe).delete(this._canvas),this.callback())))}};oe=new WeakMap,c(J,oe,new WeakSet);let Z=J;const Y="4.1.392",st="fcb76a78d";E()}catch(Se){E(Se)}})},583:(d,C,m)=>{m.d(C,{BaseCMapReaderFactory:()=>_,BaseCanvasFactory:()=>A,BaseFilterFactory:()=>E,BaseSVGFactory:()=>H,BaseStandardFontDataFactory:()=>it});var e=m(292);class E{constructor(){this.constructor===E&&(0,e.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(T){return"none"}addHCMFilter(T,tt){return"none"}addHighlightHCMFilter(T,tt,z,L,q){return"none"}destroy(T=!1){}}class A{constructor(){this.constructor===A&&(0,e.unreachable)("Cannot initialize BaseCanvasFactory.")}create(T,tt){if(T<=0||tt<=0)throw new Error("Invalid canvas size");const z=this._createCanvas(T,tt);return{canvas:z,context:z.getContext("2d")}}reset(T,tt,z){if(!T.canvas)throw new Error("Canvas is not specified");if(tt<=0||z<=0)throw new Error("Invalid canvas size");T.canvas.width=tt,T.canvas.height=z}destroy(T){if(!T.canvas)throw new Error("Canvas is not specified");T.canvas.width=0,T.canvas.height=0,T.canvas=null,T.context=null}_createCanvas(T,tt){(0,e.unreachable)("Abstract method `_createCanvas` called.")}}class _{constructor({baseUrl:T=null,isCompressed:tt=!0}){this.constructor===_&&(0,e.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=T,this.isCompressed=tt}async fetch({name:T}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!T)throw new Error("CMap name must be specified.");const tt=this.baseUrl+T+(this.isCompressed?".bcmap":""),z=this.isCompressed?e.CMapCompressionType.BINARY:e.CMapCompressionType.NONE;return this._fetchData(tt,z).catch(L=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${tt}`)})}_fetchData(T,tt){(0,e.unreachable)("Abstract method `_fetchData` called.")}}class it{constructor({baseUrl:T=null}){this.constructor===it&&(0,e.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=T}async fetch({filename:T}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!T)throw new Error("Font filename must be specified.");const tt=`${this.baseUrl}${T}`;return this._fetchData(tt).catch(z=>{throw new Error(`Unable to load font data at: ${tt}`)})}_fetchData(T){(0,e.unreachable)("Abstract method `_fetchData` called.")}}class H{constructor(){this.constructor===H&&(0,e.unreachable)("Cannot initialize BaseSVGFactory.")}create(T,tt,z=!1){if(T<=0||tt<=0)throw new Error("Invalid SVG dimensions");const L=this._createSVG("svg:svg");return L.setAttribute("version","1.1"),z||(L.setAttribute("width",`${T}px`),L.setAttribute("height",`${tt}px`)),L.setAttribute("preserveAspectRatio","none"),L.setAttribute("viewBox",`0 0 ${T} ${tt}`),L}createElement(T){if(typeof T!="string")throw new Error("Invalid SVG element type");return this._createSVG(T)}_createSVG(T){(0,e.unreachable)("Abstract method `_createSVG` called.")}}},923:(d,C,m)=>{var oe,Ln,se,Pn;m.d(C,{CanvasGraphics:()=>me});var e=m(292),E=m(419);const A={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function _(lt,s){if(!s)return;const r=s[2]-s[0],u=s[3]-s[1],v=new Path2D;v.rect(s[0],s[1],r,u),lt.clip(v)}class it{constructor(){this.constructor===it&&(0,e.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,e.unreachable)("Abstract method `getPattern` called.")}}class H extends it{constructor(s){super(),this._type=s[1],this._bbox=s[2],this._colorStops=s[3],this._p0=s[4],this._p1=s[5],this._r0=s[6],this._r1=s[7],this.matrix=null}_createGradient(s){let r;this._type==="axial"?r=s.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(r=s.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const u of this._colorStops)r.addColorStop(u[0],u[1]);return r}getPattern(s,r,u,v){let l;if(v===A.STROKE||v===A.FILL){const x=r.current.getClippedPathBoundingBox(v,(0,E.getCurrentTransform)(s))||[0,0,0,0],y=Math.ceil(x[2]-x[0])||1,S=Math.ceil(x[3]-x[1])||1,p=r.cachedCanvases.getCanvas("pattern",y,S,!0),o=p.context;o.clearRect(0,0,o.canvas.width,o.canvas.height),o.beginPath(),o.rect(0,0,o.canvas.width,o.canvas.height),o.translate(-x[0],-x[1]),u=e.Util.transform(u,[1,0,0,1,x[0],x[1]]),o.transform(...r.baseTransform),this.matrix&&o.transform(...this.matrix),_(o,this._bbox),o.fillStyle=this._createGradient(o),o.fill(),l=s.createPattern(p.canvas,"no-repeat");const h=new DOMMatrix(u);l.setTransform(h)}else _(s,this._bbox),l=this._createGradient(s);return l}}function M(lt,s,r,u,v,l,x,y){const S=s.coords,p=s.colors,o=lt.data,h=lt.width*4;let n;S[r+1]>S[u+1]&&(n=r,r=u,u=n,n=l,l=x,x=n),S[u+1]>S[v+1]&&(n=u,u=v,v=n,n=x,x=y,y=n),S[r+1]>S[u+1]&&(n=r,r=u,u=n,n=l,l=x,x=n);const a=(S[r]+s.offsetX)*s.scaleX,f=(S[r+1]+s.offsetY)*s.scaleY,I=(S[u]+s.offsetX)*s.scaleX,w=(S[u+1]+s.offsetY)*s.scaleY,X=(S[v]+s.offsetX)*s.scaleX,Z=(S[v+1]+s.offsetY)*s.scaleY;if(f>=Z)return;const Y=p[l],st=p[l+1],g=p[l+2],R=p[x],J=p[x+1],k=p[x+2],b=p[y],G=p[y+1],K=p[y+2],ht=Math.round(f),gt=Math.round(Z);let xt,It,Xt,ie,ee,Ae,ve,Pe;for(let fe=ht;fe<=gt;fe++){if(fe<w){const rt=fe<f?0:(f-fe)/(f-w);xt=a-(a-I)*rt,It=Y-(Y-R)*rt,Xt=st-(st-J)*rt,ie=g-(g-k)*rt}else{let rt;fe>Z?rt=1:w===Z?rt=0:rt=(w-fe)/(w-Z),xt=I-(I-X)*rt,It=R-(R-b)*rt,Xt=J-(J-G)*rt,ie=k-(k-K)*rt}let Le;fe<f?Le=0:fe>Z?Le=1:Le=(f-fe)/(f-Z),ee=a-(a-X)*Le,Ae=Y-(Y-b)*Le,ve=st-(st-G)*Le,Pe=g-(g-K)*Le;const ae=Math.round(Math.min(xt,ee)),j=Math.round(Math.max(xt,ee));let P=h*fe+ae*4;for(let rt=ae;rt<=j;rt++)Le=(xt-rt)/(xt-ee),Le<0?Le=0:Le>1&&(Le=1),o[P++]=It-(It-Ae)*Le|0,o[P++]=Xt-(Xt-ve)*Le|0,o[P++]=ie-(ie-Pe)*Le|0,o[P++]=255}}function T(lt,s,r){const u=s.coords,v=s.colors;let l,x;switch(s.type){case"lattice":const y=s.verticesPerRow,S=Math.floor(u.length/y)-1,p=y-1;for(l=0;l<S;l++){let o=l*y;for(let h=0;h<p;h++,o++)M(lt,r,u[o],u[o+1],u[o+y],v[o],v[o+1],v[o+y]),M(lt,r,u[o+y+1],u[o+1],u[o+y],v[o+y+1],v[o+1],v[o+y])}break;case"triangles":for(l=0,x=u.length;l<x;l+=3)M(lt,r,u[l],u[l+1],u[l+2],v[l],v[l+1],v[l+2]);break;default:throw new Error("illegal figure")}}class tt extends it{constructor(s){super(),this._coords=s[2],this._colors=s[3],this._figures=s[4],this._bounds=s[5],this._bbox=s[7],this._background=s[8],this.matrix=null}_createMeshCanvas(s,r,u){const v=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),x=Math.ceil(this._bounds[2])-v,y=Math.ceil(this._bounds[3])-l,S=Math.min(Math.ceil(Math.abs(x*s[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(y*s[1]*1.1)),3e3),o=x/S,h=y/p,n={coords:this._coords,colors:this._colors,offsetX:-v,offsetY:-l,scaleX:1/o,scaleY:1/h},a=S+2*2,f=p+2*2,I=u.getCanvas("mesh",a,f,!1),w=I.context,X=w.createImageData(S,p);if(r){const Z=X.data;for(let Y=0,st=Z.length;Y<st;Y+=4)Z[Y]=r[0],Z[Y+1]=r[1],Z[Y+2]=r[2],Z[Y+3]=255}for(const Z of this._figures)T(X,Z,n);return w.putImageData(X,2,2),{canvas:I.canvas,offsetX:v-2*o,offsetY:l-2*h,scaleX:o,scaleY:h}}getPattern(s,r,u,v){_(s,this._bbox);let l;if(v===A.SHADING)l=e.Util.singularValueDecompose2dScale((0,E.getCurrentTransform)(s));else if(l=e.Util.singularValueDecompose2dScale(r.baseTransform),this.matrix){const y=e.Util.singularValueDecompose2dScale(this.matrix);l=[l[0]*y[0],l[1]*y[1]]}const x=this._createMeshCanvas(l,v===A.SHADING?null:this._background,r.cachedCanvases);return v!==A.SHADING&&(s.setTransform(...r.baseTransform),this.matrix&&s.transform(...this.matrix)),s.translate(x.offsetX,x.offsetY),s.scale(x.scaleX,x.scaleY),s.createPattern(x.canvas,"no-repeat")}}class z extends it{getPattern(){return"hotpink"}}function L(lt){switch(lt[0]){case"RadialAxial":return new H(lt);case"Mesh":return new tt(lt);case"Dummy":return new z}throw new Error(`Unknown IR type: ${lt[0]}`)}const q={COLORED:1,UNCOLORED:2},zt=class zt{constructor(s,r,u,v,l){this.operatorList=s[2],this.matrix=s[3]||[1,0,0,1,0,0],this.bbox=s[4],this.xstep=s[5],this.ystep=s[6],this.paintType=s[7],this.tilingType=s[8],this.color=r,this.ctx=u,this.canvasGraphicsFactory=v,this.baseTransform=l}createPatternCanvas(s){const r=this.operatorList,u=this.bbox,v=this.xstep,l=this.ystep,x=this.paintType,y=this.tilingType,S=this.color,p=this.canvasGraphicsFactory;(0,e.info)("TilingType: "+y);const o=u[0],h=u[1],n=u[2],a=u[3],f=e.Util.singularValueDecompose2dScale(this.matrix),I=e.Util.singularValueDecompose2dScale(this.baseTransform),w=[f[0]*I[0],f[1]*I[1]],X=this.getSizeAndScale(v,this.ctx.canvas.width,w[0]),Z=this.getSizeAndScale(l,this.ctx.canvas.height,w[1]),Y=s.cachedCanvases.getCanvas("pattern",X.size,Z.size,!0),st=Y.context,g=p.createCanvasGraphics(st);g.groupLevel=s.groupLevel,this.setFillAndStrokeStyleToContext(g,x,S);let R=o,J=h,k=n,b=a;return o<0&&(R=0,k+=Math.abs(o)),h<0&&(J=0,b+=Math.abs(h)),st.translate(-(X.scale*R),-(Z.scale*J)),g.transform(X.scale,0,0,Z.scale,0,0),st.save(),this.clipBbox(g,R,J,k,b),g.baseTransform=(0,E.getCurrentTransform)(g.ctx),g.executeOperatorList(r),g.endDrawing(),{canvas:Y.canvas,scaleX:X.scale,scaleY:Z.scale,offsetX:R,offsetY:J}}getSizeAndScale(s,r,u){s=Math.abs(s);const v=Math.max(zt.MAX_PATTERN_SIZE,r);let l=Math.ceil(s*u);return l>=v?l=v:u=l/s,{scale:u,size:l}}clipBbox(s,r,u,v,l){const x=v-r,y=l-u;s.ctx.rect(r,u,x,y),s.current.updateRectMinMax((0,E.getCurrentTransform)(s.ctx),[r,u,v,l]),s.clip(),s.endPath()}setFillAndStrokeStyleToContext(s,r,u){const v=s.ctx,l=s.current;switch(r){case q.COLORED:const x=this.ctx;v.fillStyle=x.fillStyle,v.strokeStyle=x.strokeStyle,l.fillColor=x.fillStyle,l.strokeColor=x.strokeStyle;break;case q.UNCOLORED:const y=e.Util.makeHexColor(u[0],u[1],u[2]);v.fillStyle=y,v.strokeStyle=y,l.fillColor=y,l.strokeColor=y;break;default:throw new e.FormatError(`Unsupported paint type: ${r}`)}}getPattern(s,r,u,v){let l=u;v!==A.SHADING&&(l=e.Util.transform(l,r.baseTransform),this.matrix&&(l=e.Util.transform(l,this.matrix)));const x=this.createPatternCanvas(r);let y=new DOMMatrix(l);y=y.translate(x.offsetX,x.offsetY),y=y.scale(1/x.scaleX,1/x.scaleY);const S=s.createPattern(x.canvas,"repeat");return S.setTransform(y),S}};be(zt,"MAX_PATTERN_SIZE",3e3);let W=zt;function et({src:lt,srcPos:s=0,dest:r,width:u,height:v,nonBlackColor:l=4294967295,inverseDecode:x=!1}){const y=e.FeatureTest.isLittleEndian?4278190080:255,[S,p]=x?[l,y]:[y,l],o=u>>3,h=u&7,n=lt.length;r=new Uint32Array(r.buffer);let a=0;for(let f=0;f<v;f++){for(const w=s+o;s<w;s++){const X=s<n?lt[s]:255;r[a++]=X&128?p:S,r[a++]=X&64?p:S,r[a++]=X&32?p:S,r[a++]=X&16?p:S,r[a++]=X&8?p:S,r[a++]=X&4?p:S,r[a++]=X&2?p:S,r[a++]=X&1?p:S}if(h===0)continue;const I=s<n?lt[s++]:255;for(let w=0;w<h;w++)r[a++]=I&1<<7-w?p:S}return{srcPos:s,destPos:a}}const ut=16,nt=100,O=4096,V=15,$=10,B=1e3,Q=16;function ot(lt,s){if(lt._removeMirroring)throw new Error("Context is already forwarding operations.");lt.__originalSave=lt.save,lt.__originalRestore=lt.restore,lt.__originalRotate=lt.rotate,lt.__originalScale=lt.scale,lt.__originalTranslate=lt.translate,lt.__originalTransform=lt.transform,lt.__originalSetTransform=lt.setTransform,lt.__originalResetTransform=lt.resetTransform,lt.__originalClip=lt.clip,lt.__originalMoveTo=lt.moveTo,lt.__originalLineTo=lt.lineTo,lt.__originalBezierCurveTo=lt.bezierCurveTo,lt.__originalRect=lt.rect,lt.__originalClosePath=lt.closePath,lt.__originalBeginPath=lt.beginPath,lt._removeMirroring=()=>{lt.save=lt.__originalSave,lt.restore=lt.__originalRestore,lt.rotate=lt.__originalRotate,lt.scale=lt.__originalScale,lt.translate=lt.__originalTranslate,lt.transform=lt.__originalTransform,lt.setTransform=lt.__originalSetTransform,lt.resetTransform=lt.__originalResetTransform,lt.clip=lt.__originalClip,lt.moveTo=lt.__originalMoveTo,lt.lineTo=lt.__originalLineTo,lt.bezierCurveTo=lt.__originalBezierCurveTo,lt.rect=lt.__originalRect,lt.closePath=lt.__originalClosePath,lt.beginPath=lt.__originalBeginPath,delete lt._removeMirroring},lt.save=function(){s.save(),this.__originalSave()},lt.restore=function(){s.restore(),this.__originalRestore()},lt.translate=function(r,u){s.translate(r,u),this.__originalTranslate(r,u)},lt.scale=function(r,u){s.scale(r,u),this.__originalScale(r,u)},lt.transform=function(r,u,v,l,x,y){s.transform(r,u,v,l,x,y),this.__originalTransform(r,u,v,l,x,y)},lt.setTransform=function(r,u,v,l,x,y){s.setTransform(r,u,v,l,x,y),this.__originalSetTransform(r,u,v,l,x,y)},lt.resetTransform=function(){s.resetTransform(),this.__originalResetTransform()},lt.rotate=function(r){s.rotate(r),this.__originalRotate(r)},lt.clip=function(r){s.clip(r),this.__originalClip(r)},lt.moveTo=function(r,u){s.moveTo(r,u),this.__originalMoveTo(r,u)},lt.lineTo=function(r,u){s.lineTo(r,u),this.__originalLineTo(r,u)},lt.bezierCurveTo=function(r,u,v,l,x,y){s.bezierCurveTo(r,u,v,l,x,y),this.__originalBezierCurveTo(r,u,v,l,x,y)},lt.rect=function(r,u,v,l){s.rect(r,u,v,l),this.__originalRect(r,u,v,l)},lt.closePath=function(){s.closePath(),this.__originalClosePath()},lt.beginPath=function(){s.beginPath(),this.__originalBeginPath()}}class At{constructor(s){this.canvasFactory=s,this.cache=Object.create(null)}getCanvas(s,r,u){let v;return this.cache[s]!==void 0?(v=this.cache[s],this.canvasFactory.reset(v,r,u)):(v=this.canvasFactory.create(r,u),this.cache[s]=v),v}delete(s){delete this.cache[s]}clear(){for(const s in this.cache){const r=this.cache[s];this.canvasFactory.destroy(r),delete this.cache[s]}}}function Dt(lt,s,r,u,v,l,x,y,S,p){const[o,h,n,a,f,I]=(0,E.getCurrentTransform)(lt);if(h===0&&n===0){const Z=x*o+f,Y=Math.round(Z),st=y*a+I,g=Math.round(st),R=(x+S)*o+f,J=Math.abs(Math.round(R)-Y)||1,k=(y+p)*a+I,b=Math.abs(Math.round(k)-g)||1;return lt.setTransform(Math.sign(o),0,0,Math.sign(a),Y,g),lt.drawImage(s,r,u,v,l,0,0,J,b),lt.setTransform(o,h,n,a,f,I),[J,b]}if(o===0&&a===0){const Z=y*n+f,Y=Math.round(Z),st=x*h+I,g=Math.round(st),R=(y+p)*n+f,J=Math.abs(Math.round(R)-Y)||1,k=(x+S)*h+I,b=Math.abs(Math.round(k)-g)||1;return lt.setTransform(0,Math.sign(h),Math.sign(n),0,Y,g),lt.drawImage(s,r,u,v,l,0,0,b,J),lt.setTransform(o,h,n,a,f,I),[b,J]}lt.drawImage(s,r,u,v,l,x,y,S,p);const w=Math.hypot(o,h),X=Math.hypot(n,a);return[w*S,X*p]}function St(lt){const{width:s,height:r}=lt;if(s>B||r>B)return null;const u=1e3,v=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),l=s+1;let x=new Uint8Array(l*(r+1)),y,S,p;const o=s+7&-8;let h=new Uint8Array(o*r),n=0;for(const w of lt.data){let X=128;for(;X>0;)h[n++]=w&X?0:255,X>>=1}let a=0;for(n=0,h[n]!==0&&(x[0]=1,++a),S=1;S<s;S++)h[n]!==h[n+1]&&(x[S]=h[n]?2:1,++a),n++;for(h[n]!==0&&(x[S]=2,++a),y=1;y<r;y++){n=y*o,p=y*l,h[n-o]!==h[n]&&(x[p]=h[n]?1:8,++a);let w=(h[n]?4:0)+(h[n-o]?8:0);for(S=1;S<s;S++)w=(w>>2)+(h[n+1]?4:0)+(h[n-o+1]?8:0),v[w]&&(x[p+S]=v[w],++a),n++;if(h[n-o]!==h[n]&&(x[p+S]=h[n]?2:4,++a),a>u)return null}for(n=o*(r-1),p=y*l,h[n]!==0&&(x[p]=8,++a),S=1;S<s;S++)h[n]!==h[n+1]&&(x[p+S]=h[n]?4:8,++a),n++;if(h[n]!==0&&(x[p+S]=4,++a),a>u)return null;const f=new Int32Array([0,l,-1,0,-l,0,0,0,1]),I=new Path2D;for(y=0;a&&y<=r;y++){let w=y*l;const X=w+s;for(;w<X&&!x[w];)w++;if(w===X)continue;I.moveTo(w%l,y);const Z=w;let Y=x[w];do{const st=f[Y];do w+=st;while(!x[w]);const g=x[w];g!==5&&g!==10?(Y=g,x[w]=0):(Y=g&51*Y>>4,x[w]&=Y>>2|Y<<2),I.lineTo(w%l,w/l|0),x[w]||--a}while(Z!==w);--y}return h=null,x=null,function(w){w.save(),w.scale(1/s,-1/r),w.translate(0,-r),w.fill(I),w.beginPath(),w.restore()}}class Ot{constructor(s,r){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=e.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=e.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=e.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,s,r])}clone(){const s=Object.create(this);return s.clipBox=this.clipBox.slice(),s}setCurrentPoint(s,r){this.x=s,this.y=r}updatePathMinMax(s,r,u){[r,u]=e.Util.applyTransform([r,u],s),this.minX=Math.min(this.minX,r),this.minY=Math.min(this.minY,u),this.maxX=Math.max(this.maxX,r),this.maxY=Math.max(this.maxY,u)}updateRectMinMax(s,r){const u=e.Util.applyTransform(r,s),v=e.Util.applyTransform(r.slice(2),s),l=e.Util.applyTransform([r[0],r[3]],s),x=e.Util.applyTransform([r[2],r[1]],s);this.minX=Math.min(this.minX,u[0],v[0],l[0],x[0]),this.minY=Math.min(this.minY,u[1],v[1],l[1],x[1]),this.maxX=Math.max(this.maxX,u[0],v[0],l[0],x[0]),this.maxY=Math.max(this.maxY,u[1],v[1],l[1],x[1])}updateScalingPathMinMax(s,r){e.Util.scaleMinMax(s,r),this.minX=Math.min(this.minX,r[0]),this.minY=Math.min(this.minY,r[1]),this.maxX=Math.max(this.maxX,r[2]),this.maxY=Math.max(this.maxY,r[3])}updateCurvePathMinMax(s,r,u,v,l,x,y,S,p,o){const h=e.Util.bezierBoundingBox(r,u,v,l,x,y,S,p,o);o||this.updateRectMinMax(s,h)}getPathBoundingBox(s=A.FILL,r=null){const u=[this.minX,this.minY,this.maxX,this.maxY];if(s===A.STROKE){r||(0,e.unreachable)("Stroke bounding box must include transform.");const v=e.Util.singularValueDecompose2dScale(r),l=v[0]*this.lineWidth/2,x=v[1]*this.lineWidth/2;u[0]-=l,u[1]-=x,u[2]+=l,u[3]+=x}return u}updateClipFromPath(){const s=e.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(s||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(s){this.clipBox=s,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(s=A.FILL,r=null){return e.Util.intersect(this.clipBox,this.getPathBoundingBox(s,r))}}function wt(lt,s){if(typeof ImageData<"u"&&s instanceof ImageData){lt.putImageData(s,0,0);return}const r=s.height,u=s.width,v=r%Q,l=(r-v)/Q,x=v===0?l:l+1,y=lt.createImageData(u,Q);let S=0,p;const o=s.data,h=y.data;let n,a,f,I;if(s.kind===e.ImageKind.GRAYSCALE_1BPP){const w=o.byteLength,X=new Uint32Array(h.buffer,0,h.byteLength>>2),Z=X.length,Y=u+7>>3,st=4294967295,g=e.FeatureTest.isLittleEndian?4278190080:255;for(n=0;n<x;n++){for(f=n<l?Q:v,p=0,a=0;a<f;a++){const R=w-S;let J=0;const k=R>Y?u:R*8-7,b=k&-8;let G=0,K=0;for(;J<b;J+=8)K=o[S++],X[p++]=K&128?st:g,X[p++]=K&64?st:g,X[p++]=K&32?st:g,X[p++]=K&16?st:g,X[p++]=K&8?st:g,X[p++]=K&4?st:g,X[p++]=K&2?st:g,X[p++]=K&1?st:g;for(;J<k;J++)G===0&&(K=o[S++],G=128),X[p++]=K&G?st:g,G>>=1}for(;p<Z;)X[p++]=0;lt.putImageData(y,0,n*Q)}}else if(s.kind===e.ImageKind.RGBA_32BPP){for(a=0,I=u*Q*4,n=0;n<l;n++)h.set(o.subarray(S,S+I)),S+=I,lt.putImageData(y,0,a),a+=Q;n<x&&(I=u*v*4,h.set(o.subarray(S,S+I)),lt.putImageData(y,0,a))}else if(s.kind===e.ImageKind.RGB_24BPP)for(f=Q,I=u*f,n=0;n<x;n++){for(n>=l&&(f=v,I=u*f),p=0,a=I;a--;)h[p++]=o[S++],h[p++]=o[S++],h[p++]=o[S++],h[p++]=255;lt.putImageData(y,0,n*Q)}else throw new Error(`bad image kind: ${s.kind}`)}function Ct(lt,s){if(s.bitmap){lt.drawImage(s.bitmap,0,0);return}const r=s.height,u=s.width,v=r%Q,l=(r-v)/Q,x=v===0?l:l+1,y=lt.createImageData(u,Q);let S=0;const p=s.data,o=y.data;for(let h=0;h<x;h++){const n=h<l?Q:v;({srcPos:S}=et({src:p,srcPos:S,dest:o,width:u,height:n,nonBlackColor:0})),lt.putImageData(y,0,h*Q)}}function Lt(lt,s){const r=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const u of r)lt[u]!==void 0&&(s[u]=lt[u]);lt.setLineDash!==void 0&&(s.setLineDash(lt.getLineDash()),s.lineDashOffset=lt.lineDashOffset)}function Tt(lt){if(lt.strokeStyle=lt.fillStyle="#000000",lt.fillRule="nonzero",lt.globalAlpha=1,lt.lineWidth=1,lt.lineCap="butt",lt.lineJoin="miter",lt.miterLimit=10,lt.globalCompositeOperation="source-over",lt.font="10px sans-serif",lt.setLineDash!==void 0&&(lt.setLineDash([]),lt.lineDashOffset=0),!e.isNodeJS){const{filter:s}=lt;s!=="none"&&s!==""&&(lt.filter="none")}}function at(lt,s,r,u){const v=lt.length;for(let l=3;l<v;l+=4){const x=lt[l];if(x===0)lt[l-3]=s,lt[l-2]=r,lt[l-1]=u;else if(x<255){const y=255-x;lt[l-3]=lt[l-3]*x+s*y>>8,lt[l-2]=lt[l-2]*x+r*y>>8,lt[l-1]=lt[l-1]*x+u*y>>8}}}function bt(lt,s,r){const u=lt.length,v=1/255;for(let l=3;l<u;l+=4){const x=r?r[lt[l]]:lt[l];s[l]=s[l]*x*v|0}}function Pt(lt,s,r){const u=lt.length;for(let v=3;v<u;v+=4){const l=lt[v-3]*77+lt[v-2]*152+lt[v-1]*28;s[v]=r?s[v]*r[l>>8]>>8:s[v]*l>>16}}function Rt(lt,s,r,u,v,l,x,y,S,p,o){const h=!!l,n=h?l[0]:0,a=h?l[1]:0,f=h?l[2]:0,I=v==="Luminosity"?Pt:bt,w=Math.min(u,Math.ceil(1048576/r));for(let X=0;X<u;X+=w){const Z=Math.min(w,u-X),Y=lt.getImageData(y-p,X+(S-o),r,Z),st=s.getImageData(y,X+S,r,Z);h&&at(Y.data,n,a,f),I(Y.data,st.data,x),s.putImageData(st,y,X+S)}}function Ut(lt,s,r,u){const v=u[0],l=u[1],x=u[2]-v,y=u[3]-l;x===0||y===0||(Rt(s.context,r,x,y,s.subtype,s.backdrop,s.transferMap,v,l,s.offsetX,s.offsetY),lt.save(),lt.globalAlpha=1,lt.globalCompositeOperation="source-over",lt.setTransform(1,0,0,1,0,0),lt.drawImage(r.canvas,0,0),lt.restore())}function Yt(lt,s){const r=e.Util.singularValueDecompose2dScale(lt);r[0]=Math.fround(r[0]),r[1]=Math.fround(r[1]);const u=Math.fround((globalThis.devicePixelRatio||1)*E.PixelsPerInch.PDF_TO_CSS_UNITS);return s!==void 0?s:r[0]<=u||r[1]<=u}const re=["butt","round","square"],_e=["miter","round","bevel"],ce={},he={},ne=class ne{constructor(s,r,u,v,l,{optionalContentConfig:x,markedContentStack:y=null},S,p){c(this,oe);c(this,se);this.ctx=s,this.current=new Ot(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=r,this.objs=u,this.canvasFactory=v,this.filterFactory=l,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=y||[],this.optionalContentConfig=x,this.cachedCanvases=new At(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=S,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(s,r=null){return typeof s=="string"?s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s):r}beginDrawing({transform:s,viewport:r,transparency:u=!1,background:v=null}){const l=this.ctx.canvas.width,x=this.ctx.canvas.height,y=this.ctx.fillStyle;if(this.ctx.fillStyle=v||"#ffffff",this.ctx.fillRect(0,0,l,x),this.ctx.fillStyle=y,u){const S=this.cachedCanvases.getCanvas("transparent",l,x);this.compositeCtx=this.ctx,this.transparentCanvas=S.canvas,this.ctx=S.context,this.ctx.save(),this.ctx.transform(...(0,E.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),Tt(this.ctx),s&&(this.ctx.transform(...s),this.outputScaleX=s[0],this.outputScaleY=s[0]),this.ctx.transform(...r.transform),this.viewportScale=r.scale,this.baseTransform=(0,E.getCurrentTransform)(this.ctx)}executeOperatorList(s,r,u,v){const l=s.argsArray,x=s.fnArray;let y=r||0;const S=l.length;if(S===y)return y;const p=S-y>$&&typeof u=="function",o=p?Date.now()+V:0;let h=0;const n=this.commonObjs,a=this.objs;let f;for(;;){if(v!==void 0&&y===v.nextBreakPoint)return v.breakIt(y,u),y;if(f=x[y],f!==e.OPS.dependency)this[f].apply(this,l[y]);else for(const I of l[y]){const w=I.startsWith("g_")?n:a;if(!w.has(I))return w.get(I,u),y}if(y++,y===S)return y;if(p&&++h>$){if(Date.now()>o)return u(),y;h=0}}}endDrawing(){F(this,oe,Ln).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const s of this._cachedBitmapsMap.values()){for(const r of s.values())typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&(r.width=r.height=0);s.clear()}this._cachedBitmapsMap.clear(),F(this,se,Pn).call(this)}_scaleImage(s,r){const u=s.width,v=s.height;let l=Math.max(Math.hypot(r[0],r[1]),1),x=Math.max(Math.hypot(r[2],r[3]),1),y=u,S=v,p="prescale1",o,h;for(;l>2&&y>1||x>2&&S>1;){let n=y,a=S;l>2&&y>1&&(n=y>=16384?Math.floor(y/2)-1||1:Math.ceil(y/2),l/=y/n),x>2&&S>1&&(a=S>=16384?Math.floor(S/2)-1||1:Math.ceil(S)/2,x/=S/a),o=this.cachedCanvases.getCanvas(p,n,a),h=o.context,h.clearRect(0,0,n,a),h.drawImage(s,0,0,y,S,0,0,n,a),s=o.canvas,y=n,S=a,p=p==="prescale1"?"prescale2":"prescale1"}return{img:s,paintWidth:y,paintHeight:S}}_createMaskCanvas(s){const r=this.ctx,{width:u,height:v}=s,l=this.current.fillColor,x=this.current.patternFill,y=(0,E.getCurrentTransform)(r);let S,p,o,h;if((s.bitmap||s.data)&&s.count>1){const k=s.bitmap||s.data.buffer;p=JSON.stringify(x?y:[y.slice(0,4),l]),S=this._cachedBitmapsMap.get(k),S||(S=new Map,this._cachedBitmapsMap.set(k,S));const b=S.get(p);if(b&&!x){const G=Math.round(Math.min(y[0],y[2])+y[4]),K=Math.round(Math.min(y[1],y[3])+y[5]);return{canvas:b,offsetX:G,offsetY:K}}o=b}o||(h=this.cachedCanvases.getCanvas("maskCanvas",u,v),Ct(h.context,s));let n=e.Util.transform(y,[1/u,0,0,-1/v,0,0]);n=e.Util.transform(n,[1,0,0,1,0,-v]);const[a,f,I,w]=e.Util.getAxialAlignedBoundingBox([0,0,u,v],n),X=Math.round(I-a)||1,Z=Math.round(w-f)||1,Y=this.cachedCanvases.getCanvas("fillCanvas",X,Z),st=Y.context,g=a,R=f;st.translate(-g,-R),st.transform(...n),o||(o=this._scaleImage(h.canvas,(0,E.getCurrentTransformInverse)(st)),o=o.img,S&&x&&S.set(p,o)),st.imageSmoothingEnabled=Yt((0,E.getCurrentTransform)(st),s.interpolate),Dt(st,o,0,0,o.width,o.height,0,0,u,v),st.globalCompositeOperation="source-in";const J=e.Util.transform((0,E.getCurrentTransformInverse)(st),[1,0,0,1,-g,-R]);return st.fillStyle=x?l.getPattern(r,this,J,A.FILL):l,st.fillRect(0,0,u,v),S&&!x&&(this.cachedCanvases.delete("fillCanvas"),S.set(p,Y.canvas)),{canvas:Y.canvas,offsetX:Math.round(g),offsetY:Math.round(R)}}setLineWidth(s){s!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=s,this.ctx.lineWidth=s}setLineCap(s){this.ctx.lineCap=re[s]}setLineJoin(s){this.ctx.lineJoin=_e[s]}setMiterLimit(s){this.ctx.miterLimit=s}setDash(s,r){const u=this.ctx;u.setLineDash!==void 0&&(u.setLineDash(s),u.lineDashOffset=r)}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(const[r,u]of s)switch(r){case"LW":this.setLineWidth(u);break;case"LC":this.setLineCap(u);break;case"LJ":this.setLineJoin(u);break;case"ML":this.setMiterLimit(u);break;case"D":this.setDash(u[0],u[1]);break;case"RI":this.setRenderingIntent(u);break;case"FL":this.setFlatness(u);break;case"Font":this.setFont(u[0],u[1]);break;case"CA":this.current.strokeAlpha=u;break;case"ca":this.current.fillAlpha=u,this.ctx.globalAlpha=u;break;case"BM":this.ctx.globalCompositeOperation=u;break;case"SMask":this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const s=this.inSMaskMode;this.current.activeSMask&&!s?this.beginSMaskMode():!this.current.activeSMask&&s&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const s=this.ctx.canvas.width,r=this.ctx.canvas.height,u="smaskGroupAt"+this.groupLevel,v=this.cachedCanvases.getCanvas(u,s,r);this.suspendedCtx=this.ctx,this.ctx=v.context;const l=this.ctx;l.setTransform(...(0,E.getCurrentTransform)(this.suspendedCtx)),Lt(this.suspendedCtx,l),ot(l,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Lt(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(s){if(!this.current.activeSMask)return;s?(s[0]=Math.floor(s[0]),s[1]=Math.floor(s[1]),s[2]=Math.ceil(s[2]),s[3]=Math.ceil(s[3])):s=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const r=this.current.activeSMask,u=this.suspendedCtx;Ut(u,r,this.ctx,s),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(Lt(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const s=this.current;this.stateStack.push(s),this.current=s.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Lt(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(s,r,u,v,l,x){this.ctx.transform(s,r,u,v,l,x),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(s,r,u){const v=this.ctx,l=this.current;let x=l.x,y=l.y,S,p;const o=(0,E.getCurrentTransform)(v),h=o[0]===0&&o[3]===0||o[1]===0&&o[2]===0,n=h?u.slice(0):null;for(let a=0,f=0,I=s.length;a<I;a++)switch(s[a]|0){case e.OPS.rectangle:x=r[f++],y=r[f++];const w=r[f++],X=r[f++],Z=x+w,Y=y+X;v.moveTo(x,y),w===0||X===0?v.lineTo(Z,Y):(v.lineTo(Z,y),v.lineTo(Z,Y),v.lineTo(x,Y)),h||l.updateRectMinMax(o,[x,y,Z,Y]),v.closePath();break;case e.OPS.moveTo:x=r[f++],y=r[f++],v.moveTo(x,y),h||l.updatePathMinMax(o,x,y);break;case e.OPS.lineTo:x=r[f++],y=r[f++],v.lineTo(x,y),h||l.updatePathMinMax(o,x,y);break;case e.OPS.curveTo:S=x,p=y,x=r[f+4],y=r[f+5],v.bezierCurveTo(r[f],r[f+1],r[f+2],r[f+3],x,y),l.updateCurvePathMinMax(o,S,p,r[f],r[f+1],r[f+2],r[f+3],x,y,n),f+=6;break;case e.OPS.curveTo2:S=x,p=y,v.bezierCurveTo(x,y,r[f],r[f+1],r[f+2],r[f+3]),l.updateCurvePathMinMax(o,S,p,x,y,r[f],r[f+1],r[f+2],r[f+3],n),x=r[f+2],y=r[f+3],f+=4;break;case e.OPS.curveTo3:S=x,p=y,x=r[f+2],y=r[f+3],v.bezierCurveTo(r[f],r[f+1],x,y,x,y),l.updateCurvePathMinMax(o,S,p,r[f],r[f+1],x,y,x,y,n),f+=4;break;case e.OPS.closePath:v.closePath();break}h&&l.updateScalingPathMinMax(o,n),l.setCurrentPoint(x,y)}closePath(){this.ctx.closePath()}stroke(s=!0){const r=this.ctx,u=this.current.strokeColor;r.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof u=="object"&&(u!=null&&u.getPattern)?(r.save(),r.strokeStyle=u.getPattern(r,this,(0,E.getCurrentTransformInverse)(r),A.STROKE),this.rescaleAndStroke(!1),r.restore()):this.rescaleAndStroke(!0)),s&&this.consumePath(this.current.getClippedPathBoundingBox()),r.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(s=!0){const r=this.ctx,u=this.current.fillColor,v=this.current.patternFill;let l=!1;v&&(r.save(),r.fillStyle=u.getPattern(r,this,(0,E.getCurrentTransformInverse)(r),A.FILL),l=!0);const x=this.current.getClippedPathBoundingBox();this.contentVisible&&x!==null&&(this.pendingEOFill?(r.fill("evenodd"),this.pendingEOFill=!1):r.fill()),l&&r.restore(),s&&this.consumePath(x)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ce}eoClip(){this.pendingClip=he}beginText(){this.current.textMatrix=e.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const s=this.pendingTextPaths,r=this.ctx;if(s===void 0){r.beginPath();return}r.save(),r.beginPath();for(const u of s)r.setTransform(...u.transform),r.translate(u.x,u.y),u.addToPath(r,u.fontSize);r.restore(),r.clip(),r.beginPath(),delete this.pendingTextPaths}setCharSpacing(s){this.current.charSpacing=s}setWordSpacing(s){this.current.wordSpacing=s}setHScale(s){this.current.textHScale=s/100}setLeading(s){this.current.leading=-s}setFont(s,r){var o;const u=this.commonObjs.get(s),v=this.current;if(!u)throw new Error(`Can't find font for ${s}`);if(v.fontMatrix=u.fontMatrix||e.FONT_IDENTITY_MATRIX,(v.fontMatrix[0]===0||v.fontMatrix[3]===0)&&(0,e.warn)("Invalid font matrix for font "+s),r<0?(r=-r,v.fontDirection=-1):v.fontDirection=1,this.current.font=u,this.current.fontSize=r,u.isType3Font)return;const l=u.loadedName||"sans-serif",x=((o=u.systemFontInfo)==null?void 0:o.css)||`"${l}", ${u.fallbackName}`;let y="normal";u.black?y="900":u.bold&&(y="bold");const S=u.italic?"italic":"normal";let p=r;r<ut?p=ut:r>nt&&(p=nt),this.current.fontSizeScale=r/p,this.ctx.font=`${S} ${y} ${p}px ${x}`}setTextRenderingMode(s){this.current.textRenderingMode=s}setTextRise(s){this.current.textRise=s}moveText(s,r){this.current.x=this.current.lineX+=s,this.current.y=this.current.lineY+=r}setLeadingMoveText(s,r){this.setLeading(-r),this.moveText(s,r)}setTextMatrix(s,r,u,v,l,x){this.current.textMatrix=[s,r,u,v,l,x],this.current.textMatrixScale=Math.hypot(s,r),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(s,r,u,v){const l=this.ctx,x=this.current,y=x.font,S=x.textRenderingMode,p=x.fontSize/x.fontSizeScale,o=S&e.TextRenderingMode.FILL_STROKE_MASK,h=!!(S&e.TextRenderingMode.ADD_TO_PATH_FLAG),n=x.patternFill&&!y.missingFile;let a;(y.disableFontFace||h||n)&&(a=y.getPathGenerator(this.commonObjs,s)),y.disableFontFace||n?(l.save(),l.translate(r,u),l.beginPath(),a(l,p),v&&l.setTransform(...v),(o===e.TextRenderingMode.FILL||o===e.TextRenderingMode.FILL_STROKE)&&l.fill(),(o===e.TextRenderingMode.STROKE||o===e.TextRenderingMode.FILL_STROKE)&&l.stroke(),l.restore()):((o===e.TextRenderingMode.FILL||o===e.TextRenderingMode.FILL_STROKE)&&l.fillText(s,r,u),(o===e.TextRenderingMode.STROKE||o===e.TextRenderingMode.FILL_STROKE)&&l.strokeText(s,r,u)),h&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,E.getCurrentTransform)(l),x:r,y:u,fontSize:p,addToPath:a})}get isFontSubpixelAAEnabled(){const{context:s}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);s.scale(1.5,1),s.fillText("I",0,10);const r=s.getImageData(0,0,10,10).data;let u=!1;for(let v=3;v<r.length;v+=4)if(r[v]>0&&r[v]<255){u=!0;break}return(0,e.shadow)(this,"isFontSubpixelAAEnabled",u)}showText(s){const r=this.current,u=r.font;if(u.isType3Font)return this.showType3Text(s);const v=r.fontSize;if(v===0)return;const l=this.ctx,x=r.fontSizeScale,y=r.charSpacing,S=r.wordSpacing,p=r.fontDirection,o=r.textHScale*p,h=s.length,n=u.vertical,a=n?1:-1,f=u.defaultVMetrics,I=v*r.fontMatrix[0],w=r.textRenderingMode===e.TextRenderingMode.FILL&&!u.disableFontFace&&!r.patternFill;l.save(),l.transform(...r.textMatrix),l.translate(r.x,r.y+r.textRise),p>0?l.scale(o,-1):l.scale(o,1);let X;if(r.patternFill){l.save();const R=r.fillColor.getPattern(l,this,(0,E.getCurrentTransformInverse)(l),A.FILL);X=(0,E.getCurrentTransform)(l),l.restore(),l.fillStyle=R}let Z=r.lineWidth;const Y=r.textMatrixScale;if(Y===0||Z===0){const R=r.textRenderingMode&e.TextRenderingMode.FILL_STROKE_MASK;(R===e.TextRenderingMode.STROKE||R===e.TextRenderingMode.FILL_STROKE)&&(Z=this.getSinglePixelWidth())}else Z/=Y;if(x!==1&&(l.scale(x,x),Z/=x),l.lineWidth=Z,u.isInvalidPDFjsFont){const R=[];let J=0;for(const k of s)R.push(k.unicode),J+=k.width;l.fillText(R.join(""),0,0),r.x+=J*I*o,l.restore(),this.compose();return}let st=0,g;for(g=0;g<h;++g){const R=s[g];if(typeof R=="number"){st+=a*R*v/1e3;continue}let J=!1;const k=(R.isSpace?S:0)+y,b=R.fontChar,G=R.accent;let K,ht,gt=R.width;if(n){const It=R.vmetric||f,Xt=-(R.vmetric?It[1]:gt*.5)*I,ie=It[2]*I;gt=It?-It[0]:gt,K=Xt/x,ht=(st+ie)/x}else K=st/x,ht=0;if(u.remeasure&&gt>0){const It=l.measureText(b).width*1e3/v*x;if(gt<It&&this.isFontSubpixelAAEnabled){const Xt=gt/It;J=!0,l.save(),l.scale(Xt,1),K/=Xt}else gt!==It&&(K+=(gt-It)/2e3*v/x)}if(this.contentVisible&&(R.isInFont||u.missingFile)){if(w&&!G)l.fillText(b,K,ht);else if(this.paintChar(b,K,ht,X),G){const It=K+v*G.offset.x/x,Xt=ht-v*G.offset.y/x;this.paintChar(G.fontChar,It,Xt,X)}}const xt=n?gt*I-k*p:gt*I+k*p;st+=xt,J&&l.restore()}n?r.y-=st:r.x+=st*o,l.restore(),this.compose()}showType3Text(s){const r=this.ctx,u=this.current,v=u.font,l=u.fontSize,x=u.fontDirection,y=v.vertical?1:-1,S=u.charSpacing,p=u.wordSpacing,o=u.textHScale*x,h=u.fontMatrix||e.FONT_IDENTITY_MATRIX,n=s.length,a=u.textRenderingMode===e.TextRenderingMode.INVISIBLE;let f,I,w,X;if(!(a||l===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),r.transform(...u.textMatrix),r.translate(u.x,u.y),r.scale(o,x),f=0;f<n;++f){if(I=s[f],typeof I=="number"){X=y*I*l/1e3,this.ctx.translate(X,0),u.x+=X*o;continue}const Z=(I.isSpace?p:0)+S,Y=v.charProcOperatorList[I.operatorListId];if(!Y){(0,e.warn)(`Type3 character "${I.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=I,this.save(),r.scale(l,l),r.transform(...h),this.executeOperatorList(Y),this.restore()),w=e.Util.applyTransform([I.width,0],h)[0]*l+Z,r.translate(w,0),u.x+=w*o}r.restore(),this.processingType3=null}}setCharWidth(s,r){}setCharWidthAndBounds(s,r,u,v,l,x){this.ctx.rect(u,v,l-u,x-v),this.ctx.clip(),this.endPath()}getColorN_Pattern(s){let r;if(s[0]==="TilingPattern"){const u=s[1],v=this.baseTransform||(0,E.getCurrentTransform)(this.ctx),l={createCanvasGraphics:x=>new ne(x,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};r=new W(s,u,this.ctx,l,v)}else r=this._getPattern(s[1],s[2]);return r}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(s,r,u){const v=e.Util.makeHexColor(s,r,u);this.ctx.strokeStyle=v,this.current.strokeColor=v}setFillRGBColor(s,r,u){const v=e.Util.makeHexColor(s,r,u);this.ctx.fillStyle=v,this.current.fillColor=v,this.current.patternFill=!1}_getPattern(s,r=null){let u;return this.cachedPatterns.has(s)?u=this.cachedPatterns.get(s):(u=L(this.getObject(s)),this.cachedPatterns.set(s,u)),r&&(u.matrix=r),u}shadingFill(s){if(!this.contentVisible)return;const r=this.ctx;this.save();const u=this._getPattern(s);r.fillStyle=u.getPattern(r,this,(0,E.getCurrentTransformInverse)(r),A.SHADING);const v=(0,E.getCurrentTransformInverse)(r);if(v){const{width:l,height:x}=r.canvas,[y,S,p,o]=e.Util.getAxialAlignedBoundingBox([0,0,l,x],v);this.ctx.fillRect(y,S,p-y,o-S)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,e.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,e.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(s,r){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(s)&&s.length===6&&this.transform(...s),this.baseTransform=(0,E.getCurrentTransform)(this.ctx),r)){const u=r[2]-r[0],v=r[3]-r[1];this.ctx.rect(r[0],r[1],u,v),this.current.updateRectMinMax((0,E.getCurrentTransform)(this.ctx),r),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(s){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;s.isolated||(0,e.info)("TODO: Support non-isolated groups."),s.knockout&&(0,e.warn)("Knockout groups not supported.");const u=(0,E.getCurrentTransform)(r);if(s.matrix&&r.transform(...s.matrix),!s.bbox)throw new Error("Bounding box is required.");let v=e.Util.getAxialAlignedBoundingBox(s.bbox,(0,E.getCurrentTransform)(r));const l=[0,0,r.canvas.width,r.canvas.height];v=e.Util.intersect(v,l)||[0,0,0,0];const x=Math.floor(v[0]),y=Math.floor(v[1]);let S=Math.max(Math.ceil(v[2])-x,1),p=Math.max(Math.ceil(v[3])-y,1),o=1,h=1;S>O&&(o=S/O,S=O),p>O&&(h=p/O,p=O),this.current.startNewPathAndClipBox([0,0,S,p]);let n="groupAt"+this.groupLevel;s.smask&&(n+="_smask_"+this.smaskCounter++%2);const a=this.cachedCanvases.getCanvas(n,S,p),f=a.context;f.scale(1/o,1/h),f.translate(-x,-y),f.transform(...u),s.smask?this.smaskStack.push({canvas:a.canvas,context:f,offsetX:x,offsetY:y,scaleX:o,scaleY:h,subtype:s.smask.subtype,backdrop:s.smask.backdrop,transferMap:s.smask.transferMap||null,startTransformInverse:null}):(r.setTransform(1,0,0,1,0,0),r.translate(x,y),r.scale(o,h),r.save()),Lt(r,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(s){if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,u=this.groupStack.pop();if(this.ctx=u,this.ctx.imageSmoothingEnabled=!1,s.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const v=(0,E.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...v);const l=e.Util.getAxialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],v);this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(s,r,u,v,l){if(F(this,oe,Ln).call(this),Tt(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(r)&&r.length===4){const x=r[2]-r[0],y=r[3]-r[1];if(l&&this.annotationCanvasMap){u=u.slice(),u[4]-=r[0],u[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=x,r[3]=y;const[S,p]=e.Util.singularValueDecompose2dScale((0,E.getCurrentTransform)(this.ctx)),{viewportScale:o}=this,h=Math.ceil(x*this.outputScaleX*o),n=Math.ceil(y*this.outputScaleY*o);this.annotationCanvas=this.canvasFactory.create(h,n);const{canvas:a,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(s,a),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(S,0,0,-p,0,y*p),Tt(this.ctx)}else Tt(this.ctx),this.ctx.rect(r[0],r[1],x,y),this.ctx.clip(),this.endPath()}this.current=new Ot(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...u),this.transform(...v)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),F(this,se,Pn).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(s){if(!this.contentVisible)return;const r=s.count;s=this.getObject(s.data,s),s.count=r;const u=this.ctx,v=this.processingType3;if(v&&(v.compiled===void 0&&(v.compiled=St(s)),v.compiled)){v.compiled(u);return}const l=this._createMaskCanvas(s),x=l.canvas;u.save(),u.setTransform(1,0,0,1,0,0),u.drawImage(x,l.offsetX,l.offsetY),u.restore(),this.compose()}paintImageMaskXObjectRepeat(s,r,u=0,v=0,l,x){if(!this.contentVisible)return;s=this.getObject(s.data,s);const y=this.ctx;y.save();const S=(0,E.getCurrentTransform)(y);y.transform(r,u,v,l,0,0);const p=this._createMaskCanvas(s);y.setTransform(1,0,0,1,p.offsetX-S[4],p.offsetY-S[5]);for(let o=0,h=x.length;o<h;o+=2){const n=e.Util.transform(S,[r,u,v,l,x[o],x[o+1]]),[a,f]=e.Util.applyTransform([0,0],n);y.drawImage(p.canvas,a,f)}y.restore(),this.compose()}paintImageMaskXObjectGroup(s){if(!this.contentVisible)return;const r=this.ctx,u=this.current.fillColor,v=this.current.patternFill;for(const l of s){const{data:x,width:y,height:S,transform:p}=l,o=this.cachedCanvases.getCanvas("maskCanvas",y,S),h=o.context;h.save();const n=this.getObject(x,l);Ct(h,n),h.globalCompositeOperation="source-in",h.fillStyle=v?u.getPattern(h,this,(0,E.getCurrentTransformInverse)(r),A.FILL):u,h.fillRect(0,0,y,S),h.restore(),r.save(),r.transform(...p),r.scale(1,-1),Dt(r,o.canvas,0,0,y,S,0,-1,1,1),r.restore()}this.compose()}paintImageXObject(s){if(!this.contentVisible)return;const r=this.getObject(s);if(!r){(0,e.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(r)}paintImageXObjectRepeat(s,r,u,v){if(!this.contentVisible)return;const l=this.getObject(s);if(!l){(0,e.warn)("Dependent image isn't ready yet");return}const x=l.width,y=l.height,S=[];for(let p=0,o=v.length;p<o;p+=2)S.push({transform:[r,0,0,u,v[p],v[p+1]],x:0,y:0,w:x,h:y});this.paintInlineImageXObjectGroup(l,S)}applyTransferMapsToCanvas(s){return this.current.transferMaps!=="none"&&(s.filter=this.current.transferMaps,s.drawImage(s.canvas,0,0),s.filter="none"),s.canvas}applyTransferMapsToBitmap(s){if(this.current.transferMaps==="none")return s.bitmap;const{bitmap:r,width:u,height:v}=s,l=this.cachedCanvases.getCanvas("inlineImage",u,v),x=l.context;return x.filter=this.current.transferMaps,x.drawImage(r,0,0),x.filter="none",l.canvas}paintInlineImageXObject(s){if(!this.contentVisible)return;const r=s.width,u=s.height,v=this.ctx;if(this.save(),!e.isNodeJS){const{filter:y}=v;y!=="none"&&y!==""&&(v.filter="none")}v.scale(1/r,-1/u);let l;if(s.bitmap)l=this.applyTransferMapsToBitmap(s);else if(typeof HTMLElement=="function"&&s instanceof HTMLElement||!s.data)l=s;else{const y=this.cachedCanvases.getCanvas("inlineImage",r,u).context;wt(y,s),l=this.applyTransferMapsToCanvas(y)}const x=this._scaleImage(l,(0,E.getCurrentTransformInverse)(v));v.imageSmoothingEnabled=Yt((0,E.getCurrentTransform)(v),s.interpolate),Dt(v,x.img,0,0,x.paintWidth,x.paintHeight,0,-u,r,u),this.compose(),this.restore()}paintInlineImageXObjectGroup(s,r){if(!this.contentVisible)return;const u=this.ctx;let v;if(s.bitmap)v=s.bitmap;else{const l=s.width,x=s.height,y=this.cachedCanvases.getCanvas("inlineImage",l,x).context;wt(y,s),v=this.applyTransferMapsToCanvas(y)}for(const l of r)u.save(),u.transform(...l.transform),u.scale(1,-1),Dt(u,v,l.x,l.y,l.w,l.h,0,-1,1,1),u.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(s){}markPointProps(s,r){}beginMarkedContent(s){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(s,r){s==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(s){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const u=this.ctx;this.pendingClip&&(r||(this.pendingClip===he?u.clip("evenodd"):u.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),u.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const s=(0,E.getCurrentTransform)(this.ctx);if(s[1]===0&&s[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(s[0]),Math.abs(s[3]));else{const r=Math.abs(s[0]*s[3]-s[2]*s[1]),u=Math.hypot(s[0],s[2]),v=Math.hypot(s[1],s[3]);this._cachedGetSinglePixelWidth=Math.max(u,v)/r}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:s}=this.current,{a:r,b:u,c:v,d:l}=this.ctx.getTransform();let x,y;if(u===0&&v===0){const S=Math.abs(r),p=Math.abs(l);if(S===p)if(s===0)x=y=1/S;else{const o=S*s;x=y=o<1?1/o:1}else if(s===0)x=1/S,y=1/p;else{const o=S*s,h=p*s;x=o<1?1/o:1,y=h<1?1/h:1}}else{const S=Math.abs(r*l-u*v),p=Math.hypot(r,u),o=Math.hypot(v,l);if(s===0)x=o/S,y=p/S;else{const h=s*S;x=o>h?o/h:1,y=p>h?p/h:1}}this._cachedScaleForStroking[0]=x,this._cachedScaleForStroking[1]=y}return this._cachedScaleForStroking}rescaleAndStroke(s){const{ctx:r}=this,{lineWidth:u}=this.current,[v,l]=this.getScaleForStroking();if(r.lineWidth=u||1,v===1&&l===1){r.stroke();return}const x=r.getLineDash();if(s&&r.save(),r.scale(v,l),x.length>0){const y=Math.max(v,l);r.setLineDash(x.map(S=>S/y)),r.lineDashOffset/=y}r.stroke(),s&&r.restore()}isContentVisible(){for(let s=this.markedContentStack.length-1;s>=0;s--)if(!this.markedContentStack[s].visible)return!1;return!0}};oe=new WeakSet,Ln=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},se=new WeakSet,Pn=function(){if(this.pageColors){const s=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(s!=="none"){const r=this.ctx.filter;this.ctx.filter=s,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=r}}};let me=ne;for(const lt in e.OPS)me.prototype[lt]!==void 0&&(me.prototype[e.OPS[lt]]=me.prototype[lt])},419:(d,C,m)=>{var Lt,Tt,at,bt,Pt,Rt,Ut,Qi,re,Ji,ce,Zi,me,Rn,oe,Ys,se,Ks,ne,As,s,ys;m.d(C,{DOMCMapReaderFactory:()=>T,DOMCanvasFactory:()=>H,DOMFilterFactory:()=>it,DOMSVGFactory:()=>z,DOMStandardFontDataFactory:()=>tt,PDFDateString:()=>Q,PageViewport:()=>L,PixelsPerInch:()=>_,RenderingCancelledException:()=>q,StatTimer:()=>O,fetchData:()=>M,getColorValues:()=>Dt,getCurrentTransform:()=>St,getCurrentTransformInverse:()=>Ot,getFilenameFromUrl:()=>ut,getPdfFilenameFromUrl:()=>nt,getRGB:()=>At,getXfaPageViewport:()=>ot,isDataScheme:()=>W,isPdfFile:()=>et,isValidFetchUrl:()=>V,noContextMenu:()=>$,setLayerDimensions:()=>wt});var e=m(583),E=m(292);const A="http://www.w3.org/2000/svg",Ct=class Ct{};be(Ct,"CSS",96),be(Ct,"PDF",72),be(Ct,"PDF_TO_CSS_UNITS",Ct.CSS/Ct.PDF);let _=Ct;class it extends e.BaseFilterFactory{constructor({docId:l,ownerDocument:x=globalThis.document}={}){super();c(this,Ut);c(this,re);c(this,ce);c(this,me);c(this,oe);c(this,se);c(this,ne);c(this,s);c(this,Lt,void 0);c(this,Tt,void 0);c(this,at,void 0);c(this,bt,void 0);c(this,Pt,void 0);c(this,Rt,0);N(this,at,l),N(this,bt,x)}addFilter(l){if(!l)return"none";let x=t(this,Ut,Qi).get(l);if(x)return x;let y,S,p,o;if(l.length===1){const f=l[0],I=new Array(256);for(let w=0;w<256;w++)I[w]=f[w]/255;o=y=S=p=I.join(",")}else{const[f,I,w]=l,X=new Array(256),Z=new Array(256),Y=new Array(256);for(let st=0;st<256;st++)X[st]=f[st]/255,Z[st]=I[st]/255,Y[st]=w[st]/255;y=X.join(","),S=Z.join(","),p=Y.join(","),o=`${y}${S}${p}`}if(x=t(this,Ut,Qi).get(o),x)return t(this,Ut,Qi).set(l,x),x;const h=`g_${t(this,at)}_transfer_map_${mi(this,Rt)._++}`,n=`url(#${h})`;t(this,Ut,Qi).set(l,n),t(this,Ut,Qi).set(o,n);const a=F(this,oe,Ys).call(this,h);return F(this,ne,As).call(this,y,S,p,a),n}addHCMFilter(l,x){var X;const y=`${l}-${x}`,S="base";let p=t(this,re,Ji).get(S);if((p==null?void 0:p.key)===y||(p?((X=p.filter)==null||X.remove(),p.key=y,p.url="none",p.filter=null):(p={key:y,url:"none",filter:null},t(this,re,Ji).set(S,p)),!l||!x))return p.url;const o=F(this,s,ys).call(this,l);l=E.Util.makeHexColor(...o);const h=F(this,s,ys).call(this,x);if(x=E.Util.makeHexColor(...h),t(this,ce,Zi).style.color="",l==="#000000"&&x==="#ffffff"||l===x)return p.url;const n=new Array(256);for(let Z=0;Z<=255;Z++){const Y=Z/255;n[Z]=Y<=.03928?Y/12.92:((Y+.055)/1.055)**2.4}const a=n.join(","),f=`g_${t(this,at)}_hcm_filter`,I=p.filter=F(this,oe,Ys).call(this,f);F(this,ne,As).call(this,a,a,a,I),F(this,me,Rn).call(this,I);const w=(Z,Y)=>{const st=o[Z]/255,g=h[Z]/255,R=new Array(Y+1);for(let J=0;J<=Y;J++)R[J]=st+J/Y*(g-st);return R.join(",")};return F(this,ne,As).call(this,w(0,5),w(1,5),w(2,5),I),p.url=`url(#${f})`,p.url}addHighlightHCMFilter(l,x,y,S,p){var g;const o=`${x}-${y}-${S}-${p}`;let h=t(this,re,Ji).get(l);if((h==null?void 0:h.key)===o||(h?((g=h.filter)==null||g.remove(),h.key=o,h.url="none",h.filter=null):(h={key:o,url:"none",filter:null},t(this,re,Ji).set(l,h)),!x||!y))return h.url;const[n,a]=[x,y].map(F(this,s,ys).bind(this));let f=Math.round(.2126*n[0]+.7152*n[1]+.0722*n[2]),I=Math.round(.2126*a[0]+.7152*a[1]+.0722*a[2]),[w,X]=[S,p].map(F(this,s,ys).bind(this));I<f&&([f,I,w,X]=[I,f,X,w]),t(this,ce,Zi).style.color="";const Z=(R,J,k)=>{const b=new Array(256),G=(I-f)/k,K=R/255,ht=(J-R)/(255*k);let gt=0;for(let xt=0;xt<=k;xt++){const It=Math.round(f+xt*G),Xt=K+xt*ht;for(let ie=gt;ie<=It;ie++)b[ie]=Xt;gt=It+1}for(let xt=gt;xt<256;xt++)b[xt]=b[gt-1];return b.join(",")},Y=`g_${t(this,at)}_hcm_${l}_filter`,st=h.filter=F(this,oe,Ys).call(this,Y);return F(this,me,Rn).call(this,st),F(this,ne,As).call(this,Z(w[0],X[0],5),Z(w[1],X[1],5),Z(w[2],X[2],5),st),h.url=`url(#${Y})`,h.url}destroy(l=!1){l&&t(this,re,Ji).size!==0||(t(this,Tt)&&(t(this,Tt).parentNode.parentNode.remove(),N(this,Tt,null)),t(this,Lt)&&(t(this,Lt).clear(),N(this,Lt,null)),N(this,Rt,0))}}Lt=new WeakMap,Tt=new WeakMap,at=new WeakMap,bt=new WeakMap,Pt=new WeakMap,Rt=new WeakMap,Ut=new WeakSet,Qi=function(){return t(this,Lt)||N(this,Lt,new Map)},re=new WeakSet,Ji=function(){return t(this,Pt)||N(this,Pt,new Map)},ce=new WeakSet,Zi=function(){if(!t(this,Tt)){const l=t(this,bt).createElement("div"),{style:x}=l;x.visibility="hidden",x.contain="strict",x.width=x.height=0,x.position="absolute",x.top=x.left=0,x.zIndex=-1;const y=t(this,bt).createElementNS(A,"svg");y.setAttribute("width",0),y.setAttribute("height",0),N(this,Tt,t(this,bt).createElementNS(A,"defs")),l.append(y),y.append(t(this,Tt)),t(this,bt).body.append(l)}return t(this,Tt)},me=new WeakSet,Rn=function(l){const x=t(this,bt).createElementNS(A,"feColorMatrix");x.setAttribute("type","matrix"),x.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),l.append(x)},oe=new WeakSet,Ys=function(l){const x=t(this,bt).createElementNS(A,"filter");return x.setAttribute("color-interpolation-filters","sRGB"),x.setAttribute("id",l),t(this,ce,Zi).append(x),x},se=new WeakSet,Ks=function(l,x,y){const S=t(this,bt).createElementNS(A,x);S.setAttribute("type","discrete"),S.setAttribute("tableValues",y),l.append(S)},ne=new WeakSet,As=function(l,x,y,S){const p=t(this,bt).createElementNS(A,"feComponentTransfer");S.append(p),F(this,se,Ks).call(this,p,"feFuncR",l),F(this,se,Ks).call(this,p,"feFuncG",x),F(this,se,Ks).call(this,p,"feFuncB",y)},s=new WeakSet,ys=function(l){return t(this,ce,Zi).style.color=l,At(getComputedStyle(t(this,ce,Zi)).getPropertyValue("color"))};class H extends e.BaseCanvasFactory{constructor({ownerDocument:v=globalThis.document}={}){super(),this._document=v}_createCanvas(v,l){const x=this._document.createElement("canvas");return x.width=v,x.height=l,x}}async function M(u,v="text"){if(V(u,document.baseURI)){const l=await fetch(u);if(!l.ok)throw new Error(l.statusText);switch(v){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"json":return l.json()}return l.text()}return new Promise((l,x)=>{const y=new XMLHttpRequest;y.open("GET",u,!0),y.responseType=v,y.onreadystatechange=()=>{if(y.readyState===XMLHttpRequest.DONE){if(y.status===200||y.status===0){switch(v){case"arraybuffer":case"blob":case"json":l(y.response);return}l(y.responseText);return}x(new Error(y.statusText))}},y.send(null)})}class T extends e.BaseCMapReaderFactory{_fetchData(v,l){return M(v,this.isCompressed?"arraybuffer":"text").then(x=>({cMapData:x instanceof ArrayBuffer?new Uint8Array(x):(0,E.stringToBytes)(x),compressionType:l}))}}class tt extends e.BaseStandardFontDataFactory{_fetchData(v){return M(v,"arraybuffer").then(l=>new Uint8Array(l))}}class z extends e.BaseSVGFactory{_createSVG(v){return document.createElementNS(A,v)}}class L{constructor({viewBox:v,scale:l,rotation:x,offsetX:y=0,offsetY:S=0,dontFlip:p=!1}){this.viewBox=v,this.scale=l,this.rotation=x,this.offsetX=y,this.offsetY=S;const o=(v[2]+v[0])/2,h=(v[3]+v[1])/2;let n,a,f,I;switch(x%=360,x<0&&(x+=360),x){case 180:n=-1,a=0,f=0,I=1;break;case 90:n=0,a=1,f=1,I=0;break;case 270:n=0,a=-1,f=-1,I=0;break;case 0:n=1,a=0,f=0,I=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}p&&(f=-f,I=-I);let w,X,Z,Y;n===0?(w=Math.abs(h-v[1])*l+y,X=Math.abs(o-v[0])*l+S,Z=(v[3]-v[1])*l,Y=(v[2]-v[0])*l):(w=Math.abs(o-v[0])*l+y,X=Math.abs(h-v[1])*l+S,Z=(v[2]-v[0])*l,Y=(v[3]-v[1])*l),this.transform=[n*l,a*l,f*l,I*l,w-n*l*o-f*l*h,X-a*l*o-I*l*h],this.width=Z,this.height=Y}get rawDims(){const{viewBox:v}=this;return(0,E.shadow)(this,"rawDims",{pageWidth:v[2]-v[0],pageHeight:v[3]-v[1],pageX:v[0],pageY:v[1]})}clone({scale:v=this.scale,rotation:l=this.rotation,offsetX:x=this.offsetX,offsetY:y=this.offsetY,dontFlip:S=!1}={}){return new L({viewBox:this.viewBox.slice(),scale:v,rotation:l,offsetX:x,offsetY:y,dontFlip:S})}convertToViewportPoint(v,l){return E.Util.applyTransform([v,l],this.transform)}convertToViewportRectangle(v){const l=E.Util.applyTransform([v[0],v[1]],this.transform),x=E.Util.applyTransform([v[2],v[3]],this.transform);return[l[0],l[1],x[0],x[1]]}convertToPdfPoint(v,l){return E.Util.applyInverseTransform([v,l],this.transform)}}class q extends E.BaseException{constructor(v,l=0){super(v,"RenderingCancelledException"),this.extraDelay=l}}function W(u){const v=u.length;let l=0;for(;l<v&&u[l].trim()==="";)l++;return u.substring(l,l+5).toLowerCase()==="data:"}function et(u){return typeof u=="string"&&/\.pdf$/i.test(u)}function ut(u,v=!1){return v||([u]=u.split(/[#?]/,1)),u.substring(u.lastIndexOf("/")+1)}function nt(u,v="document.pdf"){if(typeof u!="string")return v;if(W(u))return(0,E.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),v;const l=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,x=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,y=l.exec(u);let S=x.exec(y[1])||x.exec(y[2])||x.exec(y[3]);if(S&&(S=S[0],S.includes("%")))try{S=x.exec(decodeURIComponent(S))[0]}catch{}return S||v}class O{constructor(){be(this,"started",Object.create(null));be(this,"times",[])}time(v){v in this.started&&(0,E.warn)(`Timer is already running for ${v}`),this.started[v]=Date.now()}timeEnd(v){v in this.started||(0,E.warn)(`Timer has not been started for ${v}`),this.times.push({name:v,start:this.started[v],end:Date.now()}),delete this.started[v]}toString(){const v=[];let l=0;for(const{name:x}of this.times)l=Math.max(x.length,l);for(const{name:x,start:y,end:S}of this.times)v.push(`${x.padEnd(l)} ${S-y}ms
`);return v.join("")}}function V(u,v){try{const{protocol:l}=v?new URL(u,v):new URL(u);return l==="http:"||l==="https:"}catch{return!1}}function $(u){u.preventDefault()}let B;class Q{static toDateObject(v){if(!v||typeof v!="string")return null;B||(B=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const l=B.exec(v);if(!l)return null;const x=parseInt(l[1],10);let y=parseInt(l[2],10);y=y>=1&&y<=12?y-1:0;let S=parseInt(l[3],10);S=S>=1&&S<=31?S:1;let p=parseInt(l[4],10);p=p>=0&&p<=23?p:0;let o=parseInt(l[5],10);o=o>=0&&o<=59?o:0;let h=parseInt(l[6],10);h=h>=0&&h<=59?h:0;const n=l[7]||"Z";let a=parseInt(l[8],10);a=a>=0&&a<=23?a:0;let f=parseInt(l[9],10)||0;return f=f>=0&&f<=59?f:0,n==="-"?(p+=a,o+=f):n==="+"&&(p-=a,o-=f),new Date(Date.UTC(x,y,S,p,o,h))}}function ot(u,{scale:v=1,rotation:l=0}){const{width:x,height:y}=u.attributes.style,S=[0,0,parseInt(x),parseInt(y)];return new L({viewBox:S,scale:v,rotation:l})}function At(u){if(u.startsWith("#")){const v=parseInt(u.slice(1),16);return[(v&16711680)>>16,(v&65280)>>8,v&255]}return u.startsWith("rgb(")?u.slice(4,-1).split(",").map(v=>parseInt(v)):u.startsWith("rgba(")?u.slice(5,-1).split(",").map(v=>parseInt(v)).slice(0,3):((0,E.warn)(`Not a valid color format: "${u}"`),[0,0,0])}function Dt(u){const v=document.createElement("span");v.style.visibility="hidden",document.body.append(v);for(const l of u.keys()){v.style.color=l;const x=window.getComputedStyle(v).color;u.set(l,At(x))}v.remove()}function St(u){const{a:v,b:l,c:x,d:y,e:S,f:p}=u.getTransform();return[v,l,x,y,S,p]}function Ot(u){const{a:v,b:l,c:x,d:y,e:S,f:p}=u.getTransform().invertSelf();return[v,l,x,y,S,p]}function wt(u,v,l=!1,x=!0){if(v instanceof L){const{pageWidth:y,pageHeight:S}=v.rawDims,{style:p}=u,o=E.FeatureTest.isCSSRoundSupported,h=`var(--scale-factor) * ${y}px`,n=`var(--scale-factor) * ${S}px`,a=o?`round(${h}, 1px)`:`calc(${h})`,f=o?`round(${n}, 1px)`:`calc(${n})`;!l||v.rotation%180===0?(p.width=a,p.height=f):(p.width=f,p.height=a)}x&&u.setAttribute("data-main-rotation",v.rotation)}},47:(d,C,m)=>{var _,it,H,M,T,In,z,Fn,q,Xr;m.d(C,{DrawLayer:()=>A});var e=m(419),E=m(292);const et=class et{constructor({pageIndex:nt}){c(this,z);c(this,q);c(this,_,null);c(this,it,0);c(this,H,new Map);c(this,M,new Map);this.pageIndex=nt}setParent(nt){if(!t(this,_)){N(this,_,nt);return}if(t(this,_)!==nt){if(t(this,H).size>0)for(const O of t(this,H).values())O.remove(),nt.append(O);N(this,_,nt)}}static get _svgFactory(){return(0,E.shadow)(this,"_svgFactory",new e.DOMSVGFactory)}highlight(nt,O,V,$=!1){const B=mi(this,it)._++,Q=F(this,z,Fn).call(this,nt.box);Q.classList.add("highlight"),nt.free&&Q.classList.add("free");const ot=et._svgFactory.createElement("defs");Q.append(ot);const At=et._svgFactory.createElement("path");ot.append(At);const Dt=`path_p${this.pageIndex}_${B}`;At.setAttribute("id",Dt),At.setAttribute("d",nt.toSVGPath()),$&&t(this,M).set(B,At);const St=F(this,q,Xr).call(this,ot,Dt),Ot=et._svgFactory.createElement("use");return Q.append(Ot),Q.setAttribute("fill",O),Q.setAttribute("fill-opacity",V),Ot.setAttribute("href",`#${Dt}`),t(this,H).set(B,Q),{id:B,clipPathId:`url(#${St})`}}highlightOutline(nt){const O=mi(this,it)._++,V=F(this,z,Fn).call(this,nt.box);V.classList.add("highlightOutline");const $=et._svgFactory.createElement("defs");V.append($);const B=et._svgFactory.createElement("path");$.append(B);const Q=`path_p${this.pageIndex}_${O}`;B.setAttribute("id",Q),B.setAttribute("d",nt.toSVGPath()),B.setAttribute("vector-effect","non-scaling-stroke");let ot;if(nt.free){V.classList.add("free");const St=et._svgFactory.createElement("mask");$.append(St),ot=`mask_p${this.pageIndex}_${O}`,St.setAttribute("id",ot),St.setAttribute("maskUnits","objectBoundingBox");const Ot=et._svgFactory.createElement("rect");St.append(Ot),Ot.setAttribute("width","1"),Ot.setAttribute("height","1"),Ot.setAttribute("fill","white");const wt=et._svgFactory.createElement("use");St.append(wt),wt.setAttribute("href",`#${Q}`),wt.setAttribute("stroke","none"),wt.setAttribute("fill","black"),wt.setAttribute("fill-rule","nonzero"),wt.classList.add("mask")}const At=et._svgFactory.createElement("use");V.append(At),At.setAttribute("href",`#${Q}`),ot&&At.setAttribute("mask",`url(#${ot})`);const Dt=At.cloneNode();return V.append(Dt),At.classList.add("mainOutline"),Dt.classList.add("secondaryOutline"),t(this,H).set(O,V),O}finalizeLine(nt,O){const V=t(this,M).get(nt);t(this,M).delete(nt),this.updateBox(nt,O.box),V.setAttribute("d",O.toSVGPath())}updateLine(nt,O){t(this,H).get(nt).firstChild.firstChild.setAttribute("d",O.toSVGPath())}removeFreeHighlight(nt){this.remove(nt),t(this,M).delete(nt)}updatePath(nt,O){t(this,M).get(nt).setAttribute("d",O.toSVGPath())}updateBox(nt,O){var V;F(V=et,T,In).call(V,t(this,H).get(nt),O)}show(nt,O){t(this,H).get(nt).classList.toggle("hidden",!O)}rotate(nt,O){t(this,H).get(nt).setAttribute("data-main-rotation",O)}changeColor(nt,O){t(this,H).get(nt).setAttribute("fill",O)}changeOpacity(nt,O){t(this,H).get(nt).setAttribute("fill-opacity",O)}addClass(nt,O){t(this,H).get(nt).classList.add(O)}removeClass(nt,O){t(this,H).get(nt).classList.remove(O)}remove(nt){t(this,_)!==null&&(t(this,H).get(nt).remove(),t(this,H).delete(nt))}destroy(){N(this,_,null);for(const nt of t(this,H).values())nt.remove();t(this,H).clear()}};_=new WeakMap,it=new WeakMap,H=new WeakMap,M=new WeakMap,T=new WeakSet,In=function(nt,{x:O=0,y:V=0,width:$=1,height:B=1}={}){const{style:Q}=nt;Q.top=`${100*V}%`,Q.left=`${100*O}%`,Q.width=`${100*$}%`,Q.height=`${100*B}%`},z=new WeakSet,Fn=function(nt){var V;const O=et._svgFactory.create(1,1,!0);return t(this,_).append(O),O.setAttribute("aria-hidden",!0),F(V=et,T,In).call(V,O,nt),O},q=new WeakSet,Xr=function(nt,O){const V=et._svgFactory.createElement("clipPath");nt.append(V);const $=`clip_${O}`;V.setAttribute("id",$),V.setAttribute("clipPathUnits","objectBoundingBox");const B=et._svgFactory.createElement("use");return V.append(B),B.setAttribute("href",`#${O}`),B.classList.add("clip"),$},c(et,T);let A=et},731:(d,C,m)=>{var et,ut,nt,O,V,$,B,Q,ot,At,Dt,Vr,Ot,Yr,Ct,Kr,Tt,Qs,bt,Js,Rt,Zs,Yt,Qr,_e,Dn,he,Jr,oe,Se,se,Ee,ne,lt,s,r,u,v,l,x,y,S,p,o,h,n,a,f,On,w,Nn,Z,Zr,st,ta,R,ea,k,Hn,G,ws,ht,ts,xt,ia,Xt,tn,ee,xs,ve,sa,fe,na,ae,ra,P,aa,ft,Et,_t,Wt,qt,Nt,Qt,Gt,Mt,Bt,Zt,ue,de,Te,Me,Ze,oa,Ve,la,Ge,ha,mt,ca,jt,Bn,te,da,ye,jn,He,ua,$e,pa,Mi,ga,Is,fa,Fs,ma,di,Oi,ns,zn,Bi,en,ji,sn,bi,es,rs,Gn,zi,nn,Ds,va,as,Un,Os,ba,Ns,Aa,os,qn,Gi,rn,ki,_s,Ue,qe,Ai,ui,yi,Ui,oi,Li,li,ni,ls,Pi,Es,Ri,Ts,qi,an,hs,$n,Hs,ya,Bs,wa,cs,Wn,$i,on,js,xa,Ii,Wi,hi,Fi,pi,gi,fi,ti,wi,Xi,Vi,Ke,pe,xi,zs,_a,us,Xn,ps,Vn,gs,Yn,Yi,ln;m.d(C,{AnnotationEditorLayer:()=>W});var e=m(292),E=m(310),A=m(830),_=m(976);const it=/\r\n?|\n/g,zt=class zt extends E.AnnotationEditor{constructor(i){super({...i,name:"freeTextEditor"});c(this,Dt);c(this,Ot);c(this,Ct);c(this,Tt);c(this,Rt);c(this,Yt);c(this,he);c(this,et,this.editorDivBlur.bind(this));c(this,ut,this.editorDivFocus.bind(this));c(this,nt,this.editorDivInput.bind(this));c(this,O,this.editorDivKeydown.bind(this));c(this,V,this.editorDivPaste.bind(this));c(this,$,void 0);c(this,B,"");c(this,Q,`${this.id}-editor`);c(this,ot,void 0);c(this,At,null);N(this,$,i.color||zt._defaultColor||E.AnnotationEditor._defaultLineColor),N(this,ot,i.fontSize||zt._defaultFontSize)}static get _keyboardManager(){const i=zt.prototype,D=yt=>yt.isEmpty(),ct=A.AnnotationEditorUIManager.TRANSLATE_SMALL,pt=A.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,e.shadow)(this,"_keyboardManager",new A.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],i.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],i.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],i._translateEmpty,{args:[-ct,0],checker:D}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],i._translateEmpty,{args:[-pt,0],checker:D}],[["ArrowRight","mac+ArrowRight"],i._translateEmpty,{args:[ct,0],checker:D}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],i._translateEmpty,{args:[pt,0],checker:D}],[["ArrowUp","mac+ArrowUp"],i._translateEmpty,{args:[0,-ct],checker:D}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],i._translateEmpty,{args:[0,-pt],checker:D}],[["ArrowDown","mac+ArrowDown"],i._translateEmpty,{args:[0,ct],checker:D}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],i._translateEmpty,{args:[0,pt],checker:D}]]))}static initialize(i,D){E.AnnotationEditor.initialize(i,D,{strings:["pdfjs-free-text-default-content"]});const ct=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ct.getPropertyValue("--freetext-padding"))}static updateDefaultParams(i,D){switch(i){case e.AnnotationEditorParamsType.FREETEXT_SIZE:zt._defaultFontSize=D;break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:zt._defaultColor=D;break}}updateParams(i,D){switch(i){case e.AnnotationEditorParamsType.FREETEXT_SIZE:F(this,Dt,Vr).call(this,D);break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:F(this,Ot,Yr).call(this,D);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,zt._defaultFontSize],[e.AnnotationEditorParamsType.FREETEXT_COLOR,zt._defaultColor||E.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,ot)],[e.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,$)]]}_translateEmpty(i,D){this._uiManager.translateSelectedEditors(i,D,!0)}getInitialTranslation(){const i=this.parentScale;return[-zt._internalPadding*i,-(zt._internalPadding+t(this,ot))*i]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(e.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,O)),this.editorDiv.addEventListener("focus",t(this,ut)),this.editorDiv.addEventListener("blur",t(this,et)),this.editorDiv.addEventListener("input",t(this,nt)),this.editorDiv.addEventListener("paste",t(this,V)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,Q)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",t(this,O)),this.editorDiv.removeEventListener("focus",t(this,ut)),this.editorDiv.removeEventListener("blur",t(this,et)),this.editorDiv.removeEventListener("input",t(this,nt)),this.editorDiv.removeEventListener("paste",t(this,V)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(i){this._focusEventsAllowed&&(super.focusin(i),i.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var i;this.width||(this.enableEditMode(),this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const i=t(this,B),D=N(this,B,F(this,Ct,Kr).call(this).trimEnd());if(i===D)return;const ct=pt=>{if(N(this,B,pt),!pt){this.remove();return}F(this,Rt,Zs).call(this),this._uiManager.rebuild(this),F(this,Tt,Qs).call(this)};this.addCommands({cmd:()=>{ct(D)},undo:()=>{ct(i)},mustExec:!1}),F(this,Tt,Qs).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(i){this.enterInEditMode()}keydown(i){i.target===this.div&&i.key==="Enter"&&(this.enterInEditMode(),i.preventDefault())}editorDivKeydown(i){zt._keyboardManager.exec(this,i)}editorDivFocus(i){this.isEditing=!0}editorDivBlur(i){this.isEditing=!1}editorDivInput(i){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let i,D;this.width&&(i=this.x,D=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,Q)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),E.AnnotationEditor._l10nPromise.get("pdfjs-free-text-default-content").then(pt=>{var yt;return(yt=this.editorDiv)==null?void 0:yt.setAttribute("default-content",pt)}),this.editorDiv.contentEditable=!0;const{style:ct}=this.editorDiv;if(ct.fontSize=`calc(${t(this,ot)}px * var(--scale-factor))`,ct.color=t(this,$),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,A.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[pt,yt]=this.parentDimensions;if(this.annotationElementId){const{position:Ft}=t(this,At);let[$t,kt]=this.getInitialTranslation();[$t,kt]=this.pageTranslationToScreen($t,kt);const[Kt,Vt]=this.pageDimensions,[we,xe]=this.pageTranslation;let Ce,ke;switch(this.rotation){case 0:Ce=i+(Ft[0]-we)/Kt,ke=D+this.height-(Ft[1]-xe)/Vt;break;case 90:Ce=i+(Ft[0]-we)/Kt,ke=D-(Ft[1]-xe)/Vt,[$t,kt]=[kt,-$t];break;case 180:Ce=i-this.width+(Ft[0]-we)/Kt,ke=D-(Ft[1]-xe)/Vt,[$t,kt]=[-$t,-kt];break;case 270:Ce=i+(Ft[0]-we-this.height*Vt)/Kt,ke=D+(Ft[1]-xe-this.width*Kt)/Vt,[$t,kt]=[-kt,$t];break}this.setAt(Ce*pt,ke*yt,$t,kt)}else this.setAt(i*pt,D*yt,this.width*pt,this.height*yt);F(this,Rt,Zs).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(i){var Ce,ke,ze;const D=i.clipboardData||window.clipboardData,{types:ct}=D;if(ct.length===1&&ct[0]==="text/plain")return;i.preventDefault();const pt=F(Ce=zt,_e,Dn).call(Ce,D.getData("text")||"").replaceAll(it,`
`);if(!pt)return;const yt=window.getSelection();if(!yt.rangeCount)return;this.editorDiv.normalize(),yt.deleteFromDocument();const Ft=yt.getRangeAt(0);if(!pt.includes(`
`)){Ft.insertNode(document.createTextNode(pt)),this.editorDiv.normalize(),yt.collapseToStart();return}const{startContainer:$t,startOffset:kt}=Ft,Kt=[],Vt=[];if($t.nodeType===Node.TEXT_NODE){const De=$t.parentElement;if(Vt.push($t.nodeValue.slice(kt).replaceAll(it,"")),De!==this.editorDiv){let je=Kt;for(const Be of this.editorDiv.childNodes){if(Be===De){je=Vt;continue}je.push(F(ke=zt,bt,Js).call(ke,Be))}}Kt.push($t.nodeValue.slice(0,kt).replaceAll(it,""))}else if($t===this.editorDiv){let De=Kt,je=0;for(const Be of this.editorDiv.childNodes)je++===kt&&(De=Vt),De.push(F(ze=zt,bt,Js).call(ze,Be))}N(this,B,`${Kt.join(`
`)}${pt}${Vt.join(`
`)}`),F(this,Rt,Zs).call(this);const we=new Range;let xe=Kt.reduce((De,je)=>De+je.length,0);for(const{firstChild:De}of this.editorDiv.childNodes)if(De.nodeType===Node.TEXT_NODE){const je=De.nodeValue.length;if(xe<=je){we.setStart(De,xe),we.setEnd(De,xe);break}xe-=je}yt.removeAllRanges(),yt.addRange(we)}get contentDiv(){return this.editorDiv}static deserialize(i,D,ct){var Ft;let pt=null;if(i instanceof _.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:$t,fontColor:kt},rect:Kt,rotation:Vt,id:we},textContent:xe,textPosition:Ce,parent:{page:{pageNumber:ke}}}=i;if(!xe||xe.length===0)return null;pt=i={annotationType:e.AnnotationEditorType.FREETEXT,color:Array.from(kt),fontSize:$t,value:xe.join(`
`),position:Ce,pageIndex:ke-1,rect:Kt,rotation:Vt,id:we,deleted:!1}}const yt=super.deserialize(i,D,ct);return N(yt,ot,i.fontSize),N(yt,$,e.Util.makeHexColor(...i.color)),N(yt,B,F(Ft=zt,_e,Dn).call(Ft,i.value)),yt.annotationElementId=i.id||null,N(yt,At,pt),yt}serialize(i=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const D=zt._internalPadding*this.parentScale,ct=this.getRect(D,D),pt=E.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,$)),yt={annotationType:e.AnnotationEditorType.FREETEXT,color:pt,fontSize:t(this,ot),value:F(this,Yt,Qr).call(this),pageIndex:this.pageIndex,rect:ct,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return i?yt:this.annotationElementId&&!F(this,he,Jr).call(this,yt)?null:(yt.id=this.annotationElementId,yt)}};et=new WeakMap,ut=new WeakMap,nt=new WeakMap,O=new WeakMap,V=new WeakMap,$=new WeakMap,B=new WeakMap,Q=new WeakMap,ot=new WeakMap,At=new WeakMap,Dt=new WeakSet,Vr=function(i){const D=pt=>{this.editorDiv.style.fontSize=`calc(${pt}px * var(--scale-factor))`,this.translate(0,-(pt-t(this,ot))*this.parentScale),N(this,ot,pt),F(this,Tt,Qs).call(this)},ct=t(this,ot);this.addCommands({cmd:D.bind(this,i),undo:D.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Ot=new WeakSet,Yr=function(i){const D=pt=>{N(this,$,this.editorDiv.style.color=pt)},ct=t(this,$);this.addCommands({cmd:D.bind(this,i),undo:D.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ct=new WeakSet,Kr=function(){var D;const i=[];this.editorDiv.normalize();for(const ct of this.editorDiv.childNodes)i.push(F(D=zt,bt,Js).call(D,ct));return i.join(`
`)},Tt=new WeakSet,Qs=function(){const[i,D]=this.parentDimensions;let ct;if(this.isAttachedToDOM)ct=this.div.getBoundingClientRect();else{const{currentLayer:pt,div:yt}=this,Ft=yt.style.display;yt.style.display="hidden",pt.div.append(this.div),ct=yt.getBoundingClientRect(),yt.remove(),yt.style.display=Ft}this.rotation%180===this.parentRotation%180?(this.width=ct.width/i,this.height=ct.height/D):(this.width=ct.height/i,this.height=ct.width/D),this.fixAndSetPosition()},bt=new WeakSet,Js=function(i){return(i.nodeType===Node.TEXT_NODE?i.nodeValue:i.innerText).replaceAll(it,"")},Rt=new WeakSet,Zs=function(){if(this.editorDiv.replaceChildren(),!!t(this,B))for(const i of t(this,B).split(`
`)){const D=document.createElement("div");D.append(i?document.createTextNode(i):document.createElement("br")),this.editorDiv.append(D)}},Yt=new WeakSet,Qr=function(){return t(this,B).replaceAll("\xA0"," ")},_e=new WeakSet,Dn=function(i){return i.replaceAll(" ","\xA0")},he=new WeakSet,Jr=function(i){const{value:D,fontSize:ct,color:pt,pageIndex:yt}=t(this,At);return this._hasBeenMoved||i.value!==D||i.fontSize!==ct||i.color.some((Ft,$t)=>Ft!==pt[$t])||i.pageIndex!==yt},c(zt,bt),c(zt,_e),be(zt,"_freeTextDefaultContent",""),be(zt,"_internalPadding",0),be(zt,"_defaultColor",null),be(zt,"_defaultFontSize",10),be(zt,"_type","freetext"),be(zt,"_editorType",e.AnnotationEditorType.FREETEXT);let H=zt;var M=m(61),T=m(259),tt=m(419);const dt=class dt extends E.AnnotationEditor{constructor(i){super({...i,name:"highlightEditor"});c(this,f);c(this,w);c(this,Z);c(this,st);c(this,R);c(this,k);c(this,G);c(this,xt);c(this,Xt);c(this,ee);c(this,ve);c(this,fe);c(this,oe,null);c(this,Se,0);c(this,se,void 0);c(this,Ee,null);c(this,ne,null);c(this,lt,null);c(this,s,null);c(this,r,0);c(this,u,null);c(this,v,null);c(this,l,null);c(this,x,!1);c(this,y,F(this,xt,ia).bind(this));c(this,S,null);c(this,p,void 0);c(this,o,null);c(this,h,"");c(this,n,void 0);c(this,a,"");this.color=i.color||dt._defaultColor,N(this,n,i.thickness||dt._defaultThickness),N(this,p,i.opacity||dt._defaultOpacity),N(this,se,i.boxes||null),N(this,a,i.methodOfCreation||""),N(this,h,i.text||""),this._isDraggable=!1,i.highlightId>-1?(N(this,x,!0),F(this,w,Nn).call(this,i),F(this,G,ws).call(this)):(N(this,oe,i.anchorNode),N(this,Se,i.anchorOffset),N(this,s,i.focusNode),N(this,r,i.focusOffset),F(this,f,On).call(this),F(this,G,ws).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const i=dt.prototype;return(0,e.shadow)(this,"_keyboardManager",new A.KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],i._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],i._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],i._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],i._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:t(this,x)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:t(this,n),methodOfCreation:t(this,a)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(i){return{numberOfColors:i.get("color").size}}static initialize(i,D){var ct;E.AnnotationEditor.initialize(i,D),dt._defaultColor||(dt._defaultColor=((ct=D.highlightColors)==null?void 0:ct.values().next().value)||"#fff066")}static updateDefaultParams(i,D){switch(i){case e.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:dt._defaultColor=D;break;case e.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:dt._defaultThickness=D;break}}translateInPage(i,D){}get toolbarPosition(){return t(this,S)}updateParams(i,D){switch(i){case e.AnnotationEditorParamsType.HIGHLIGHT_COLOR:F(this,Z,Zr).call(this,D);break;case e.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:F(this,st,ta).call(this,D);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,dt._defaultColor],[e.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,dt._defaultThickness]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||dt._defaultColor],[e.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,t(this,n)||dt._defaultThickness],[e.AnnotationEditorParamsType.HIGHLIGHT_FREE,t(this,x)]]}async addEditToolbar(){const i=await super.addEditToolbar();return i?(this._uiManager.highlightColors&&(N(this,ne,new T.ColorPicker({editor:this})),i.addColorPicker(t(this,ne))),i):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(F(this,ee,xs).call(this))}getBaseTranslation(){return[0,0]}getRect(i,D){return super.getRect(i,D,F(this,ee,xs).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){F(this,k,Hn).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(F(this,G,ws).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(i){var ct;let D=!1;this.parent&&!i?F(this,k,Hn).call(this):i&&(F(this,G,ws).call(this,i),D=!this.parent&&((ct=this.div)==null?void 0:ct.classList.contains("selectedEditor"))),super.setParent(i),this.show(this._isVisible),D&&this.select()}rotate(i){var pt,yt,Ft;const{drawLayer:D}=this.parent;let ct;t(this,x)?(i=(i-this.rotation+360)%360,ct=F(pt=dt,ht,ts).call(pt,t(this,v).box,i)):ct=F(yt=dt,ht,ts).call(yt,this,i),D.rotate(t(this,l),i),D.rotate(t(this,o),i),D.updateBox(t(this,l),ct),D.updateBox(t(this,o),F(Ft=dt,ht,ts).call(Ft,t(this,lt).box,i))}render(){if(this.div)return this.div;const i=super.render();t(this,h)&&(i.setAttribute("aria-label",t(this,h)),i.setAttribute("role","mark")),t(this,x)?i.classList.add("free"):this.div.addEventListener("keydown",t(this,y));const D=N(this,u,document.createElement("div"));i.append(D),D.setAttribute("aria-hidden","true"),D.className="internal",D.style.clipPath=t(this,Ee);const[ct,pt]=this.parentDimensions;return this.setDims(this.width*ct,this.height*pt),(0,A.bindEvents)(this,t(this,u),["pointerover","pointerleave"]),this.enableEditing(),i}pointerover(){this.parent.drawLayer.addClass(t(this,o),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(t(this,o),"hovered")}_moveCaret(i){switch(this.parent.unselect(this),i){case 0:case 2:F(this,Xt,tn).call(this,!0);break;case 1:case 3:F(this,Xt,tn).call(this,!1);break}}select(){var i,D;super.select(),t(this,o)&&((i=this.parent)==null||i.drawLayer.removeClass(t(this,o),"hovered"),(D=this.parent)==null||D.drawLayer.addClass(t(this,o),"selected"))}unselect(){var i;super.unselect(),t(this,o)&&((i=this.parent)==null||i.drawLayer.removeClass(t(this,o),"selected"),t(this,x)||F(this,Xt,tn).call(this,!1))}get _mustFixPosition(){return!t(this,x)}show(i=this._isVisible){super.show(i),this.parent&&(this.parent.drawLayer.show(t(this,l),i),this.parent.drawLayer.show(t(this,o),i))}static startHighlighting(i,D,{target:ct,x:pt,y:yt}){const{x:Ft,y:$t,width:kt,height:Kt}=ct.getBoundingClientRect(),Vt=ke=>{F(this,ae,ra).call(this,i,ke)},we={capture:!0,passive:!1},xe=ke=>{ke.preventDefault(),ke.stopPropagation()},Ce=ke=>{ct.removeEventListener("pointermove",Vt),window.removeEventListener("blur",Ce),window.removeEventListener("pointerup",Ce),window.removeEventListener("pointerdown",xe,we),window.removeEventListener("contextmenu",tt.noContextMenu),F(this,P,aa).call(this,i,ke)};window.addEventListener("blur",Ce),window.addEventListener("pointerup",Ce),window.addEventListener("pointerdown",xe,we),window.addEventListener("contextmenu",tt.noContextMenu),ct.addEventListener("pointermove",Vt),this._freeHighlight=new M.FreeOutliner({x:pt,y:yt},[Ft,$t,kt,Kt],i.scale,this._defaultThickness/2,D,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=i.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(i,D,ct){var ke;const pt=super.deserialize(i,D,ct),{rect:[yt,Ft,$t,kt],color:Kt,quadPoints:Vt}=i;pt.color=e.Util.makeHexColor(...Kt),N(pt,p,i.opacity);const[we,xe]=pt.pageDimensions;pt.width=($t-yt)/we,pt.height=(kt-Ft)/xe;const Ce=N(pt,se,[]);for(let ze=0;ze<Vt.length;ze+=8)Ce.push({x:(Vt[4]-$t)/we,y:(kt-(1-Vt[ze+5]))/xe,width:(Vt[ze+2]-Vt[ze])/we,height:(Vt[ze+5]-Vt[ze+1])/xe});return F(ke=pt,f,On).call(ke),pt}serialize(i=!1){if(this.isEmpty()||i)return null;const D=this.getRect(0,0),ct=E.AnnotationEditor._colorManager.convert(this.color);return{annotationType:e.AnnotationEditorType.HIGHLIGHT,color:ct,opacity:t(this,p),thickness:t(this,n),quadPoints:F(this,ve,sa).call(this),outlines:F(this,fe,na).call(this,D),pageIndex:this.pageIndex,rect:D,rotation:F(this,ee,xs).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};oe=new WeakMap,Se=new WeakMap,se=new WeakMap,Ee=new WeakMap,ne=new WeakMap,lt=new WeakMap,s=new WeakMap,r=new WeakMap,u=new WeakMap,v=new WeakMap,l=new WeakMap,x=new WeakMap,y=new WeakMap,S=new WeakMap,p=new WeakMap,o=new WeakMap,h=new WeakMap,n=new WeakMap,a=new WeakMap,f=new WeakSet,On=function(){const i=new M.Outliner(t(this,se),.001);N(this,v,i.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=t(this,v).box;const D=new M.Outliner(t(this,se),.0025,.001,this._uiManager.direction==="ltr");N(this,lt,D.getOutlines());const{lastPoint:ct}=t(this,lt).box;N(this,S,[(ct[0]-this.x)/this.width,(ct[1]-this.y)/this.height])},w=new WeakSet,Nn=function({highlightOutlines:i,highlightId:D,clipPathId:ct}){var Vt,we;if(N(this,v,i),N(this,lt,i.getNewOutline(t(this,n)/2+1.5,.0025)),D>=0)N(this,l,D),N(this,Ee,ct),this.parent.drawLayer.finalizeLine(D,i),N(this,o,this.parent.drawLayer.highlightOutline(t(this,lt)));else if(this.parent){const xe=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(t(this,l),i),this.parent.drawLayer.updateBox(t(this,l),F(Vt=dt,ht,ts).call(Vt,t(this,v).box,(xe-this.rotation+360)%360)),this.parent.drawLayer.updateLine(t(this,o),t(this,lt)),this.parent.drawLayer.updateBox(t(this,o),F(we=dt,ht,ts).call(we,t(this,lt).box,xe))}const{x:yt,y:Ft,width:$t,height:kt}=i.box;switch(this.rotation){case 0:this.x=yt,this.y=Ft,this.width=$t,this.height=kt;break;case 90:{const[xe,Ce]=this.parentDimensions;this.x=Ft,this.y=1-yt,this.width=$t*Ce/xe,this.height=kt*xe/Ce;break}case 180:this.x=1-yt,this.y=1-Ft,this.width=$t,this.height=kt;break;case 270:{const[xe,Ce]=this.parentDimensions;this.x=1-Ft,this.y=yt,this.width=$t*Ce/xe,this.height=kt*xe/Ce;break}}const{lastPoint:Kt}=t(this,lt).box;N(this,S,[(Kt[0]-yt)/$t,(Kt[1]-Ft)/kt])},Z=new WeakSet,Zr=function(i){const D=pt=>{var yt,Ft;this.color=pt,(yt=this.parent)==null||yt.drawLayer.changeColor(t(this,l),pt),(Ft=t(this,ne))==null||Ft.updateColor(pt)},ct=this.color;this.addCommands({cmd:D.bind(this,i),undo:D.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e.AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(i)},!0)},st=new WeakSet,ta=function(i){const D=t(this,n),ct=pt=>{N(this,n,pt),F(this,R,ea).call(this,pt)};this.addCommands({cmd:ct.bind(this,i),undo:ct.bind(this,D),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:i},!0)},R=new WeakSet,ea=function(i){if(!t(this,x))return;F(this,w,Nn).call(this,{highlightOutlines:t(this,v).getNewOutline(i/2)}),this.fixAndSetPosition();const[D,ct]=this.parentDimensions;this.setDims(this.width*D,this.height*ct)},k=new WeakSet,Hn=function(){t(this,l)===null||!this.parent||(this.parent.drawLayer.remove(t(this,l)),N(this,l,null),this.parent.drawLayer.remove(t(this,o)),N(this,o,null))},G=new WeakSet,ws=function(i=this.parent){t(this,l)===null&&({id:mi(this,l)._,clipPathId:mi(this,Ee)._}=i.drawLayer.highlight(t(this,v),this.color,t(this,p)),N(this,o,i.drawLayer.highlightOutline(t(this,lt))),t(this,u)&&(t(this,u).style.clipPath=t(this,Ee)))},ht=new WeakSet,ts=function({x:i,y:D,width:ct,height:pt},yt){switch(yt){case 90:return{x:1-D-pt,y:i,width:pt,height:ct};case 180:return{x:1-i-ct,y:1-D-pt,width:ct,height:pt};case 270:return{x:D,y:1-i-ct,width:pt,height:ct}}return{x:i,y:D,width:ct,height:pt}},xt=new WeakSet,ia=function(i){dt._keyboardManager.exec(this,i)},Xt=new WeakSet,tn=function(i){if(!t(this,oe))return;const D=window.getSelection();i?D.setPosition(t(this,oe),t(this,Se)):D.setPosition(t(this,s),t(this,r))},ee=new WeakSet,xs=function(){return t(this,x)?this.rotation:0},ve=new WeakSet,sa=function(){if(t(this,x))return null;const[i,D]=this.pageDimensions,ct=t(this,se),pt=new Array(ct.length*8);let yt=0;for(const{x:Ft,y:$t,width:kt,height:Kt}of ct){const Vt=Ft*i,we=(1-$t-Kt)*D;pt[yt]=pt[yt+4]=Vt,pt[yt+1]=pt[yt+3]=we,pt[yt+2]=pt[yt+6]=Vt+kt*i,pt[yt+5]=pt[yt+7]=we+Kt*D,yt+=8}return pt},fe=new WeakSet,na=function(i){return t(this,v).serialize(i,F(this,ee,xs).call(this))},ae=new WeakSet,ra=function(i,D){this._freeHighlight.add(D)&&i.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},P=new WeakSet,aa=function(i,D){this._freeHighlight.isEmpty()?i.drawLayer.removeFreeHighlight(this._freeHighlightId):i.createAndAddNewEditor(D,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},c(dt,ht),c(dt,ae),c(dt,P),be(dt,"_defaultColor",null),be(dt,"_defaultOpacity",1),be(dt,"_defaultThickness",12),be(dt,"_l10nPromise"),be(dt,"_type","highlight"),be(dt,"_editorType",e.AnnotationEditorType.HIGHLIGHT),be(dt,"_freeHighlightId",-1),be(dt,"_freeHighlight",null),be(dt,"_freeHighlightClipId","");let z=dt;const Oe=class Oe extends E.AnnotationEditor{constructor(i){super({...i,name:"inkEditor"});c(this,Ze);c(this,Ve);c(this,Ge);c(this,mt);c(this,jt);c(this,te);c(this,ye);c(this,He);c(this,$e);c(this,Mi);c(this,Is);c(this,Fs);c(this,di);c(this,ns);c(this,Bi);c(this,ji);c(this,bi);c(this,rs);c(this,zi);c(this,Ns);c(this,os);c(this,Gi);c(this,ki);c(this,ft,0);c(this,Et,0);c(this,_t,this.canvasPointermove.bind(this));c(this,Wt,this.canvasPointerleave.bind(this));c(this,qt,this.canvasPointerup.bind(this));c(this,Nt,this.canvasPointerdown.bind(this));c(this,Qt,null);c(this,Gt,new Path2D);c(this,Mt,!1);c(this,Bt,!1);c(this,Zt,!1);c(this,ue,null);c(this,de,0);c(this,Te,0);c(this,Me,null);this.color=i.color||null,this.thickness=i.thickness||null,this.opacity=i.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(i,D){E.AnnotationEditor.initialize(i,D)}static updateDefaultParams(i,D){switch(i){case e.AnnotationEditorParamsType.INK_THICKNESS:Oe._defaultThickness=D;break;case e.AnnotationEditorParamsType.INK_COLOR:Oe._defaultColor=D;break;case e.AnnotationEditorParamsType.INK_OPACITY:Oe._defaultOpacity=D/100;break}}updateParams(i,D){switch(i){case e.AnnotationEditorParamsType.INK_THICKNESS:F(this,Ze,oa).call(this,D);break;case e.AnnotationEditorParamsType.INK_COLOR:F(this,Ve,la).call(this,D);break;case e.AnnotationEditorParamsType.INK_OPACITY:F(this,Ge,ha).call(this,D);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,Oe._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,Oe._defaultColor||E.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(Oe._defaultOpacity*100)]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Oe._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,this.color||Oe._defaultColor||E.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Oe._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(F(this,Bi,en).call(this),F(this,ji,sn).call(this)),this.isAttachedToDOM||(this.parent.add(this),F(this,bi,es).call(this)),F(this,ki,_s).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,Qt)&&(clearTimeout(t(this,Qt)),N(this,Qt,null)),t(this,ue).disconnect(),N(this,ue,null),super.remove())}setParent(i){!this.parent&&i?this._uiManager.removeShouldRescale(this):this.parent&&i===null&&this._uiManager.addShouldRescale(this),super.setParent(i)}onScaleChanging(){const[i,D]=this.parentDimensions,ct=this.width*i,pt=this.height*D;this.setDimensions(ct,pt)}enableEditMode(){t(this,Mt)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",t(this,Nt)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,Nt)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,Mt)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),N(this,Mt,!0),this.div.classList.add("disabled"),F(this,ki,_s).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(i){this._focusEventsAllowed&&(super.focusin(i),this.enableEditMode())}canvasPointerdown(i){i.button!==0||!this.isInEditMode()||t(this,Mt)||(this.setInForeground(),i.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),F(this,te,da).call(this,i.offsetX,i.offsetY))}canvasPointermove(i){i.preventDefault(),F(this,ye,jn).call(this,i.offsetX,i.offsetY)}canvasPointerup(i){i.preventDefault(),F(this,ns,zn).call(this,i)}canvasPointerleave(i){F(this,ns,zn).call(this,i)}get isResizable(){return!this.isEmpty()&&t(this,Mt)}render(){if(this.div)return this.div;let i,D;this.width&&(i=this.x,D=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[ct,pt,yt,Ft]=F(this,mt,ca).call(this);if(this.setAt(ct,pt,0,0),this.setDims(yt,Ft),F(this,Bi,en).call(this),this.width){const[$t,kt]=this.parentDimensions;this.setAspectRatio(this.width*$t,this.height*kt),this.setAt(i*$t,D*kt,this.width*$t,this.height*kt),N(this,Zt,!0),F(this,bi,es).call(this),this.setDims(this.width*$t,this.height*kt),F(this,di,Oi).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return F(this,ji,sn).call(this),this.div}setDimensions(i,D){const ct=Math.round(i),pt=Math.round(D);if(t(this,de)===ct&&t(this,Te)===pt)return;N(this,de,ct),N(this,Te,pt),this.canvas.style.visibility="hidden";const[yt,Ft]=this.parentDimensions;this.width=i/yt,this.height=D/Ft,this.fixAndSetPosition(),t(this,Mt)&&F(this,rs,Gn).call(this,i,D),F(this,bi,es).call(this),F(this,di,Oi).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(i,D,ct){var ze,De,je;if(i instanceof _.InkAnnotationElement)return null;const pt=super.deserialize(i,D,ct);pt.thickness=i.thickness,pt.color=e.Util.makeHexColor(...i.color),pt.opacity=i.opacity;const[yt,Ft]=pt.pageDimensions,$t=pt.width*yt,kt=pt.height*Ft,Kt=pt.parentScale,Vt=i.thickness/2;N(pt,Mt,!0),N(pt,de,Math.round($t)),N(pt,Te,Math.round(kt));const{paths:we,rect:xe,rotation:Ce}=i;for(let{bezier:Be}of we){Be=F(ze=Oe,Os,ba).call(ze,Be,xe,Ce);const ci=[];pt.paths.push(ci);let fs=Kt*(Be[0]-Vt),ms=Kt*(Be[1]-Vt);for(let ai=2,xn=Be.length;ai<xn;ai+=6){const _n=Kt*(Be[ai]-Vt),Us=Kt*(Be[ai+1]-Vt),qs=Kt*(Be[ai+2]-Vt),$s=Kt*(Be[ai+3]-Vt),vs=Kt*(Be[ai+4]-Vt),zr=Kt*(Be[ai+5]-Vt);ci.push([[fs,ms],[_n,Us],[qs,$s],[vs,zr]]),fs=vs,ms=zr}const Gs=F(this,Ds,va).call(this,ci);pt.bezierPath2D.push(Gs)}const ke=F(De=pt,os,qn).call(De);return N(pt,Et,Math.max(E.AnnotationEditor.MIN_SIZE,ke[2]-ke[0])),N(pt,ft,Math.max(E.AnnotationEditor.MIN_SIZE,ke[3]-ke[1])),F(je=pt,rs,Gn).call(je,$t,kt),pt}serialize(){if(this.isEmpty())return null;const i=this.getRect(0,0),D=E.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:e.AnnotationEditorType.INK,color:D,thickness:this.thickness,opacity:this.opacity,paths:F(this,Ns,Aa).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,i),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};ft=new WeakMap,Et=new WeakMap,_t=new WeakMap,Wt=new WeakMap,qt=new WeakMap,Nt=new WeakMap,Qt=new WeakMap,Gt=new WeakMap,Mt=new WeakMap,Bt=new WeakMap,Zt=new WeakMap,ue=new WeakMap,de=new WeakMap,Te=new WeakMap,Me=new WeakMap,Ze=new WeakSet,oa=function(i){const D=pt=>{this.thickness=pt,F(this,ki,_s).call(this)},ct=this.thickness;this.addCommands({cmd:D.bind(this,i),undo:D.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Ve=new WeakSet,la=function(i){const D=pt=>{this.color=pt,F(this,di,Oi).call(this)},ct=this.color;this.addCommands({cmd:D.bind(this,i),undo:D.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ge=new WeakSet,ha=function(i){const D=pt=>{this.opacity=pt,F(this,di,Oi).call(this)};i/=100;const ct=this.opacity;this.addCommands({cmd:D.bind(this,i),undo:D.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},mt=new WeakSet,ca=function(){const{parentRotation:i,parentDimensions:[D,ct]}=this;switch(i){case 90:return[0,ct,ct,D];case 180:return[D,ct,D,ct];case 270:return[D,0,ct,D];default:return[0,0,D,ct]}},jt=new WeakSet,Bn=function(){const{ctx:i,color:D,opacity:ct,thickness:pt,parentScale:yt,scaleFactor:Ft}=this;i.lineWidth=pt*yt/Ft,i.lineCap="round",i.lineJoin="round",i.miterLimit=10,i.strokeStyle=`${D}${(0,A.opacityToHex)(ct)}`},te=new WeakSet,da=function(i,D){this.canvas.addEventListener("contextmenu",tt.noContextMenu),this.canvas.addEventListener("pointerleave",t(this,Wt)),this.canvas.addEventListener("pointermove",t(this,_t)),this.canvas.addEventListener("pointerup",t(this,qt)),this.canvas.removeEventListener("pointerdown",t(this,Nt)),this.isEditing=!0,t(this,Zt)||(N(this,Zt,!0),F(this,bi,es).call(this),this.thickness||(this.thickness=Oe._defaultThickness),this.color||(this.color=Oe._defaultColor||E.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Oe._defaultOpacity)),this.currentPath.push([i,D]),N(this,Bt,!1),F(this,jt,Bn).call(this),N(this,Me,()=>{F(this,Mi,ga).call(this),t(this,Me)&&window.requestAnimationFrame(t(this,Me))}),window.requestAnimationFrame(t(this,Me))},ye=new WeakSet,jn=function(i,D){const[ct,pt]=this.currentPath.at(-1);if(this.currentPath.length>1&&i===ct&&D===pt)return;const yt=this.currentPath;let Ft=t(this,Gt);if(yt.push([i,D]),N(this,Bt,!0),yt.length<=2){Ft.moveTo(...yt[0]),Ft.lineTo(i,D);return}yt.length===3&&(N(this,Gt,Ft=new Path2D),Ft.moveTo(...yt[0])),F(this,Is,fa).call(this,Ft,...yt.at(-3),...yt.at(-2),i,D)},He=new WeakSet,ua=function(){if(this.currentPath.length===0)return;const i=this.currentPath.at(-1);t(this,Gt).lineTo(...i)},$e=new WeakSet,pa=function(i,D){N(this,Me,null),i=Math.min(Math.max(i,0),this.canvas.width),D=Math.min(Math.max(D,0),this.canvas.height),F(this,ye,jn).call(this,i,D),F(this,He,ua).call(this);let ct;if(this.currentPath.length!==1)ct=F(this,Fs,ma).call(this);else{const kt=[i,D];ct=[[kt,kt.slice(),kt.slice(),kt]]}const pt=t(this,Gt),yt=this.currentPath;this.currentPath=[],N(this,Gt,new Path2D);const Ft=()=>{this.allRawPaths.push(yt),this.paths.push(ct),this.bezierPath2D.push(pt),this._uiManager.rebuild(this)},$t=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(F(this,Bi,en).call(this),F(this,ji,sn).call(this)),F(this,ki,_s).call(this))};this.addCommands({cmd:Ft,undo:$t,mustExec:!0})},Mi=new WeakSet,ga=function(){if(!t(this,Bt))return;N(this,Bt,!1);const i=Math.ceil(this.thickness*this.parentScale),D=this.currentPath.slice(-3),ct=D.map(Ft=>Ft[0]),pt=D.map(Ft=>Ft[1]);Math.min(...ct)-i,Math.max(...ct)+i,Math.min(...pt)-i,Math.max(...pt)+i;const{ctx:yt}=this;yt.save(),yt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Ft of this.bezierPath2D)yt.stroke(Ft);yt.stroke(t(this,Gt)),yt.restore()},Is=new WeakSet,fa=function(i,D,ct,pt,yt,Ft,$t){const kt=(D+pt)/2,Kt=(ct+yt)/2,Vt=(pt+Ft)/2,we=(yt+$t)/2;i.bezierCurveTo(kt+2*(pt-kt)/3,Kt+2*(yt-Kt)/3,Vt+2*(pt-Vt)/3,we+2*(yt-we)/3,Vt,we)},Fs=new WeakSet,ma=function(){const i=this.currentPath;if(i.length<=2)return[[i[0],i[0],i.at(-1),i.at(-1)]];const D=[];let ct,[pt,yt]=i[0];for(ct=1;ct<i.length-2;ct++){const[xe,Ce]=i[ct],[ke,ze]=i[ct+1],De=(xe+ke)/2,je=(Ce+ze)/2,Be=[pt+2*(xe-pt)/3,yt+2*(Ce-yt)/3],ci=[De+2*(xe-De)/3,je+2*(Ce-je)/3];D.push([[pt,yt],Be,ci,[De,je]]),[pt,yt]=[De,je]}const[Ft,$t]=i[ct],[kt,Kt]=i[ct+1],Vt=[pt+2*(Ft-pt)/3,yt+2*($t-yt)/3],we=[kt+2*(Ft-kt)/3,Kt+2*($t-Kt)/3];return D.push([[pt,yt],Vt,we,[kt,Kt]]),D},di=new WeakSet,Oi=function(){if(this.isEmpty()){F(this,zi,nn).call(this);return}F(this,jt,Bn).call(this);const{canvas:i,ctx:D}=this;D.setTransform(1,0,0,1,0,0),D.clearRect(0,0,i.width,i.height),F(this,zi,nn).call(this);for(const ct of this.bezierPath2D)D.stroke(ct)},ns=new WeakSet,zn=function(i){this.canvas.removeEventListener("pointerleave",t(this,Wt)),this.canvas.removeEventListener("pointermove",t(this,_t)),this.canvas.removeEventListener("pointerup",t(this,qt)),this.canvas.addEventListener("pointerdown",t(this,Nt)),t(this,Qt)&&clearTimeout(t(this,Qt)),N(this,Qt,setTimeout(()=>{N(this,Qt,null),this.canvas.removeEventListener("contextmenu",tt.noContextMenu)},10)),F(this,$e,pa).call(this,i.offsetX,i.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Bi=new WeakSet,en=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ji=new WeakSet,sn=function(){N(this,ue,new ResizeObserver(i=>{const D=i[0].contentRect;D.width&&D.height&&this.setDimensions(D.width,D.height)})),t(this,ue).observe(this.div)},bi=new WeakSet,es=function(){if(!t(this,Zt))return;const[i,D]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*i),this.canvas.height=Math.ceil(this.height*D),F(this,zi,nn).call(this)},rs=new WeakSet,Gn=function(i,D){const ct=F(this,Gi,rn).call(this),pt=(i-ct)/t(this,Et),yt=(D-ct)/t(this,ft);this.scaleFactor=Math.min(pt,yt)},zi=new WeakSet,nn=function(){const i=F(this,Gi,rn).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+i,this.translationY*this.scaleFactor+i)},Ds=new WeakSet,va=function(i){const D=new Path2D;for(let ct=0,pt=i.length;ct<pt;ct++){const[yt,Ft,$t,kt]=i[ct];ct===0&&D.moveTo(...yt),D.bezierCurveTo(Ft[0],Ft[1],$t[0],$t[1],kt[0],kt[1])}return D},as=new WeakSet,Un=function(i,D,ct){const[pt,yt,Ft,$t]=D;switch(ct){case 0:for(let kt=0,Kt=i.length;kt<Kt;kt+=2)i[kt]+=pt,i[kt+1]=$t-i[kt+1];break;case 90:for(let kt=0,Kt=i.length;kt<Kt;kt+=2){const Vt=i[kt];i[kt]=i[kt+1]+pt,i[kt+1]=Vt+yt}break;case 180:for(let kt=0,Kt=i.length;kt<Kt;kt+=2)i[kt]=Ft-i[kt],i[kt+1]+=yt;break;case 270:for(let kt=0,Kt=i.length;kt<Kt;kt+=2){const Vt=i[kt];i[kt]=Ft-i[kt+1],i[kt+1]=$t-Vt}break;default:throw new Error("Invalid rotation")}return i},Os=new WeakSet,ba=function(i,D,ct){const[pt,yt,Ft,$t]=D;switch(ct){case 0:for(let kt=0,Kt=i.length;kt<Kt;kt+=2)i[kt]-=pt,i[kt+1]=$t-i[kt+1];break;case 90:for(let kt=0,Kt=i.length;kt<Kt;kt+=2){const Vt=i[kt];i[kt]=i[kt+1]-yt,i[kt+1]=Vt-pt}break;case 180:for(let kt=0,Kt=i.length;kt<Kt;kt+=2)i[kt]=Ft-i[kt],i[kt+1]-=yt;break;case 270:for(let kt=0,Kt=i.length;kt<Kt;kt+=2){const Vt=i[kt];i[kt]=$t-i[kt+1],i[kt+1]=Ft-Vt}break;default:throw new Error("Invalid rotation")}return i},Ns=new WeakSet,Aa=function(i,D,ct,pt){var Kt,Vt;const yt=[],Ft=this.thickness/2,$t=i*D+Ft,kt=i*ct+Ft;for(const we of this.paths){const xe=[],Ce=[];for(let ke=0,ze=we.length;ke<ze;ke++){const[De,je,Be,ci]=we[ke];if(De[0]===ci[0]&&De[1]===ci[1]&&ze===1){const $s=i*De[0]+$t,vs=i*De[1]+kt;xe.push($s,vs),Ce.push($s,vs);break}const fs=i*De[0]+$t,ms=i*De[1]+kt,Gs=i*je[0]+$t,ai=i*je[1]+kt,xn=i*Be[0]+$t,_n=i*Be[1]+kt,Us=i*ci[0]+$t,qs=i*ci[1]+kt;ke===0&&(xe.push(fs,ms),Ce.push(fs,ms)),xe.push(Gs,ai,xn,_n,Us,qs),Ce.push(Gs,ai),ke===ze-1&&Ce.push(Us,qs)}yt.push({bezier:F(Kt=Oe,as,Un).call(Kt,xe,pt,this.rotation),points:F(Vt=Oe,as,Un).call(Vt,Ce,pt,this.rotation)})}return yt},os=new WeakSet,qn=function(){let i=1/0,D=-1/0,ct=1/0,pt=-1/0;for(const yt of this.paths)for(const[Ft,$t,kt,Kt]of yt){const Vt=e.Util.bezierBoundingBox(...Ft,...$t,...kt,...Kt);i=Math.min(i,Vt[0]),ct=Math.min(ct,Vt[1]),D=Math.max(D,Vt[2]),pt=Math.max(pt,Vt[3])}return[i,ct,D,pt]},Gi=new WeakSet,rn=function(){return t(this,Mt)?Math.ceil(this.thickness*this.parentScale):0},ki=new WeakSet,_s=function(i=!1){if(this.isEmpty())return;if(!t(this,Mt)){F(this,di,Oi).call(this);return}const D=F(this,os,qn).call(this),ct=F(this,Gi,rn).call(this);N(this,Et,Math.max(E.AnnotationEditor.MIN_SIZE,D[2]-D[0])),N(this,ft,Math.max(E.AnnotationEditor.MIN_SIZE,D[3]-D[1]));const pt=Math.ceil(ct+t(this,Et)*this.scaleFactor),yt=Math.ceil(ct+t(this,ft)*this.scaleFactor),[Ft,$t]=this.parentDimensions;this.width=pt/Ft,this.height=yt/$t,this.setAspectRatio(pt,yt);const kt=this.translationX,Kt=this.translationY;this.translationX=-D[0],this.translationY=-D[1],F(this,bi,es).call(this),F(this,di,Oi).call(this),N(this,de,pt),N(this,Te,yt),this.setDims(pt,yt);const Vt=i?ct/this.scaleFactor/2:0;this.translate(kt-this.translationX-Vt,Kt-this.translationY-Vt)},c(Oe,Ds),c(Oe,as),c(Oe,Os),be(Oe,"_defaultColor",null),be(Oe,"_defaultOpacity",1),be(Oe,"_defaultThickness",1),be(Oe,"_type","ink"),be(Oe,"_editorType",e.AnnotationEditorType.INK);let L=Oe;const ds=class ds extends E.AnnotationEditor{constructor(i){super({...i,name:"stampEditor"});c(this,Pi);c(this,Ri);c(this,qi);c(this,hs);c(this,Hs);c(this,Bs);c(this,cs);c(this,$i);c(this,js);c(this,Ue,null);c(this,qe,null);c(this,Ai,null);c(this,ui,null);c(this,yi,null);c(this,Ui,"");c(this,oi,null);c(this,Li,null);c(this,li,null);c(this,ni,!1);c(this,ls,!1);N(this,ui,i.bitmapUrl),N(this,yi,i.bitmapFile)}static initialize(i,D){E.AnnotationEditor.initialize(i,D)}static get supportedTypes(){const i=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,e.shadow)(this,"supportedTypes",i.map(D=>`image/${D}`))}static get supportedTypesStr(){return(0,e.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(i){return this.supportedTypes.includes(i)}static paste(i,D){D.pasteEditor(e.AnnotationEditorType.STAMP,{bitmapFile:i.getAsFile()})}remove(){var i,D;t(this,qe)&&(N(this,Ue,null),this._uiManager.imageManager.deleteId(t(this,qe)),(i=t(this,oi))==null||i.remove(),N(this,oi,null),(D=t(this,Li))==null||D.disconnect(),N(this,Li,null),t(this,li)&&(clearTimeout(t(this,li)),N(this,li,null))),super.remove()}rebuild(){if(!this.parent){t(this,qe)&&F(this,qi,an).call(this);return}super.rebuild(),this.div!==null&&(t(this,qe)&&t(this,oi)===null&&F(this,qi,an).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(t(this,Ai)||t(this,Ue)||t(this,ui)||t(this,yi)||t(this,qe))}get isResizable(){return!0}render(){if(this.div)return this.div;let i,D;if(this.width&&(i=this.x,D=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),t(this,Ue)?F(this,hs,$n).call(this):F(this,qi,an).call(this),this.width){const[ct,pt]=this.parentDimensions;this.setAt(i*ct,D*pt,this.width*ct,this.height*pt)}return this.div}getImageForAltText(){return t(this,oi)}static deserialize(i,D,ct){if(i instanceof _.StampAnnotationElement)return null;const pt=super.deserialize(i,D,ct),{rect:yt,bitmapUrl:Ft,bitmapId:$t,isSvg:kt,accessibilityData:Kt}=i;$t&&ct.imageManager.isValidId($t)?N(pt,qe,$t):N(pt,ui,Ft),N(pt,ni,kt);const[Vt,we]=pt.pageDimensions;return pt.width=(yt[2]-yt[0])/Vt,pt.height=(yt[3]-yt[1])/we,Kt&&(pt.altTextData=Kt),pt}serialize(i=!1,D=null){if(this.isEmpty())return null;const ct={annotationType:e.AnnotationEditorType.STAMP,bitmapId:t(this,qe),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,ni),structTreeParentId:this._structTreeParentId};if(i)return ct.bitmapUrl=F(this,$i,on).call(this,!0),ct.accessibilityData=this.altTextData,ct;const{decorative:pt,altText:yt}=this.altTextData;if(!pt&&yt&&(ct.accessibilityData={type:"Figure",alt:yt}),D===null)return ct;D.stamps||(D.stamps=new Map);const Ft=t(this,ni)?(ct.rect[2]-ct.rect[0])*(ct.rect[3]-ct.rect[1]):null;if(!D.stamps.has(t(this,qe)))D.stamps.set(t(this,qe),{area:Ft,serialized:ct}),ct.bitmap=F(this,$i,on).call(this,!1);else if(t(this,ni)){const $t=D.stamps.get(t(this,qe));Ft>$t.area&&($t.area=Ft,$t.serialized.bitmap.close(),$t.serialized.bitmap=F(this,$i,on).call(this,!1))}return ct}};Ue=new WeakMap,qe=new WeakMap,Ai=new WeakMap,ui=new WeakMap,yi=new WeakMap,Ui=new WeakMap,oi=new WeakMap,Li=new WeakMap,li=new WeakMap,ni=new WeakMap,ls=new WeakMap,Pi=new WeakSet,Es=function(i,D=!1){if(!i){this.remove();return}N(this,Ue,i.bitmap),D||(N(this,qe,i.id),N(this,ni,i.isSvg)),i.file&&N(this,Ui,i.file.name),F(this,hs,$n).call(this)},Ri=new WeakSet,Ts=function(){N(this,Ai,null),this._uiManager.enableWaiting(!1),t(this,oi)&&this.div.focus()},qi=new WeakSet,an=function(){if(t(this,qe)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(t(this,qe)).then(D=>F(this,Pi,Es).call(this,D,!0)).finally(()=>F(this,Ri,Ts).call(this));return}if(t(this,ui)){const D=t(this,ui);N(this,ui,null),this._uiManager.enableWaiting(!0),N(this,Ai,this._uiManager.imageManager.getFromUrl(D).then(ct=>F(this,Pi,Es).call(this,ct)).finally(()=>F(this,Ri,Ts).call(this)));return}if(t(this,yi)){const D=t(this,yi);N(this,yi,null),this._uiManager.enableWaiting(!0),N(this,Ai,this._uiManager.imageManager.getFromFile(D).then(ct=>F(this,Pi,Es).call(this,ct)).finally(()=>F(this,Ri,Ts).call(this)));return}const i=document.createElement("input");i.type="file",i.accept=ds.supportedTypesStr,N(this,Ai,new Promise(D=>{i.addEventListener("change",async()=>{if(!i.files||i.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const ct=await this._uiManager.imageManager.getFromFile(i.files[0]);F(this,Pi,Es).call(this,ct)}D()}),i.addEventListener("cancel",()=>{this.remove(),D()})}).finally(()=>F(this,Ri,Ts).call(this))),i.click()},hs=new WeakSet,$n=function(){const{div:i}=this;let{width:D,height:ct}=t(this,Ue);const[pt,yt]=this.pageDimensions,Ft=.75;if(this.width)D=this.width*pt,ct=this.height*yt;else if(D>Ft*pt||ct>Ft*yt){const Vt=Math.min(Ft*pt/D,Ft*yt/ct);D*=Vt,ct*=Vt}const[$t,kt]=this.parentDimensions;this.setDims(D*$t/pt,ct*kt/yt),this._uiManager.enableWaiting(!1);const Kt=N(this,oi,document.createElement("canvas"));i.append(Kt),i.hidden=!1,F(this,cs,Wn).call(this,D,ct),F(this,js,xa).call(this),t(this,ls)||(this.parent.addUndoableEditor(this),N(this,ls,!0)),this._reportTelemetry({action:"inserted_image"}),t(this,Ui)&&Kt.setAttribute("aria-label",t(this,Ui))},Hs=new WeakSet,ya=function(i,D){var Ft;const[ct,pt]=this.parentDimensions;this.width=i/ct,this.height=D/pt,this.setDims(i,D),(Ft=this._initialOptions)!=null&&Ft.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,t(this,li)!==null&&clearTimeout(t(this,li)),N(this,li,setTimeout(()=>{N(this,li,null),F(this,cs,Wn).call(this,i,D)},200))},Bs=new WeakSet,wa=function(i,D){const{width:ct,height:pt}=t(this,Ue);let yt=ct,Ft=pt,$t=t(this,Ue);for(;yt>2*i||Ft>2*D;){const kt=yt,Kt=Ft;yt>2*i&&(yt=yt>=16384?Math.floor(yt/2)-1:Math.ceil(yt/2)),Ft>2*D&&(Ft=Ft>=16384?Math.floor(Ft/2)-1:Math.ceil(Ft/2));const Vt=new OffscreenCanvas(yt,Ft);Vt.getContext("2d").drawImage($t,0,0,kt,Kt,0,0,yt,Ft),$t=Vt.transferToImageBitmap()}return $t},cs=new WeakSet,Wn=function(i,D){i=Math.ceil(i),D=Math.ceil(D);const ct=t(this,oi);if(!ct||ct.width===i&&ct.height===D)return;ct.width=i,ct.height=D;const pt=t(this,ni)?t(this,Ue):F(this,Bs,wa).call(this,i,D);if(this._uiManager.hasMLManager&&!this.hasAltText()){const Ft=new OffscreenCanvas(i,D);Ft.getContext("2d").drawImage(pt,0,0,pt.width,pt.height,0,0,i,D),Ft.convertToBlob().then($t=>{const kt=new FileReader;kt.onload=()=>{const Kt=kt.result;this._uiManager.mlGuess({service:"image-to-text",request:{imageData:Kt}}).then(Vt=>{const we=(Vt==null?void 0:Vt.output)||"";this.parent&&we&&!this.hasAltText()&&(this.altTextData={altText:we,decorative:!1})})},kt.readAsDataURL($t)})}const yt=ct.getContext("2d");yt.filter=this._uiManager.hcmFilter,yt.drawImage(pt,0,0,pt.width,pt.height,0,0,i,D)},$i=new WeakSet,on=function(i){if(i){if(t(this,ni)){const ct=this._uiManager.imageManager.getSvgUrl(t(this,qe));if(ct)return ct}const D=document.createElement("canvas");return{width:D.width,height:D.height}=t(this,Ue),D.getContext("2d").drawImage(t(this,Ue),0,0),D.toDataURL()}if(t(this,ni)){const[D,ct]=this.pageDimensions,pt=Math.round(this.width*D*tt.PixelsPerInch.PDF_TO_CSS_UNITS),yt=Math.round(this.height*ct*tt.PixelsPerInch.PDF_TO_CSS_UNITS),Ft=new OffscreenCanvas(pt,yt);return Ft.getContext("2d").drawImage(t(this,Ue),0,0,t(this,Ue).width,t(this,Ue).height,0,0,pt,yt),Ft.transferToImageBitmap()}return structuredClone(t(this,Ue))},js=new WeakSet,xa=function(){N(this,Li,new ResizeObserver(i=>{const D=i[0].contentRect;D.width&&D.height&&F(this,Hs,ya).call(this,D.width,D.height)})),t(this,Li).observe(this.div)},be(ds,"_type","stamp"),be(ds,"_editorType",e.AnnotationEditorType.STAMP);let q=ds;const ri=class ri{constructor({uiManager:vt,pageIndex:i,div:D,accessibilityManager:ct,annotationLayer:pt,drawLayer:yt,textLayer:Ft,viewport:$t,l10n:kt}){c(this,zs);c(this,us);c(this,ps);c(this,gs);c(this,Yi);c(this,Ii,void 0);c(this,Wi,!1);c(this,hi,null);c(this,Fi,null);c(this,pi,null);c(this,gi,null);c(this,fi,null);c(this,ti,new Map);c(this,wi,!1);c(this,Xi,!1);c(this,Vi,!1);c(this,Ke,null);c(this,pe,void 0);const Kt=[...t(ri,xi).values()];if(!ri._initialized){ri._initialized=!0;for(const Vt of Kt)Vt.initialize(kt,vt)}vt.registerEditorTypes(Kt),N(this,pe,vt),this.pageIndex=i,this.div=D,N(this,Ii,ct),N(this,hi,pt),this.viewport=$t,N(this,Ke,Ft),this.drawLayer=yt,t(this,pe).addLayer(this)}get isEmpty(){return t(this,ti).size===0}get isInvisible(){return this.isEmpty&&t(this,pe).getMode()===e.AnnotationEditorType.NONE}updateToolbar(vt){t(this,pe).updateToolbar(vt)}updateMode(vt=t(this,pe).getMode()){switch(F(this,Yi,ln).call(this),vt){case e.AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case e.AnnotationEditorType.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case e.AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;for(const D of t(ri,xi).values())i.toggle(`${D._type}Editing`,vt===D._editorType);this.div.hidden=!1}hasTextLayer(vt){var i;return vt===((i=t(this,Ke))==null?void 0:i.div)}addInkEditorIfNeeded(vt){if(t(this,pe).getMode()===e.AnnotationEditorType.INK){if(!vt){for(const i of t(this,ti).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(vt){t(this,pe).setEditingState(vt)}addCommands(vt){t(this,pe).addCommands(vt)}togglePointerEvents(vt=!1){this.div.classList.toggle("disabled",!vt)}toggleAnnotationLayerPointerEvents(vt=!1){var i;(i=t(this,hi))==null||i.div.classList.toggle("disabled",!vt)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const vt=new Set;for(const D of t(this,ti).values())D.enableEditing(),D.annotationElementId&&vt.add(D.annotationElementId);if(!t(this,hi))return;const i=t(this,hi).getEditableAnnotations();for(const D of i){if(D.hide(),t(this,pe).isDeletedAnnotationElement(D.data.id)||vt.has(D.data.id))continue;const ct=this.deserialize(D);ct&&(this.addOrRebuild(ct),ct.enableEditing())}}disable(){var D;N(this,Vi,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const vt=new Set;for(const ct of t(this,ti).values()){if(ct.disableEditing(),!ct.annotationElementId||ct.serialize()!==null){vt.add(ct.annotationElementId);continue}(D=this.getEditableAnnotation(ct.annotationElementId))==null||D.show(),ct.remove()}if(t(this,hi)){const ct=t(this,hi).getEditableAnnotations();for(const pt of ct){const{id:yt}=pt.data;vt.has(yt)||t(this,pe).isDeletedAnnotationElement(yt)||pt.show()}}F(this,Yi,ln).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const ct of t(ri,xi).values())i.remove(`${ct._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),N(this,Vi,!1)}getEditableAnnotation(vt){var i;return((i=t(this,hi))==null?void 0:i.getEditableAnnotation(vt))||null}setActiveEditor(vt){t(this,pe).getActive()!==vt&&t(this,pe).setActiveEditor(vt)}enableTextSelection(){var vt;this.div.tabIndex=-1,(vt=t(this,Ke))!=null&&vt.div&&!t(this,gi)&&(N(this,gi,F(this,zs,_a).bind(this)),t(this,Ke).div.addEventListener("pointerdown",t(this,gi)),t(this,Ke).div.classList.add("highlighting"))}disableTextSelection(){var vt;this.div.tabIndex=0,(vt=t(this,Ke))!=null&&vt.div&&t(this,gi)&&(t(this,Ke).div.removeEventListener("pointerdown",t(this,gi)),N(this,gi,null),t(this,Ke).div.classList.remove("highlighting"))}enableClick(){t(this,pi)||(N(this,pi,this.pointerdown.bind(this)),N(this,Fi,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",t(this,pi)),this.div.addEventListener("pointerup",t(this,Fi)))}disableClick(){t(this,pi)&&(this.div.removeEventListener("pointerdown",t(this,pi)),this.div.removeEventListener("pointerup",t(this,Fi)),N(this,pi,null),N(this,Fi,null))}attach(vt){t(this,ti).set(vt.id,vt);const{annotationElementId:i}=vt;i&&t(this,pe).isDeletedAnnotationElement(i)&&t(this,pe).removeDeletedAnnotationElement(vt)}detach(vt){var i;t(this,ti).delete(vt.id),(i=t(this,Ii))==null||i.removePointerInTextLayer(vt.contentDiv),!t(this,Vi)&&vt.annotationElementId&&t(this,pe).addDeletedAnnotationElement(vt)}remove(vt){this.detach(vt),t(this,pe).removeEditor(vt),vt.div.remove(),vt.isAttachedToDOM=!1,t(this,Xi)||this.addInkEditorIfNeeded(!1)}changeParent(vt){var i;vt.parent!==this&&(vt.annotationElementId&&(t(this,pe).addDeletedAnnotationElement(vt.annotationElementId),E.AnnotationEditor.deleteAnnotationElement(vt),vt.annotationElementId=null),this.attach(vt),(i=vt.parent)==null||i.detach(vt),vt.setParent(this),vt.div&&vt.isAttachedToDOM&&(vt.div.remove(),this.div.append(vt.div)))}add(vt){if(!(vt.parent===this&&vt.isAttachedToDOM)){if(this.changeParent(vt),t(this,pe).addEditor(vt),this.attach(vt),!vt.isAttachedToDOM){const i=vt.render();this.div.append(i),vt.isAttachedToDOM=!0}vt.fixAndSetPosition(),vt.onceAdded(),t(this,pe).addToAnnotationStorage(vt),vt._reportTelemetry(vt.telemetryInitialData)}}moveEditorInDOM(vt){var D;if(!vt.isAttachedToDOM)return;const{activeElement:i}=document;vt.div.contains(i)&&!t(this,fi)&&(vt._focusEventsAllowed=!1,N(this,fi,setTimeout(()=>{N(this,fi,null),vt.div.contains(document.activeElement)?vt._focusEventsAllowed=!0:(vt.div.addEventListener("focusin",()=>{vt._focusEventsAllowed=!0},{once:!0}),i.focus())},0))),vt._structTreeParentId=(D=t(this,Ii))==null?void 0:D.moveElementInDOM(this.div,vt.div,vt.contentDiv,!0)}addOrRebuild(vt){vt.needsToBeRebuilt()?(vt.parent||(vt.parent=this),vt.rebuild(),vt.show()):this.add(vt)}addUndoableEditor(vt){const i=()=>vt._uiManager.rebuild(vt),D=()=>{vt.remove()};this.addCommands({cmd:i,undo:D,mustExec:!1})}getNextId(){return t(this,pe).getId()}canCreateNewEmptyEditor(){var vt;return(vt=t(this,us,Xn))==null?void 0:vt.canCreateNewEmptyEditor()}pasteEditor(vt,i){t(this,pe).updateToolbar(vt),t(this,pe).updateMode(vt);const{offsetX:D,offsetY:ct}=F(this,gs,Yn).call(this),pt=this.getNextId(),yt=F(this,ps,Vn).call(this,{parent:this,id:pt,x:D,y:ct,uiManager:t(this,pe),isCentered:!0,...i});yt&&this.add(yt)}deserialize(vt){var i;return((i=t(ri,xi).get(vt.annotationType??vt.annotationEditorType))==null?void 0:i.deserialize(vt,this,t(this,pe)))||null}createAndAddNewEditor(vt,i,D={}){const ct=this.getNextId(),pt=F(this,ps,Vn).call(this,{parent:this,id:ct,x:vt.offsetX,y:vt.offsetY,uiManager:t(this,pe),isCentered:i,...D});return pt&&this.add(pt),pt}addNewEditor(){this.createAndAddNewEditor(F(this,gs,Yn).call(this),!0)}setSelected(vt){t(this,pe).setSelected(vt)}toggleSelected(vt){t(this,pe).toggleSelected(vt)}isSelected(vt){return t(this,pe).isSelected(vt)}unselect(vt){t(this,pe).unselect(vt)}pointerup(vt){const{isMac:i}=e.FeatureTest.platform;if(!(vt.button!==0||vt.ctrlKey&&i)&&vt.target===this.div&&t(this,wi)){if(N(this,wi,!1),!t(this,Wi)){N(this,Wi,!0);return}if(t(this,pe).getMode()===e.AnnotationEditorType.STAMP){t(this,pe).unselectAll();return}this.createAndAddNewEditor(vt,!1)}}pointerdown(vt){if(t(this,pe).getMode()===e.AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),t(this,wi)){N(this,wi,!1);return}const{isMac:i}=e.FeatureTest.platform;if(vt.button!==0||vt.ctrlKey&&i||vt.target!==this.div)return;N(this,wi,!0);const D=t(this,pe).getActive();N(this,Wi,!D||D.isEmpty())}findNewParent(vt,i,D){const ct=t(this,pe).findParent(i,D);return ct===null||ct===this?!1:(ct.changeParent(vt),!0)}destroy(){var vt,i;((vt=t(this,pe).getActive())==null?void 0:vt.parent)===this&&(t(this,pe).commitOrRemove(),t(this,pe).setActiveEditor(null)),t(this,fi)&&(clearTimeout(t(this,fi)),N(this,fi,null));for(const D of t(this,ti).values())(i=t(this,Ii))==null||i.removePointerInTextLayer(D.contentDiv),D.setParent(null),D.isAttachedToDOM=!1,D.div.remove();this.div=null,t(this,ti).clear(),t(this,pe).removeLayer(this)}render({viewport:vt}){this.viewport=vt,(0,tt.setLayerDimensions)(this.div,vt);for(const i of t(this,pe).getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:vt}){t(this,pe).commitOrRemove(),F(this,Yi,ln).call(this);const i=this.viewport.rotation,D=vt.rotation;if(this.viewport=vt,(0,tt.setLayerDimensions)(this.div,{rotation:D}),i!==D)for(const ct of t(this,ti).values())ct.rotate(D);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:vt,pageHeight:i}=this.viewport.rawDims;return[vt,i]}get scale(){return t(this,pe).viewParameters.realScale}};Ii=new WeakMap,Wi=new WeakMap,hi=new WeakMap,Fi=new WeakMap,pi=new WeakMap,gi=new WeakMap,fi=new WeakMap,ti=new WeakMap,wi=new WeakMap,Xi=new WeakMap,Vi=new WeakMap,Ke=new WeakMap,pe=new WeakMap,xi=new WeakMap,zs=new WeakSet,_a=function(vt){if(t(this,pe).unselectAll(),vt.target===t(this,Ke).div){const{isMac:i}=e.FeatureTest.platform;if(vt.button!==0||vt.ctrlKey&&i)return;t(this,pe).showAllEditors("highlight",!0,!0),t(this,Ke).div.classList.add("free"),z.startHighlighting(this,t(this,pe).direction==="ltr",vt),t(this,Ke).div.addEventListener("pointerup",()=>{t(this,Ke).div.classList.remove("free")},{once:!0}),vt.preventDefault()}},us=new WeakSet,Xn=function(){return t(ri,xi).get(t(this,pe).getMode())},ps=new WeakSet,Vn=function(vt){const i=t(this,us,Xn);return i?new i.prototype.constructor(vt):null},gs=new WeakSet,Yn=function(){const{x:vt,y:i,width:D,height:ct}=this.div.getBoundingClientRect(),pt=Math.max(0,vt),yt=Math.max(0,i),Ft=Math.min(window.innerWidth,vt+D),$t=Math.min(window.innerHeight,i+ct),kt=(pt+Ft)/2-vt,Kt=(yt+$t)/2-i,[Vt,we]=this.viewport.rotation%180===0?[kt,Kt]:[Kt,kt];return{offsetX:Vt,offsetY:we}},Yi=new WeakSet,ln=function(){N(this,Xi,!0);for(const vt of t(this,ti).values())vt.isEmpty()&&vt.remove();N(this,Xi,!1)},be(ri,"_initialized",!1),c(ri,xi,new Map([H,L,q,z].map(vt=>[vt._editorType,vt])));let W=ri},259:(d,C,m)=>{var it,H,M,T,tt,z,L,q,W,et,ut,nt,O,Kn,$,Qn,Q,Ea,At,Ni,St,Ta,wt,_i;m.d(C,{ColorPicker:()=>_});var e=m(292),E=m(830),A=m(419);const Lt=class Lt{constructor({editor:at=null,uiManager:bt=null}){c(this,O);c(this,$);c(this,Q);c(this,At);c(this,St);c(this,wt);c(this,it,F(this,Q,Ea).bind(this));c(this,H,F(this,St,Ta).bind(this));c(this,M,null);c(this,T,null);c(this,tt,void 0);c(this,z,null);c(this,L,!1);c(this,q,!1);c(this,W,null);c(this,et,void 0);c(this,ut,null);c(this,nt,void 0);var Pt;at?(N(this,q,!1),N(this,nt,e.AnnotationEditorParamsType.HIGHLIGHT_COLOR),N(this,W,at)):(N(this,q,!0),N(this,nt,e.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR)),N(this,ut,(at==null?void 0:at._uiManager)||bt),N(this,et,t(this,ut)._eventBus),N(this,tt,(at==null?void 0:at.color)||((Pt=t(this,ut))==null?void 0:Pt.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return(0,e.shadow)(this,"_keyboardManager",new E.KeyboardManager([[["Escape","mac+Escape"],Lt.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Lt.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Lt.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Lt.prototype._moveToPrevious],[["Home","mac+Home"],Lt.prototype._moveToBeginning],[["End","mac+End"],Lt.prototype._moveToEnd]]))}renderButton(){const at=N(this,M,document.createElement("button"));at.className="colorPicker",at.tabIndex="0",at.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),at.setAttribute("aria-haspopup",!0),at.addEventListener("click",F(this,At,Ni).bind(this)),at.addEventListener("keydown",t(this,it));const bt=N(this,T,document.createElement("span"));return bt.className="swatch",bt.setAttribute("aria-hidden",!0),bt.style.backgroundColor=t(this,tt),at.append(bt),at}renderMainDropdown(){const at=N(this,z,F(this,O,Kn).call(this));return at.setAttribute("aria-orientation","horizontal"),at.setAttribute("aria-labelledby","highlightColorPickerLabel"),at}_colorSelectFromKeyboard(at){if(at.target===t(this,M)){F(this,At,Ni).call(this,at);return}const bt=at.target.getAttribute("data-color");bt&&F(this,$,Qn).call(this,bt,at)}_moveToNext(at){var bt,Pt;if(!t(this,wt,_i)){F(this,At,Ni).call(this,at);return}if(at.target===t(this,M)){(bt=t(this,z).firstChild)==null||bt.focus();return}(Pt=at.target.nextSibling)==null||Pt.focus()}_moveToPrevious(at){var bt,Pt;if(at.target===((bt=t(this,z))==null?void 0:bt.firstChild)||at.target===t(this,M)){t(this,wt,_i)&&this._hideDropdownFromKeyboard();return}t(this,wt,_i)||F(this,At,Ni).call(this,at),(Pt=at.target.previousSibling)==null||Pt.focus()}_moveToBeginning(at){var bt;if(!t(this,wt,_i)){F(this,At,Ni).call(this,at);return}(bt=t(this,z).firstChild)==null||bt.focus()}_moveToEnd(at){var bt;if(!t(this,wt,_i)){F(this,At,Ni).call(this,at);return}(bt=t(this,z).lastChild)==null||bt.focus()}hideDropdown(){var at;(at=t(this,z))==null||at.classList.add("hidden"),window.removeEventListener("pointerdown",t(this,H))}_hideDropdownFromKeyboard(){var at;if(!t(this,q)){if(!t(this,wt,_i)){(at=t(this,W))==null||at.unselect();return}this.hideDropdown(),t(this,M).focus({preventScroll:!0,focusVisible:t(this,L)})}}updateColor(at){if(t(this,T)&&(t(this,T).style.backgroundColor=at),!t(this,z))return;const bt=t(this,ut).highlightColors.values();for(const Pt of t(this,z).children)Pt.setAttribute("aria-selected",bt.next().value===at)}destroy(){var at,bt;(at=t(this,M))==null||at.remove(),N(this,M,null),N(this,T,null),(bt=t(this,z))==null||bt.remove(),N(this,z,null)}};it=new WeakMap,H=new WeakMap,M=new WeakMap,T=new WeakMap,tt=new WeakMap,z=new WeakMap,L=new WeakMap,q=new WeakMap,W=new WeakMap,et=new WeakMap,ut=new WeakMap,nt=new WeakMap,O=new WeakSet,Kn=function(){const at=document.createElement("div");at.addEventListener("contextmenu",A.noContextMenu),at.className="dropdown",at.role="listbox",at.setAttribute("aria-multiselectable",!1),at.setAttribute("aria-orientation","vertical"),at.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[bt,Pt]of t(this,ut).highlightColors){const Rt=document.createElement("button");Rt.tabIndex="0",Rt.role="option",Rt.setAttribute("data-color",Pt),Rt.title=bt,Rt.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${bt}`);const Ut=document.createElement("span");Rt.append(Ut),Ut.className="swatch",Ut.style.backgroundColor=Pt,Rt.setAttribute("aria-selected",Pt===t(this,tt)),Rt.addEventListener("click",F(this,$,Qn).bind(this,Pt)),at.append(Rt)}return at.addEventListener("keydown",t(this,it)),at},$=new WeakSet,Qn=function(at,bt){bt.stopPropagation(),t(this,et).dispatch("switchannotationeditorparams",{source:this,type:t(this,nt),value:at})},Q=new WeakSet,Ea=function(at){Lt._keyboardManager.exec(this,at)},At=new WeakSet,Ni=function(at){if(t(this,wt,_i)){this.hideDropdown();return}if(N(this,L,at.detail===0),window.addEventListener("pointerdown",t(this,H)),t(this,z)){t(this,z).classList.remove("hidden");return}const bt=N(this,z,F(this,O,Kn).call(this));t(this,M).append(bt)},St=new WeakSet,Ta=function(at){var bt;(bt=t(this,z))!=null&&bt.contains(at.target)||this.hideDropdown()},wt=new WeakSet,_i=function(){return t(this,z)&&!t(this,z).classList.contains("hidden")};let _=Lt},310:(d,C,m)=>{var T,tt,z,L,q,W,et,ut,Jn,V,$,B,Q,ot,At,Dt,St,Ot,wt,Ct,Lt,Tt,at,bt,Pt,Rt,Ut,Yt,re,_e,ce,Zn,me,tr,oe,er,se,Sa,ne,Ca,s,ir,u,sr,l,nr,y,Ma,p,ka,h,La,a,Pa,I,rr,X,Ss;m.d(C,{AnnotationEditor:()=>H});var e=m(830),E=m(292),A=m(419);const O=class O{constructor(g){c(this,ut);c(this,T,"");c(this,tt,!1);c(this,z,null);c(this,L,null);c(this,q,null);c(this,W,!1);c(this,et,null);N(this,et,g)}static initialize(g){O._l10nPromise||(O._l10nPromise=g)}async render(){const g=N(this,z,document.createElement("button"));g.className="altText";const R=await O._l10nPromise.get("pdfjs-editor-alt-text-button-label");g.textContent=R,g.setAttribute("aria-label",R),g.tabIndex="0",g.addEventListener("contextmenu",A.noContextMenu),g.addEventListener("pointerdown",k=>k.stopPropagation());const J=k=>{k.preventDefault(),t(this,et)._uiManager.editAltText(t(this,et))};return g.addEventListener("click",J,{capture:!0}),g.addEventListener("keydown",k=>{k.target===g&&k.key==="Enter"&&(N(this,W,!0),J(k))}),await F(this,ut,Jn).call(this),g}finish(){t(this,z)&&(t(this,z).focus({focusVisible:t(this,W)}),N(this,W,!1))}isEmpty(){return!t(this,T)&&!t(this,tt)}get data(){return{altText:t(this,T),decorative:t(this,tt)}}set data({altText:g,decorative:R}){t(this,T)===g&&t(this,tt)===R||(N(this,T,g),N(this,tt,R),F(this,ut,Jn).call(this))}toggle(g=!1){t(this,z)&&(!g&&t(this,q)&&(clearTimeout(t(this,q)),N(this,q,null)),t(this,z).disabled=!g)}destroy(){var g;(g=t(this,z))==null||g.remove(),N(this,z,null),N(this,L,null)}};T=new WeakMap,tt=new WeakMap,z=new WeakMap,L=new WeakMap,q=new WeakMap,W=new WeakMap,et=new WeakMap,ut=new WeakSet,Jn=async function(){var J,k;const g=t(this,z);if(!g)return;if(!t(this,T)&&!t(this,tt)){g.classList.remove("done"),(J=t(this,L))==null||J.remove();return}g.classList.add("done"),O._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(b=>{g.setAttribute("aria-label",b)});let R=t(this,L);if(!R){N(this,L,R=document.createElement("span")),R.className="tooltip",R.setAttribute("role","tooltip");const b=R.id=`alt-text-tooltip-${t(this,et).id}`;g.setAttribute("aria-describedby",b);const G=100;g.addEventListener("mouseenter",()=>{N(this,q,setTimeout(()=>{N(this,q,null),t(this,L).classList.add("show"),t(this,et)._reportTelemetry({action:"alt_text_tooltip"})},G))}),g.addEventListener("mouseleave",()=>{var K;t(this,q)&&(clearTimeout(t(this,q)),N(this,q,null)),(K=t(this,L))==null||K.classList.remove("show")})}R.innerText=t(this,tt)?await O._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):t(this,T),R.parentNode||g.append(R),(k=t(this,et).getImageForAltText())==null||k.setAttribute("aria-describedby",R.id)},be(O,"_l10nPromise",null);let _=O;var it=m(362);const Y=class Y{constructor(g){c(this,ce);c(this,oe);c(this,se);c(this,ne);c(this,s);c(this,u);c(this,l);c(this,y);c(this,p);c(this,h);c(this,a);c(this,I);c(this,X);c(this,V,null);c(this,$,null);c(this,B,!1);c(this,Q,!1);c(this,ot,null);c(this,At,null);c(this,Dt,this.focusin.bind(this));c(this,St,this.focusout.bind(this));c(this,Ot,null);c(this,wt,"");c(this,Ct,!1);c(this,Lt,null);c(this,Tt,!1);c(this,at,!1);c(this,bt,!1);c(this,Pt,null);c(this,Rt,0);c(this,Ut,0);c(this,Yt,null);be(this,"_initialOptions",Object.create(null));be(this,"_isVisible",!0);be(this,"_uiManager",null);be(this,"_focusEventsAllowed",!0);be(this,"_l10nPromise",null);c(this,re,!1);c(this,_e,Y._zIndex++);this.constructor===Y&&(0,E.unreachable)("Cannot initialize AnnotationEditor."),this.parent=g.parent,this.id=g.id,this.width=this.height=null,this.pageIndex=g.parent.pageIndex,this.name=g.name,this.div=null,this._uiManager=g.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=g.isCentered,this._structTreeParentId=null;const{rotation:R,rawDims:{pageWidth:J,pageHeight:k,pageX:b,pageY:G}}=this.parent.viewport;this.rotation=R,this.pageRotation=(360+R-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[J,k],this.pageTranslation=[b,G];const[K,ht]=this.parentDimensions;this.x=g.x/K,this.y=g.y/ht,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const g=Y.prototype._resizeWithKeyboard,R=e.AnnotationEditorUIManager.TRANSLATE_SMALL,J=e.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,E.shadow)(this,"_resizerKeyboardManager",new e.KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],g,{args:[-R,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],g,{args:[-J,0]}],[["ArrowRight","mac+ArrowRight"],g,{args:[R,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],g,{args:[J,0]}],[["ArrowUp","mac+ArrowUp"],g,{args:[0,-R]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],g,{args:[0,-J]}],[["ArrowDown","mac+ArrowDown"],g,{args:[0,R]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],g,{args:[0,J]}],[["Escape","mac+Escape"],Y.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,E.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(g){const R=new M({id:g.parent.getNextId(),parent:g.parent,uiManager:g._uiManager});R.annotationElementId=g.annotationElementId,R.deleted=!0,R._uiManager.addToAnnotationStorage(R)}static initialize(g,R,J){if(Y._l10nPromise||(Y._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(b=>[b,g.get(b.replaceAll(/([A-Z])/g,G=>`-${G.toLowerCase()}`))]))),J==null?void 0:J.strings)for(const b of J.strings)Y._l10nPromise.set(b,g.get(b));if(Y._borderLineWidth!==-1)return;const k=getComputedStyle(document.documentElement);Y._borderLineWidth=parseFloat(k.getPropertyValue("--outline-width"))||0}static updateDefaultParams(g,R){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(g){return!1}static paste(g,R){(0,E.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return t(this,re)}set _isDraggable(g){var R;N(this,re,g),(R=this.div)==null||R.classList.toggle("draggable",g)}get isEnterHandled(){return!0}center(){const[g,R]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*R/(g*2),this.y+=this.width*g/(R*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*R/(g*2),this.y-=this.width*g/(R*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(g){this._uiManager.addCommands(g)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,_e)}setParent(g){g!==null?(this.pageIndex=g.pageIndex,this.pageDimensions=g.pageDimensions):F(this,X,Ss).call(this),this.parent=g}focusin(g){this._focusEventsAllowed&&(t(this,Ct)?N(this,Ct,!1):this.parent.setSelected(this))}focusout(g){var R,J;!this._focusEventsAllowed||!this.isAttachedToDOM||(R=g.relatedTarget)!=null&&R.closest(`#${this.id}`)||(g.preventDefault(),(J=this.parent)!=null&&J.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(g,R,J,k){const[b,G]=this.parentDimensions;[J,k]=this.screenToPageTranslation(J,k),this.x=(g+J)/b,this.y=(R+k)/G,this.fixAndSetPosition()}translate(g,R){F(this,ce,Zn).call(this,this.parentDimensions,g,R)}translateInPage(g,R){t(this,Lt)||N(this,Lt,[this.x,this.y]),F(this,ce,Zn).call(this,this.pageDimensions,g,R),this.div.scrollIntoView({block:"nearest"})}drag(g,R){t(this,Lt)||N(this,Lt,[this.x,this.y]);const[J,k]=this.parentDimensions;if(this.x+=g/J,this.y+=R/k,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:gt,y:xt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,gt,xt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:b,y:G}=this;const[K,ht]=this.getBaseTranslation();b+=K,G+=ht,this.div.style.left=`${(100*b).toFixed(2)}%`,this.div.style.top=`${(100*G).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!t(this,Lt)&&(t(this,Lt)[0]!==this.x||t(this,Lt)[1]!==this.y)}getBaseTranslation(){const[g,R]=this.parentDimensions,{_borderLineWidth:J}=Y,k=J/g,b=J/R;switch(this.rotation){case 90:return[-k,b];case 180:return[k,b];case 270:return[k,-b];default:return[-k,-b]}}get _mustFixPosition(){return!0}fixAndSetPosition(g=this.rotation){const[R,J]=this.pageDimensions;let{x:k,y:b,width:G,height:K}=this;if(G*=R,K*=J,k*=R,b*=J,this._mustFixPosition)switch(g){case 0:k=Math.max(0,Math.min(R-G,k)),b=Math.max(0,Math.min(J-K,b));break;case 90:k=Math.max(0,Math.min(R-K,k)),b=Math.min(J,Math.max(G,b));break;case 180:k=Math.min(R,Math.max(G,k)),b=Math.min(J,Math.max(K,b));break;case 270:k=Math.min(R,Math.max(K,k)),b=Math.max(0,Math.min(J-G,b));break}this.x=k/=R,this.y=b/=J;const[ht,gt]=this.getBaseTranslation();k+=ht,b+=gt;const{style:xt}=this.div;xt.left=`${(100*k).toFixed(2)}%`,xt.top=`${(100*b).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(g,R){var J;return F(J=Y,me,tr).call(J,g,R,this.parentRotation)}pageTranslationToScreen(g,R){var J;return F(J=Y,me,tr).call(J,g,R,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:g,pageDimensions:[R,J]}=this,k=R*g,b=J*g;return E.FeatureTest.isCSSRoundSupported?[Math.round(k),Math.round(b)]:[k,b]}setDims(g,R){const[J,k]=this.parentDimensions;this.div.style.width=`${(100*g/J).toFixed(2)}%`,t(this,Q)||(this.div.style.height=`${(100*R/k).toFixed(2)}%`)}fixDims(){const{style:g}=this.div,{height:R,width:J}=g,k=J.endsWith("%"),b=!t(this,Q)&&R.endsWith("%");if(k&&b)return;const[G,K]=this.parentDimensions;k||(g.width=`${(100*parseFloat(J)/G).toFixed(2)}%`),!t(this,Q)&&!b&&(g.height=`${(100*parseFloat(R)/K).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var g;(g=t(this,$))==null||g.finish()}async addEditToolbar(){return t(this,Ot)||t(this,at)?t(this,Ot):(N(this,Ot,new it.EditorToolbar(this)),this.div.append(t(this,Ot).render()),t(this,$)&&t(this,Ot).addAltTextButton(await t(this,$).render()),t(this,Ot))}removeEditToolbar(){var g;t(this,Ot)&&(t(this,Ot).remove(),N(this,Ot,null),(g=t(this,$))==null||g.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){t(this,$)||(_.initialize(Y._l10nPromise),N(this,$,new _(this)),await this.addEditToolbar())}get altTextData(){var g;return(g=t(this,$))==null?void 0:g.data}set altTextData(g){t(this,$)&&(t(this,$).data=g)}hasAltText(){var g;return!((g=t(this,$))!=null&&g.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=t(this,B)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",t(this,Dt)),this.div.addEventListener("focusout",t(this,St));const[g,R]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*R/g).toFixed(2)}%`,this.div.style.maxHeight=`${(100*g/R).toFixed(2)}%`);const[J,k]=this.getInitialTranslation();return this.translate(J,k),(0,e.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(g){const{isMac:R}=E.FeatureTest.platform;if(g.button!==0||g.ctrlKey&&R){g.preventDefault();return}if(N(this,Ct,!0),this._isDraggable){F(this,y,Ma).call(this,g);return}F(this,l,nr).call(this,g)}moveInDOM(){t(this,Pt)&&clearTimeout(t(this,Pt)),N(this,Pt,setTimeout(()=>{var g;N(this,Pt,null),(g=this.parent)==null||g.moveEditorInDOM(this)},0))}_setParentAndPosition(g,R,J){g.changeParent(this),this.x=R,this.y=J,this.fixAndSetPosition()}getRect(g,R,J=this.rotation){const k=this.parentScale,[b,G]=this.pageDimensions,[K,ht]=this.pageTranslation,gt=g/k,xt=R/k,It=this.x*b,Xt=this.y*G,ie=this.width*b,ee=this.height*G;switch(J){case 0:return[It+gt+K,G-Xt-xt-ee+ht,It+gt+ie+K,G-Xt-xt+ht];case 90:return[It+xt+K,G-Xt+gt+ht,It+xt+ee+K,G-Xt+gt+ie+ht];case 180:return[It-gt-ie+K,G-Xt+xt+ht,It-gt+K,G-Xt+xt+ee+ht];case 270:return[It-xt-ee+K,G-Xt-gt-ie+ht,It-xt+K,G-Xt-gt+ht];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(g,R){const[J,k,b,G]=g,K=b-J,ht=G-k;switch(this.rotation){case 0:return[J,R-G,K,ht];case 90:return[J,R-k,ht,K];case 180:return[b,R-k,K,ht];case 270:return[b,R-G,ht,K];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){N(this,at,!0)}disableEditMode(){N(this,at,!1)}isInEditMode(){return t(this,at)}shouldGetKeyboardEvents(){return t(this,bt)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var g,R;(g=this.div)==null||g.addEventListener("focusin",t(this,Dt)),(R=this.div)==null||R.addEventListener("focusout",t(this,St))}rotate(g){}serialize(g=!1,R=null){(0,E.unreachable)("An editor must be serializable")}static deserialize(g,R,J){const k=new this.prototype.constructor({parent:R,id:R.getNextId(),uiManager:J});k.rotation=g.rotation;const[b,G]=k.pageDimensions,[K,ht,gt,xt]=k.getRectInCurrentCoords(g.rect,G);return k.x=K/b,k.y=ht/G,k.width=gt/b,k.height=xt/G,k}remove(){if(this.div.removeEventListener("focusin",t(this,Dt)),this.div.removeEventListener("focusout",t(this,St)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),t(this,Pt)&&(clearTimeout(t(this,Pt)),N(this,Pt,null)),F(this,X,Ss).call(this),this.removeEditToolbar(),t(this,Yt)){for(const g of t(this,Yt).values())clearTimeout(g);N(this,Yt,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(F(this,se,Sa).call(this),t(this,ot).classList.remove("hidden"),(0,e.bindEvents)(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(g){if(!this.isResizable||g.target!==this.div||g.key!=="Enter")return;this._uiManager.setSelected(this),N(this,At,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const R=t(this,ot).children;if(!t(this,V)){N(this,V,Array.from(R));const G=F(this,p,ka).bind(this),K=F(this,h,La).bind(this);for(const ht of t(this,V)){const gt=ht.getAttribute("data-resizer-name");ht.setAttribute("role","spinbutton"),ht.addEventListener("keydown",G),ht.addEventListener("blur",K),ht.addEventListener("focus",F(this,a,Pa).bind(this,gt)),Y._l10nPromise.get(`pdfjs-editor-resizer-label-${gt}`).then(xt=>ht.setAttribute("aria-label",xt))}}const J=t(this,V)[0];let k=0;for(const G of R){if(G===J)break;k++}const b=(360-this.rotation+this.parentRotation)%360/90*(t(this,V).length/4);if(b!==k){if(b<k)for(let K=0;K<k-b;K++)t(this,ot).append(t(this,ot).firstChild);else if(b>k)for(let K=0;K<b-k;K++)t(this,ot).firstChild.before(t(this,ot).lastChild);let G=0;for(const K of R){const ht=t(this,V)[G++].getAttribute("data-resizer-name");Y._l10nPromise.get(`pdfjs-editor-resizer-label-${ht}`).then(gt=>K.setAttribute("aria-label",gt))}}F(this,I,rr).call(this,0),N(this,bt,!0),t(this,ot).firstChild.focus({focusVisible:!0}),g.preventDefault(),g.stopImmediatePropagation()}_resizeWithKeyboard(g,R){t(this,bt)&&F(this,u,sr).call(this,t(this,wt),{movementX:g,movementY:R})}_stopResizingWithKeyboard(){F(this,X,Ss).call(this),this.div.focus()}select(){var g,R;if(this.makeResizable(),(g=this.div)==null||g.classList.add("selectedEditor"),!t(this,Ot)){this.addEditToolbar().then(()=>{var J,k;(J=this.div)!=null&&J.classList.contains("selectedEditor")&&((k=t(this,Ot))==null||k.show())});return}(R=t(this,Ot))==null||R.show()}unselect(){var g,R,J,k;(g=t(this,ot))==null||g.classList.add("hidden"),(R=this.div)==null||R.classList.remove("selectedEditor"),(J=this.div)!=null&&J.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(k=t(this,Ot))==null||k.hide()}updateParams(g,R){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return t(this,Tt)}set isEditing(g){N(this,Tt,g),this.parent&&(g?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(g,R){N(this,Q,!0);const J=g/R,{style:k}=this.div;k.aspectRatio=J,k.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(g,R=!1){if(R){t(this,Yt)||N(this,Yt,new Map);const{action:J}=g;let k=t(this,Yt).get(J);k&&clearTimeout(k),k=setTimeout(()=>{this._reportTelemetry(g),t(this,Yt).delete(J),t(this,Yt).size===0&&N(this,Yt,null)},Y._telemetryTimeout),t(this,Yt).set(J,k);return}g.type||(g.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:g}})}show(g=this._isVisible){this.div.classList.toggle("hidden",!g),this._isVisible=g}enable(){this.div&&(this.div.tabIndex=0),N(this,B,!1)}disable(){this.div&&(this.div.tabIndex=-1),N(this,B,!0)}};V=new WeakMap,$=new WeakMap,B=new WeakMap,Q=new WeakMap,ot=new WeakMap,At=new WeakMap,Dt=new WeakMap,St=new WeakMap,Ot=new WeakMap,wt=new WeakMap,Ct=new WeakMap,Lt=new WeakMap,Tt=new WeakMap,at=new WeakMap,bt=new WeakMap,Pt=new WeakMap,Rt=new WeakMap,Ut=new WeakMap,Yt=new WeakMap,re=new WeakMap,_e=new WeakMap,ce=new WeakSet,Zn=function([g,R],J,k){[J,k]=this.screenToPageTranslation(J,k),this.x+=J/g,this.y+=k/R,this.fixAndSetPosition()},me=new WeakSet,tr=function(g,R,J){switch(J){case 90:return[R,-g];case 180:return[-g,-R];case 270:return[-R,g];default:return[g,R]}},oe=new WeakSet,er=function(g){switch(g){case 90:{const[R,J]=this.pageDimensions;return[0,-R/J,J/R,0]}case 180:return[-1,0,0,-1];case 270:{const[R,J]=this.pageDimensions;return[0,R/J,-J/R,0]}default:return[1,0,0,1]}},se=new WeakSet,Sa=function(){if(t(this,ot))return;N(this,ot,document.createElement("div")),t(this,ot).classList.add("resizers");const g=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const R of g){const J=document.createElement("div");t(this,ot).append(J),J.classList.add("resizer",R),J.setAttribute("data-resizer-name",R),J.addEventListener("pointerdown",F(this,ne,Ca).bind(this,R)),J.addEventListener("contextmenu",A.noContextMenu),J.tabIndex=-1}this.div.prepend(t(this,ot))},ne=new WeakSet,Ca=function(g,R){var ee;R.preventDefault();const{isMac:J}=E.FeatureTest.platform;if(R.button!==0||R.ctrlKey&&J)return;(ee=t(this,$))==null||ee.toggle(!1);const k=F(this,u,sr).bind(this,g),b=this._isDraggable;this._isDraggable=!1;const G={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",k,G);const K=this.x,ht=this.y,gt=this.width,xt=this.height,It=this.parent.div.style.cursor,Xt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(R.target).cursor;const ie=()=>{var Ae;this.parent.togglePointerEvents(!0),(Ae=t(this,$))==null||Ae.toggle(!0),this._isDraggable=b,window.removeEventListener("pointerup",ie),window.removeEventListener("blur",ie),window.removeEventListener("pointermove",k,G),this.parent.div.style.cursor=It,this.div.style.cursor=Xt,F(this,s,ir).call(this,K,ht,gt,xt)};window.addEventListener("pointerup",ie),window.addEventListener("blur",ie)},s=new WeakSet,ir=function(g,R,J,k){const b=this.x,G=this.y,K=this.width,ht=this.height;b===g&&G===R&&K===J&&ht===k||this.addCommands({cmd:()=>{this.width=K,this.height=ht,this.x=b,this.y=G;const[gt,xt]=this.parentDimensions;this.setDims(gt*K,xt*ht),this.fixAndSetPosition()},undo:()=>{this.width=J,this.height=k,this.x=g,this.y=R;const[gt,xt]=this.parentDimensions;this.setDims(gt*J,xt*k),this.fixAndSetPosition()},mustExec:!0})},u=new WeakSet,sr=function(g,R){const[J,k]=this.parentDimensions,b=this.x,G=this.y,K=this.width,ht=this.height,gt=Y.MIN_SIZE/J,xt=Y.MIN_SIZE/k,It=Mt=>Math.round(Mt*1e4)/1e4,Xt=F(this,oe,er).call(this,this.rotation),ie=(Mt,Bt)=>[Xt[0]*Mt+Xt[2]*Bt,Xt[1]*Mt+Xt[3]*Bt],ee=F(this,oe,er).call(this,360-this.rotation),Ae=(Mt,Bt)=>[ee[0]*Mt+ee[2]*Bt,ee[1]*Mt+ee[3]*Bt];let ve,Pe,fe=!1,Le=!1;switch(g){case"topLeft":fe=!0,ve=(Mt,Bt)=>[0,0],Pe=(Mt,Bt)=>[Mt,Bt];break;case"topMiddle":ve=(Mt,Bt)=>[Mt/2,0],Pe=(Mt,Bt)=>[Mt/2,Bt];break;case"topRight":fe=!0,ve=(Mt,Bt)=>[Mt,0],Pe=(Mt,Bt)=>[0,Bt];break;case"middleRight":Le=!0,ve=(Mt,Bt)=>[Mt,Bt/2],Pe=(Mt,Bt)=>[0,Bt/2];break;case"bottomRight":fe=!0,ve=(Mt,Bt)=>[Mt,Bt],Pe=(Mt,Bt)=>[0,0];break;case"bottomMiddle":ve=(Mt,Bt)=>[Mt/2,Bt],Pe=(Mt,Bt)=>[Mt/2,0];break;case"bottomLeft":fe=!0,ve=(Mt,Bt)=>[0,Bt],Pe=(Mt,Bt)=>[Mt,0];break;case"middleLeft":Le=!0,ve=(Mt,Bt)=>[0,Bt/2],Pe=(Mt,Bt)=>[Mt,Bt/2];break}const ae=ve(K,ht),j=Pe(K,ht);let P=ie(...j);const rt=It(b+P[0]),dt=It(G+P[1]);let ft=1,Et=1,[_t,Wt]=this.screenToPageTranslation(R.movementX,R.movementY);if([_t,Wt]=Ae(_t/J,Wt/k),fe){const Mt=Math.hypot(K,ht);ft=Et=Math.max(Math.min(Math.hypot(j[0]-ae[0]-_t,j[1]-ae[1]-Wt)/Mt,1/K,1/ht),gt/K,xt/ht)}else Le?ft=Math.max(gt,Math.min(1,Math.abs(j[0]-ae[0]-_t)))/K:Et=Math.max(xt,Math.min(1,Math.abs(j[1]-ae[1]-Wt)))/ht;const qt=It(K*ft),Nt=It(ht*Et);P=ie(...Pe(qt,Nt));const Qt=rt-P[0],Gt=dt-P[1];this.width=qt,this.height=Nt,this.x=Qt,this.y=Gt,this.setDims(J*qt,k*Nt),this.fixAndSetPosition()},l=new WeakSet,nr=function(g){const{isMac:R}=E.FeatureTest.platform;g.ctrlKey&&!R||g.shiftKey||g.metaKey&&R?this.parent.toggleSelected(this):this.parent.setSelected(this)},y=new WeakSet,Ma=function(g){const R=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let J,k;R&&(this.div.classList.add("moving"),J={passive:!0,capture:!0},N(this,Rt,g.clientX),N(this,Ut,g.clientY),k=G=>{const{clientX:K,clientY:ht}=G,[gt,xt]=this.screenToPageTranslation(K-t(this,Rt),ht-t(this,Ut));N(this,Rt,K),N(this,Ut,ht),this._uiManager.dragSelectedEditors(gt,xt)},window.addEventListener("pointermove",k,J));const b=()=>{window.removeEventListener("pointerup",b),window.removeEventListener("blur",b),R&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",k,J)),N(this,Ct,!1),this._uiManager.endDragSession()||F(this,l,nr).call(this,g)};window.addEventListener("pointerup",b),window.addEventListener("blur",b)},p=new WeakSet,ka=function(g){Y._resizerKeyboardManager.exec(this,g)},h=new WeakSet,La=function(g){var R;t(this,bt)&&((R=g.relatedTarget)==null?void 0:R.parentNode)!==t(this,ot)&&F(this,X,Ss).call(this)},a=new WeakSet,Pa=function(g){N(this,wt,t(this,bt)?g:"")},I=new WeakSet,rr=function(g){if(t(this,V))for(const R of t(this,V))R.tabIndex=g},X=new WeakSet,Ss=function(){if(N(this,bt,!1),F(this,I,rr).call(this,-1),t(this,At)){const{savedX:g,savedY:R,savedWidth:J,savedHeight:k}=t(this,At);F(this,s,ir).call(this,g,R,J,k),N(this,At,null)}},c(Y,me),be(Y,"_borderLineWidth",-1),be(Y,"_colorManager",new e.ColorManager),be(Y,"_zIndex",1),be(Y,"_telemetryTimeout",1e3);let H=Y;class M extends H{constructor(g){super(g),this.annotationElementId=g.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},61:(d,C,m)=>{var M,T,tt,z,Ra,q,hn,et,Ia,nt,Fa,V,ar,B,Q,ot,At,Dt,St,Ot,wt,Ct,Lt,Tt,at,bt,Pt,Rt,Ut,Yt,re,_e,or,me,zt,oe,Se,se,Ee,ne,lt,Cs,r,Ms,v,Da;m.d(C,{FreeOutliner:()=>it,Outliner:()=>E});var e=m(292);class E{constructor(y,S=0,p=0,o=!0){c(this,z);c(this,q);c(this,et);c(this,nt);c(this,V);c(this,M,void 0);c(this,T,[]);c(this,tt,[]);let h=1/0,n=-1/0,a=1/0,f=-1/0;const I=10**-4;for(const{x:R,y:J,width:k,height:b}of y){const G=Math.floor((R-S)/I)*I,K=Math.ceil((R+k+S)/I)*I,ht=Math.floor((J-S)/I)*I,gt=Math.ceil((J+b+S)/I)*I,xt=[G,ht,gt,!0],It=[K,ht,gt,!1];t(this,T).push(xt,It),h=Math.min(h,G),n=Math.max(n,K),a=Math.min(a,ht),f=Math.max(f,gt)}const w=n-h+2*p,X=f-a+2*p,Z=h-p,Y=a-p,st=t(this,T).at(o?-1:-2),g=[st[0],st[2]];for(const R of t(this,T)){const[J,k,b]=R;R[0]=(J-Z)/w,R[1]=(k-Y)/X,R[2]=(b-Y)/X}N(this,M,{x:Z,y:Y,width:w,height:X,lastPoint:g})}getOutlines(){t(this,T).sort((S,p)=>S[0]-p[0]||S[1]-p[1]||S[2]-p[2]);const y=[];for(const S of t(this,T))S[3]?(y.push(...F(this,V,ar).call(this,S)),F(this,et,Ia).call(this,S)):(F(this,nt,Fa).call(this,S),y.push(...F(this,V,ar).call(this,S)));return F(this,z,Ra).call(this,y)}}M=new WeakMap,T=new WeakMap,tt=new WeakMap,z=new WeakSet,Ra=function(y){const S=[],p=new Set;for(const n of y){const[a,f,I]=n;S.push([a,f,n],[a,I,n])}S.sort((n,a)=>n[1]-a[1]||n[0]-a[0]);for(let n=0,a=S.length;n<a;n+=2){const f=S[n][2],I=S[n+1][2];f.push(I),I.push(f),p.add(f),p.add(I)}const o=[];let h;for(;p.size>0;){const n=p.values().next().value;let[a,f,I,w,X]=n;p.delete(n);let Z=a,Y=f;for(h=[a,I],o.push(h);;){let st;if(p.has(w))st=w;else if(p.has(X))st=X;else break;p.delete(st),[a,f,I,w,X]=st,Z!==a&&(h.push(Z,Y,a,Y===f?f:I),Z=a),Y=Y===f?I:f}h.push(Z,Y)}return new _(o,t(this,M))},q=new WeakSet,hn=function(y){const S=t(this,tt);let p=0,o=S.length-1;for(;p<=o;){const h=p+o>>1,n=S[h][0];if(n===y)return h;n<y?p=h+1:o=h-1}return o+1},et=new WeakSet,Ia=function([,y,S]){const p=F(this,q,hn).call(this,y);t(this,tt).splice(p,0,[y,S])},nt=new WeakSet,Fa=function([,y,S]){const p=F(this,q,hn).call(this,y);for(let o=p;o<t(this,tt).length;o++){const[h,n]=t(this,tt)[o];if(h!==y)break;if(h===y&&n===S){t(this,tt).splice(o,1);return}}for(let o=p-1;o>=0;o--){const[h,n]=t(this,tt)[o];if(h!==y)break;if(h===y&&n===S){t(this,tt).splice(o,1);return}}},V=new WeakSet,ar=function(y){const[S,p,o]=y,h=[[S,p,o]],n=F(this,q,hn).call(this,o);for(let a=0;a<n;a++){const[f,I]=t(this,tt)[a];for(let w=0,X=h.length;w<X;w++){const[,Z,Y]=h[w];if(!(I<=Z||Y<=f)){if(Z>=f){if(Y>I)h[w][1]=I;else{if(X===1)return[];h.splice(w,1),w--,X--}continue}h[w][2]=f,Y>I&&h.push([S,I,Y])}}}return h};class A{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(y,S){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof H}}class _ extends A{constructor(S,p){super();c(this,B,void 0);c(this,Q,void 0);N(this,Q,S),N(this,B,p)}toSVGPath(){const S=[];for(const p of t(this,Q)){let[o,h]=p;S.push(`M${o} ${h}`);for(let n=2;n<p.length;n+=2){const a=p[n],f=p[n+1];a===o?(S.push(`V${f}`),h=f):f===h&&(S.push(`H${a}`),o=a)}S.push("Z")}return S.join(" ")}serialize([S,p,o,h],n){const a=[],f=o-S,I=h-p;for(const w of t(this,Q)){const X=new Array(w.length);for(let Z=0;Z<w.length;Z+=2)X[Z]=S+w[Z]*f,X[Z+1]=h-w[Z+1]*I;a.push(X)}return a}get box(){return t(this,B)}}B=new WeakMap,Q=new WeakMap;const he=class he{constructor({x:y,y:S},p,o,h,n,a=0){c(this,_e);c(this,ot,void 0);c(this,At,[]);c(this,Dt,void 0);c(this,St,void 0);c(this,Ot,[]);c(this,wt,new Float64Array(18));c(this,Ct,void 0);c(this,Lt,void 0);c(this,Tt,void 0);c(this,at,void 0);c(this,bt,void 0);c(this,Pt,void 0);c(this,Rt,[]);N(this,ot,p),N(this,Pt,h*o),N(this,St,n),t(this,wt).set([NaN,NaN,NaN,NaN,y,S],6),N(this,Dt,a),N(this,at,t(he,Ut)*o),N(this,Tt,t(he,re)*o),N(this,bt,o),t(this,Rt).push(y,S)}get free(){return!0}isEmpty(){return isNaN(t(this,wt)[8])}add({x:y,y:S}){var xt;N(this,Ct,y),N(this,Lt,S);const[p,o,h,n]=t(this,ot);let[a,f,I,w]=t(this,wt).subarray(8,12);const X=y-I,Z=S-w,Y=Math.hypot(X,Z);if(Y<t(this,Tt))return!1;const st=Y-t(this,at),g=st/Y,R=g*X,J=g*Z;let k=a,b=f;a=I,f=w,I+=R,w+=J,(xt=t(this,Rt))==null||xt.push(y,S);const G=-J/st,K=R/st,ht=G*t(this,Pt),gt=K*t(this,Pt);return t(this,wt).set(t(this,wt).subarray(2,8),0),t(this,wt).set([I+ht,w+gt],4),t(this,wt).set(t(this,wt).subarray(14,18),12),t(this,wt).set([I-ht,w-gt],16),isNaN(t(this,wt)[6])?(t(this,Ot).length===0&&(t(this,wt).set([a+ht,f+gt],2),t(this,Ot).push(NaN,NaN,NaN,NaN,(a+ht-p)/h,(f+gt-o)/n),t(this,wt).set([a-ht,f-gt],14),t(this,At).push(NaN,NaN,NaN,NaN,(a-ht-p)/h,(f-gt-o)/n)),t(this,wt).set([k,b,a,f,I,w],6),!this.isEmpty()):(t(this,wt).set([k,b,a,f,I,w],6),Math.abs(Math.atan2(b-f,k-a)-Math.atan2(J,R))<Math.PI/2?([a,f,I,w]=t(this,wt).subarray(2,6),t(this,Ot).push(NaN,NaN,NaN,NaN,((a+I)/2-p)/h,((f+w)/2-o)/n),[a,f,k,b]=t(this,wt).subarray(14,18),t(this,At).push(NaN,NaN,NaN,NaN,((k+a)/2-p)/h,((b+f)/2-o)/n),!0):([k,b,a,f,I,w]=t(this,wt).subarray(0,6),t(this,Ot).push(((k+5*a)/6-p)/h,((b+5*f)/6-o)/n,((5*a+I)/6-p)/h,((5*f+w)/6-o)/n,((a+I)/2-p)/h,((f+w)/2-o)/n),[I,w,a,f,k,b]=t(this,wt).subarray(12,18),t(this,At).push(((k+5*a)/6-p)/h,((b+5*f)/6-o)/n,((5*a+I)/6-p)/h,((5*f+w)/6-o)/n,((a+I)/2-p)/h,((f+w)/2-o)/n),!0))}toSVGPath(){if(this.isEmpty())return"";const y=t(this,Ot),S=t(this,At),p=t(this,wt).subarray(4,6),o=t(this,wt).subarray(16,18),[h,n,a,f]=t(this,ot),[I,w,X,Z]=F(this,_e,or).call(this);if(isNaN(t(this,wt)[6])&&!this.isEmpty())return`M${(t(this,wt)[2]-h)/a} ${(t(this,wt)[3]-n)/f} L${(t(this,wt)[4]-h)/a} ${(t(this,wt)[5]-n)/f} L${I} ${w} L${X} ${Z} L${(t(this,wt)[16]-h)/a} ${(t(this,wt)[17]-n)/f} L${(t(this,wt)[14]-h)/a} ${(t(this,wt)[15]-n)/f} Z`;const Y=[];Y.push(`M${y[4]} ${y[5]}`);for(let st=6;st<y.length;st+=6)isNaN(y[st])?Y.push(`L${y[st+4]} ${y[st+5]}`):Y.push(`C${y[st]} ${y[st+1]} ${y[st+2]} ${y[st+3]} ${y[st+4]} ${y[st+5]}`);Y.push(`L${(p[0]-h)/a} ${(p[1]-n)/f} L${I} ${w} L${X} ${Z} L${(o[0]-h)/a} ${(o[1]-n)/f}`);for(let st=S.length-6;st>=6;st-=6)isNaN(S[st])?Y.push(`L${S[st+4]} ${S[st+5]}`):Y.push(`C${S[st]} ${S[st+1]} ${S[st+2]} ${S[st+3]} ${S[st+4]} ${S[st+5]}`);return Y.push(`L${S[4]} ${S[5]} Z`),Y.join(" ")}getOutlines(){var J;const y=t(this,Ot),S=t(this,At),p=t(this,wt),o=p.subarray(4,6),h=p.subarray(16,18),[n,a,f,I]=t(this,ot),w=new Float64Array((((J=t(this,Rt))==null?void 0:J.length)??0)+2);for(let k=0,b=w.length-2;k<b;k+=2)w[k]=(t(this,Rt)[k]-n)/f,w[k+1]=(t(this,Rt)[k+1]-a)/I;w[w.length-2]=(t(this,Ct)-n)/f,w[w.length-1]=(t(this,Lt)-a)/I;const[X,Z,Y,st]=F(this,_e,or).call(this);if(isNaN(p[6])&&!this.isEmpty()){const k=new Float64Array(36);return k.set([NaN,NaN,NaN,NaN,(p[2]-n)/f,(p[3]-a)/I,NaN,NaN,NaN,NaN,(p[4]-n)/f,(p[5]-a)/I,NaN,NaN,NaN,NaN,X,Z,NaN,NaN,NaN,NaN,Y,st,NaN,NaN,NaN,NaN,(p[16]-n)/f,(p[17]-a)/I,NaN,NaN,NaN,NaN,(p[14]-n)/f,(p[15]-a)/I],0),new H(k,w,t(this,ot),t(this,bt),t(this,Dt),t(this,St))}const g=new Float64Array(t(this,Ot).length+24+t(this,At).length);let R=y.length;for(let k=0;k<R;k+=2){if(isNaN(y[k])){g[k]=g[k+1]=NaN;continue}g[k]=y[k],g[k+1]=y[k+1]}g.set([NaN,NaN,NaN,NaN,(o[0]-n)/f,(o[1]-a)/I,NaN,NaN,NaN,NaN,X,Z,NaN,NaN,NaN,NaN,Y,st,NaN,NaN,NaN,NaN,(h[0]-n)/f,(h[1]-a)/I],R),R+=24;for(let k=S.length-6;k>=6;k-=6)for(let b=0;b<6;b+=2){if(isNaN(S[k+b])){g[R]=g[R+1]=NaN,R+=2;continue}g[R]=S[k+b],g[R+1]=S[k+b+1],R+=2}return g.set([NaN,NaN,NaN,NaN,S[4],S[5]],R),new H(g,w,t(this,ot),t(this,bt),t(this,Dt),t(this,St))}};ot=new WeakMap,At=new WeakMap,Dt=new WeakMap,St=new WeakMap,Ot=new WeakMap,wt=new WeakMap,Ct=new WeakMap,Lt=new WeakMap,Tt=new WeakMap,at=new WeakMap,bt=new WeakMap,Pt=new WeakMap,Rt=new WeakMap,Ut=new WeakMap,Yt=new WeakMap,re=new WeakMap,_e=new WeakSet,or=function(){const y=t(this,wt).subarray(4,6),S=t(this,wt).subarray(16,18),[p,o,h,n]=t(this,ot);return[(t(this,Ct)+(y[0]-S[0])/2-p)/h,(t(this,Lt)+(y[1]-S[1])/2-o)/n,(t(this,Ct)+(S[0]-y[0])/2-p)/h,(t(this,Lt)+(S[1]-y[1])/2-o)/n]},c(he,Ut,8),c(he,Yt,2),c(he,re,t(he,Ut)+t(he,Yt));let it=he;class H extends A{constructor(S,p,o,h,n,a){super();c(this,lt);c(this,r);c(this,v);c(this,me,void 0);c(this,zt,null);c(this,oe,void 0);c(this,Se,void 0);c(this,se,void 0);c(this,Ee,void 0);c(this,ne,void 0);N(this,ne,S),N(this,se,p),N(this,me,o),N(this,Ee,h),N(this,oe,n),N(this,Se,a),F(this,v,Da).call(this,a);const{x:f,y:I,width:w,height:X}=t(this,zt);for(let Z=0,Y=S.length;Z<Y;Z+=2)S[Z]=(S[Z]-f)/w,S[Z+1]=(S[Z+1]-I)/X;for(let Z=0,Y=p.length;Z<Y;Z+=2)p[Z]=(p[Z]-f)/w,p[Z+1]=(p[Z+1]-I)/X}toSVGPath(){const S=[`M${t(this,ne)[4]} ${t(this,ne)[5]}`];for(let p=6,o=t(this,ne).length;p<o;p+=6){if(isNaN(t(this,ne)[p])){S.push(`L${t(this,ne)[p+4]} ${t(this,ne)[p+5]}`);continue}S.push(`C${t(this,ne)[p]} ${t(this,ne)[p+1]} ${t(this,ne)[p+2]} ${t(this,ne)[p+3]} ${t(this,ne)[p+4]} ${t(this,ne)[p+5]}`)}return S.push("Z"),S.join(" ")}serialize([S,p,o,h],n){const a=o-S,f=h-p;let I,w;switch(n){case 0:I=F(this,lt,Cs).call(this,t(this,ne),S,h,a,-f),w=F(this,lt,Cs).call(this,t(this,se),S,h,a,-f);break;case 90:I=F(this,r,Ms).call(this,t(this,ne),S,p,a,f),w=F(this,r,Ms).call(this,t(this,se),S,p,a,f);break;case 180:I=F(this,lt,Cs).call(this,t(this,ne),o,p,-a,f),w=F(this,lt,Cs).call(this,t(this,se),o,p,-a,f);break;case 270:I=F(this,r,Ms).call(this,t(this,ne),o,h,-a,-f),w=F(this,r,Ms).call(this,t(this,se),o,h,-a,-f);break}return{outline:Array.from(I),points:[Array.from(w)]}}get box(){return t(this,zt)}getNewOutline(S,p){const{x:o,y:h,width:n,height:a}=t(this,zt),[f,I,w,X]=t(this,me),Z=n*w,Y=a*X,st=o*w+f,g=h*X+I,R=new it({x:t(this,se)[0]*Z+st,y:t(this,se)[1]*Y+g},t(this,me),t(this,Ee),S,t(this,Se),p??t(this,oe));for(let J=2;J<t(this,se).length;J+=2)R.add({x:t(this,se)[J]*Z+st,y:t(this,se)[J+1]*Y+g});return R.getOutlines()}}me=new WeakMap,zt=new WeakMap,oe=new WeakMap,Se=new WeakMap,se=new WeakMap,Ee=new WeakMap,ne=new WeakMap,lt=new WeakSet,Cs=function(S,p,o,h,n){const a=new Float64Array(S.length);for(let f=0,I=S.length;f<I;f+=2)a[f]=p+S[f]*h,a[f+1]=o+S[f+1]*n;return a},r=new WeakSet,Ms=function(S,p,o,h,n){const a=new Float64Array(S.length);for(let f=0,I=S.length;f<I;f+=2)a[f]=p+S[f+1]*h,a[f+1]=o+S[f]*n;return a},v=new WeakSet,Da=function(S){const p=t(this,ne);let o=p[4],h=p[5],n=o,a=h,f=o,I=h,w=o,X=h;const Z=S?Math.max:Math.min;for(let J=6,k=p.length;J<k;J+=6){if(isNaN(p[J]))n=Math.min(n,p[J+4]),a=Math.min(a,p[J+5]),f=Math.max(f,p[J+4]),I=Math.max(I,p[J+5]),X<p[J+5]?(w=p[J+4],X=p[J+5]):X===p[J+5]&&(w=Z(w,p[J+4]));else{const b=e.Util.bezierBoundingBox(o,h,...p.slice(J,J+6));n=Math.min(n,b[0]),a=Math.min(a,b[1]),f=Math.max(f,b[2]),I=Math.max(I,b[3]),X<b[3]?(w=b[2],X=b[3]):X===b[3]&&(w=Z(w,b[2]))}o=p[J+4],h=p[J+5]}const Y=n-t(this,oe),st=a-t(this,oe),g=f-n+2*t(this,oe),R=I-a+2*t(this,oe);N(this,zt,{x:Y,y:st,width:g,height:R,lastPoint:[w,X]})}},362:(d,C,m)=>{var _,it,H,M,T,Oa,z,Na,q,Ha,et,cn,nt,Ba,V,lr,Q,ot,At,Dt,ja,Ot,za,Ct,Ga;m.d(C,{EditorToolbar:()=>E,HighlightToolbar:()=>A});var e=m(419);const B=class B{constructor(at){c(this,z);c(this,q);c(this,et);c(this,nt);c(this,V);c(this,_,null);c(this,it,null);c(this,H,void 0);c(this,M,null);N(this,H,at)}render(){const at=N(this,_,document.createElement("div"));at.className="editToolbar",at.setAttribute("role","toolbar"),at.addEventListener("contextmenu",e.noContextMenu),at.addEventListener("pointerdown",F(B,T,Oa));const bt=N(this,M,document.createElement("div"));bt.className="buttons",at.append(bt);const Pt=t(this,H).toolbarPosition;if(Pt){const{style:Rt}=at,Ut=t(this,H)._uiManager.direction==="ltr"?1-Pt[0]:Pt[0];Rt.insetInlineEnd=`${100*Ut}%`,Rt.top=`calc(${100*Pt[1]}% + var(--editor-toolbar-vert-offset))`}return F(this,nt,Ba).call(this),at}hide(){var at;t(this,_).classList.add("hidden"),(at=t(this,it))==null||at.hideDropdown()}show(){t(this,_).classList.remove("hidden")}addAltTextButton(at){F(this,et,cn).call(this,at),t(this,M).prepend(at,t(this,V,lr))}addColorPicker(at){N(this,it,at);const bt=at.renderButton();F(this,et,cn).call(this,bt),t(this,M).prepend(bt,t(this,V,lr))}remove(){var at;t(this,_).remove(),(at=t(this,it))==null||at.destroy(),N(this,it,null)}};_=new WeakMap,it=new WeakMap,H=new WeakMap,M=new WeakMap,T=new WeakSet,Oa=function(at){at.stopPropagation()},z=new WeakSet,Na=function(at){t(this,H)._focusEventsAllowed=!1,at.preventDefault(),at.stopPropagation()},q=new WeakSet,Ha=function(at){t(this,H)._focusEventsAllowed=!0,at.preventDefault(),at.stopPropagation()},et=new WeakSet,cn=function(at){at.addEventListener("focusin",F(this,z,Na).bind(this),{capture:!0}),at.addEventListener("focusout",F(this,q,Ha).bind(this),{capture:!0}),at.addEventListener("contextmenu",e.noContextMenu)},nt=new WeakSet,Ba=function(){const at=document.createElement("button");at.className="delete",at.tabIndex=0,at.setAttribute("data-l10n-id",`pdfjs-editor-remove-${t(this,H).editorType}-button`),F(this,et,cn).call(this,at),at.addEventListener("click",bt=>{t(this,H)._uiManager.delete()}),t(this,M).append(at)},V=new WeakSet,lr=function(){const at=document.createElement("div");return at.className="divider",at},c(B,T);let E=B;class A{constructor(at){c(this,Dt);c(this,Ot);c(this,Ct);c(this,Q,null);c(this,ot,null);c(this,At,void 0);N(this,At,at)}show(at,bt,Pt){const[Rt,Ut]=F(this,Ot,za).call(this,bt,Pt),{style:Yt}=t(this,ot)||N(this,ot,F(this,Dt,ja).call(this));at.append(t(this,ot)),Yt.insetInlineEnd=`${100*Rt}%`,Yt.top=`calc(${100*Ut}% + var(--editor-toolbar-vert-offset))`}hide(){t(this,ot).remove()}}Q=new WeakMap,ot=new WeakMap,At=new WeakMap,Dt=new WeakSet,ja=function(){const at=N(this,ot,document.createElement("div"));at.className="editToolbar",at.setAttribute("role","toolbar"),at.addEventListener("contextmenu",e.noContextMenu);const bt=N(this,Q,document.createElement("div"));return bt.className="buttons",at.append(bt),F(this,Ct,Ga).call(this),at},Ot=new WeakSet,za=function(at,bt){let Pt=0,Rt=0;for(const Ut of at){const Yt=Ut.y+Ut.height;if(Yt<Pt)continue;const re=Ut.x+(bt?Ut.width:0);if(Yt>Pt){Rt=re,Pt=Yt;continue}bt?re>Rt&&(Rt=re):re<Rt&&(Rt=re)}return[bt?1-Rt:Rt,Pt]},Ct=new WeakSet,Ga=function(){const at=document.createElement("button");at.className="highlightButton",at.tabIndex=0,at.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const bt=document.createElement("span");at.append(bt),bt.className="visuallyHidden",bt.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),at.addEventListener("contextmenu",e.noContextMenu),at.addEventListener("click",()=>{t(this,At).highlightSelection("floating_button")}),t(this,Q).append(at)}},830:(d,C,m)=>{var q,W,et,ut,nt,hr,$,B,Q,ot,At,Ua,Ot,wt,Ct,Lt,Tt,at,bt,Pt,Rt,Ut,Yt,re,_e,ce,he,me,zt,oe,Se,se,Ee,ne,lt,s,r,u,v,l,x,y,S,p,o,h,n,a,f,I,w,X,Z,Y,st,g,R,J,dn,b,qa,K,$a,gt,un,It,Wa,ie,Xa,Ae,Va,Pe,cr,Le,dr,j,ur,rt,pr,ft,gr,_t,Qe,qt,Ei,Qt,Ya,Mt,Ka,Zt,fr,de,Qa,Me,ks,Xe,mr;m.d(C,{AnnotationEditorUIManager:()=>L,ColorManager:()=>z,KeyboardManager:()=>tt,bindEvents:()=>_,opacityToHex:()=>it});var e=m(292),E=m(419),A=m(362);function _(Ge,U,mt){for(const Ht of mt)U.addEventListener(Ht,Ge[Ht].bind(Ge))}function it(Ge){return Math.round(Math.min(255,Math.max(1,255*Ge))).toString(16).padStart(2,"0")}class H{constructor(){c(this,q,0)}get id(){return`${e.AnnotationEditorPrefix}${mi(this,q)._++}`}}q=new WeakMap;const V=class V{constructor(){c(this,nt);c(this,W,(0,e.getUuid)());c(this,et,0);c(this,ut,null)}static get _isSVGFittingCanvas(){const U='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',mt=new OffscreenCanvas(1,3).getContext("2d"),Ht=new Image;Ht.src=U;const jt=Ht.decode().then(()=>(mt.drawImage(Ht,0,0,1,1,0,0,1,3),new Uint32Array(mt.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,e.shadow)(this,"_isSVGFittingCanvas",jt)}async getFromFile(U){const{lastModified:mt,name:Ht,size:jt,type:Jt}=U;return F(this,nt,hr).call(this,`${mt}_${Ht}_${jt}_${Jt}`,U)}async getFromUrl(U){return F(this,nt,hr).call(this,U,U)}async getFromId(U){t(this,ut)||N(this,ut,new Map);const mt=t(this,ut).get(U);return mt?mt.bitmap?(mt.refCounter+=1,mt):mt.file?this.getFromFile(mt.file):this.getFromUrl(mt.url):null}getSvgUrl(U){const mt=t(this,ut).get(U);return mt!=null&&mt.isSvg?mt.svgUrl:null}deleteId(U){t(this,ut)||N(this,ut,new Map);const mt=t(this,ut).get(U);mt&&(mt.refCounter-=1,mt.refCounter===0&&(mt.bitmap=null))}isValidId(U){return U.startsWith(`image_${t(this,W)}_`)}};W=new WeakMap,et=new WeakMap,ut=new WeakMap,nt=new WeakSet,hr=async function(U,mt){t(this,ut)||N(this,ut,new Map);let Ht=t(this,ut).get(U);if(Ht===null)return null;if(Ht!=null&&Ht.bitmap)return Ht.refCounter+=1,Ht;try{Ht||(Ht={bitmap:null,id:`image_${t(this,W)}_${mi(this,et)._++}`,refCounter:0,isSvg:!1});let jt;if(typeof mt=="string"?(Ht.url=mt,jt=await(0,E.fetchData)(mt,"blob")):jt=Ht.file=mt,jt.type==="image/svg+xml"){const Jt=V._isSVGFittingCanvas,te=new FileReader,le=new Image,ye=new Promise((Re,He)=>{le.onload=()=>{Ht.bitmap=le,Ht.isSvg=!0,Re()},te.onload=async()=>{const Ye=Ht.svgUrl=te.result;le.src=await Jt?`${Ye}#svgView(preserveAspectRatio(none))`:Ye},le.onerror=te.onerror=He});te.readAsDataURL(jt),await ye}else Ht.bitmap=await createImageBitmap(jt);Ht.refCounter=1}catch(jt){console.error(jt),Ht=null}return t(this,ut).set(U,Ht),Ht&&t(this,ut).set(Ht.id,Ht),Ht};let M=V;class T{constructor(U=128){c(this,$,[]);c(this,B,!1);c(this,Q,void 0);c(this,ot,-1);N(this,Q,U)}add({cmd:U,undo:mt,post:Ht,mustExec:jt,type:Jt=NaN,overwriteIfSameType:te=!1,keepUndo:le=!1}){if(jt&&U(),t(this,B))return;const ye={cmd:U,undo:mt,post:Ht,type:Jt};if(t(this,ot)===-1){t(this,$).length>0&&(t(this,$).length=0),N(this,ot,0),t(this,$).push(ye);return}if(te&&t(this,$)[t(this,ot)].type===Jt){le&&(ye.undo=t(this,$)[t(this,ot)].undo),t(this,$)[t(this,ot)]=ye;return}const Re=t(this,ot)+1;Re===t(this,Q)?t(this,$).splice(0,1):(N(this,ot,Re),Re<t(this,$).length&&t(this,$).splice(Re)),t(this,$).push(ye)}undo(){if(t(this,ot)===-1)return;N(this,B,!0);const{undo:U,post:mt}=t(this,$)[t(this,ot)];U(),mt==null||mt(),N(this,B,!1),N(this,ot,t(this,ot)-1)}redo(){if(t(this,ot)<t(this,$).length-1){N(this,ot,t(this,ot)+1),N(this,B,!0);const{cmd:U,post:mt}=t(this,$)[t(this,ot)];U(),mt==null||mt(),N(this,B,!1)}}hasSomethingToUndo(){return t(this,ot)!==-1}hasSomethingToRedo(){return t(this,ot)<t(this,$).length-1}destroy(){N(this,$,null)}}$=new WeakMap,B=new WeakMap,Q=new WeakMap,ot=new WeakMap;class tt{constructor(U){c(this,At);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:mt}=e.FeatureTest.platform;for(const[Ht,jt,Jt={}]of U)for(const te of Ht){const le=te.startsWith("mac+");mt&&le?(this.callbacks.set(te.slice(4),{callback:jt,options:Jt}),this.allKeys.add(te.split("+").at(-1))):!mt&&!le&&(this.callbacks.set(te,{callback:jt,options:Jt}),this.allKeys.add(te.split("+").at(-1)))}}exec(U,mt){if(!this.allKeys.has(mt.key))return;const Ht=this.callbacks.get(F(this,At,Ua).call(this,mt));if(!Ht)return;const{callback:jt,options:{bubbles:Jt=!1,args:te=[],checker:le=null}}=Ht;le&&!le(U,mt)||(jt.bind(U,...te,mt)(),Jt||(mt.stopPropagation(),mt.preventDefault()))}}At=new WeakSet,Ua=function(U){U.altKey&&this.buffer.push("alt"),U.ctrlKey&&this.buffer.push("ctrl"),U.metaKey&&this.buffer.push("meta"),U.shiftKey&&this.buffer.push("shift"),this.buffer.push(U.key);const mt=this.buffer.join("+");return this.buffer.length=0,mt};const St=class St{get _colors(){const U=new Map([["CanvasText",null],["Canvas",null]]);return(0,E.getColorValues)(U),(0,e.shadow)(this,"_colors",U)}convert(U){const mt=(0,E.getRGB)(U);if(!window.matchMedia("(forced-colors: active)").matches)return mt;for(const[Ht,jt]of this._colors)if(jt.every((Jt,te)=>Jt===mt[te]))return St._colorsMapping.get(Ht);return mt}getHexCode(U){const mt=this._colors.get(U);return mt?e.Util.makeHexColor(...mt):U}};be(St,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let z=St;const si=class si{constructor(U,mt,Ht,jt,Jt,te,le,ye,Re){c(this,J);c(this,b);c(this,K);c(this,gt);c(this,It);c(this,ie);c(this,Ae);c(this,Pe);c(this,Le);c(this,j);c(this,rt);c(this,ft);c(this,_t);c(this,qt);c(this,Qt);c(this,Mt);c(this,Zt);c(this,de);c(this,Me);c(this,Xe);c(this,Ot,null);c(this,wt,new Map);c(this,Ct,new Map);c(this,Lt,null);c(this,Tt,null);c(this,at,new T);c(this,bt,0);c(this,Pt,new Set);c(this,Rt,null);c(this,Ut,null);c(this,Yt,new Set);c(this,re,!1);c(this,_e,null);c(this,ce,null);c(this,he,null);c(this,me,!1);c(this,zt,null);c(this,oe,new H);c(this,Se,!1);c(this,se,!1);c(this,Ee,null);c(this,ne,null);c(this,lt,null);c(this,s,e.AnnotationEditorType.NONE);c(this,r,new Set);c(this,u,null);c(this,v,null);c(this,l,null);c(this,x,this.blur.bind(this));c(this,y,this.focus.bind(this));c(this,S,this.copy.bind(this));c(this,p,this.cut.bind(this));c(this,o,this.paste.bind(this));c(this,h,this.keydown.bind(this));c(this,n,this.keyup.bind(this));c(this,a,this.onEditingAction.bind(this));c(this,f,this.onPageChanging.bind(this));c(this,I,this.onScaleChanging.bind(this));c(this,w,F(this,K,$a).bind(this));c(this,X,this.onRotationChanging.bind(this));c(this,Z,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});c(this,Y,[0,0]);c(this,st,null);c(this,g,null);c(this,R,null);N(this,g,U),N(this,R,mt),N(this,Lt,Ht),this._eventBus=jt,this._eventBus._on("editingaction",t(this,a)),this._eventBus._on("pagechanging",t(this,f)),this._eventBus._on("scalechanging",t(this,I)),this._eventBus._on("rotationchanging",t(this,X)),F(this,It,Wa).call(this),F(this,Le,dr).call(this),N(this,Tt,Jt.annotationStorage),N(this,_e,Jt.filterFactory),N(this,v,te),N(this,he,le||null),N(this,re,ye),N(this,lt,Re||null),this.viewParameters={realScale:E.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const U=si.prototype,mt=te=>t(te,g).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&te.hasSomethingToControl(),Ht=(te,{target:le})=>{if(le instanceof HTMLInputElement){const{type:ye}=le;return ye!=="text"&&ye!=="number"}return!0},jt=this.TRANSLATE_SMALL,Jt=this.TRANSLATE_BIG;return(0,e.shadow)(this,"_keyboardManager",new tt([[["ctrl+a","mac+meta+a"],U.selectAll,{checker:Ht}],[["ctrl+z","mac+meta+z"],U.undo,{checker:Ht}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],U.redo,{checker:Ht}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],U.delete,{checker:Ht}],[["Enter","mac+Enter"],U.addNewEditorFromKeyboard,{checker:(te,{target:le})=>!(le instanceof HTMLButtonElement)&&t(te,g).contains(le)&&!te.isEnterHandled}],[[" ","mac+ "],U.addNewEditorFromKeyboard,{checker:(te,{target:le})=>!(le instanceof HTMLButtonElement)&&t(te,g).contains(document.activeElement)}],[["Escape","mac+Escape"],U.unselectAll],[["ArrowLeft","mac+ArrowLeft"],U.translateSelectedEditors,{args:[-jt,0],checker:mt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],U.translateSelectedEditors,{args:[-Jt,0],checker:mt}],[["ArrowRight","mac+ArrowRight"],U.translateSelectedEditors,{args:[jt,0],checker:mt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],U.translateSelectedEditors,{args:[Jt,0],checker:mt}],[["ArrowUp","mac+ArrowUp"],U.translateSelectedEditors,{args:[0,-jt],checker:mt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],U.translateSelectedEditors,{args:[0,-Jt],checker:mt}],[["ArrowDown","mac+ArrowDown"],U.translateSelectedEditors,{args:[0,jt],checker:mt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],U.translateSelectedEditors,{args:[0,Jt],checker:mt}]]))}destroy(){var U,mt;F(this,j,ur).call(this),F(this,Pe,cr).call(this),this._eventBus._off("editingaction",t(this,a)),this._eventBus._off("pagechanging",t(this,f)),this._eventBus._off("scalechanging",t(this,I)),this._eventBus._off("rotationchanging",t(this,X));for(const Ht of t(this,Ct).values())Ht.destroy();t(this,Ct).clear(),t(this,wt).clear(),t(this,Yt).clear(),N(this,Ot,null),t(this,r).clear(),t(this,at).destroy(),(U=t(this,Lt))==null||U.destroy(),(mt=t(this,zt))==null||mt.hide(),N(this,zt,null),t(this,ce)&&(clearTimeout(t(this,ce)),N(this,ce,null)),t(this,st)&&(clearTimeout(t(this,st)),N(this,st,null)),F(this,ie,Xa).call(this)}async mlGuess(U){var mt;return((mt=t(this,lt))==null?void 0:mt.guess(U))||null}get hasMLManager(){return!!t(this,lt)}get hcmFilter(){return(0,e.shadow)(this,"hcmFilter",t(this,v)?t(this,_e).addHCMFilter(t(this,v).foreground,t(this,v).background):"none")}get direction(){return(0,e.shadow)(this,"direction",getComputedStyle(t(this,g)).direction)}get highlightColors(){return(0,e.shadow)(this,"highlightColors",t(this,he)?new Map(t(this,he).split(",").map(U=>U.split("=").map(mt=>mt.trim()))):null)}get highlightColorNames(){return(0,e.shadow)(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,U=>U.reverse())):null)}setMainHighlightColorPicker(U){N(this,ne,U)}editAltText(U){var mt;(mt=t(this,Lt))==null||mt.editAltText(this,U)}onPageChanging({pageNumber:U}){N(this,bt,U-1)}focusMainContainer(){t(this,g).focus()}findParent(U,mt){for(const Ht of t(this,Ct).values()){const{x:jt,y:Jt,width:te,height:le}=Ht.div.getBoundingClientRect();if(U>=jt&&U<=jt+te&&mt>=Jt&&mt<=Jt+le)return Ht}return null}disableUserSelect(U=!1){t(this,R).classList.toggle("noUserSelect",U)}addShouldRescale(U){t(this,Yt).add(U)}removeShouldRescale(U){t(this,Yt).delete(U)}onScaleChanging({scale:U}){this.commitOrRemove(),this.viewParameters.realScale=U*E.PixelsPerInch.PDF_TO_CSS_UNITS;for(const mt of t(this,Yt))mt.onScaleChanging()}onRotationChanging({pagesRotation:U}){this.commitOrRemove(),this.viewParameters.rotation=U}highlightSelection(U=""){const mt=document.getSelection();if(!mt||mt.isCollapsed)return;const{anchorNode:Ht,anchorOffset:jt,focusNode:Jt,focusOffset:te}=mt,le=mt.toString(),ye=F(this,J,dn).call(this,mt).closest(".textLayer"),Re=this.getSelectionBoxes(ye);if(Re){mt.empty(),t(this,s)===e.AnnotationEditorType.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e.AnnotationEditorType.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const He of t(this,Ct).values())if(He.hasTextLayer(ye)){He.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:U,boxes:Re,anchorNode:Ht,anchorOffset:jt,focusNode:Jt,focusOffset:te,text:le});break}}}addToAnnotationStorage(U){!U.isEmpty()&&t(this,Tt)&&!t(this,Tt).has(U.id)&&t(this,Tt).setValue(U.id,U)}blur(){if(this.isShiftKeyDown=!1,t(this,me)&&(N(this,me,!1),F(this,gt,un).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:U}=document;for(const mt of t(this,r))if(mt.div.contains(U)){N(this,Ee,[mt,U]),mt._focusEventsAllowed=!1;break}}focus(){if(!t(this,Ee))return;const[U,mt]=t(this,Ee);N(this,Ee,null),mt.addEventListener("focusin",()=>{U._focusEventsAllowed=!0},{once:!0}),mt.focus()}addEditListeners(){F(this,Le,dr).call(this),F(this,rt,pr).call(this)}removeEditListeners(){F(this,j,ur).call(this),F(this,ft,gr).call(this)}copy(U){var Ht;if(U.preventDefault(),(Ht=t(this,Ot))==null||Ht.commitOrRemove(),!this.hasSelection)return;const mt=[];for(const jt of t(this,r)){const Jt=jt.serialize(!0);Jt&&mt.push(Jt)}mt.length!==0&&U.clipboardData.setData("application/pdfjs",JSON.stringify(mt))}cut(U){this.copy(U),this.delete()}paste(U){U.preventDefault();const{clipboardData:mt}=U;for(const Jt of mt.items)for(const te of t(this,Ut))if(te.isHandlingMimeForPasting(Jt.type)){te.paste(Jt,this.currentLayer);return}let Ht=mt.getData("application/pdfjs");if(!Ht)return;try{Ht=JSON.parse(Ht)}catch(Jt){(0,e.warn)(`paste: "${Jt.message}".`);return}if(!Array.isArray(Ht))return;this.unselectAll();const jt=this.currentLayer;try{const Jt=[];for(const ye of Ht){const Re=jt.deserialize(ye);if(!Re)return;Jt.push(Re)}const te=()=>{for(const ye of Jt)F(this,Zt,fr).call(this,ye);F(this,Xe,mr).call(this,Jt)},le=()=>{for(const ye of Jt)ye.remove()};this.addCommands({cmd:te,undo:le,mustExec:!0})}catch(Jt){(0,e.warn)(`paste: "${Jt.message}".`)}}keydown(U){!this.isShiftKeyDown&&U.key==="Shift"&&(this.isShiftKeyDown=!0),t(this,s)!==e.AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&si._keyboardManager.exec(this,U)}keyup(U){this.isShiftKeyDown&&U.key==="Shift"&&(this.isShiftKeyDown=!1,t(this,me)&&(N(this,me,!1),F(this,gt,un).call(this,"main_toolbar")))}onEditingAction({name:U}){switch(U){case"undo":case"redo":case"delete":case"selectAll":this[U]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(U){U?(F(this,Ae,Va).call(this),F(this,rt,pr).call(this),F(this,_t,Qe).call(this,{isEditing:t(this,s)!==e.AnnotationEditorType.NONE,isEmpty:F(this,Me,ks).call(this),hasSomethingToUndo:t(this,at).hasSomethingToUndo(),hasSomethingToRedo:t(this,at).hasSomethingToRedo(),hasSelectedEditor:!1})):(F(this,Pe,cr).call(this),F(this,ft,gr).call(this),F(this,_t,Qe).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(U){if(!t(this,Ut)){N(this,Ut,U);for(const mt of t(this,Ut))F(this,qt,Ei).call(this,mt.defaultPropertiesToUpdate)}}getId(){return t(this,oe).id}get currentLayer(){return t(this,Ct).get(t(this,bt))}getLayer(U){return t(this,Ct).get(U)}get currentPageIndex(){return t(this,bt)}addLayer(U){t(this,Ct).set(U.pageIndex,U),t(this,Se)?U.enable():U.disable()}removeLayer(U){t(this,Ct).delete(U.pageIndex)}updateMode(U,mt=null,Ht=!1){if(t(this,s)!==U){if(N(this,s,U),U===e.AnnotationEditorType.NONE){this.setEditingState(!1),F(this,Mt,Ka).call(this);return}this.setEditingState(!0),F(this,Qt,Ya).call(this),this.unselectAll();for(const jt of t(this,Ct).values())jt.updateMode(U);if(!mt&&Ht){this.addNewEditorFromKeyboard();return}if(mt){for(const jt of t(this,wt).values())if(jt.annotationElementId===mt){this.setSelected(jt),jt.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(U){U!==t(this,s)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:U})}updateParams(U,mt){var Ht;if(t(this,Ut)){switch(U){case e.AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor();return;case e.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:(Ht=t(this,ne))==null||Ht.updateColor(mt);break;case e.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(t(this,l)||N(this,l,new Map)).set(U,mt),this.showAllEditors("highlight",mt);break}for(const jt of t(this,r))jt.updateParams(U,mt);for(const jt of t(this,Ut))jt.updateDefaultParams(U,mt)}}showAllEditors(U,mt,Ht=!1){var jt;for(const Jt of t(this,wt).values())Jt.editorType===U&&Jt.show(mt);(((jt=t(this,l))==null?void 0:jt.get(e.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))??!0)!==mt&&F(this,qt,Ei).call(this,[[e.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,mt]])}enableWaiting(U=!1){if(t(this,se)!==U){N(this,se,U);for(const mt of t(this,Ct).values())U?mt.disableClick():mt.enableClick(),mt.div.classList.toggle("waiting",U)}}getEditors(U){const mt=[];for(const Ht of t(this,wt).values())Ht.pageIndex===U&&mt.push(Ht);return mt}getEditor(U){return t(this,wt).get(U)}addEditor(U){t(this,wt).set(U.id,U)}removeEditor(U){var mt;U.div.contains(document.activeElement)&&(t(this,ce)&&clearTimeout(t(this,ce)),N(this,ce,setTimeout(()=>{this.focusMainContainer(),N(this,ce,null)},0))),t(this,wt).delete(U.id),this.unselect(U),(!U.annotationElementId||!t(this,Pt).has(U.annotationElementId))&&((mt=t(this,Tt))==null||mt.remove(U.id))}addDeletedAnnotationElement(U){t(this,Pt).add(U.annotationElementId),U.deleted=!0}isDeletedAnnotationElement(U){return t(this,Pt).has(U)}removeDeletedAnnotationElement(U){t(this,Pt).delete(U.annotationElementId),U.deleted=!1}setActiveEditor(U){t(this,Ot)!==U&&(N(this,Ot,U),U&&F(this,qt,Ei).call(this,U.propertiesToUpdate))}updateUI(U){t(this,de,Qa)===U&&F(this,qt,Ei).call(this,U.propertiesToUpdate)}toggleSelected(U){if(t(this,r).has(U)){t(this,r).delete(U),U.unselect(),F(this,_t,Qe).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,r).add(U),U.select(),F(this,qt,Ei).call(this,U.propertiesToUpdate),F(this,_t,Qe).call(this,{hasSelectedEditor:!0})}setSelected(U){for(const mt of t(this,r))mt!==U&&mt.unselect();t(this,r).clear(),t(this,r).add(U),U.select(),F(this,qt,Ei).call(this,U.propertiesToUpdate),F(this,_t,Qe).call(this,{hasSelectedEditor:!0})}isSelected(U){return t(this,r).has(U)}get firstSelectedEditor(){return t(this,r).values().next().value}unselect(U){U.unselect(),t(this,r).delete(U),F(this,_t,Qe).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,r).size!==0}get isEnterHandled(){return t(this,r).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){t(this,at).undo(),F(this,_t,Qe).call(this,{hasSomethingToUndo:t(this,at).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:F(this,Me,ks).call(this)})}redo(){t(this,at).redo(),F(this,_t,Qe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,at).hasSomethingToRedo(),isEmpty:F(this,Me,ks).call(this)})}addCommands(U){t(this,at).add(U),F(this,_t,Qe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:F(this,Me,ks).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const U=[...t(this,r)],mt=()=>{for(const jt of U)jt.remove()},Ht=()=>{for(const jt of U)F(this,Zt,fr).call(this,jt)};this.addCommands({cmd:mt,undo:Ht,mustExec:!0})}commitOrRemove(){var U;(U=t(this,Ot))==null||U.commitOrRemove()}hasSomethingToControl(){return t(this,Ot)||this.hasSelection}selectAll(){for(const U of t(this,r))U.commit();F(this,Xe,mr).call(this,t(this,wt).values())}unselectAll(){if(!(t(this,Ot)&&(t(this,Ot).commitOrRemove(),t(this,s)!==e.AnnotationEditorType.NONE))&&this.hasSelection){for(const U of t(this,r))U.unselect();t(this,r).clear(),F(this,_t,Qe).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(U,mt,Ht=!1){if(Ht||this.commitOrRemove(),!this.hasSelection)return;t(this,Y)[0]+=U,t(this,Y)[1]+=mt;const[jt,Jt]=t(this,Y),te=[...t(this,r)];t(this,st)&&clearTimeout(t(this,st)),N(this,st,setTimeout(()=>{N(this,st,null),t(this,Y)[0]=t(this,Y)[1]=0,this.addCommands({cmd:()=>{for(const ye of te)t(this,wt).has(ye.id)&&ye.translateInPage(jt,Jt)},undo:()=>{for(const ye of te)t(this,wt).has(ye.id)&&ye.translateInPage(-jt,-Jt)},mustExec:!1})},1e3));for(const ye of te)ye.translateInPage(U,mt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),N(this,Rt,new Map);for(const U of t(this,r))t(this,Rt).set(U,{savedX:U.x,savedY:U.y,savedPageIndex:U.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!t(this,Rt))return!1;this.disableUserSelect(!1);const U=t(this,Rt);N(this,Rt,null);let mt=!1;for(const[{x:jt,y:Jt,pageIndex:te},le]of U)le.newX=jt,le.newY=Jt,le.newPageIndex=te,mt||(mt=jt!==le.savedX||Jt!==le.savedY||te!==le.savedPageIndex);if(!mt)return!1;const Ht=(jt,Jt,te,le)=>{if(t(this,wt).has(jt.id)){const ye=t(this,Ct).get(le);ye?jt._setParentAndPosition(ye,Jt,te):(jt.pageIndex=le,jt.x=Jt,jt.y=te)}};return this.addCommands({cmd:()=>{for(const[jt,{newX:Jt,newY:te,newPageIndex:le}]of U)Ht(jt,Jt,te,le)},undo:()=>{for(const[jt,{savedX:Jt,savedY:te,savedPageIndex:le}]of U)Ht(jt,Jt,te,le)},mustExec:!0}),!0}dragSelectedEditors(U,mt){if(t(this,Rt))for(const Ht of t(this,Rt).keys())Ht.drag(U,mt)}rebuild(U){if(U.parent===null){const mt=this.getLayer(U.pageIndex);mt?(mt.changeParent(U),mt.addOrRebuild(U)):(this.addEditor(U),this.addToAnnotationStorage(U),U.rebuild())}else U.parent.addOrRebuild(U)}get isEditorHandlingKeyboard(){var U;return((U=this.getActive())==null?void 0:U.shouldGetKeyboardEvents())||t(this,r).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(U){return t(this,Ot)===U}getActive(){return t(this,Ot)}getMode(){return t(this,s)}get imageManager(){return(0,e.shadow)(this,"imageManager",new M)}getSelectionBoxes(U){if(!U)return null;const mt=document.getSelection();for(let Re=0,He=mt.rangeCount;Re<He;Re++)if(!U.contains(mt.getRangeAt(Re).commonAncestorContainer))return null;const{x:Ht,y:jt,width:Jt,height:te}=U.getBoundingClientRect();let le;switch(U.getAttribute("data-main-rotation")){case"90":le=(Re,He,Ye,$e)=>({x:(He-jt)/te,y:1-(Re+Ye-Ht)/Jt,width:$e/te,height:Ye/Jt});break;case"180":le=(Re,He,Ye,$e)=>({x:1-(Re+Ye-Ht)/Jt,y:1-(He+$e-jt)/te,width:Ye/Jt,height:$e/te});break;case"270":le=(Re,He,Ye,$e)=>({x:1-(He+$e-jt)/te,y:(Re-Ht)/Jt,width:$e/te,height:Ye/Jt});break;default:le=(Re,He,Ye,$e)=>({x:(Re-Ht)/Jt,y:(He-jt)/te,width:Ye/Jt,height:$e/te});break}const ye=[];for(let Re=0,He=mt.rangeCount;Re<He;Re++){const Ye=mt.getRangeAt(Re);if(!Ye.collapsed)for(const{x:$e,y:Ko,width:Mi,height:jr}of Ye.getClientRects())Mi===0||jr===0||ye.push(le($e,Ko,Mi,jr))}return ye.length===0?null:ye}};Ot=new WeakMap,wt=new WeakMap,Ct=new WeakMap,Lt=new WeakMap,Tt=new WeakMap,at=new WeakMap,bt=new WeakMap,Pt=new WeakMap,Rt=new WeakMap,Ut=new WeakMap,Yt=new WeakMap,re=new WeakMap,_e=new WeakMap,ce=new WeakMap,he=new WeakMap,me=new WeakMap,zt=new WeakMap,oe=new WeakMap,Se=new WeakMap,se=new WeakMap,Ee=new WeakMap,ne=new WeakMap,lt=new WeakMap,s=new WeakMap,r=new WeakMap,u=new WeakMap,v=new WeakMap,l=new WeakMap,x=new WeakMap,y=new WeakMap,S=new WeakMap,p=new WeakMap,o=new WeakMap,h=new WeakMap,n=new WeakMap,a=new WeakMap,f=new WeakMap,I=new WeakMap,w=new WeakMap,X=new WeakMap,Z=new WeakMap,Y=new WeakMap,st=new WeakMap,g=new WeakMap,R=new WeakMap,J=new WeakSet,dn=function({anchorNode:U}){return U.nodeType===Node.TEXT_NODE?U.parentElement:U},b=new WeakSet,qa=function(){const U=document.getSelection();if(!U||U.isCollapsed)return;const mt=F(this,J,dn).call(this,U).closest(".textLayer"),Ht=this.getSelectionBoxes(mt);Ht&&(t(this,zt)||N(this,zt,new A.HighlightToolbar(this)),t(this,zt).show(mt,Ht,this.direction==="ltr"))},K=new WeakSet,$a=function(){var Ht,jt,Jt;const U=document.getSelection();if(!U||U.isCollapsed){t(this,u)&&((Ht=t(this,zt))==null||Ht.hide(),N(this,u,null),F(this,_t,Qe).call(this,{hasSelectedText:!1}));return}const{anchorNode:mt}=U;if(mt!==t(this,u)){if(!F(this,J,dn).call(this,U).closest(".textLayer")){t(this,u)&&((jt=t(this,zt))==null||jt.hide(),N(this,u,null),F(this,_t,Qe).call(this,{hasSelectedText:!1}));return}if((Jt=t(this,zt))==null||Jt.hide(),N(this,u,mt),F(this,_t,Qe).call(this,{hasSelectedText:!0}),!(t(this,s)!==e.AnnotationEditorType.HIGHLIGHT&&t(this,s)!==e.AnnotationEditorType.NONE)&&(t(this,s)===e.AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),N(this,me,this.isShiftKeyDown),!this.isShiftKeyDown)){const te=le=>{le.type==="pointerup"&&le.button!==0||(window.removeEventListener("pointerup",te),window.removeEventListener("blur",te),le.type==="pointerup"&&F(this,gt,un).call(this,"main_toolbar"))};window.addEventListener("pointerup",te),window.addEventListener("blur",te)}}},gt=new WeakSet,un=function(U=""){t(this,s)===e.AnnotationEditorType.HIGHLIGHT?this.highlightSelection(U):t(this,re)&&F(this,b,qa).call(this)},It=new WeakSet,Wa=function(){document.addEventListener("selectionchange",t(this,w))},ie=new WeakSet,Xa=function(){document.removeEventListener("selectionchange",t(this,w))},Ae=new WeakSet,Va=function(){window.addEventListener("focus",t(this,y)),window.addEventListener("blur",t(this,x))},Pe=new WeakSet,cr=function(){window.removeEventListener("focus",t(this,y)),window.removeEventListener("blur",t(this,x))},Le=new WeakSet,dr=function(){window.addEventListener("keydown",t(this,h)),window.addEventListener("keyup",t(this,n))},j=new WeakSet,ur=function(){window.removeEventListener("keydown",t(this,h)),window.removeEventListener("keyup",t(this,n))},rt=new WeakSet,pr=function(){document.addEventListener("copy",t(this,S)),document.addEventListener("cut",t(this,p)),document.addEventListener("paste",t(this,o))},ft=new WeakSet,gr=function(){document.removeEventListener("copy",t(this,S)),document.removeEventListener("cut",t(this,p)),document.removeEventListener("paste",t(this,o))},_t=new WeakSet,Qe=function(U){Object.entries(U).some(([mt,Ht])=>t(this,Z)[mt]!==Ht)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,Z),U)}),t(this,s)===e.AnnotationEditorType.HIGHLIGHT&&U.hasSelectedEditor===!1&&F(this,qt,Ei).call(this,[[e.AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))},qt=new WeakSet,Ei=function(U){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:U})},Qt=new WeakSet,Ya=function(){if(!t(this,Se)){N(this,Se,!0);for(const U of t(this,Ct).values())U.enable();for(const U of t(this,wt).values())U.enable()}},Mt=new WeakSet,Ka=function(){if(this.unselectAll(),t(this,Se)){N(this,Se,!1);for(const U of t(this,Ct).values())U.disable();for(const U of t(this,wt).values())U.disable()}},Zt=new WeakSet,fr=function(U){const mt=t(this,Ct).get(U.pageIndex);mt?mt.addOrRebuild(U):(this.addEditor(U),this.addToAnnotationStorage(U))},de=new WeakSet,Qa=function(){let U=null;for(U of t(this,r));return U},Me=new WeakSet,ks=function(){if(t(this,wt).size===0)return!0;if(t(this,wt).size===1)for(const U of t(this,wt).values())return U.isEmpty();return!1},Xe=new WeakSet,mr=function(U){for(const mt of t(this,r))mt.unselect();t(this,r).clear();for(const mt of U)mt.isEmpty()||(t(this,r).add(mt),mt.select());F(this,_t,Qe).call(this,{hasSelectedEditor:this.hasSelection})},be(si,"TRANSLATE_SMALL",1),be(si,"TRANSLATE_BIG",10);let L=si},94:(d,C,m)=>{m.d(C,{PDFFetchStream:()=>H});var e=m(292),E=m(490);function A(tt,z,L){return{method:"GET",headers:tt,signal:L.signal,mode:"cors",credentials:z?"include":"same-origin",redirect:"follow"}}function _(tt){const z=new Headers;for(const L in tt){const q=tt[L];q!==void 0&&z.append(L,q)}return z}function it(tt){return tt instanceof Uint8Array?tt.buffer:tt instanceof ArrayBuffer?tt:((0,e.warn)(`getArrayBuffer - unexpected data format: ${tt}`),new Uint8Array(tt).buffer)}class H{constructor(z){this.source=z,this.isHttp=/^https?:/i.test(z.url),this.httpHeaders=this.isHttp&&z.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var z;return((z=this._fullRequestReader)==null?void 0:z._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new M(this),this._fullRequestReader}getRangeReader(z,L){if(L<=this._progressiveDataLength)return null;const q=new T(this,z,L);return this._rangeRequestReaders.push(q),q}cancelAllRequests(z){var L;(L=this._fullRequestReader)==null||L.cancel(z);for(const q of this._rangeRequestReaders.slice(0))q.cancel(z)}}class M{constructor(z){this._stream=z,this._reader=null,this._loaded=0,this._filename=null;const L=z.source;this._withCredentials=L.withCredentials||!1,this._contentLength=L.length,this._headersCapability=Promise.withResolvers(),this._disableRange=L.disableRange||!1,this._rangeChunkSize=L.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!L.disableStream,this._isRangeSupported=!L.disableRange,this._headers=_(this._stream.httpHeaders);const q=L.url;fetch(q,A(this._headers,this._withCredentials,this._abortController)).then(W=>{if(!(0,E.validateResponseStatus)(W.status))throw(0,E.createResponseStatusError)(W.status,q);this._reader=W.body.getReader(),this._headersCapability.resolve();const et=O=>W.headers.get(O),{allowRangeRequests:ut,suggestedLength:nt}=(0,E.validateRangeRequestCapabilities)({getResponseHeader:et,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=ut,this._contentLength=nt||this._contentLength,this._filename=(0,E.extractFilenameFromHeader)(et),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new e.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var q;await this._headersCapability.promise;const{value:z,done:L}=await this._reader.read();return L?{value:z,done:L}:(this._loaded+=z.byteLength,(q=this.onProgress)==null||q.call(this,{loaded:this._loaded,total:this._contentLength}),{value:it(z),done:!1})}cancel(z){var L;(L=this._reader)==null||L.cancel(z),this._abortController.abort()}}class T{constructor(z,L,q){this._stream=z,this._reader=null,this._loaded=0;const W=z.source;this._withCredentials=W.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!W.disableStream,this._abortController=new AbortController,this._headers=_(this._stream.httpHeaders),this._headers.append("Range",`bytes=${L}-${q-1}`);const et=W.url;fetch(et,A(this._headers,this._withCredentials,this._abortController)).then(ut=>{if(!(0,E.validateResponseStatus)(ut.status))throw(0,E.createResponseStatusError)(ut.status,et);this._readCapability.resolve(),this._reader=ut.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var q;await this._readCapability.promise;const{value:z,done:L}=await this._reader.read();return L?{value:z,done:L}:(this._loaded+=z.byteLength,(q=this.onProgress)==null||q.call(this,{loaded:this._loaded}),{value:it(z),done:!1})}cancel(z){var L;(L=this._reader)==null||L.cancel(z),this._abortController.abort()}}},10:(d,C,m)=>{var _;m.d(C,{FontFaceObject:()=>A,FontLoader:()=>E});var e=m(292);class E{constructor({ownerDocument:H=globalThis.document,styleElement:M=null}){c(this,_,new Set);this._document=H,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(H){this.nativeFontFaces.add(H),this._document.fonts.add(H)}removeNativeFontFace(H){this.nativeFontFaces.delete(H),this._document.fonts.delete(H)}insertRule(H){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const M=this.styleElement.sheet;M.insertRule(H,M.cssRules.length)}clear(){for(const H of this.nativeFontFaces)this._document.fonts.delete(H);this.nativeFontFaces.clear(),t(this,_).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:H,_inspectFont:M}){if(!(!H||t(this,_).has(H.loadedName))){if((0,e.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:T,src:tt,style:z}=H,L=new FontFace(T,tt,z);this.addNativeFontFace(L);try{await L.load(),t(this,_).add(T),M==null||M(H)}catch{(0,e.warn)(`Cannot load system font: ${H.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(L)}return}(0,e.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(H){if(H.attached||H.missingFile&&!H.systemFontInfo)return;if(H.attached=!0,H.systemFontInfo){await this.loadSystemFont(H);return}if(this.isFontLoadingAPISupported){const T=H.createNativeFontFace();if(T){this.addNativeFontFace(T);try{await T.loaded}catch(tt){throw(0,e.warn)(`Failed to load font '${T.family}': '${tt}'.`),H.disableFontFace=!0,tt}}return}const M=H.createFontFaceRule();if(M){if(this.insertRule(M),this.isSyncFontLoadingSupported)return;await new Promise(T=>{const tt=this._queueLoadingCallback(T);this._prepareFontLoadEvent(H,tt)})}}get isFontLoadingAPISupported(){var M;const H=!!((M=this._document)!=null&&M.fonts);return(0,e.shadow)(this,"isFontLoadingAPISupported",H)}get isSyncFontLoadingSupported(){let H=!1;return(e.isNodeJS||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(H=!0),(0,e.shadow)(this,"isSyncFontLoadingSupported",H)}_queueLoadingCallback(H){function M(){for((0,e.assert)(!tt.done,"completeRequest() cannot be called twice."),tt.done=!0;T.length>0&&T[0].done;){const z=T.shift();setTimeout(z.callback,0)}}const{loadingRequests:T}=this,tt={done:!1,complete:M,callback:H};return T.push(tt),tt}get _loadTestFont(){const H=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,e.shadow)(this,"_loadTestFont",H)}_prepareFontLoadEvent(H,M){function T(Dt,St){return Dt.charCodeAt(St)<<24|Dt.charCodeAt(St+1)<<16|Dt.charCodeAt(St+2)<<8|Dt.charCodeAt(St+3)&255}function tt(Dt,St,Ot,wt){const Ct=Dt.substring(0,St),Lt=Dt.substring(St+Ot);return Ct+wt+Lt}let z,L;const q=this._document.createElement("canvas");q.width=1,q.height=1;const W=q.getContext("2d");let et=0;function ut(Dt,St){if(++et>30){(0,e.warn)("Load test font never loaded."),St();return}if(W.font="30px "+Dt,W.fillText(".",0,20),W.getImageData(0,0,1,1).data[3]>0){St();return}setTimeout(ut.bind(null,Dt,St))}const nt=`lt${Date.now()}${this.loadTestFontId++}`;let O=this._loadTestFont;O=tt(O,976,nt.length,nt);const V=16,$=1482184792;let B=T(O,V);for(z=0,L=nt.length-3;z<L;z+=4)B=B-$+T(nt,z)|0;z<nt.length&&(B=B-$+T(nt+"XXX",z)|0),O=tt(O,V,4,(0,e.string32)(B));const Q=`url(data:font/opentype;base64,${btoa(O)});`,ot=`@font-face {font-family:"${nt}";src:${Q}}`;this.insertRule(ot);const At=this._document.createElement("div");At.style.visibility="hidden",At.style.width=At.style.height="10px",At.style.position="absolute",At.style.top=At.style.left="0px";for(const Dt of[H.loadedName,nt]){const St=this._document.createElement("span");St.textContent="Hi",St.style.fontFamily=Dt,At.append(St)}this._document.body.append(At),ut(nt,()=>{At.remove(),M.complete()})}}_=new WeakMap;class A{constructor(H,{isEvalSupported:M=!0,disableFontFace:T=!1,ignoreErrors:tt=!1,inspectFont:z=null}){this.compiledGlyphs=Object.create(null);for(const L in H)this[L]=H[L];this.isEvalSupported=M!==!1,this.disableFontFace=T===!0,this.ignoreErrors=tt===!0,this._inspectFont=z}createNativeFontFace(){var M;if(!this.data||this.disableFontFace)return null;let H;if(!this.cssFontInfo)H=new FontFace(this.loadedName,this.data,{});else{const T={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(T.style=`oblique ${this.cssFontInfo.italicAngle}deg`),H=new FontFace(this.cssFontInfo.fontFamily,this.data,T)}return(M=this._inspectFont)==null||M.call(this,this),H}createFontFaceRule(){var tt;if(!this.data||this.disableFontFace)return null;const H=(0,e.bytesToString)(this.data),M=`url(data:${this.mimetype};base64,${btoa(H)});`;let T;if(!this.cssFontInfo)T=`@font-face {font-family:"${this.loadedName}";src:${M}}`;else{let z=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(z+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),T=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${z}src:${M}}`}return(tt=this._inspectFont)==null||tt.call(this,this,M),T}getPathGenerator(H,M){if(this.compiledGlyphs[M]!==void 0)return this.compiledGlyphs[M];let T;try{T=H.get(this.loadedName+"_path_"+M)}catch(tt){if(!this.ignoreErrors)throw tt;return(0,e.warn)(`getPathGenerator - ignoring character: "${tt}".`),this.compiledGlyphs[M]=function(z,L){}}if(this.isEvalSupported&&e.FeatureTest.isEvalSupported){const tt=[];for(const z of T){const L=z.args!==void 0?z.args.join(","):"";tt.push("c.",z.cmd,"(",L,`);
`)}return this.compiledGlyphs[M]=new Function("c","size",tt.join(""))}return this.compiledGlyphs[M]=function(tt,z){for(const L of T)L.cmd==="scale"&&(L.args=[z,-z]),tt[L.cmd].apply(tt,L.args)}}}},62:(d,C,m)=>{var A,_;m.d(C,{Metadata:()=>E});var e=m(292);class E{constructor({parsedData:H,rawData:M}){c(this,A,void 0);c(this,_,void 0);N(this,A,H),N(this,_,M)}getRaw(){return t(this,_)}get(H){return t(this,A).get(H)??null}getAll(){return(0,e.objectFromMap)(t(this,A))}has(H){return t(this,A).has(H)}}A=new WeakMap,_=new WeakMap},457:(d,C,m)=>{m.d(C,{PDFNetworkStream:()=>M});var e=m(292),E=m(490);const A=200,_=206;function it(z){const L=z.response;return typeof L!="string"?L:(0,e.stringToBytes)(L).buffer}class H{constructor(L,q={}){this.url=L,this.isHttp=/^https?:/i.test(L),this.httpHeaders=this.isHttp&&q.httpHeaders||Object.create(null),this.withCredentials=q.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(L,q,W){const et={begin:L,end:q};for(const ut in W)et[ut]=W[ut];return this.request(et)}requestFull(L){return this.request(L)}request(L){const q=new XMLHttpRequest,W=this.currXhrId++,et=this.pendingRequests[W]={xhr:q};q.open("GET",this.url),q.withCredentials=this.withCredentials;for(const ut in this.httpHeaders){const nt=this.httpHeaders[ut];nt!==void 0&&q.setRequestHeader(ut,nt)}return this.isHttp&&"begin"in L&&"end"in L?(q.setRequestHeader("Range",`bytes=${L.begin}-${L.end-1}`),et.expectedStatus=_):et.expectedStatus=A,q.responseType="arraybuffer",L.onError&&(q.onerror=function(ut){L.onError(q.status)}),q.onreadystatechange=this.onStateChange.bind(this,W),q.onprogress=this.onProgress.bind(this,W),et.onHeadersReceived=L.onHeadersReceived,et.onDone=L.onDone,et.onError=L.onError,et.onProgress=L.onProgress,q.send(null),W}onProgress(L,q){var et;const W=this.pendingRequests[L];W&&((et=W.onProgress)==null||et.call(W,q))}onStateChange(L,q){var O,V,$;const W=this.pendingRequests[L];if(!W)return;const et=W.xhr;if(et.readyState>=2&&W.onHeadersReceived&&(W.onHeadersReceived(),delete W.onHeadersReceived),et.readyState!==4||!(L in this.pendingRequests))return;if(delete this.pendingRequests[L],et.status===0&&this.isHttp){(O=W.onError)==null||O.call(W,et.status);return}const ut=et.status||A;if(!(ut===A&&W.expectedStatus===_)&&ut!==W.expectedStatus){(V=W.onError)==null||V.call(W,et.status);return}const nt=it(et);if(ut===_){const B=et.getResponseHeader("Content-Range"),Q=/bytes (\d+)-(\d+)\/(\d+)/.exec(B);W.onDone({begin:parseInt(Q[1],10),chunk:nt})}else nt?W.onDone({begin:0,chunk:nt}):($=W.onError)==null||$.call(W,et.status)}getRequestXhr(L){return this.pendingRequests[L].xhr}isPendingRequest(L){return L in this.pendingRequests}abortRequest(L){const q=this.pendingRequests[L].xhr;delete this.pendingRequests[L],q.abort()}}class M{constructor(L){this._source=L,this._manager=new H(L.url,{httpHeaders:L.httpHeaders,withCredentials:L.withCredentials}),this._rangeChunkSize=L.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(L){const q=this._rangeRequestReaders.indexOf(L);q>=0&&this._rangeRequestReaders.splice(q,1)}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new T(this._manager,this._source),this._fullRequestReader}getRangeReader(L,q){const W=new tt(this._manager,L,q);return W.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(W),W}cancelAllRequests(L){var q;(q=this._fullRequestReader)==null||q.cancel(L);for(const W of this._rangeRequestReaders.slice(0))W.cancel(L)}}class T{constructor(L,q){this._manager=L;const W={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=q.url,this._fullRequestId=L.requestFull(W),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=q.disableRange||!1,this._contentLength=q.length,this._rangeChunkSize=q.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const L=this._fullRequestId,q=this._manager.getRequestXhr(L),W=nt=>q.getResponseHeader(nt),{allowRangeRequests:et,suggestedLength:ut}=(0,E.validateRangeRequestCapabilities)({getResponseHeader:W,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});et&&(this._isRangeSupported=!0),this._contentLength=ut||this._contentLength,this._filename=(0,E.extractFilenameFromHeader)(W),this._isRangeSupported&&this._manager.abortRequest(L),this._headersReceivedCapability.resolve()}_onDone(L){if(L&&(this._requests.length>0?this._requests.shift().resolve({value:L.chunk,done:!1}):this._cachedChunks.push(L.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const q of this._requests)q.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(L){this._storedError=(0,E.createResponseStatusError)(L,this._url),this._headersReceivedCapability.reject(this._storedError);for(const q of this._requests)q.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(L){var q;(q=this.onProgress)==null||q.call(this,{loaded:L.loaded,total:L.lengthComputable?L.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const L=Promise.withResolvers();return this._requests.push(L),L.promise}cancel(L){this._done=!0,this._headersReceivedCapability.reject(L);for(const q of this._requests)q.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class tt{constructor(L,q,W){this._manager=L;const et={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=L.url,this._requestId=L.requestRange(q,W,et),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var L;(L=this.onClosed)==null||L.call(this,this)}_onDone(L){const q=L.chunk;this._requests.length>0?this._requests.shift().resolve({value:q,done:!1}):this._queuedChunk=q,this._done=!0;for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(L){this._storedError=(0,E.createResponseStatusError)(L,this._url);for(const q of this._requests)q.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(L){var q;this.isStreamingSupported||((q=this.onProgress)==null||q.call(this,{loaded:L.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const q=this._queuedChunk;return this._queuedChunk=null,{value:q,done:!1}}if(this._done)return{value:void 0,done:!0};const L=Promise.withResolvers();return this._requests.push(L),L.promise}cancel(L){this._done=!0;for(const q of this._requests)q.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},490:(d,C,m)=>{m.d(C,{createResponseStatusError:()=>H,extractFilenameFromHeader:()=>it,validateRangeRequestCapabilities:()=>_,validateResponseStatus:()=>M});var e=m(292);function E(T){let tt=!0,z=L("filename\\*","i").exec(T);if(z){z=z[1];let V=ut(z);return V=unescape(V),V=nt(V),V=O(V),W(V)}if(z=et(T),z){const V=O(z);return W(V)}if(z=L("filename","i").exec(T),z){z=z[1];let V=ut(z);return V=O(V),W(V)}function L(V,$){return new RegExp("(?:^|;)\\s*"+V+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',$)}function q(V,$){if(V){if(!/^[\x00-\xFF]+$/.test($))return $;try{const B=new TextDecoder(V,{fatal:!0}),Q=(0,e.stringToBytes)($);$=B.decode(Q),tt=!1}catch{}}return $}function W(V){return tt&&/[\x80-\xff]/.test(V)&&(V=q("utf-8",V),tt&&(V=q("iso-8859-1",V))),V}function et(V){const $=[];let B;const Q=L("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(B=Q.exec(V))!==null;){let[,At,Dt,St]=B;if(At=parseInt(At,10),At in $){if(At===0)break;continue}$[At]=[Dt,St]}const ot=[];for(let At=0;At<$.length&&At in $;++At){let[Dt,St]=$[At];St=ut(St),Dt&&(St=unescape(St),At===0&&(St=nt(St))),ot.push(St)}return ot.join("")}function ut(V){if(V.startsWith('"')){const $=V.slice(1).split('\\"');for(let B=0;B<$.length;++B){const Q=$[B].indexOf('"');Q!==-1&&($[B]=$[B].slice(0,Q),$.length=B+1),$[B]=$[B].replaceAll(/\\(.)/g,"$1")}V=$.join('"')}return V}function nt(V){const $=V.indexOf("'");if($===-1)return V;const B=V.slice(0,$),Q=V.slice($+1).replace(/^[^']*'/,"");return q(B,Q)}function O(V){return!V.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(V)?V:V.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function($,B,Q,ot){if(Q==="q"||Q==="Q")return ot=ot.replaceAll("_"," "),ot=ot.replaceAll(/=([0-9a-fA-F]{2})/g,function(At,Dt){return String.fromCharCode(parseInt(Dt,16))}),q(B,ot);try{ot=atob(ot)}catch{}return q(B,ot)})}return""}var A=m(419);function _({getResponseHeader:T,isHttp:tt,rangeChunkSize:z,disableRange:L}){const q={allowRangeRequests:!1,suggestedLength:void 0},W=parseInt(T("Content-Length"),10);return!Number.isInteger(W)||(q.suggestedLength=W,W<=2*z)||L||!tt||T("Accept-Ranges")!=="bytes"||(T("Content-Encoding")||"identity")!=="identity"||(q.allowRangeRequests=!0),q}function it(T){const tt=T("Content-Disposition");if(tt){let z=E(tt);if(z.includes("%"))try{z=decodeURIComponent(z)}catch{}if((0,A.isPdfFile)(z))return z}return null}function H(T,tt){return T===404||T===0&&tt.startsWith("file:")?new e.MissingPDFException('Missing PDF "'+tt+'".'):new e.UnexpectedResponseException(`Unexpected server response (${T}) while retrieving PDF "${tt}".`,T)}function M(T){return T===200||T===206}},786:(d,C,m)=>{m.a(d,async(e,E)=>{try{let it=function($){const B=z.parse($);return B.protocol==="file:"||B.host?B:/^[a-z]:[/\\]/i.test($)?z.parse(`file:///${$}`):(B.host||(B.protocol="file:"),B)},H=function($,B){return{protocol:$.protocol,auth:$.auth,host:$.hostname,port:$.port,path:$.path,method:"GET",headers:B}};m.d(C,{PDFNodeStream:()=>q});var A=m(292),_=m(490);let M,T,tt,z;A.isNodeJS&&(M=await vi(()=>import("./chunk.js"),[]),T=await vi(()=>import("./chunk.js"),[]),tt=await vi(()=>import("./chunk.js"),[]),z=await vi(()=>import("./chunk.js"),[]));const L=/^file:\/\/\/[a-zA-Z]:\//;class q{constructor(B){this.source=B,this.url=it(B.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&B.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var B;return((B=this._fullRequestReader)==null?void 0:B._loaded)??0}getFullReader(){return(0,A.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new O(this):new ut(this),this._fullRequestReader}getRangeReader(B,Q){if(Q<=this._progressiveDataLength)return null;const ot=this.isFsUrl?new V(this,B,Q):new nt(this,B,Q);return this._rangeRequestReaders.push(ot),ot}cancelAllRequests(B){var Q;(Q=this._fullRequestReader)==null||Q.cancel(B);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(B)}}class W{constructor(B){this._url=B.url,this._done=!1,this._storedError=null,this.onProgress=null;const Q=B.source;this._contentLength=Q.length,this._loaded=0,this._filename=null,this._disableRange=Q.disableRange||!1,this._rangeChunkSize=Q.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!Q.disableStream,this._isRangeSupported=!Q.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Q;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const B=this._readableStream.read();return B===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=B.length,(Q=this.onProgress)==null||Q.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(B).buffer,done:!1})}cancel(B){if(!this._readableStream){this._error(B);return}this._readableStream.destroy(B)}_error(B){this._storedError=B,this._readCapability.resolve()}_setReadableStream(B){this._readableStream=B,B.on("readable",()=>{this._readCapability.resolve()}),B.on("end",()=>{B.destroy(),this._done=!0,this._readCapability.resolve()}),B.on("error",Q=>{this._error(Q)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new A.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class et{constructor(B){this._url=B.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const Q=B.source;this._isStreamingSupported=!Q.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Q;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const B=this._readableStream.read();return B===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=B.length,(Q=this.onProgress)==null||Q.call(this,{loaded:this._loaded}),{value:new Uint8Array(B).buffer,done:!1})}cancel(B){if(!this._readableStream){this._error(B);return}this._readableStream.destroy(B)}_error(B){this._storedError=B,this._readCapability.resolve()}_setReadableStream(B){this._readableStream=B,B.on("readable",()=>{this._readCapability.resolve()}),B.on("end",()=>{B.destroy(),this._done=!0,this._readCapability.resolve()}),B.on("error",Q=>{this._error(Q)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class ut extends W{constructor(B){super(B);const Q=ot=>{if(ot.statusCode===404){const Ot=new A.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Ot,this._headersCapability.reject(Ot);return}this._headersCapability.resolve(),this._setReadableStream(ot);const At=Ot=>this._readableStream.headers[Ot.toLowerCase()],{allowRangeRequests:Dt,suggestedLength:St}=(0,_.validateRangeRequestCapabilities)({getResponseHeader:At,isHttp:B.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Dt,this._contentLength=St||this._contentLength,this._filename=(0,_.extractFilenameFromHeader)(At)};this._request=null,this._url.protocol==="http:"?this._request=T.request(H(this._url,B.httpHeaders),Q):this._request=tt.request(H(this._url,B.httpHeaders),Q),this._request.on("error",ot=>{this._storedError=ot,this._headersCapability.reject(ot)}),this._request.end()}}class nt extends et{constructor(B,Q,ot){super(B),this._httpHeaders={};for(const Dt in B.httpHeaders){const St=B.httpHeaders[Dt];St!==void 0&&(this._httpHeaders[Dt]=St)}this._httpHeaders.Range=`bytes=${Q}-${ot-1}`;const At=Dt=>{if(Dt.statusCode===404){const St=new A.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=St;return}this._setReadableStream(Dt)};this._request=null,this._url.protocol==="http:"?this._request=T.request(H(this._url,this._httpHeaders),At):this._request=tt.request(H(this._url,this._httpHeaders),At),this._request.on("error",Dt=>{this._storedError=Dt}),this._request.end()}}class O extends W{constructor(B){super(B);let Q=decodeURIComponent(this._url.path);L.test(this._url.href)&&(Q=Q.replace(/^\//,"")),M.promises.lstat(Q).then(ot=>{this._contentLength=ot.size,this._setReadableStream(M.createReadStream(Q)),this._headersCapability.resolve()},ot=>{ot.code==="ENOENT"&&(ot=new A.MissingPDFException(`Missing PDF "${Q}".`)),this._storedError=ot,this._headersCapability.reject(ot)})}}class V extends et{constructor(B,Q,ot){super(B);let At=decodeURIComponent(this._url.path);L.test(this._url.href)&&(At=At.replace(/^\//,"")),this._setReadableStream(M.createReadStream(At,{start:Q,end:ot-1}))}}E()}catch(it){E(it)}},1)},573:(d,C,m)=>{m.a(d,async(e,E)=>{try{m.d(C,{NodeCMapReaderFactory:()=>L,NodeCanvasFactory:()=>z,NodeFilterFactory:()=>tt,NodeStandardFontDataFactory:()=>q});var A=m(583),_=m(292);let it,H,M;if(_.isNodeJS){it=await vi(()=>import("./chunk.js"),[]);try{H=await vi(()=>import("./chunk.js"),[])}catch{}try{M=await vi(()=>import("./chunk2.js"),[])}catch{}}const T=function(W){return it.promises.readFile(W).then(et=>new Uint8Array(et))};class tt extends A.BaseFilterFactory{}class z extends A.BaseCanvasFactory{_createCanvas(et,ut){return H.createCanvas(et,ut)}}class L extends A.BaseCMapReaderFactory{_fetchData(et,ut){return T(et).then(nt=>({cMapData:nt,compressionType:ut}))}}class q extends A.BaseStandardFontDataFactory{_fetchData(et){return T(et)}}E()}catch(it){E(it)}},1)},626:(d,C,m)=>{var H,M,T,tt,z,L,q,W,et,vr;m.d(C,{OptionalContentConfig:()=>it});var e=m(292),E=m(651);const A=Symbol("INTERNAL");class _{constructor(O,{name:V,intent:$,usage:B}){c(this,H,!1);c(this,M,!1);c(this,T,!1);c(this,tt,!0);N(this,H,!!(O&e.RenderingIntentFlag.DISPLAY)),N(this,M,!!(O&e.RenderingIntentFlag.PRINT)),this.name=V,this.intent=$,this.usage=B}get visible(){if(t(this,T))return t(this,tt);if(!t(this,tt))return!1;const{print:O,view:V}=this.usage;return t(this,H)?(V==null?void 0:V.viewState)!=="OFF":t(this,M)?(O==null?void 0:O.printState)!=="OFF":!0}_setVisible(O,V,$=!1){O!==A&&(0,e.unreachable)("Internal method `_setVisible` called."),N(this,T,$),N(this,tt,V)}}H=new WeakMap,M=new WeakMap,T=new WeakMap,tt=new WeakMap;class it{constructor(O,V=e.RenderingIntentFlag.DISPLAY){c(this,et);c(this,z,null);c(this,L,new Map);c(this,q,null);c(this,W,null);if(this.renderingIntent=V,this.name=null,this.creator=null,O!==null){this.name=O.name,this.creator=O.creator,N(this,W,O.order);for(const $ of O.groups)t(this,L).set($.id,new _(V,$));if(O.baseState==="OFF")for(const $ of t(this,L).values())$._setVisible(A,!1);for(const $ of O.on)t(this,L).get($)._setVisible(A,!0);for(const $ of O.off)t(this,L).get($)._setVisible(A,!1);N(this,q,this.getHash())}}isVisible(O){if(t(this,L).size===0)return!0;if(!O)return(0,e.info)("Optional content group not defined."),!0;if(O.type==="OCG")return t(this,L).has(O.id)?t(this,L).get(O.id).visible:((0,e.warn)(`Optional content group not found: ${O.id}`),!0);if(O.type==="OCMD"){if(O.expression)return F(this,et,vr).call(this,O.expression);if(!O.policy||O.policy==="AnyOn"){for(const V of O.ids){if(!t(this,L).has(V))return(0,e.warn)(`Optional content group not found: ${V}`),!0;if(t(this,L).get(V).visible)return!0}return!1}else if(O.policy==="AllOn"){for(const V of O.ids){if(!t(this,L).has(V))return(0,e.warn)(`Optional content group not found: ${V}`),!0;if(!t(this,L).get(V).visible)return!1}return!0}else if(O.policy==="AnyOff"){for(const V of O.ids){if(!t(this,L).has(V))return(0,e.warn)(`Optional content group not found: ${V}`),!0;if(!t(this,L).get(V).visible)return!0}return!1}else if(O.policy==="AllOff"){for(const V of O.ids){if(!t(this,L).has(V))return(0,e.warn)(`Optional content group not found: ${V}`),!0;if(t(this,L).get(V).visible)return!1}return!0}return(0,e.warn)(`Unknown optional content policy ${O.policy}.`),!0}return(0,e.warn)(`Unknown group type ${O.type}.`),!0}setVisibility(O,V=!0){const $=t(this,L).get(O);if(!$){(0,e.warn)(`Optional content group not found: ${O}`);return}$._setVisible(A,!!V,!0),N(this,z,null)}setOCGState({state:O,preserveRB:V}){let $;for(const B of O){switch(B){case"ON":case"OFF":case"Toggle":$=B;continue}const Q=t(this,L).get(B);if(Q)switch($){case"ON":Q._setVisible(A,!0);break;case"OFF":Q._setVisible(A,!1);break;case"Toggle":Q._setVisible(A,!Q.visible);break}}N(this,z,null)}get hasInitialVisibility(){return t(this,q)===null||this.getHash()===t(this,q)}getOrder(){return t(this,L).size?t(this,W)?t(this,W).slice():[...t(this,L).keys()]:null}getGroups(){return t(this,L).size>0?(0,e.objectFromMap)(t(this,L)):null}getGroup(O){return t(this,L).get(O)||null}getHash(){if(t(this,z)!==null)return t(this,z);const O=new E.MurmurHash3_64;for(const[V,$]of t(this,L))O.update(`${V}:${$.visible}`);return N(this,z,O.hexdigest())}}z=new WeakMap,L=new WeakMap,q=new WeakMap,W=new WeakMap,et=new WeakSet,vr=function(O){const V=O.length;if(V<2)return!0;const $=O[0];for(let B=1;B<V;B++){const Q=O[B];let ot;if(Array.isArray(Q))ot=F(this,et,vr).call(this,Q);else if(t(this,L).has(Q))ot=t(this,L).get(Q).visible;else return(0,e.warn)(`Optional content group not found: ${Q}`),!0;switch($){case"And":if(!ot)return!1;break;case"Or":if(ot)return!0;break;case"Not":return!ot;default:return!0}}return $==="And"}},814:(d,C,m)=>{m.d(C,{cleanupTextLayer:()=>tt,renderTextLayer:()=>ut,updateTextLayer:()=>nt});var e=m(292),E=m(419);const A=1e5,_=30,it=.8,H=new Map;let M=null;function T(){if(!M){const O=document.createElement("canvas");O.className="hiddenCanvasElement",document.body.append(O),M=O.getContext("2d",{alpha:!1})}return M}function tt(){M==null||M.canvas.remove(),M=null}function z(O){const V=H.get(O);if(V)return V;const $=T(),B=$.font;$.canvas.width=$.canvas.height=_,$.font=`${_}px ${O}`;const Q=$.measureText("");let ot=Q.fontBoundingBoxAscent,At=Math.abs(Q.fontBoundingBoxDescent);if(ot){const St=ot/(ot+At);return H.set(O,St),$.canvas.width=$.canvas.height=0,$.font=B,St}$.strokeStyle="red",$.clearRect(0,0,_,_),$.strokeText("g",0,0);let Dt=$.getImageData(0,0,_,_).data;At=0;for(let St=Dt.length-1-3;St>=0;St-=4)if(Dt[St]>0){At=Math.ceil(St/4/_);break}$.clearRect(0,0,_,_),$.strokeText("A",0,_),Dt=$.getImageData(0,0,_,_).data,ot=0;for(let St=0,Ot=Dt.length;St<Ot;St+=4)if(Dt[St]>0){ot=_-Math.floor(St/4/_);break}if($.canvas.width=$.canvas.height=0,$.font=B,ot){const St=ot/(ot+At);return H.set(O,St),St}return H.set(O,it),it}function L(O,V,$){const B=document.createElement("span"),Q={angle:0,canvasWidth:0,hasText:V.str!=="",hasEOL:V.hasEOL,fontSize:0};O._textDivs.push(B);const ot=e.Util.transform(O._transform,V.transform);let At=Math.atan2(ot[1],ot[0]);const Dt=$[V.fontName];Dt.vertical&&(At+=Math.PI/2);const St=O._fontInspectorEnabled&&Dt.fontSubstitution||Dt.fontFamily,Ot=Math.hypot(ot[2],ot[3]),wt=Ot*z(St);let Ct,Lt;At===0?(Ct=ot[4],Lt=ot[5]-wt):(Ct=ot[4]+wt*Math.sin(At),Lt=ot[5]-wt*Math.cos(At));const Tt="calc(var(--scale-factor)*",at=B.style;O._container===O._rootContainer?(at.left=`${(100*Ct/O._pageWidth).toFixed(2)}%`,at.top=`${(100*Lt/O._pageHeight).toFixed(2)}%`):(at.left=`${Tt}${Ct.toFixed(2)}px)`,at.top=`${Tt}${Lt.toFixed(2)}px)`),at.fontSize=`${Tt}${Ot.toFixed(2)}px)`,at.fontFamily=St,Q.fontSize=Ot,B.setAttribute("role","presentation"),B.textContent=V.str,B.dir=V.dir,O._fontInspectorEnabled&&(B.dataset.fontName=Dt.fontSubstitutionLoadedName||V.fontName),At!==0&&(Q.angle=At*(180/Math.PI));let bt=!1;if(V.str.length>1)bt=!0;else if(V.str!==" "&&V.transform[0]!==V.transform[3]){const Pt=Math.abs(V.transform[0]),Rt=Math.abs(V.transform[3]);Pt!==Rt&&Math.max(Pt,Rt)/Math.min(Pt,Rt)>1.5&&(bt=!0)}bt&&(Q.canvasWidth=Dt.vertical?V.height:V.width),O._textDivProperties.set(B,Q),O._isReadableStream&&O._layoutText(B)}function q(O){const{div:V,scale:$,properties:B,ctx:Q,prevFontSize:ot,prevFontFamily:At}=O,{style:Dt}=V;let St="";if(B.canvasWidth!==0&&B.hasText){const{fontFamily:Ot}=Dt,{canvasWidth:wt,fontSize:Ct}=B;(ot!==Ct||At!==Ot)&&(Q.font=`${Ct*$}px ${Ot}`,O.prevFontSize=Ct,O.prevFontFamily=Ot);const{width:Lt}=Q.measureText(V.textContent);Lt>0&&(St=`scaleX(${wt*$/Lt})`)}B.angle!==0&&(St=`rotate(${B.angle}deg) ${St}`),St.length>0&&(Dt.transform=St)}function W(O){if(O._canceled)return;const V=O._textDivs,$=O._capability;if(V.length>A){$.resolve();return}if(!O._isReadableStream)for(const B of V)O._layoutText(B);$.resolve()}class et{constructor({textContentSource:V,container:$,viewport:B,textDivs:Q,textDivProperties:ot,textContentItemsStr:At}){var Ct;this._textContentSource=V,this._isReadableStream=V instanceof ReadableStream,this._container=this._rootContainer=$,this._textDivs=Q||[],this._textContentItemsStr=At||[],this._fontInspectorEnabled=!!((Ct=globalThis.FontInspector)!=null&&Ct.enabled),this._reader=null,this._textDivProperties=ot||new WeakMap,this._canceled=!1,this._capability=Promise.withResolvers(),this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:B.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:T()};const{pageWidth:Dt,pageHeight:St,pageX:Ot,pageY:wt}=B.rawDims;this._transform=[1,0,0,-1,-Ot,wt+St],this._pageWidth=Dt,this._pageHeight=St,(0,E.setLayerDimensions)($,B),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new e.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new e.AbortException("TextLayer task cancelled."))}_processItems(V,$){for(const B of V){if(B.str===void 0){if(B.type==="beginMarkedContentProps"||B.type==="beginMarkedContent"){const Q=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),B.id!==null&&this._container.setAttribute("id",`${B.id}`),Q.append(this._container)}else B.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(B.str),L(this,B,$)}}_layoutText(V){const $=this._layoutTextParams.properties=this._textDivProperties.get(V);if(this._layoutTextParams.div=V,q(this._layoutTextParams),$.hasText&&this._container.append(V),$.hasEOL){const B=document.createElement("br");B.setAttribute("role","presentation"),this._container.append(B)}}_render(){const{promise:V,resolve:$,reject:B}=Promise.withResolvers();let Q=Object.create(null);if(this._isReadableStream){const ot=()=>{this._reader.read().then(({value:At,done:Dt})=>{if(Dt){$();return}Object.assign(Q,At.styles),this._processItems(At.items,Q),ot()},B)};this._reader=this._textContentSource.getReader(),ot()}else if(this._textContentSource){const{items:ot,styles:At}=this._textContentSource;this._processItems(ot,At),$()}else throw new Error('No "textContentSource" parameter specified.');V.then(()=>{Q=null,W(this)},this._capability.reject)}}function ut(O){const V=new et(O);return V._render(),V}function nt({container:O,viewport:V,textDivs:$,textDivProperties:B,mustRotate:Q=!0,mustRescale:ot=!0}){if(Q&&(0,E.setLayerDimensions)(O,{rotation:V.rotation}),ot){const At=T(),Dt={prevFontSize:null,prevFontFamily:null,div:null,scale:V.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:At};for(const St of $)Dt.properties=B.get(St),Dt.div=St,q(Dt)}}},585:(d,C,m)=>{m.d(C,{PDFDataTransportStream:()=>A});var e=m(292),E=m(419);class A{constructor(M,{disableRange:T=!1,disableStream:tt=!1}){(0,e.assert)(M,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:z,initialData:L,progressiveDone:q,contentDispositionFilename:W}=M;if(this._queuedChunks=[],this._progressiveDone=q,this._contentDispositionFilename=W,(L==null?void 0:L.length)>0){const et=L instanceof Uint8Array&&L.byteLength===L.buffer.byteLength?L.buffer:new Uint8Array(L).buffer;this._queuedChunks.push(et)}this._pdfDataRangeTransport=M,this._isStreamingSupported=!tt,this._isRangeSupported=!T,this._contentLength=z,this._fullRequestReader=null,this._rangeReaders=[],M.addRangeListener((et,ut)=>{this._onReceiveData({begin:et,chunk:ut})}),M.addProgressListener((et,ut)=>{this._onProgress({loaded:et,total:ut})}),M.addProgressiveReadListener(et=>{this._onReceiveData({chunk:et})}),M.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),M.transportReady()}_onReceiveData({begin:M,chunk:T}){const tt=T instanceof Uint8Array&&T.byteLength===T.buffer.byteLength?T.buffer:new Uint8Array(T).buffer;if(M===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(tt):this._queuedChunks.push(tt);else{const z=this._rangeReaders.some(function(L){return L._begin!==M?!1:(L._enqueue(tt),!0)});(0,e.assert)(z,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var M;return((M=this._fullRequestReader)==null?void 0:M._loaded)??0}_onProgress(M){var T,tt,z,L;M.total===void 0?(tt=(T=this._rangeReaders[0])==null?void 0:T.onProgress)==null||tt.call(T,{loaded:M.loaded}):(L=(z=this._fullRequestReader)==null?void 0:z.onProgress)==null||L.call(z,{loaded:M.loaded,total:M.total})}_onProgressiveDone(){var M;(M=this._fullRequestReader)==null||M.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(M){const T=this._rangeReaders.indexOf(M);T>=0&&this._rangeReaders.splice(T,1)}getFullReader(){(0,e.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const M=this._queuedChunks;return this._queuedChunks=null,new _(this,M,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(M,T){if(T<=this._progressiveDataLength)return null;const tt=new it(this,M,T);return this._pdfDataRangeTransport.requestDataRange(M,T),this._rangeReaders.push(tt),tt}cancelAllRequests(M){var T;(T=this._fullRequestReader)==null||T.cancel(M);for(const tt of this._rangeReaders.slice(0))tt.cancel(M);this._pdfDataRangeTransport.abort()}}class _{constructor(M,T,tt=!1,z=null){this._stream=M,this._done=tt||!1,this._filename=(0,E.isPdfFile)(z)?z:null,this._queuedChunks=T||[],this._loaded=0;for(const L of this._queuedChunks)this._loaded+=L.byteLength;this._requests=[],this._headersReady=Promise.resolve(),M._fullRequestReader=this,this.onProgress=null}_enqueue(M){this._done||(this._requests.length>0?this._requests.shift().resolve({value:M,done:!1}):this._queuedChunks.push(M),this._loaded+=M.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const M=Promise.withResolvers();return this._requests.push(M),M.promise}cancel(M){this._done=!0;for(const T of this._requests)T.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class it{constructor(M,T,tt){this._stream=M,this._begin=T,this._end=tt,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(M){if(!this._done){if(this._requests.length===0)this._queuedChunk=M;else{this._requests.shift().resolve({value:M,done:!1});for(const T of this._requests)T.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const T=this._queuedChunk;return this._queuedChunk=null,{value:T,done:!1}}if(this._done)return{value:void 0,done:!0};const M=Promise.withResolvers();return this._requests.push(M),M.promise}cancel(M){this._done=!0;for(const T of this._requests)T.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},164:(d,C,m)=>{var E,A;m.d(C,{GlobalWorkerOptions:()=>e});class e{static get workerPort(){return t(this,E)}static set workerPort(it){if(!(typeof Worker<"u"&&it instanceof Worker)&&it!==null)throw new Error("Invalid `workerPort` type.");N(this,E,it)}static get workerSrc(){return t(this,A)}static set workerSrc(it){if(typeof it!="string")throw new Error("Invalid `workerSrc` type.");N(this,A,it)}}E=new WeakMap,A=new WeakMap,c(e,E,null),c(e,A,"")},284:(d,C,m)=>{m.d(C,{XfaLayer:()=>E});var e=m(50);class E{static setupStorage(_,it,H,M,T){const tt=M.getValue(it,{value:null});switch(H.name){case"textarea":if(tt.value!==null&&(_.textContent=tt.value),T==="print")break;_.addEventListener("input",z=>{M.setValue(it,{value:z.target.value})});break;case"input":if(H.attributes.type==="radio"||H.attributes.type==="checkbox"){if(tt.value===H.attributes.xfaOn?_.setAttribute("checked",!0):tt.value===H.attributes.xfaOff&&_.removeAttribute("checked"),T==="print")break;_.addEventListener("change",z=>{M.setValue(it,{value:z.target.checked?z.target.getAttribute("xfaOn"):z.target.getAttribute("xfaOff")})})}else{if(tt.value!==null&&_.setAttribute("value",tt.value),T==="print")break;_.addEventListener("input",z=>{M.setValue(it,{value:z.target.value})})}break;case"select":if(tt.value!==null){_.setAttribute("value",tt.value);for(const z of H.children)z.attributes.value===tt.value?z.attributes.selected=!0:z.attributes.hasOwnProperty("selected")&&delete z.attributes.selected}_.addEventListener("input",z=>{const L=z.target.options,q=L.selectedIndex===-1?"":L[L.selectedIndex].value;M.setValue(it,{value:q})});break}}static setAttributes({html:_,element:it,storage:H=null,intent:M,linkService:T}){const{attributes:tt}=it,z=_ instanceof HTMLAnchorElement;tt.type==="radio"&&(tt.name=`${tt.name}-${M}`);for(const[L,q]of Object.entries(tt))if(q!=null)switch(L){case"class":q.length&&_.setAttribute(L,q.join(" "));break;case"dataId":break;case"id":_.setAttribute("data-element-id",q);break;case"style":Object.assign(_.style,q);break;case"textContent":_.textContent=q;break;default:(!z||L!=="href"&&L!=="newWindow")&&_.setAttribute(L,q)}z&&T.addLinkAttributes(_,tt.href,tt.newWindow),H&&tt.dataId&&this.setupStorage(_,tt.dataId,it,H)}static render(_){var et,ut;const it=_.annotationStorage,H=_.linkService,M=_.xfaHtml,T=_.intent||"display",tt=document.createElement(M.name);M.attributes&&this.setAttributes({html:tt,element:M,intent:T,linkService:H});const z=T!=="richText",L=_.div;if(L.append(tt),_.viewport){const nt=`matrix(${_.viewport.transform.join(",")})`;L.style.transform=nt}z&&L.setAttribute("class","xfaLayer xfaFont");const q=[];if(M.children.length===0){if(M.value){const nt=document.createTextNode(M.value);tt.append(nt),z&&e.XfaText.shouldBuildText(M.name)&&q.push(nt)}return{textDivs:q}}const W=[[M,-1,tt]];for(;W.length>0;){const[nt,O,V]=W.at(-1);if(O+1===nt.children.length){W.pop();continue}const $=nt.children[++W.at(-1)[1]];if($===null)continue;const{name:B}=$;if(B==="#text"){const ot=document.createTextNode($.value);q.push(ot),V.append(ot);continue}const Q=(et=$==null?void 0:$.attributes)!=null&&et.xmlns?document.createElementNS($.attributes.xmlns,B):document.createElement(B);if(V.append(Q),$.attributes&&this.setAttributes({html:Q,element:$,storage:it,intent:T,linkService:H}),((ut=$.children)==null?void 0:ut.length)>0)W.push([$,-1,Q]);else if($.value){const ot=document.createTextNode($.value);z&&e.XfaText.shouldBuildText(B)&&q.push(ot),Q.append(ot)}}for(const nt of L.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))nt.setAttribute("readOnly",!0);return{textDivs:q}}static update(_){const it=`matrix(${_.viewport.transform.join(",")})`;_.div.style.transform=it,_.div.hidden=!1}}},50:(d,C,m)=>{m.d(C,{XfaText:()=>e});class e{static textContent(A){const _=[],it={items:_,styles:Object.create(null)};function H(M){var z;if(!M)return;let T=null;const tt=M.name;if(tt==="#text")T=M.value;else if(e.shouldBuildText(tt))(z=M==null?void 0:M.attributes)!=null&&z.textContent?T=M.attributes.textContent:M.value&&(T=M.value);else return;if(T!==null&&_.push({str:T}),!!M.children)for(const L of M.children)H(L)}return H(A),it}static shouldBuildText(A){return!(A==="textarea"||A==="input"||A==="option"||A==="select")}}},228:(d,C,m)=>{m.a(d,async(e,E)=>{try{m.d(C,{AbortException:()=>A.AbortException,AnnotationEditorLayer:()=>M.AnnotationEditorLayer,AnnotationEditorParamsType:()=>A.AnnotationEditorParamsType,AnnotationEditorType:()=>A.AnnotationEditorType,AnnotationEditorUIManager:()=>T.AnnotationEditorUIManager,AnnotationLayer:()=>tt.AnnotationLayer,AnnotationMode:()=>A.AnnotationMode,CMapCompressionType:()=>A.CMapCompressionType,ColorPicker:()=>z.ColorPicker,DOMSVGFactory:()=>it.DOMSVGFactory,DrawLayer:()=>L.DrawLayer,FeatureTest:()=>A.FeatureTest,GlobalWorkerOptions:()=>q.GlobalWorkerOptions,ImageKind:()=>A.ImageKind,InvalidPDFException:()=>A.InvalidPDFException,MissingPDFException:()=>A.MissingPDFException,OPS:()=>A.OPS,Outliner:()=>W.Outliner,PDFDataRangeTransport:()=>_.PDFDataRangeTransport,PDFDateString:()=>it.PDFDateString,PDFWorker:()=>_.PDFWorker,PasswordResponses:()=>A.PasswordResponses,PermissionFlag:()=>A.PermissionFlag,PixelsPerInch:()=>it.PixelsPerInch,RenderingCancelledException:()=>it.RenderingCancelledException,UnexpectedResponseException:()=>A.UnexpectedResponseException,Util:()=>A.Util,VerbosityLevel:()=>A.VerbosityLevel,XfaLayer:()=>et.XfaLayer,build:()=>_.build,createValidAbsoluteUrl:()=>A.createValidAbsoluteUrl,fetchData:()=>it.fetchData,getDocument:()=>_.getDocument,getFilenameFromUrl:()=>it.getFilenameFromUrl,getPdfFilenameFromUrl:()=>it.getPdfFilenameFromUrl,getXfaPageViewport:()=>it.getXfaPageViewport,isDataScheme:()=>it.isDataScheme,isPdfFile:()=>it.isPdfFile,noContextMenu:()=>it.noContextMenu,normalizeUnicode:()=>A.normalizeUnicode,renderTextLayer:()=>H.renderTextLayer,setLayerDimensions:()=>it.setLayerDimensions,shadow:()=>A.shadow,updateTextLayer:()=>H.updateTextLayer,version:()=>_.version});var A=m(292),_=m(831),it=m(419),H=m(814),M=m(731),T=m(830),tt=m(976),z=m(259),L=m(47),q=m(164),W=m(61),et=m(284),ut=e([_]);_=(ut.then?(await ut)():ut)[0];const nt="4.1.392",O="fcb76a78d";E()}catch(nt){E(nt)}})},178:(d,C,m)=>{var H,Ja,T,Za,z,pn;m.d(C,{MessageHandler:()=>it});var e=m(292);const E={UNKNOWN:0,DATA:1,ERROR:2},A={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function _(q){switch(q instanceof Error||typeof q=="object"&&q!==null||(0,e.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),q.name){case"AbortException":return new e.AbortException(q.message);case"MissingPDFException":return new e.MissingPDFException(q.message);case"PasswordException":return new e.PasswordException(q.message,q.code);case"UnexpectedResponseException":return new e.UnexpectedResponseException(q.message,q.status);case"UnknownErrorException":return new e.UnknownErrorException(q.message,q.details);default:return new e.UnknownErrorException(q.message,q.toString())}}class it{constructor(W,et,ut){c(this,H);c(this,T);c(this,z);this.sourceName=W,this.targetName=et,this.comObj=ut,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=nt=>{const O=nt.data;if(O.targetName!==this.sourceName)return;if(O.stream){F(this,T,Za).call(this,O);return}if(O.callback){const $=O.callbackId,B=this.callbackCapabilities[$];if(!B)throw new Error(`Cannot resolve callback ${$}`);if(delete this.callbackCapabilities[$],O.callback===E.DATA)B.resolve(O.data);else if(O.callback===E.ERROR)B.reject(_(O.reason));else throw new Error("Unexpected callback case");return}const V=this.actionHandler[O.action];if(!V)throw new Error(`Unknown action from worker: ${O.action}`);if(O.callbackId){const $=this.sourceName,B=O.sourceName;new Promise(function(Q){Q(V(O.data))}).then(function(Q){ut.postMessage({sourceName:$,targetName:B,callback:E.DATA,callbackId:O.callbackId,data:Q})},function(Q){ut.postMessage({sourceName:$,targetName:B,callback:E.ERROR,callbackId:O.callbackId,reason:_(Q)})});return}if(O.streamId){F(this,H,Ja).call(this,O);return}V(O.data)},ut.addEventListener("message",this._onComObjOnMessage)}on(W,et){const ut=this.actionHandler;if(ut[W])throw new Error(`There is already an actionName called "${W}"`);ut[W]=et}send(W,et,ut){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:W,data:et},ut)}sendWithPromise(W,et,ut){const nt=this.callbackId++,O=Promise.withResolvers();this.callbackCapabilities[nt]=O;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:W,callbackId:nt,data:et},ut)}catch(V){O.reject(V)}return O.promise}sendWithStream(W,et,ut,nt){const O=this.streamId++,V=this.sourceName,$=this.targetName,B=this.comObj;return new ReadableStream({start:Q=>{const ot=Promise.withResolvers();return this.streamControllers[O]={controller:Q,startCall:ot,pullCall:null,cancelCall:null,isClosed:!1},B.postMessage({sourceName:V,targetName:$,action:W,streamId:O,data:et,desiredSize:Q.desiredSize},nt),ot.promise},pull:Q=>{const ot=Promise.withResolvers();return this.streamControllers[O].pullCall=ot,B.postMessage({sourceName:V,targetName:$,stream:A.PULL,streamId:O,desiredSize:Q.desiredSize}),ot.promise},cancel:Q=>{(0,e.assert)(Q instanceof Error,"cancel must have a valid reason");const ot=Promise.withResolvers();return this.streamControllers[O].cancelCall=ot,this.streamControllers[O].isClosed=!0,B.postMessage({sourceName:V,targetName:$,stream:A.CANCEL,streamId:O,reason:_(Q)}),ot.promise}},ut)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}H=new WeakSet,Ja=function(W){const et=W.streamId,ut=this.sourceName,nt=W.sourceName,O=this.comObj,V=this,$=this.actionHandler[W.action],B={enqueue(Q,ot=1,At){if(this.isCancelled)return;const Dt=this.desiredSize;this.desiredSize-=ot,Dt>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),O.postMessage({sourceName:ut,targetName:nt,stream:A.ENQUEUE,streamId:et,chunk:Q},At)},close(){this.isCancelled||(this.isCancelled=!0,O.postMessage({sourceName:ut,targetName:nt,stream:A.CLOSE,streamId:et}),delete V.streamSinks[et])},error(Q){(0,e.assert)(Q instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,O.postMessage({sourceName:ut,targetName:nt,stream:A.ERROR,streamId:et,reason:_(Q)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:W.desiredSize,ready:null};B.sinkCapability.resolve(),B.ready=B.sinkCapability.promise,this.streamSinks[et]=B,new Promise(function(Q){Q($(W.data,B))}).then(function(){O.postMessage({sourceName:ut,targetName:nt,stream:A.START_COMPLETE,streamId:et,success:!0})},function(Q){O.postMessage({sourceName:ut,targetName:nt,stream:A.START_COMPLETE,streamId:et,reason:_(Q)})})},T=new WeakSet,Za=function(W){const et=W.streamId,ut=this.sourceName,nt=W.sourceName,O=this.comObj,V=this.streamControllers[et],$=this.streamSinks[et];switch(W.stream){case A.START_COMPLETE:W.success?V.startCall.resolve():V.startCall.reject(_(W.reason));break;case A.PULL_COMPLETE:W.success?V.pullCall.resolve():V.pullCall.reject(_(W.reason));break;case A.PULL:if(!$){O.postMessage({sourceName:ut,targetName:nt,stream:A.PULL_COMPLETE,streamId:et,success:!0});break}$.desiredSize<=0&&W.desiredSize>0&&$.sinkCapability.resolve(),$.desiredSize=W.desiredSize,new Promise(function(B){var Q;B((Q=$.onPull)==null?void 0:Q.call($))}).then(function(){O.postMessage({sourceName:ut,targetName:nt,stream:A.PULL_COMPLETE,streamId:et,success:!0})},function(B){O.postMessage({sourceName:ut,targetName:nt,stream:A.PULL_COMPLETE,streamId:et,reason:_(B)})});break;case A.ENQUEUE:if((0,e.assert)(V,"enqueue should have stream controller"),V.isClosed)break;V.controller.enqueue(W.chunk);break;case A.CLOSE:if((0,e.assert)(V,"close should have stream controller"),V.isClosed)break;V.isClosed=!0,V.controller.close(),F(this,z,pn).call(this,V,et);break;case A.ERROR:(0,e.assert)(V,"error should have stream controller"),V.controller.error(_(W.reason)),F(this,z,pn).call(this,V,et);break;case A.CANCEL_COMPLETE:W.success?V.cancelCall.resolve():V.cancelCall.reject(_(W.reason)),F(this,z,pn).call(this,V,et);break;case A.CANCEL:if(!$)break;new Promise(function(B){var Q;B((Q=$.onCancel)==null?void 0:Q.call($,_(W.reason)))}).then(function(){O.postMessage({sourceName:ut,targetName:nt,stream:A.CANCEL_COMPLETE,streamId:et,success:!0})},function(B){O.postMessage({sourceName:ut,targetName:nt,stream:A.CANCEL_COMPLETE,streamId:et,reason:_(B)})}),$.sinkCapability.reject(_(W.reason)),$.isCancelled=!0,delete this.streamSinks[et];break;default:throw new Error("Unexpected stream case")}},z=new WeakSet,pn=async function(W,et){var ut,nt,O;await Promise.allSettled([(ut=W.startCall)==null?void 0:ut.promise,(nt=W.pullCall)==null?void 0:nt.promise,(O=W.cancelCall)==null?void 0:O.promise]),delete this.streamControllers[et]}},651:(d,C,m)=>{m.d(C,{MurmurHash3_64:()=>_});const e=3285377520,E=4294901760,A=65535;class _{constructor(H){this.h1=H?H&4294967295:e,this.h2=H?H&4294967295:e}update(H){let M,T;if(typeof H=="string"){M=new Uint8Array(H.length*2),T=0;for(let B=0,Q=H.length;B<Q;B++){const ot=H.charCodeAt(B);ot<=255?M[T++]=ot:(M[T++]=ot>>>8,M[T++]=ot&255)}}else if(ArrayBuffer.isView(H))M=H.slice(),T=M.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const tt=T>>2,z=T-tt*4,L=new Uint32Array(M.buffer,0,tt);let q=0,W=0,et=this.h1,ut=this.h2;const nt=3432918353,O=461845907,V=nt&A,$=O&A;for(let B=0;B<tt;B++)B&1?(q=L[B],q=q*nt&E|q*V&A,q=q<<15|q>>>17,q=q*O&E|q*$&A,et^=q,et=et<<13|et>>>19,et=et*5+3864292196):(W=L[B],W=W*nt&E|W*V&A,W=W<<15|W>>>17,W=W*O&E|W*$&A,ut^=W,ut=ut<<13|ut>>>19,ut=ut*5+3864292196);switch(q=0,z){case 3:q^=M[tt*4+2]<<16;case 2:q^=M[tt*4+1]<<8;case 1:q^=M[tt*4],q=q*nt&E|q*V&A,q=q<<15|q>>>17,q=q*O&E|q*$&A,tt&1?et^=q:ut^=q}this.h1=et,this.h2=ut}hexdigest(){let H=this.h1,M=this.h2;return H^=M>>>1,H=H*3981806797&E|H*36045&A,M=M*4283543511&E|((M<<16|H>>>16)*2950163797&E)>>>16,H^=M>>>1,H=H*444984403&E|H*60499&A,M=M*3301882366&E|((M<<16|H>>>16)*3120437893&E)>>>16,H^=M>>>1,(H>>>0).toString(16).padStart(8,"0")+(M>>>0).toString(16).padStart(8,"0")}}},292:(d,C,m)=>{var l,gn,y,br;m.d(C,{AbortException:()=>re,AnnotationBorderStyleType:()=>ut,AnnotationEditorParamsType:()=>z,AnnotationEditorPrefix:()=>T,AnnotationEditorType:()=>tt,AnnotationMode:()=>M,AnnotationPrefix:()=>v,AnnotationType:()=>et,BaseException:()=>Tt,CMapCompressionType:()=>O,FONT_IDENTITY_MATRIX:()=>A,FeatureTest:()=>Se,FormatError:()=>Yt,IDENTITY_MATRIX:()=>E,ImageKind:()=>W,InvalidPDFException:()=>Pt,LINE_FACTOR:()=>it,MAX_IMAGE_SIZE_TO_CACHE:()=>_,MissingPDFException:()=>Rt,OPS:()=>V,PasswordException:()=>at,PasswordResponses:()=>$,PermissionFlag:()=>L,RenderingIntentFlag:()=>H,TextRenderingMode:()=>q,UnexpectedResponseException:()=>Ut,UnknownErrorException:()=>bt,Util:()=>Ee,VerbosityLevel:()=>nt,assert:()=>Ot,bytesToString:()=>_e,createValidAbsoluteUrl:()=>Ct,getUuid:()=>u,getVerbosityLevel:()=>ot,info:()=>At,isNodeJS:()=>e,normalizeUnicode:()=>r,objectFromMap:()=>me,setVerbosityLevel:()=>Q,shadow:()=>Lt,string32:()=>he,stringToBytes:()=>ce,unreachable:()=>St,warn:()=>Dt});const e=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),E=[1,0,0,1,0,0],A=[.001,0,0,.001,0,0],_=1e7,it=1.35,H={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},M={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},T="pdfjs_internal_editor_",tt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},z={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},L={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},q={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},W={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},et={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ut={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},nt={ERRORS:0,WARNINGS:1,INFOS:5},O={NONE:0,BINARY:1},V={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},$={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let B=nt.WARNINGS;function Q(p){Number.isInteger(p)&&(B=p)}function ot(){return B}function At(p){B>=nt.INFOS&&console.log(`Info: ${p}`)}function Dt(p){B>=nt.WARNINGS&&console.log(`Warning: ${p}`)}function St(p){throw new Error(p)}function Ot(p,o){p||St(o)}function wt(p){switch(p==null?void 0:p.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ct(p,o=null,h=null){var n;if(!p)return null;try{if(h&&typeof p=="string"&&(h.addDefaultProtocol&&p.startsWith("www.")&&((n=p.match(/\./g))==null?void 0:n.length)>=2&&(p=`http://${p}`),h.tryConvertEncoding))try{p=ne(p)}catch{}const a=o?new URL(p,o):new URL(p);if(wt(a))return a}catch{}return null}function Lt(p,o,h,n=!1){return Object.defineProperty(p,o,{value:h,enumerable:!n,configurable:!0,writable:!1}),h}const Tt=function(){function p(o,h){this.constructor===p&&St("Cannot initialize BaseException."),this.message=o,this.name=h}return p.prototype=new Error,p.constructor=p,p}();class at extends Tt{constructor(o,h){super(o,"PasswordException"),this.code=h}}class bt extends Tt{constructor(o,h){super(o,"UnknownErrorException"),this.details=h}}class Pt extends Tt{constructor(o){super(o,"InvalidPDFException")}}class Rt extends Tt{constructor(o){super(o,"MissingPDFException")}}class Ut extends Tt{constructor(o,h){super(o,"UnexpectedResponseException"),this.status=h}}class Yt extends Tt{constructor(o){super(o,"FormatError")}}class re extends Tt{constructor(o){super(o,"AbortException")}}function _e(p){(typeof p!="object"||(p==null?void 0:p.length)===void 0)&&St("Invalid argument for bytesToString");const o=p.length,h=8192;if(o<h)return String.fromCharCode.apply(null,p);const n=[];for(let a=0;a<o;a+=h){const f=Math.min(a+h,o),I=p.subarray(a,f);n.push(String.fromCharCode.apply(null,I))}return n.join("")}function ce(p){typeof p!="string"&&St("Invalid argument for stringToBytes");const o=p.length,h=new Uint8Array(o);for(let n=0;n<o;++n)h[n]=p.charCodeAt(n)&255;return h}function he(p){return String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,p&255)}function me(p){const o=Object.create(null);for(const[h,n]of p)o[h]=n;return o}function zt(){const p=new Uint8Array(4);return p[0]=1,new Uint32Array(p.buffer,0,1)[0]===1}function oe(){try{return new Function(""),!0}catch{return!1}}class Se{static get isLittleEndian(){return Lt(this,"isLittleEndian",zt())}static get isEvalSupported(){return Lt(this,"isEvalSupported",oe())}static get isOffscreenCanvasSupported(){return Lt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Lt(this,"platform",{isMac:navigator.platform.includes("Mac")}):Lt(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var o,h;return Lt(this,"isCSSRoundSupported",(h=(o=globalThis.CSS)==null?void 0:o.supports)==null?void 0:h.call(o,"width: round(1.5px, 1px)"))}}const se=Array.from(Array(256).keys(),p=>p.toString(16).padStart(2,"0"));class Ee{static makeHexColor(o,h,n){return`#${se[o]}${se[h]}${se[n]}`}static scaleMinMax(o,h){let n;o[0]?(o[0]<0&&(n=h[0],h[0]=h[2],h[2]=n),h[0]*=o[0],h[2]*=o[0],o[3]<0&&(n=h[1],h[1]=h[3],h[3]=n),h[1]*=o[3],h[3]*=o[3]):(n=h[0],h[0]=h[1],h[1]=n,n=h[2],h[2]=h[3],h[3]=n,o[1]<0&&(n=h[1],h[1]=h[3],h[3]=n),h[1]*=o[1],h[3]*=o[1],o[2]<0&&(n=h[0],h[0]=h[2],h[2]=n),h[0]*=o[2],h[2]*=o[2]),h[0]+=o[4],h[1]+=o[5],h[2]+=o[4],h[3]+=o[5]}static transform(o,h){return[o[0]*h[0]+o[2]*h[1],o[1]*h[0]+o[3]*h[1],o[0]*h[2]+o[2]*h[3],o[1]*h[2]+o[3]*h[3],o[0]*h[4]+o[2]*h[5]+o[4],o[1]*h[4]+o[3]*h[5]+o[5]]}static applyTransform(o,h){const n=o[0]*h[0]+o[1]*h[2]+h[4],a=o[0]*h[1]+o[1]*h[3]+h[5];return[n,a]}static applyInverseTransform(o,h){const n=h[0]*h[3]-h[1]*h[2],a=(o[0]*h[3]-o[1]*h[2]+h[2]*h[5]-h[4]*h[3])/n,f=(-o[0]*h[1]+o[1]*h[0]+h[4]*h[1]-h[5]*h[0])/n;return[a,f]}static getAxialAlignedBoundingBox(o,h){const n=this.applyTransform(o,h),a=this.applyTransform(o.slice(2,4),h),f=this.applyTransform([o[0],o[3]],h),I=this.applyTransform([o[2],o[1]],h);return[Math.min(n[0],a[0],f[0],I[0]),Math.min(n[1],a[1],f[1],I[1]),Math.max(n[0],a[0],f[0],I[0]),Math.max(n[1],a[1],f[1],I[1])]}static inverseTransform(o){const h=o[0]*o[3]-o[1]*o[2];return[o[3]/h,-o[1]/h,-o[2]/h,o[0]/h,(o[2]*o[5]-o[4]*o[3])/h,(o[4]*o[1]-o[5]*o[0])/h]}static singularValueDecompose2dScale(o){const h=[o[0],o[2],o[1],o[3]],n=o[0]*h[0]+o[1]*h[2],a=o[0]*h[1]+o[1]*h[3],f=o[2]*h[0]+o[3]*h[2],I=o[2]*h[1]+o[3]*h[3],w=(n+I)/2,X=Math.sqrt((n+I)**2-4*(n*I-f*a))/2,Z=w+X||1,Y=w-X||1;return[Math.sqrt(Z),Math.sqrt(Y)]}static normalizeRect(o){const h=o.slice(0);return o[0]>o[2]&&(h[0]=o[2],h[2]=o[0]),o[1]>o[3]&&(h[1]=o[3],h[3]=o[1]),h}static intersect(o,h){const n=Math.max(Math.min(o[0],o[2]),Math.min(h[0],h[2])),a=Math.min(Math.max(o[0],o[2]),Math.max(h[0],h[2]));if(n>a)return null;const f=Math.max(Math.min(o[1],o[3]),Math.min(h[1],h[3])),I=Math.min(Math.max(o[1],o[3]),Math.max(h[1],h[3]));return f>I?null:[n,f,a,I]}static bezierBoundingBox(o,h,n,a,f,I,w,X,Z){return Z?(Z[0]=Math.min(Z[0],o,w),Z[1]=Math.min(Z[1],h,X),Z[2]=Math.max(Z[2],o,w),Z[3]=Math.max(Z[3],h,X)):Z=[Math.min(o,w),Math.min(h,X),Math.max(o,w),Math.max(h,X)],F(this,y,br).call(this,o,n,f,w,h,a,I,X,3*(-o+3*(n-f)+w),6*(o-2*n+f),3*(n-o),Z),F(this,y,br).call(this,o,n,f,w,h,a,I,X,3*(-h+3*(a-I)+X),6*(h-2*a+I),3*(a-h),Z),Z}}l=new WeakSet,gn=function(o,h,n,a,f,I,w,X,Z,Y){if(Z<=0||Z>=1)return;const st=1-Z,g=Z*Z,R=g*Z,J=st*(st*(st*o+3*Z*h)+3*g*n)+R*a,k=st*(st*(st*f+3*Z*I)+3*g*w)+R*X;Y[0]=Math.min(Y[0],J),Y[1]=Math.min(Y[1],k),Y[2]=Math.max(Y[2],J),Y[3]=Math.max(Y[3],k)},y=new WeakSet,br=function(o,h,n,a,f,I,w,X,Z,Y,st,g){if(Math.abs(Z)<1e-12){Math.abs(Y)>=1e-12&&F(this,l,gn).call(this,o,h,n,a,f,I,w,X,-st/Y,g);return}const R=Y**2-4*st*Z;if(R<0)return;const J=Math.sqrt(R),k=2*Z;F(this,l,gn).call(this,o,h,n,a,f,I,w,X,(-Y+J)/k,g),F(this,l,gn).call(this,o,h,n,a,f,I,w,X,(-Y-J)/k,g)},c(Ee,l),c(Ee,y);function ne(p){return decodeURIComponent(escape(p))}let lt=null,s=null;function r(p){return lt||(lt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,s=new Map([["\uFB05","\u017Ft"]])),p.replaceAll(lt,(o,h,n)=>h?h.normalize("NFKC"):s.get(n))}function u(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const p=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(p);else for(let o=0;o<32;o++)p[o]=Math.floor(Math.random()*255);return _e(p)}const v="pdfjs_internal_id_"}},Rr={};function Ci(d){var C=Rr[d];if(C!==void 0)return C.exports;var m=Rr[d]={exports:{}};return Ho[d](m,m.exports,Ci),m.exports}(()=>{var d=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",C=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",m=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",e=A=>{A&&A.d<1&&(A.d=1,A.forEach(_=>_.r--),A.forEach(_=>_.r--?_.r++:_()))},E=A=>A.map(_=>{if(_!==null&&typeof _=="object"){if(_[d])return _;if(_.then){var it=[];it.d=0,_.then(T=>{H[C]=T,e(it)},T=>{H[m]=T,e(it)});var H={};return H[d]=T=>T(it),H}}var M={};return M[d]=T=>{},M[C]=_,M});Ci.a=(A,_,it)=>{var H;it&&((H=[]).d=-1);var M=new Set,T=A.exports,tt,z,L,q=new Promise((W,et)=>{L=et,z=W});q[C]=T,q[d]=W=>(H&&W(H),M.forEach(W),q.catch(et=>{})),A.exports=q,_(W=>{tt=E(W);var et,ut=()=>tt.map(O=>{if(O[m])throw O[m];return O[C]}),nt=new Promise(O=>{et=()=>O(ut),et.r=0;var V=$=>$!==H&&!M.has($)&&(M.add($),$&&!$.d&&(et.r++,$.push(et)));tt.map($=>$[d](V))});return et.r?nt:ut()},W=>(W?L(q[m]=W):z(T),e(H))),H&&H.d<0&&(H.d=0)}})(),Ci.d=(d,C)=>{for(var m in C)Ci.o(C,m)&&!Ci.o(d,m)&&Object.defineProperty(d,m,{enumerable:!0,get:C[m]})},Ci.o=(d,C)=>Object.prototype.hasOwnProperty.call(d,C);var ge=Ci(228);ge=globalThis.pdfjsLib=await(globalThis.pdfjsLibPromise=ge),ge.AbortException,ge.AnnotationEditorLayer,ge.AnnotationEditorParamsType,ge.AnnotationEditorType,ge.AnnotationEditorUIManager,ge.AnnotationLayer,ge.AnnotationMode,ge.CMapCompressionType,ge.ColorPicker,ge.DOMSVGFactory,ge.DrawLayer,ge.FeatureTest;var Ir=ge.GlobalWorkerOptions;ge.ImageKind,ge.InvalidPDFException,ge.MissingPDFException,ge.OPS,ge.Outliner,ge.PDFDataRangeTransport,ge.PDFDateString,ge.PDFWorker,ge.PasswordResponses,ge.PermissionFlag,ge.PixelsPerInch,ge.RenderingCancelledException,ge.UnexpectedResponseException,ge.Util,ge.VerbosityLevel,ge.XfaLayer,ge.build,ge.createValidAbsoluteUrl,ge.fetchData;var Fr=ge.getDocument;ge.getFilenameFromUrl,ge.getPdfFilenameFromUrl,ge.getXfaPageViewport,ge.isDataScheme,ge.isPdfFile,ge.noContextMenu,ge.normalizeUnicode,ge.renderTextLayer,ge.setLayerDimensions,ge.shadow,ge.updateTextLayer,ge.version;var Bo={exports:{}};(function(d,C){(function(m,e){d.exports=e()})(window,function(){return function(m){var e={};function E(A){if(e[A])return e[A].exports;var _=e[A]={i:A,l:!1,exports:{}};return m[A].call(_.exports,_,_.exports,E),_.l=!0,_.exports}return E.m=m,E.c=e,E.d=function(A,_,it){E.o(A,_)||Object.defineProperty(A,_,{enumerable:!0,get:it})},E.r=function(A){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})},E.t=function(A,_){if(1&_&&(A=E(A)),8&_||4&_&&typeof A=="object"&&A&&A.__esModule)return A;var it=Object.create(null);if(E.r(it),Object.defineProperty(it,"default",{enumerable:!0,value:A}),2&_&&typeof A!="string")for(var H in A)E.d(it,H,(function(M){return A[M]}).bind(null,H));return it},E.n=function(A){var _=A&&A.__esModule?function(){return A.default}:function(){return A};return E.d(_,"a",_),_},E.o=function(A,_){return Object.prototype.hasOwnProperty.call(A,_)},E.p="",E(E.s=0)}([function(m,e,E){E.r(e);var A,_="fslightbox-",it="".concat(_,"styles"),H="".concat(_,"cursor-grabbing"),M="".concat(_,"full-dimension"),T="".concat(_,"flex-centered"),tt="".concat(_,"open"),z="".concat(_,"transform-transition"),L="".concat(_,"absoluted"),q="".concat(_,"slide-btn"),W="".concat(q,"-container"),et="".concat(_,"fade-in"),ut="".concat(_,"fade-out"),nt=et+"-strong",O=ut+"-strong",V="".concat(_,"opacity-"),$="".concat(V,"1"),B="".concat(_,"source");function Q(n){return(Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(n)}function ot(n){var a=n.stageIndexes,f=n.core.stageManager,I=n.props.sources.length-1;f.getPreviousSlideIndex=function(){return a.current===0?I:a.current-1},f.getNextSlideIndex=function(){return a.current===I?0:a.current+1},f.updateStageIndexes=I===0?function(){}:I===1?function(){a.current===0?(a.next=1,delete a.previous):(a.previous=0,delete a.next)}:function(){a.previous=f.getPreviousSlideIndex(),a.next=f.getNextSlideIndex()},f.i=I<=2?function(){return!0}:function(w){var X=a.current;if(X===0&&w===I||X===I&&w===0)return!0;var Z=X-w;return Z===-1||Z===0||Z===1}}(typeof document>"u"?"undefined":Q(document))==="object"&&((A=document.createElement("style")).className=it,A.appendChild(document.createTextNode(".fslightbox-absoluted{position:absolute;top:0;left:0}.fslightbox-fade-in{animation:fslightbox-fade-in .3s cubic-bezier(0,0,.7,1)}.fslightbox-fade-out{animation:fslightbox-fade-out .3s ease}.fslightbox-fade-in-strong{animation:fslightbox-fade-in-strong .3s cubic-bezier(0,0,.7,1)}.fslightbox-fade-out-strong{animation:fslightbox-fade-out-strong .3s ease}@keyframes fslightbox-fade-in{from{opacity:.65}to{opacity:1}}@keyframes fslightbox-fade-out{from{opacity:.35}to{opacity:0}}@keyframes fslightbox-fade-in-strong{from{opacity:.3}to{opacity:1}}@keyframes fslightbox-fade-out-strong{from{opacity:1}to{opacity:0}}.fslightbox-cursor-grabbing{cursor:grabbing}.fslightbox-full-dimension{width:100%;height:100%}.fslightbox-open{overflow:hidden;height:100%}.fslightbox-flex-centered{display:flex;justify-content:center;align-items:center}.fslightbox-opacity-0{opacity:0!important}.fslightbox-opacity-1{opacity:1!important}.fslightbox-scrollbarfix{padding-right:17px}.fslightbox-transform-transition{transition:transform .3s}.fslightbox-container{font-family:Arial,sans-serif;position:fixed;top:0;left:0;background:linear-gradient(rgba(30,30,30,.9),#000 1810%);touch-action:pinch-zoom;z-index:1000000000;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.fslightbox-container *{box-sizing:border-box}.fslightbox-svg-path{transition:fill .15s ease;fill:#ddd}.fslightbox-nav{height:45px;width:100%;position:absolute;top:0;left:0}.fslightbox-slide-number-container{display:flex;justify-content:center;align-items:center;position:relative;height:100%;font-size:15px;color:#d7d7d7;z-index:0;max-width:55px;text-align:left}.fslightbox-slide-number-container .fslightbox-flex-centered{height:100%}.fslightbox-slash{display:block;margin:0 5px;width:1px;height:12px;transform:rotate(15deg);background:#fff}.fslightbox-toolbar{position:absolute;z-index:3;right:0;top:0;height:100%;display:flex;background:rgba(35,35,35,.65)}.fslightbox-toolbar-button{height:100%;width:45px;cursor:pointer}.fslightbox-toolbar-button:hover .fslightbox-svg-path{fill:#fff}.fslightbox-slide-btn-container{display:flex;align-items:center;padding:12px 12px 12px 6px;position:absolute;top:50%;cursor:pointer;z-index:3;transform:translateY(-50%)}@media (min-width:476px){.fslightbox-slide-btn-container{padding:22px 22px 22px 6px}}@media (min-width:768px){.fslightbox-slide-btn-container{padding:30px 30px 30px 6px}}.fslightbox-slide-btn-container:hover .fslightbox-svg-path{fill:#f1f1f1}.fslightbox-slide-btn{padding:9px;font-size:26px;background:rgba(35,35,35,.65)}@media (min-width:768px){.fslightbox-slide-btn{padding:10px}}@media (min-width:1600px){.fslightbox-slide-btn{padding:11px}}.fslightbox-slide-btn-container-previous{left:0}@media (max-width:475.99px){.fslightbox-slide-btn-container-previous{padding-left:3px}}.fslightbox-slide-btn-container-next{right:0;padding-left:12px;padding-right:3px}@media (min-width:476px){.fslightbox-slide-btn-container-next{padding-left:22px}}@media (min-width:768px){.fslightbox-slide-btn-container-next{padding-left:30px}}@media (min-width:476px){.fslightbox-slide-btn-container-next{padding-right:6px}}.fslightbox-down-event-detector{position:absolute;z-index:1}.fslightbox-slide-swiping-hoverer{z-index:4}.fslightbox-invalid-file-wrapper{font-size:22px;color:#eaebeb;margin:auto}.fslightbox-video{object-fit:cover}.fslightbox-youtube-iframe{border:0}.fslightboxl{display:block;margin:auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:67px;height:67px}.fslightboxl div{box-sizing:border-box;display:block;position:absolute;width:54px;height:54px;margin:6px;border:5px solid;border-color:#999 transparent transparent transparent;border-radius:50%;animation:fslightboxl 1.2s cubic-bezier(.5,0,.5,1) infinite}.fslightboxl div:nth-child(1){animation-delay:-.45s}.fslightboxl div:nth-child(2){animation-delay:-.3s}.fslightboxl div:nth-child(3){animation-delay:-.15s}@keyframes fslightboxl{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.fslightbox-source{position:relative;z-index:2;opacity:0}")),document.head.appendChild(A));function At(n){var a,f=n.props,I=0,w={};this.getSourceTypeFromLocalStorageByUrl=function(Z){return a[Z]?a[Z]:X(Z)},this.handleReceivedSourceTypeForUrl=function(Z,Y){if(w[Y]===!1&&(I--,Z!=="invalid"?w[Y]=Z:delete w[Y],I===0)){(function(st,g){for(var R in g)st[R]=g[R]})(a,w);try{localStorage.setItem("fslightbox-types",JSON.stringify(a))}catch{}}};var X=function(Z){I++,w[Z]=!1};if(f.disableLocalStorage)this.getSourceTypeFromLocalStorageByUrl=function(){},this.handleReceivedSourceTypeForUrl=function(){};else{try{a=JSON.parse(localStorage.getItem("fslightbox-types"))}catch{}a||(a={},this.getSourceTypeFromLocalStorageByUrl=X)}}function Dt(n,a,f,I){var w=n.data,X=n.elements.sources,Z=f/I,Y=0;this.adjustSize=function(){if((Y=w.maxSourceWidth/Z)<w.maxSourceHeight)return f<w.maxSourceWidth&&(Y=I),st();Y=I>w.maxSourceHeight?w.maxSourceHeight:I,st()};var st=function(){X[a].style.width=Y*Z+"px",X[a].style.height=Y+"px"}}function St(n,a){var f=this,I=n.collections.sourceSizers,w=n.elements,X=w.sourceAnimationWrappers,Z=w.sources,Y=n.isl,st=n.resolve;function g(R,J){I[a]=st(Dt,[a,R,J]),I[a].adjustSize()}this.runActions=function(R,J){Y[a]=!0,Z[a].classList.add($),X[a].classList.add(nt),X[a].removeChild(X[a].firstChild),g(R,J),f.runActions=g}}function Ot(n,a){var f,I=this,w=n.elements.sources,X=n.props,Z=(0,n.resolve)(St,[a]);this.handleImageLoad=function(Y){var st=Y.target,g=st.naturalWidth,R=st.naturalHeight;Z.runActions(g,R)},this.handleVideoLoad=function(Y){var st=Y.target,g=st.videoWidth,R=st.videoHeight;f=!0,Z.runActions(g,R)},this.handleNotMetaDatedVideoLoad=function(){f||I.handleYoutubeLoad()},this.handleYoutubeLoad=function(){var Y=1920,st=1080;X.maxYoutubeDimensions&&(Y=X.maxYoutubeDimensions.width,st=X.maxYoutubeDimensions.height),Z.runActions(Y,st)},this.handleCustomLoad=function(){var Y=w[a],st=Y.offsetWidth,g=Y.offsetHeight;st&&g?Z.runActions(st,g):setTimeout(I.handleCustomLoad)}}function wt(n,a,f){var I=n.elements.sources,w=n.props.customClasses,X=w[a]?w[a]:"";I[a].className=f+" "+X}function Ct(n,a){var f=n.elements.sources,I=n.props.customAttributes;for(var w in I[a])f[a].setAttribute(w,I[a][w])}function Lt(n,a){var f=n.collections.sourceLoadHandlers,I=n.elements,w=I.sources,X=I.sourceAnimationWrappers,Z=n.props.sources;w[a]=document.createElement("img"),wt(n,a,B),w[a].src=Z[a],w[a].onload=f[a].handleImageLoad,Ct(n,a),X[a].appendChild(w[a])}function Tt(n,a){var f=n.collections.sourceLoadHandlers,I=n.elements,w=I.sources,X=I.sourceAnimationWrappers,Z=n.props,Y=Z.sources,st=Z.videosPosters;w[a]=document.createElement("video"),wt(n,a,B),w[a].src=Y[a],w[a].onloadedmetadata=function(R){f[a].handleVideoLoad(R)},w[a].controls=!0,Ct(n,a),st[a]&&(w[a].poster=st[a]);var g=document.createElement("source");g.src=Y[a],w[a].appendChild(g),setTimeout(f[a].handleNotMetaDatedVideoLoad,3e3),X[a].appendChild(w[a])}function at(n,a){var f=n.collections.sourceLoadHandlers,I=n.elements,w=I.sources,X=I.sourceAnimationWrappers,Z=n.props.sources;w[a]=document.createElement("iframe"),wt(n,a,"".concat(B," ").concat(_,"youtube-iframe"));var Y=Z[a],st=Y.split("?")[1];w[a].src="https://www.youtube.com/embed/".concat(Y.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/)[2],"?").concat(st||""),w[a].allowFullscreen=!0,Ct(n,a),X[a].appendChild(w[a]),f[a].handleYoutubeLoad()}function bt(n,a){var f=n.collections.sourceLoadHandlers,I=n.elements,w=I.sources,X=I.sourceAnimationWrappers,Z=n.props.sources;w[a]=Z[a],wt(n,a,"".concat(w[a].className," ").concat(B)),X[a].appendChild(w[a]),f[a].handleCustomLoad()}function Pt(n,a){var f=n.elements,I=f.sources,w=f.sourceAnimationWrappers;n.props.sources,I[a]=document.createElement("div"),I[a].className="".concat(_,"invalid-file-wrapper ").concat(T),I[a].innerHTML="Invalid source",w[a].classList.add(nt),w[a].removeChild(w[a].firstChild),w[a].appendChild(I[a])}function Rt(n){var a=n.collections,f=a.sourceLoadHandlers,I=a.sourcesRenderFunctions,w=n.core.sourceDisplayFacade,X=n.resolve;this.runActionsForSourceTypeAndIndex=function(Z,Y){var st;switch(Z!=="invalid"&&(f[Y]=X(Ot,[Y])),Z){case"image":st=Lt;break;case"video":st=Tt;break;case"youtube":st=at;break;case"custom":st=bt;break;default:st=Pt}I[Y]=function(){return st(n,Y)},w.displaySourcesWhichShouldBeDisplayed()}}function Ut(){var n,a,f,I={isUrlYoutubeOne:function(X){var Z=document.createElement("a");return Z.href=X,Z.hostname==="www.youtube.com"||Z.hostname==="youtu.be"},getTypeFromResponseContentType:function(X){return X.slice(0,X.indexOf("/"))}};function w(){if(f.readyState!==4){if(f.readyState===2){var X;switch(I.getTypeFromResponseContentType(f.getResponseHeader("content-type"))){case"image":X="image";break;case"video":X="video";break;default:X="invalid"}f.onreadystatechange=null,f.abort(),a(X)}}else a("invalid")}this.setUrlToCheck=function(X){n=X},this.getSourceType=function(X){if(I.isUrlYoutubeOne(n))return X("youtube");a=X,(f=new XMLHttpRequest).onreadystatechange=w,f.open("GET",n,!0),f.send()}}function Yt(n,a,f){var I=n.props,w=I.types,X=I.type,Z=I.sources,Y=n.resolve;this.getTypeSetByClientForIndex=function(st){var g;return w&&w[st]?g=w[st]:X&&(g=X),g},this.retrieveTypeWithXhrForIndex=function(st){var g=Y(Ut);g.setUrlToCheck(Z[st]),g.getSourceType(function(R){a.handleReceivedSourceTypeForUrl(R,Z[st]),f.runActionsForSourceTypeAndIndex(R,st)})}}function re(n,a){var f=n.core.stageManager,I=n.elements,w=I.smw,X=I.sourceWrappersContainer,Z=n.props,Y=0,st=document.createElement("div");function g(J){st.style.transform="translateX(".concat(J+Y,"px)"),Y=0}function R(){return(1+Z.slideDistance)*innerWidth}st.className="".concat(L," ").concat(M," ").concat(T),st.s=function(){st.style.display="flex"},st.h=function(){st.style.display="none"},st.a=function(){st.classList.add(z)},st.d=function(){st.classList.remove(z)},st.n=function(){st.style.removeProperty("transform")},st.v=function(J){return Y=J,st},st.ne=function(){g(-R())},st.z=function(){g(0)},st.p=function(){g(R())},f.i(a)||st.h(),w[a]=st,X.appendChild(st),function(J,k){var b=J.elements,G=b.smw,K=b.sourceAnimationWrappers,ht=document.createElement("div"),gt=document.createElement("div");gt.className="fslightboxl";for(var xt=0;xt<3;xt++){var It=document.createElement("div");gt.appendChild(It)}ht.appendChild(gt),G[k].appendChild(ht),K[k]=ht}(n,a)}function _e(n,a,f,I){var w=document.createElementNS("http://www.w3.org/2000/svg","svg");w.setAttributeNS(null,"width",a),w.setAttributeNS(null,"height",a),w.setAttributeNS(null,"viewBox",f);var X=document.createElementNS("http://www.w3.org/2000/svg","path");return X.setAttributeNS(null,"class","".concat(_,"svg-path")),X.setAttributeNS(null,"d",I),w.appendChild(X),n.appendChild(w),w}function ce(n,a){var f=document.createElement("div");return f.className="".concat(_,"toolbar-button ").concat(T),f.title=a,n.appendChild(f),f}function he(n,a){var f=document.createElement("div");f.className="".concat(_,"toolbar"),a.appendChild(f),function(I,w){var X=I.componentsServices,Z=I.data,Y=I.fs,st="M4.5 11H3v4h4v-1.5H4.5V11zM3 7h1.5V4.5H7V3H3v4zm10.5 6.5H11V15h4v-4h-1.5v2.5zM11 3v1.5h2.5V7H15V3h-4z",g=ce(w);g.title="Enter fullscreen";var R=_e(g,"20px","0 0 18 18",st);X.ofs=function(){Z.ifs=!0,g.title="Exit fullscreen",R.setAttributeNS(null,"width","24px"),R.setAttributeNS(null,"height","24px"),R.setAttributeNS(null,"viewBox","0 0 950 1024"),R.firstChild.setAttributeNS(null,"d","M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z")},X.xfs=function(){Z.ifs=!1,g.title="Enter fullscreen",R.setAttributeNS(null,"width","20px"),R.setAttributeNS(null,"height","20px"),R.setAttributeNS(null,"viewBox","0 0 18 18"),R.firstChild.setAttributeNS(null,"d",st)},g.onclick=Y.t}(n,f),function(I,w){var X=ce(w,"Close");X.onclick=I.core.lightboxCloser.closeLightbox,_e(X,"20px","0 0 24 24","M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z")}(n,f)}function me(n){var a=n.props.sources,f=n.elements.container,I=document.createElement("div");I.className="".concat(_,"nav"),f.appendChild(I),he(n,I),a.length>1&&function(w,X){var Z=w.componentsServices,Y=w.props.sources,st=(w.stageIndexes,document.createElement("div"));st.className="".concat(_,"slide-number-container");var g=document.createElement("div");g.className=T;var R=document.createElement("span");Z.setSlideNumber=function(b){return R.innerHTML=b};var J=document.createElement("span");J.className="".concat(_,"slash");var k=document.createElement("div");k.innerHTML=Y.length,st.appendChild(g),g.appendChild(R),g.appendChild(J),g.appendChild(k),X.appendChild(st),setTimeout(function(){g.offsetWidth>55&&(st.style.justifyContent="flex-start")})}(n,I)}function zt(n,a,f,I){var w=n.elements.container,X=f.charAt(0).toUpperCase()+f.slice(1),Z=document.createElement("div");Z.className="".concat(W," ").concat(W,"-").concat(f),Z.title="".concat(X," slide"),Z.onclick=a,function(Y,st){var g=document.createElement("div");g.className="".concat(q," ").concat(T),_e(g,"20px","0 0 20 20",st),Y.appendChild(g)}(Z,I),w.appendChild(Z)}function oe(n){var a=n.core,f=a.lightboxCloser,I=a.slideChangeFacade,w=n.fs;this.listener=function(X){switch(X.key){case"Escape":f.closeLightbox();break;case"ArrowLeft":I.changeToPrevious();break;case"ArrowRight":I.changeToNext();break;case"F11":X.preventDefault(),w.t()}}}function Se(n){var a=n.elements,f=n.sourcePointerProps,I=n.stageIndexes;function w(X,Z){a.smw[X].v(f.swipedX)[Z]()}this.runActionsForEvent=function(X){var Z,Y,st;a.container.contains(a.slideSwipingHoverer)||a.container.appendChild(a.slideSwipingHoverer),Z=a.container,Y=H,(st=Z.classList).contains(Y)||st.add(Y),f.swipedX=X.screenX-f.downScreenX;var g=I.previous,R=I.next;w(I.current,"z"),g!==void 0&&f.swipedX>0?w(g,"ne"):R!==void 0&&f.swipedX<0&&w(R,"p")}}function se(n){var a=n.props.sources,f=n.resolve,I=n.sourcePointerProps,w=f(Se);a.length===1?this.listener=function(){I.swipedX=1}:this.listener=function(X){I.isPointering&&w.runActionsForEvent(X)}}function Ee(n){var a=n.core.slideIndexChanger,f=n.elements.smw,I=n.stageIndexes,w=n.sws;function X(Y){var st=f[I.current];st.a(),st[Y]()}function Z(Y,st){Y!==void 0&&(f[Y].s(),f[Y][st]())}this.runPositiveSwipedXActions=function(){var Y=I.previous;if(Y===void 0)X("z");else{X("p");var st=I.next;a.changeTo(Y);var g=I.previous;w.d(g),w.b(st),X("z"),Z(g,"ne")}},this.runNegativeSwipedXActions=function(){var Y=I.next;if(Y===void 0)X("z");else{X("ne");var st=I.previous;a.changeTo(Y);var g=I.next;w.d(g),w.b(st),X("z"),Z(g,"p")}}}function ne(n,a){n.contains(a)&&n.removeChild(a)}function lt(n){var a=n.core.lightboxCloser,f=n.elements,I=n.resolve,w=n.sourcePointerProps,X=I(Ee);this.runNoSwipeActions=function(){ne(f.container,f.slideSwipingHoverer),w.isSourceDownEventTarget||a.closeLightbox(),w.isPointering=!1},this.runActions=function(){w.swipedX>0?X.runPositiveSwipedXActions():X.runNegativeSwipedXActions(),ne(f.container,f.slideSwipingHoverer),f.container.classList.remove(H),w.isPointering=!1}}function s(n){var a=n.resolve,f=n.sourcePointerProps,I=a(lt);this.listener=function(){f.isPointering&&(f.swipedX?I.runActions():I.runNoSwipeActions())}}function r(n){var a=this,f=n.core,I=f.eventsDispatcher,w=f.globalEventsController,X=f.scrollbarRecompensor,Z=n.data,Y=n.elements,st=n.fs,g=n.props,R=n.sourcePointerProps;this.isLightboxFadingOut=!1,this.runActions=function(){a.isLightboxFadingOut=!0,Y.container.classList.add(O),w.removeListeners(),g.exitFullscreenOnClose&&Z.ifs&&st.x(),setTimeout(function(){a.isLightboxFadingOut=!1,R.isPointering=!1,Y.container.classList.remove(O),document.documentElement.classList.remove(tt),X.removeRecompense(),document.body.removeChild(Y.container),I.dispatch("onClose")},270)}}function u(n,a){var f=n.classList;f.contains(a)&&f.remove(a)}function v(n){var a,f,I;f=(a=n).core.eventsDispatcher,I=a.props,f.dispatch=function(w){I[w]&&I[w]()},function(w){var X=w.componentsServices,Z=w.data,Y=w.fs,st=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];function g(J){for(var k=0;k<st.length;k++)document[J](st[k],R)}function R(){document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement?X.ofs():X.xfs()}Y.o=function(){X.ofs();var J=document.documentElement;J.requestFullscreen?J.requestFullscreen():J.mozRequestFullScreen?J.mozRequestFullScreen():J.webkitRequestFullscreen?J.webkitRequestFullscreen():J.msRequestFullscreen&&J.msRequestFullscreen()},Y.x=function(){X.xfs(),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},Y.t=function(){Z.ifs?Y.x():Y.o()},Y.l=function(){g("addEventListener")},Y.q=function(){g("removeEventListener")}}(n),function(w){var X=w.core,Z=X.globalEventsController,Y=X.windowResizeActioner,st=w.fs,g=w.resolve,R=g(oe),J=g(se),k=g(s);Z.attachListeners=function(){document.addEventListener("pointermove",J.listener),document.addEventListener("pointerup",k.listener),addEventListener("resize",Y.runActions),document.addEventListener("keydown",R.listener),st.l()},Z.removeListeners=function(){document.removeEventListener("pointermove",J.listener),document.removeEventListener("pointerup",k.listener),removeEventListener("resize",Y.runActions),document.removeEventListener("keydown",R.listener),st.q()}}(n),function(w){var X=w.core.lightboxCloser,Z=(0,w.resolve)(r);X.closeLightbox=function(){Z.isLightboxFadingOut||Z.runActions()}}(n),function(w){var X=w.data,Z=w.core.scrollbarRecompensor;function Y(){document.body.offsetHeight>innerHeight&&(document.body.style.marginRight=X.scrollbarWidth+"px")}Z.addRecompense=function(){document.readyState==="complete"?Y():addEventListener("load",function(){Y(),Z.addRecompense=Y})},Z.removeRecompense=function(){document.body.style.removeProperty("margin-right")}}(n),function(w){var X=w.core,Z=X.slideChangeFacade,Y=X.slideIndexChanger,st=X.stageManager;w.props.sources.length>1?(Z.changeToPrevious=function(){Y.jumpTo(st.getPreviousSlideIndex())},Z.changeToNext=function(){Y.jumpTo(st.getNextSlideIndex())}):(Z.changeToPrevious=function(){},Z.changeToNext=function(){})}(n),function(w){var X=w.componentsServices,Z=w.core,Y=Z.slideIndexChanger,st=Z.sourceDisplayFacade,g=Z.stageManager,R=w.elements,J=R.smw,k=R.sourceAnimationWrappers,b=w.isl,G=w.stageIndexes,K=w.sws;Y.changeTo=function(ht){G.current=ht,g.updateStageIndexes(),X.setSlideNumber(ht+1),st.displaySourcesWhichShouldBeDisplayed()},Y.jumpTo=function(ht){var gt=G.previous,xt=G.current,It=G.next,Xt=b[xt],ie=b[ht];Y.changeTo(ht);for(var ee=0;ee<J.length;ee++)J[ee].d();K.d(xt),K.c(),requestAnimationFrame(function(){requestAnimationFrame(function(){var Ae=G.previous,ve=G.next;function Pe(){g.i(xt)?xt===G.previous?J[xt].ne():xt===G.next&&J[xt].p():(J[xt].h(),J[xt].n())}Xt&&k[xt].classList.add(ut),ie&&k[G.current].classList.add(et),K.a(),Ae!==void 0&&Ae!==xt&&J[Ae].ne(),J[G.current].n(),ve!==void 0&&ve!==xt&&J[ve].p(),K.b(gt),K.b(It),b[xt]?setTimeout(Pe,260):Pe()})})}}(n),function(w){var X=w.core.sourcesPointerDown,Z=w.elements,Y=Z.smw,st=Z.sources,g=w.sourcePointerProps,R=w.stageIndexes;X.listener=function(J){J.target.tagName!=="VIDEO"&&J.preventDefault(),g.isPointering=!0,g.downScreenX=J.screenX,g.swipedX=0;var k=st[R.current];k&&k.contains(J.target)?g.isSourceDownEventTarget=!0:g.isSourceDownEventTarget=!1;for(var b=0;b<Y.length;b++)Y[b].d()}}(n),function(w){var X=w.collections.sourcesRenderFunctions,Z=w.core.sourceDisplayFacade,Y=w.props,st=w.stageIndexes;function g(R){X[R]&&(X[R](),delete X[R])}Z.displaySourcesWhichShouldBeDisplayed=function(){if(Y.loadOnlyCurrentSource)g(st.current);else for(var R in st)g(st[R])}}(n),function(w){var X=w.core.stageManager,Z=w.elements,Y=Z.smw,st=Z.sourceAnimationWrappers,g=w.isl,R=w.stageIndexes,J=w.sws;J.a=function(){for(var k in R)Y[R[k]].s()},J.b=function(k){k===void 0||X.i(k)||(Y[k].h(),Y[k].n())},J.c=function(){for(var k in R)J.d(R[k])},J.d=function(k){if(g[k]){var b=st[k];u(b,nt),u(b,et),u(b,ut)}}}(n),function(w){var X=w.collections.sourceSizers,Z=w.core.windowResizeActioner,Y=w.data,st=w.elements.smw,g=w.stageIndexes;Z.runActions=function(){innerWidth<992?Y.maxSourceWidth=innerWidth:Y.maxSourceWidth=.9*innerWidth,Y.maxSourceHeight=.9*innerHeight;for(var R=0;R<st.length;R++)st[R].d(),X[R]&&X[R].adjustSize();var J=g.previous,k=g.next;J!==void 0&&st[J].ne(),k!==void 0&&st[k].p()}}(n)}function l(n){var a=n.componentsServices,f=n.core,I=f.eventsDispatcher,w=f.globalEventsController,X=f.scrollbarRecompensor,Z=f.sourceDisplayFacade,Y=f.stageManager,st=f.windowResizeActioner,g=n.data,R=n.elements,J=(n.props,n.stageIndexes),k=n.sws;function b(){var G,K;g.i=!0,g.scrollbarWidth=function(){var ht=document.createElement("div"),gt=ht.style,xt=document.createElement("div");gt.visibility="hidden",gt.width="100px",gt.msOverflowStyle="scrollbar",gt.overflow="scroll",xt.style.width="100%",document.body.appendChild(ht);var It=ht.offsetWidth;ht.appendChild(xt);var Xt=xt.offsetWidth;return document.body.removeChild(ht),It-Xt}(),v(n),R.container=document.createElement("div"),R.container.className="".concat(_,"container ").concat(M," ").concat(nt),function(ht){var gt=ht.elements;gt.slideSwipingHoverer=document.createElement("div"),gt.slideSwipingHoverer.className="".concat(_,"slide-swiping-hoverer ").concat(M," ").concat(L)}(n),me(n),function(ht){var gt=ht.core.sourcesPointerDown,xt=ht.elements,It=ht.props.sources,Xt=document.createElement("div");Xt.className="".concat(L," ").concat(M),xt.container.appendChild(Xt),Xt.addEventListener("pointerdown",gt.listener),xt.sourceWrappersContainer=Xt;for(var ie=0;ie<It.length;ie++)re(ht,ie)}(n),n.props.sources.length>1&&(K=(G=n).core.slideChangeFacade,zt(G,K.changeToPrevious,"previous","M18.271,9.212H3.615l4.184-4.184c0.306-0.306,0.306-0.801,0-1.107c-0.306-0.306-0.801-0.306-1.107,0L1.21,9.403C1.194,9.417,1.174,9.421,1.158,9.437c-0.181,0.181-0.242,0.425-0.209,0.66c0.005,0.038,0.012,0.071,0.022,0.109c0.028,0.098,0.075,0.188,0.142,0.271c0.021,0.026,0.021,0.061,0.045,0.085c0.015,0.016,0.034,0.02,0.05,0.033l5.484,5.483c0.306,0.307,0.801,0.307,1.107,0c0.306-0.305,0.306-0.801,0-1.105l-4.184-4.185h14.656c0.436,0,0.788-0.353,0.788-0.788S18.707,9.212,18.271,9.212z"),zt(G,K.changeToNext,"next","M1.729,9.212h14.656l-4.184-4.184c-0.307-0.306-0.307-0.801,0-1.107c0.305-0.306,0.801-0.306,1.106,0l5.481,5.482c0.018,0.014,0.037,0.019,0.053,0.034c0.181,0.181,0.242,0.425,0.209,0.66c-0.004,0.038-0.012,0.071-0.021,0.109c-0.028,0.098-0.075,0.188-0.143,0.271c-0.021,0.026-0.021,0.061-0.045,0.085c-0.015,0.016-0.034,0.02-0.051,0.033l-5.483,5.483c-0.306,0.307-0.802,0.307-1.106,0c-0.307-0.305-0.307-0.801,0-1.105l4.184-4.185H1.729c-0.436,0-0.788-0.353-0.788-0.788S1.293,9.212,1.729,9.212z")),function(ht){for(var gt=ht.props.sources,xt=ht.resolve,It=xt(At),Xt=xt(Rt),ie=xt(Yt,[It,Xt]),ee=0;ee<gt.length;ee++)if(typeof gt[ee]=="string"){var Ae=ie.getTypeSetByClientForIndex(ee);if(Ae)Xt.runActionsForSourceTypeAndIndex(Ae,ee);else{var ve=It.getSourceTypeFromLocalStorageByUrl(gt[ee]);ve?Xt.runActionsForSourceTypeAndIndex(ve,ee):ie.retrieveTypeWithXhrForIndex(ee)}}else Xt.runActionsForSourceTypeAndIndex("custom",ee)}(n),I.dispatch("onInit")}n.open=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,K=J.previous,ht=J.current,gt=J.next;J.current=G,g.i||ot(n),Y.updateStageIndexes(),g.i?(k.c(),k.a(),k.b(K),k.b(ht),k.b(gt),I.dispatch("onShow")):b(),Z.displaySourcesWhichShouldBeDisplayed(),a.setSlideNumber(G+1),document.body.appendChild(R.container),document.documentElement.classList.add(tt),X.addRecompense(),w.attachListeners(),st.runActions(),R.smw[J.current].n(),I.dispatch("onOpen")}}function x(n,a,f){return(x=y()?Reflect.construct.bind():function(I,w,X){var Z=[null];Z.push.apply(Z,w);var Y=new(Function.bind.apply(I,Z));return X&&S(Y,X.prototype),Y}).apply(null,arguments)}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(n,a){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,I){return f.__proto__=I,f})(n,a)}function p(n){return function(a){if(Array.isArray(a))return o(a)}(n)||function(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}(n)||function(a,f){if(a){if(typeof a=="string")return o(a,f);var I=Object.prototype.toString.call(a).slice(8,-1);if(I==="Object"&&a.constructor&&(I=a.constructor.name),I==="Map"||I==="Set")return Array.from(a);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return o(a,f)}}(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function o(n,a){(a==null||a>n.length)&&(a=n.length);for(var f=0,I=new Array(a);f<a;f++)I[f]=n[f];return I}function h(){for(var n=document.getElementsByTagName("a"),a=function(w){if(!n[w].hasAttribute("data-fslightbox"))return"continue";var X=n[w].hasAttribute("data-href")?n[w].getAttribute("data-href"):n[w].getAttribute("href");if(!X)return console.warn('The "data-fslightbox" attribute was set without the "href" attribute.'),"continue";var Z=n[w].getAttribute("data-fslightbox");fsLightboxInstances[Z]||(fsLightboxInstances[Z]=new FsLightbox);var Y=null;X.charAt(0)==="#"?(Y=document.getElementById(X.substring(1)).cloneNode(!0)).removeAttribute("id"):Y=X,fsLightboxInstances[Z].props.sources.push(Y),fsLightboxInstances[Z].elements.a.push(n[w]);var st=fsLightboxInstances[Z].props.sources.length-1;n[w].onclick=function(K){K.preventDefault(),fsLightboxInstances[Z].open(st)},G("types","data-type"),G("videosPosters","data-video-poster"),G("customClasses","data-class"),G("customClasses","data-custom-class");for(var g=["href","data-fslightbox","data-href","data-type","data-video-poster","data-class","data-custom-class"],R=n[w].attributes,J=fsLightboxInstances[Z].props.customAttributes,k=0;k<R.length;k++)if(g.indexOf(R[k].name)===-1&&R[k].name.substr(0,5)==="data-"){J[st]||(J[st]={});var b=R[k].name.substr(5);J[st][b]=R[k].value}function G(K,ht){n[w].hasAttribute(ht)&&(fsLightboxInstances[Z].props[K][st]=n[w].getAttribute(ht))}},f=0;f<n.length;f++)a(f);var I=Object.keys(fsLightboxInstances);window.fsLightbox=fsLightboxInstances[I[I.length-1]]}window.FsLightbox=function(){var n=this;this.props={sources:[],customAttributes:[],customClasses:[],types:[],videosPosters:[],slideDistance:.3},this.data={isFullscreenOpen:!1,maxSourceWidth:0,maxSourceHeight:0,scrollbarWidth:0},this.isl=[],this.sourcePointerProps={downScreenX:null,isPointering:!1,isSourceDownEventTarget:!1,swipedX:0},this.stageIndexes={},this.elements={a:[],container:null,slideSwipingHoverer:null,smw:[],sourceWrappersContainer:null,sources:[],sourceAnimationWrappers:[]},this.componentsServices={setSlideNumber:function(){}},this.resolve=function(a){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return f.unshift(n),x(a,p(f))},this.collections={sourceLoadHandlers:[],sourcesRenderFunctions:[],sourceSizers:[]},this.core={eventsDispatcher:{},globalEventsController:{},lightboxCloser:{},lightboxUpdater:{},scrollbarRecompensor:{},slideChangeFacade:{},slideIndexChanger:{},sourcesPointerDown:{},sourceDisplayFacade:{},stageManager:{},windowResizeActioner:{}},this.fs={},this.sws={},l(this),this.close=function(){return n.core.lightboxCloser.closeLightbox()}},window.fsLightboxInstances={},h(),window.refreshFsLightbox=function(){for(var n in fsLightboxInstances){var a=fsLightboxInstances[n].props;fsLightboxInstances[n]=new FsLightbox,fsLightboxInstances[n].props=a,fsLightboxInstances[n].props.sources=[],fsLightboxInstances[n].elements.a=[]}h()}}])})})(Bo);const Dr="https://cdn.jsdelivr.net/gh/DaimlarTech/blitz-ui-demo-cdn/cdn/cmaps/",Or="https://cdn.jsdelivr.net/gh/DaimlarTech/blitz-ui-demo-cdn/cdn/pdf.worker.mjs";class jo{constructor(C,m=2){if(!C||!C.dataset.url)throw new Error("invalid element!");this.element=C,this.url=C.dataset.url,this.scale=m,this.data=[]}loading(C){C?this.element.classList.add("pdf-preview__loading"):this.element.classList.remove("pdf-preview__loading")}blobtoDataUrl(C){return new Promise(m=>{const e=new FileReader;e.readAsDataURL(C),e.onload=()=>{m(e.result.replace("data:application/pdf;base64,",""))}})}draw(C){Ir.workerSrc=Or,Fr({data:atob(C),cMapUrl:Dr,cMapPacked:!0}).promise.then(async m=>{for(let e=1;e<=m.numPages;e++)await this.getPage(e,m)},m=>{console.error(m)}).then(()=>{const m=document.createElement("img");m.setAttribute("class","pdf-preview__image"),m.onload=()=>{this.element.addEventListener("click",this.display(this.data)),this.element.appendChild(m),this.loading(!1)},m.src=this.data[0]})}display(C){var m=new FsLightbox;return m.props.sources=C,refreshFsLightbox(),()=>{m.open()}}async getPage(C,m){const e=this.scale,E=this.data;return new Promise(A=>{m.getPage(C).then(function(_){var it=_.getViewport({scale:e});let H=200/72;var M=document.createElement("canvas"),T=M.getContext("2d");M.height=it.height*H,M.width=it.width*H;var tt={canvasContext:T,viewport:it,transform:[H,0,0,H,0,0]},z=_.render(tt);z.promise.then(async()=>{E.push(M.toDataURL("image/png")),A()})})})}async fetchFile(){return this.loading(!0),fetch(this.url,{headers:{"Content-Type":"application/pdf"}}).then(C=>C.blob()).then(C=>{var m=new Blob([C],{type:"application/pdf"});return An(m)}).then(C=>this.draw(C))}}class Nr{constructor(C,m=2,e=(E,A)=>{}){if(!C||!C.dataset.url)throw new Error("PdfConvert: failed to instanciate");this.element=C,this.url=C.dataset.url,this.scale=m,this.data=[],this.callback=e}async init(){fetch(this.url,{headers:{"Content-Type":"application/pdf"}}).then(C=>C.blob()).then(C=>{var m=new Blob([C],{type:"application/pdf"});return An(m)}).then(C=>this.convertFiles(C)).catch(C=>{this.loading=!1,this.error=C})}async blobInit(){var C=Je(this.url,"application/pdf");An(C).then(m=>this.convertFiles(m)).catch(m=>{this.loading=!1,this.error=m})}convertFiles(C){Ir.workerSrc=Or,Fr({data:atob(C),cMapUrl:Dr,cMapPacked:!0}).promise.then(async m=>{for(let e=1;e<=m.numPages;e++)await this.pdf2png(e,m)},m=>{console.error(m)}).then(()=>{this.callback(this.data,this.element)})}async pdf2png(C,m){const e=this.scale,E=this.data;return new Promise(A=>{m.getPage(C).then(function(_){var it=_.getViewport({scale:e});let H=200/72;var M=document.createElement("canvas"),T=M.getContext("2d");M.height=it.height*H,M.width=it.width*H;var tt={canvasContext:T,viewport:it,transform:[H,0,0,H,0,0]},z=_.render(tt);z.promise.then(async()=>{E.push(M.toDataURL("image/png")),A()})})})}}function zo(d,C){var m="application/"+C;if(C=="pdf")var e=Je(d,m);else if(C=="zip")var e=Je(d,"application/"+C);else if(C=="jpg"||C=="png"||C=="pptx")var e=Je("data:image/"+C+";base64,"+d,m);else if(C=="doc")var e=Je("data:application/msword;base64,"+d,m);else if(C=="xls")var e=Je("data:application/vnd.ms-excel;base64,"+d,m);else if(C=="docx")var e=Je("data:application/vnd.openxmlformats-officedocument.wordprocessingml.document;base64,"+d,m);else if(C=="xlsx")var e=Je("data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,"+d,m);else if(C=="ppt")var e=Je("data:application/vnd.ms-powerpoint;base64,"+d,m);else if(C=="txt"||C=="TXT")var e=Je("data:text/plain;base64,"+d,m);else if(C=="csv"||C=="CSV")var e=Je("data:text/csv;base64,"+d,m);else if(C=="tsv"||C=="TSV")var e=Je("data:text/tab-separated-values;base64,"+d,m);else if(C=="svg"||C=="SVG")var e=Je("data:image/svg+xml;base64,"+d,m);else return;var E=(window.URL||window.webkitURL).createObjectURL(e);return E}function Je(d,C){const m=atob(d),e=new Uint8Array(m.length);for(let E=0;E<m.length;E++)e[E]=m.charCodeAt(E);return new Blob([e.buffer],{type:C})}function An(d){return new Promise(C=>{const m=new FileReader;m.readAsDataURL(d),m.onload=()=>{C(m.result.replace("data:application/pdf;base64,",""))}})}document.querySelectorAll('[data-role="additionalFiles"]').forEach(d=>{const C=d.dataset.fileData,m=d.dataset.extension,e=zo(C,m);d.download="test",d.href=e}),document.querySelectorAll('[data-role="pdf-preview"]').forEach(d=>{new jo(d).fetchFile()}),document.querySelectorAll('[data-role="pdf-preview-dl"]').forEach(d=>{const C=e=>function E(){E.read||(E.read=Math.abs(this.scrollHeight-this.clientHeight-this.scrollTop)<1,E.read&&window.dispatchEvent(new CustomEvent("readend",{detail:e})))},m=(e,E)=>{const A=document.createElement("div");A.classList.add("pdf-preview__container"),e.forEach((_,it)=>{const H=document.createElement("img");H.classList.add("pdf-popup__img"),H.onload=()=>{if(A.appendChild(H),it===e.length-1){E.innerHTML=null,E.appendChild(A);const M=document.querySelectorAll('[data-role="scroll-check"]');window.addEventListener("readend",T=>{const tt=document.querySelector(T.detail);tt&&(tt.disabled=!1)}),M.forEach(T=>{document.querySelector(T.dataset.target).addEventListener("scroll",C(`#${T.id}`))})}},H.src=_})};new Nr(d,2,m).init()}),document.querySelectorAll('[data-role="pdf-preview-dl-blob"]').forEach(d=>{const C=e=>function E(){E.read||(E.read=Math.abs(this.scrollHeight-this.clientHeight-this.scrollTop)<1,E.read&&window.dispatchEvent(new CustomEvent("readend",{detail:e})))},m=(e,E)=>{const A=document.createElement("div");A.classList.add("pdf-preview__container"),e.forEach((_,it)=>{const H=document.createElement("img");H.classList.add("pdf-popup__img"),H.onload=()=>{if(A.appendChild(H),it===e.length-1){E.innerHTML=null,E.appendChild(A);const M=document.querySelectorAll('[data-role="scroll-check"]');window.addEventListener("readend",T=>{const tt=document.querySelector(T.detail);tt&&(tt.disabled=!1)}),M.forEach(T=>{document.querySelector(T.dataset.target).addEventListener("scroll",C(`#${T.id}`))})}},H.src=_})};new Nr(d,2,m).blobInit()}),document.querySelectorAll('[data-role="pdf-popup-btn"]').forEach(d=>{d.addEventListener("click",()=>{document.querySelector(d.dataset.target).classList.toggle("pdf-popup__hidden")})}),document.querySelectorAll('[data-role="scroll-check-btn"]').forEach(d=>{document.querySelector(d.dataset.target).addEventListener("change",C=>{d.disabled=!C.target.checked}),d.addEventListener("click",()=>{document.querySelector(d.dataset.download).click();const C=document.querySelector(`[name="${d.dataset.result}"]`);C.value=new Date().toISOString(),C.dispatchEvent(new Event("change")),document.querySelector(d.dataset.modal).classList.toggle("pdf-popup__hidden")})}),document.querySelectorAll('[data-role="download-result-display"]').forEach(d=>{document.querySelector(`[name="${d.dataset.target}"]`).addEventListener("change",C=>{d.textContent=C.target.value.length===0?"\u672A\u627F\u8AFE":`\u627F\u8AFE\u6E08\u307F ${C.target.value.slice(0,10)}`})});const Hr=document.querySelector('[data-role="zip-search_input"]'),Ps=document.querySelector('[data-role="zip-search_btn"'),Go=document.querySelector("#prefecture"),Uo=document.querySelector("#city"),qo=document.querySelector("#street"),$o=document.querySelector("#js-zip_error"),Wo="https://api.zipaddress.net/";var yn="",Rs="";Hr&&Ps&&(Hr.addEventListener("input",Vo),Ps.addEventListener("click",Yo));async function Xo(){const d=`${Wo}?zipcode=${yn}`;return fetch(d).then(C=>C.json()).then(C=>C.code!==200?{data:C.message,error:!0}:{data:C.data,error:!1})}function Vo(d){const C=d.target.value;Ps.disabled=!0,Rs="",C.length===7?(yn=C,Ps.disabled=!1):C.length!=0&&(Rs="7\u6841\u306E\u6570\u5B57\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002"),Br()}async function Yo(){var d;if(yn.length===7){const C=await Xo();if(C.error){Rs=C.data,Br();return}Go.value=wn[d=C.data.pref]??(wn[d]=""),Uo.value=C.data.city,qo.value=C.data.town}}function Br(){$o.textContent=Rs}const wn={\u5317\u6D77\u9053:1,\u9752\u68EE\u770C:2,\u5CA9\u624B\u770C:3,\u5BAE\u57CE\u770C:4,\u79CB\u7530\u770C:5,\u5C71\u5F62\u770C:6,\u798F\u5CF6\u770C:7,\u8328\u57CE\u770C:8,\u6803\u6728\u770C:9,\u7FA4\u99AC\u770C:10,\u57FC\u7389\u770C:11,\u5343\u8449\u770C:12,\u6771\u4EAC\u90FD:13,\u795E\u5948\u5DDD\u770C:14,\u65B0\u6F5F\u770C:15,\u5BCC\u5C71\u770C:16,\u77F3\u5DDD\u770C:17,\u798F\u4E95\u770C:18,\u5C71\u68A8\u770C:19,\u9577\u91CE\u770C:20,\u5C90\u961C\u770C:21,\u9759\u5CA1\u770C:22,\u611B\u77E5\u770C:23,\u4E09\u91CD\u770C:24,\u6ECB\u8CC0\u770C:25,\u4EAC\u90FD\u5E9C:26,\u5927\u962A\u5E9C:27,\u5175\u5EAB\u770C:28,\u5948\u826F\u770C:29,\u548C\u6B4C\u5C71\u770C:30,\u9CE5\u53D6\u770C:31,\u5CF6\u6839\u770C:32,\u5CA1\u5C71\u770C:33,\u5E83\u5CF6\u770C:34,\u5C71\u53E3\u770C:35,\u5FB3\u5CF6\u770C:36,\u9999\u5DDD\u770C:37,\u611B\u5A9B\u770C:38,\u9AD8\u77E5\u770C:39,\u798F\u5CA1\u770C:40,\u4F50\u8CC0\u770C:41,\u9577\u5D0E\u770C:42,\u718A\u672C\u770C:43,\u5927\u5206\u770C:44,\u5BAE\u5D0E\u770C:45,\u9E7F\u5150\u5CF6\u770C:46,\u6C96\u7E04\u770C:47}})();
