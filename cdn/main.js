var rl=Object.defineProperty;var al=(Re,Fe,Oe)=>Fe in Re?rl(Re,Fe,{enumerable:!0,configurable:!0,writable:!0,value:Oe}):Re[Fe]=Oe;var be=(Re,Fe,Oe)=>(al(Re,typeof Fe!="symbol"?Fe+"":Fe,Oe),Oe),_n=(Re,Fe,Oe)=>{if(!Fe.has(Re))throw TypeError("Cannot "+Oe)};var t=(Re,Fe,Oe)=>(_n(Re,Fe,"read from private field"),Oe?Oe.call(Re):Fe.get(Re)),c=(Re,Fe,Oe)=>{if(Fe.has(Re))throw TypeError("Cannot add the same private member more than once");Fe instanceof WeakSet?Fe.add(Re):Fe.set(Re,Oe)},D=(Re,Fe,Oe,Ei)=>(_n(Re,Fe,"write to private field"),Ei?Ei.call(Re,Oe):Fe.set(Re,Oe),Oe);var fi=(Re,Fe,Oe,Ei)=>({set _(mn){D(Re,Fe,mn,Oe)},get _(){return t(Re,Fe,Ei)}}),I=(Re,Fe,Oe)=>(_n(Re,Fe,"access private method"),Oe);(async()=>{(function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))x(n);new MutationObserver(n=>{for(const N of n)if(N.type==="childList")for(const A of N.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&x(A)}).observe(document,{childList:!0,subtree:!0});function U(n){const N={};return n.integrity&&(N.integrity=n.integrity),n.referrerPolicy&&(N.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?N.credentials="include":n.crossOrigin==="anonymous"?N.credentials="omit":N.credentials="same-origin",N}function x(n){if(n.ep)return;n.ep=!0;const N=U(n);fetch(n.href,N)}})();const Re=document.querySelectorAll(".drawer"),Fe=document.querySelectorAll(".drawer__dialog"),Oe=document.querySelectorAll('[data-role="drawer"]');Oe.forEach(v=>v.addEventListener("click",Ei)),Re.forEach(v=>v.addEventListener("click",Ei)),Fe.forEach(v=>v.addEventListener("click",U=>{U.stopPropagation()}));function Ei(){Re.forEach(v=>v.classList.toggle("drawer_show")),Oe.forEach(v=>v.classList.toggle("toggler_show"))}const mn=document.querySelectorAll('[data-role="drop-down"]'),eo=document.querySelectorAll(".drop-down");mn.forEach(v=>v.addEventListener("click",io));function io(){const v=document.querySelector(this.dataset.target);eo.forEach(U=>{U.id!==v.id&&U.classList.remove("drop-down_open")}),v.classList.toggle("drop-down_open")}const so=document.getElementById("js-modal-area"),no=document.querySelectorAll(".MODAL"),ro=document.querySelectorAll('[data-role="modal"]'),ao=document.querySelectorAll(".MODAL__dialog");no.forEach(v=>{ho(),document.getElementById("js-modal-area").appendChild(v)}),ro.forEach(v=>{v.addEventListener("click",oo)}),ao.forEach(v=>v.addEventListener("click",lo));function oo(){document.querySelector(this.dataset.target).classList.toggle("MODAL_open")}function lo(v){v.stopPropagation()}function ho(){if(!so){const v=document.createElement("div");v.setAttribute("id","js-modal-area"),v.style.zIndex="100",v.style.position="relative",document.body.appendChild(v)}}function co(){const v=document.querySelector('[data-role="modal-open"]');v&&v.dataset.errors!="{}"&&document.querySelector(v.dataset.target).classList.add("MODAL_open")}window.onload=co;const br="noantisocial",yr="edelivery",Ar=document.getElementById("confirmButton");Ar.disabled=!0;function wr(){const v=document.getElementById(br).checked,U=document.getElementById(yr).checked;Ar.disabled=!(v&&U)}function xr(v,U,x,n,N,A,S){const ot=document.getElementById(v),B=document.getElementById(U),F=document.getElementById(x),P=document.getElementById(n),tt=document.getElementById(N),j=document.getElementById(A),C=document.getElementById(S);P.disabled=!0,tt.disabled=!0;function q(){let it=!(B.clientHeight<F.scrollHeight)||B.scrollHeight-B.scrollTop<=B.clientHeight+1;P.disabled=!it}ot.addEventListener("shown.bs.modal",function(){sessionStorage.getItem(v+"_confirmed")==="true"?W():(q(),B.addEventListener("scroll",q))}),P.addEventListener("click",function(){this.disabled||(W(),sessionStorage.setItem(v+"_confirmed","true"))});function W(){tt.disabled=!1,j.style.display="none",C.classList.remove("check-disabled"),C.classList.add("check-enabled"),tt.classList.remove("check-disabled"),tt.classList.add("check-enabled")}tt.addEventListener("change",wr)}xr("noantisocialModal","noantisocialBox","noantisocialItem","noantisocialButton",br,"noantisocialText","noantisocialLabel"),xr("edeliveryModal","edeliveryBox","edeliveryItem","edeliveryButton",yr,"edeliveryText","edeliveryLabel"),wr();const ks=document.getElementById("agreement-box"),_r=document.getElementById("agreement-check"),Is=document.getElementById("agree_chk_id");Is.disabled=!0;function uo(v,U){let x;return function(...n){const N=()=>{clearTimeout(x),v(...n)};clearTimeout(x),x=setTimeout(N,U)}}function Er(){Math.abs(ks.scrollHeight-ks.clientHeight-ks.scrollTop)<=1&&Is.disabled&&(Is.disabled=!1,_r.classList.remove("check-disabled"),_r.classList.add("check-enabled"),Is.classList.add("check-enabled"))}ks.addEventListener("scroll",uo(Er,100)),window.addEventListener("load",Er),document.querySelectorAll(".password__toggler").forEach(v=>v.addEventListener("click",po));function po(){const v=document.querySelector(this.dataset.target);v.type=v.type==="password"?"text":"password"}const go=document.querySelectorAll(".format_num"),fo=document.querySelectorAll(".format_date"),mo=document.querySelectorAll(".format_datetime"),Si="--";go.forEach(v=>{if(v.textContent){let U;v.classList.contains("format_area")&&(U={minimumFractionDigits:2});const x=Number(v.textContent).toLocaleString(void 0,U);v.innerHTML=isNaN(parseFloat(v.textContent))?v.textContent:x}}),fo.forEach(v=>{if(v.textContent){let U=v.textContent.replaceAll(`
`,"").replaceAll(" ","").split("/");v.innerHTML=`${U[0]??(U[0]=Si)}`,v.innerHTML+='<span class="format_unit">\u5E74 </span>',v.innerHTML+=`${U[1]??(U[1]=Si)}`,v.innerHTML+='<span class="format_unit">\u6708 </span>',v.innerHTML+=`${U[2]??(U[2]=Si)}`,v.innerHTML+='<span class="format_unit">\u65E5</span>'}}),mo.forEach(v=>{if(v.textContent){let U=new Date(v.textContent);U!="Invalid Date"?(v.innerHTML=U.getFullYear(),v.innerHTML+='<span class="format_unit">\u5E74 </span>',v.innerHTML+=U.getMonth()+1,v.innerHTML+='<span class="format_unit">\u6708 </span>',v.innerHTML+=U.getDate(),v.innerHTML+='<span class="format_unit">\u65E5 </span>',v.innerHTML+=`${U.getHours()}:${U.getMinutes()<10?"0":""}${U.getMinutes()}`):(v.innerHTML=`${Si}`,v.innerHTML+='<span class="format_unit">\u5E74 </span>',v.innerHTML+=`${Si}`,v.innerHTML+='<span class="format_unit">\u6708 </span>',v.innerHTML+=`${Si}`,v.innerHTML+='<span class="format_unit">\u65E5 </span>',v.innerHTML+=`${Si}`)}});const vo=document.querySelectorAll('[data-role="auth-menu"'),Sr=document.querySelector(".main-header__auth-menu"),Cr=document.querySelector(".main-header__auth-bg");Sr&&Cr&&(vo.forEach(v=>v.addEventListener("click",Tr)),Cr.addEventListener("click",Tr));function Tr(){Sr.classList.toggle("main-header__auth-menu_open")}const Mr=document.querySelectorAll('[data-role="toggle-section"]'),bo=document.querySelectorAll(".toggle-section__item");Mr.forEach(v=>v.addEventListener("click",yo));function yo(){bo.forEach(v=>v.classList.remove("toggle-section__item_show")),Mr.forEach(v=>v.classList.remove("toggle-btn__item_active")),document.querySelector(this.dataset.target).classList.add("toggle-section__item_show"),this.classList.add("toggle-btn__item_active"),window.scrollTo({top:window.scrollY+document.querySelector(".fund-detail__thumbnail").getBoundingClientRect().bottom-57})}document.querySelectorAll(".schedule__status").forEach(v=>{if(v.dataset){const U=new Date,x=new Date(v.dataset.start),n=new Date(v.dataset.end);x!=="Invalid Date"&&n!=="Invalid Date"?U>n?(v.classList.remove("schedule__status_yet"),v.classList.add("schedule__status_complete")):x<=U&&U<=n&&(v.classList.remove("schedule__status_yet"),v.classList.add("schedule__status_current")):console.log("invalid date!",`
 start: ${x}`,`
end: ${n}`)}else console.log(v.dataset)});var Oi=function(){return Oi=Object.assign||function(v){for(var U,x=1,n=arguments.length;x<n;x++)for(var N in U=arguments[x])Object.prototype.hasOwnProperty.call(U,N)&&(v[N]=U[N]);return v},Oi.apply(this,arguments)};function kr(v,U,x){if(x||arguments.length===2)for(var n,N=0,A=U.length;N<A;N++)!n&&N in U||(n||(n=Array.prototype.slice.call(U,0,N)),n[N]=U[N]);return v.concat(n||Array.prototype.slice.call(U))}function Ir(v){return Array.prototype.slice.call(v)}function Lr(v,U){var x=Math.floor(v);return x===U||x+1===U?v:U}function Pr(){return Date.now()}function vn(v,U,x){if(U="data-keen-slider-"+U,x===null)return v.removeAttribute(U);v.setAttribute(U,x||"")}function Ls(v,U){return U=U||document,typeof v=="function"&&(v=v(U)),Array.isArray(v)?v:typeof v=="string"?Ir(U.querySelectorAll(v)):v instanceof HTMLElement?[v]:v instanceof NodeList?Ir(v):[]}function es(v){v.raw&&(v=v.raw),v.cancelable&&!v.defaultPrevented&&v.preventDefault()}function is(v){v.raw&&(v=v.raw),v.stopPropagation&&v.stopPropagation()}function Rr(){var v=[];return{add:function(U,x,n,N){U.addListener?U.addListener(n):U.addEventListener(x,n,N),v.push([U,x,n,N])},input:function(U,x,n,N){this.add(U,x,function(A){return function(S){S.nativeEvent&&(S=S.nativeEvent);var ot=S.changedTouches||[],B=S.targetTouches||[],F=S.detail&&S.detail.x?S.detail:null;return A({id:F?F.identifier?F.identifier:"i":B[0]?B[0]?B[0].identifier:"e":"d",idChanged:F?F.identifier?F.identifier:"i":ot[0]?ot[0]?ot[0].identifier:"e":"d",raw:S,x:F&&F.x?F.x:B[0]?B[0].screenX:F?F.x:S.pageX,y:F&&F.y?F.y:B[0]?B[0].screenY:F?F.y:S.pageY})}}(n),N)},purge:function(){v.forEach(function(U){U[0].removeListener?U[0].removeListener(U[2]):U[0].removeEventListener(U[1],U[2],U[3])}),v=[]}}}function bn(v,U,x){return Math.min(Math.max(v,U),x)}function ei(v){return(v>0?1:0)-(v<0?1:0)||+v}function Fr(v){var U=v.getBoundingClientRect();return{height:Lr(U.height,v.offsetHeight),width:Lr(U.width,v.offsetWidth)}}function We(v,U,x,n){var N=v&&v[U];return N==null?x:n&&typeof N=="function"?N():N}function ti(v){return Math.round(1e6*v)/1e6}function Ao(v){var U,x,n,N,A,S;function ot(j){S||(S=j),B(!0);var C=j-S;C>n&&(C=n);var q=N[x];if(q[3]<C)return x++,ot(j);var W=q[2],it=q[4],ut=q[0],st=q[1]*(0,q[5])(it===0?1:(C-W)/it);if(st&&v.track.to(ut+st),C<n)return P();S=null,B(!1),F(null),v.emit("animationEnded")}function B(j){U.active=j}function F(j){U.targetIdx=j}function P(){var j;j=ot,A=window.requestAnimationFrame(j)}function tt(){var j;j=A,window.cancelAnimationFrame(j),B(!1),F(null),S&&v.emit("animationStopped"),S=null}return U={active:!1,start:function(j){if(tt(),v.track.details){var C=0,q=v.track.details.position;x=0,n=0,N=j.map(function(W){var it,ut=Number(q),st=(it=W.earlyExit)!==null&&it!==void 0?it:W.duration,R=W.easing,K=W.distance*R(st/W.duration)||0;q+=K;var $=n;return n+=st,C+=K,[ut,W.distance,$,n,W.duration,R]}),F(v.track.distToIdx(C)),P(),v.emit("animationStarted")}},stop:tt,targetIdx:null}}function wo(v){var U,x,n,N,A,S,ot,B,F,P,tt,j,C,q,W=1/0,it=[],ut=null,st=0;function R(Tt){Nt(st+Tt)}function K(Tt){var It=$(st+Tt).abs;return at(It)?It:null}function $(Tt){var It=Math.floor(Math.abs(ti(Tt/x))),St=ti((Tt%x+x)%x);St===x&&(St=0);var rt=ei(Tt),bt=ot.indexOf(kr([],ot,!0).reduce(function(Pt,qt){return Math.abs(qt-St)<Math.abs(Pt-St)?qt:Pt})),Lt=bt;return rt<0&&It++,bt===S&&(Lt=0,It+=rt>0?1:-1),{abs:Lt+It*S*rt,origin:bt,rel:Lt}}function O(Tt,It,St){var rt;if(It||!Dt())return Q(Tt,St);if(!at(Tt))return null;var bt=$(St??st),Lt=bt.abs,Pt=Tt-bt.rel,qt=Lt+Pt;rt=Q(qt);var Kt=Q(qt-S*ei(Pt));return(Kt!==null&&Math.abs(Kt)<Math.abs(rt)||rt===null)&&(rt=Kt),ti(rt)}function Q(Tt,It){if(It==null&&(It=ti(st)),!at(Tt)||Tt===null)return null;Tt=Math.round(Tt);var St=$(It),rt=St.abs,bt=St.rel,Lt=St.origin,Pt=Ct(Tt),qt=(It%x+x)%x,Kt=ot[Lt],re=Math.floor((Tt-(rt-bt))/S)*x;return ti(Kt-qt-Kt+ot[Pt]+re+(Lt===S?x:0))}function at(Tt){return yt(Tt)===Tt}function yt(Tt){return bn(Tt,F,P)}function Dt(){return N.loop}function Ct(Tt){return(Tt%S+S)%S}function Nt(Tt){var It;It=Tt-st,it.push({distance:It,timestamp:Pr()}),it.length>6&&(it=it.slice(-6)),st=ti(Tt);var St=wt().abs;if(St!==ut){var rt=ut!==null;ut=St,rt&&v.emit("slideChanged")}}function wt(Tt){var It=Tt?null:function(){if(S){var St=Dt(),rt=St?(st%x+x)%x:st,bt=(St?st%x:st)-A[0][2],Lt=0-(bt<0&&St?x-Math.abs(bt):bt),Pt=0,qt=$(st),Kt=qt.abs,re=qt.rel,_e=A[re][2],ce=A.map(function(he,me){var zt=Lt+Pt;(zt<0-he[0]||zt>1)&&(zt+=(Math.abs(zt)>x-1&&St?x:0)*ei(-zt));var oe=me-re,Ce=ei(oe),se=oe+Kt;St&&(Ce===-1&&zt>_e&&(se+=S),Ce===1&&zt<_e&&(se-=S),tt!==null&&se<tt&&(zt+=x),j!==null&&se>j&&(zt-=x));var Ee=zt+he[0]+he[1],ne=Math.max(zt>=0&&Ee<=1?1:Ee<0||zt>1?0:zt<0?Math.min(1,(he[0]+zt)/he[0]):(1-zt)/he[0],0);return Pt+=he[0]+he[1],{abs:se,distance:N.rtl?-1*zt+1-he[0]:zt,portion:ne,size:he[0]}});return Kt=yt(Kt),re=Ct(Kt),{abs:yt(Kt),length:n,max:q,maxIdx:P,min:C,minIdx:F,position:st,progress:St?rt/x:st/n,rel:re,slides:ce,slidesLength:x}}}();return U.details=It,v.emit("detailsChanged"),It}return U={absToRel:Ct,add:R,details:null,distToIdx:K,idxToDist:O,init:function(Tt){if(function(){if(N=v.options,A=(N.trackConfig||[]).map(function(bt){return[We(bt,"size",1),We(bt,"spacing",0),We(bt,"origin",0)]}),S=A.length){x=ti(A.reduce(function(bt,Lt){return bt+Lt[0]+Lt[1]},0));var St,rt=S-1;n=ti(x+A[0][2]-A[rt][0]-A[rt][2]-A[rt][1]),ot=A.reduce(function(bt,Lt){if(!bt)return[0];var Pt=A[bt.length-1],qt=bt[bt.length-1]+(Pt[0]+Pt[2])+Pt[1];return qt-=Lt[2],bt[bt.length-1]>qt&&(qt=bt[bt.length-1]),qt=ti(qt),bt.push(qt),(!St||St<qt)&&(B=bt.length-1),St=qt,bt},null),n===0&&(B=0),ot.push(ti(x))}}(),!S)return wt(!0);var It;(function(){var St=v.options.range,rt=v.options.loop;tt=F=rt?We(rt,"min",-1/0):0,j=P=rt?We(rt,"max",W):B;var bt=We(St,"min",null),Lt=We(St,"max",null);bt!==null&&(F=bt),Lt!==null&&(P=Lt),C=F===-1/0?F:v.track.idxToDist(F||0,!0,0),q=P===W?P:O(P,!0,0),Lt===null&&(j=P),We(St,"align",!1)&&P!==W&&A[Ct(P)][2]===0&&(q-=1-A[Ct(P)][0],P=K(q-st)),C=ti(C),q=ti(q)})(),It=Tt,Number(It)===It?R(Q(yt(Tt))):wt()},to:Nt,velocity:function(){var Tt=Pr(),It=it.reduce(function(St,rt){var bt=rt.distance,Lt=rt.timestamp;return Tt-Lt>200||(ei(bt)!==ei(St.distance)&&St.distance&&(St={distance:0,lastTimestamp:0,time:0}),St.time&&(St.distance+=bt),St.lastTimestamp&&(St.time+=Lt-St.lastTimestamp),St.lastTimestamp=Lt),St},{distance:0,lastTimestamp:0,time:0});return It.distance/It.time||0}}}function xo(v){var U,x,n,N,A,S,ot,B;function F(ut){return 2*ut}function P(ut){return bn(ut,ot,B)}function tt(ut){return 1-Math.pow(1-ut,3)}function j(){return n?v.track.velocity():0}function C(){it();var ut=v.options.mode==="free-snap",st=v.track,R=j();N=ei(R);var K=v.track.details,$=[];if(R||!ut){var O=q(R),Q=O.dist,at=O.dur;if(at=F(at),Q*=N,ut){var yt=st.idxToDist(st.distToIdx(Q),!0);yt&&(Q=yt)}$.push({distance:Q,duration:at,easing:tt});var Dt=K.position,Ct=Dt+Q;if(Ct<A||Ct>S){var Nt=Ct<A?A-Dt:S-Dt,wt=0,Tt=R;if(ei(Nt)===N){var It=Math.min(Math.abs(Nt)/Math.abs(Q),1),St=function(Lt){return 1-Math.pow(1-Lt,1/3)}(It)*at;$[0].earlyExit=St,Tt=R*(1-It)}else $[0].earlyExit=0,wt+=Nt;var rt=q(Tt,100),bt=rt.dist*N;v.options.rubberband&&($.push({distance:bt,duration:F(rt.dur),easing:tt}),$.push({distance:-bt+wt,duration:500,easing:tt}))}v.animator.start($)}else v.moveToIdx(P(K.abs),!0,{duration:500,easing:function(Lt){return 1+--Lt*Lt*Lt*Lt*Lt}})}function q(ut,st){st===void 0&&(st=1e3);var R=147e-9+(ut=Math.abs(ut))/st;return{dist:Math.pow(ut,2)/R,dur:ut/R}}function W(){var ut=v.track.details;ut&&(A=ut.min,S=ut.max,ot=ut.minIdx,B=ut.maxIdx)}function it(){v.animator.stop()}v.on("updated",W),v.on("optionsChanged",W),v.on("created",W),v.on("dragStarted",function(){n=!1,it(),U=x=v.track.details.abs}),v.on("dragChecked",function(){n=!0}),v.on("dragEnded",function(){var ut=v.options.mode;ut==="snap"&&function(){var st=v.track,R=v.track.details,K=R.position,$=ei(j());(K>S||K<A)&&($=0);var O=U+$;R.slides[st.absToRel(O)].portion===0&&(O-=$),U!==x&&(O=x),ei(st.idxToDist(O,!0))!==$&&(O+=$),O=P(O);var Q=st.idxToDist(O,!0);v.animator.start([{distance:Q,duration:500,easing:function(at){return 1+--at*at*at*at*at}}])}(),ut!=="free"&&ut!=="free-snap"||C()}),v.on("dragged",function(){x=v.track.details.abs})}function _o(v){var U,x,n,N,A,S,ot,B,F,P,tt,j,C,q,W,it,ut,st,R=Rr();function K(wt){if(S&&B===wt.id){var Tt=at(wt);if(F){if(!Q(wt))return O(wt);P=Tt,F=!1,v.emit("dragChecked")}if(it)return P=Tt;es(wt);var It=function(rt){if(ut===-1/0&&st===1/0)return rt;var bt=v.track.details,Lt=bt.length,Pt=bt.position,qt=bn(rt,ut-Pt,st-Pt);if(Lt===0)return 0;if(!v.options.rubberband)return qt;if(Pt<=st&&Pt>=ut||Pt<ut&&x>0||Pt>st&&x<0)return rt;var Kt=(Pt<ut?Pt-ut:Pt-st)/Lt,re=N*Lt,_e=Math.abs(Kt*re),ce=Math.max(0,1-_e/A*2);return ce*ce*rt}(ot(P-Tt)/N*n);x=ei(It);var St=v.track.details.position;(St>ut&&St<st||St===ut&&x>0||St===st&&x<0)&&is(wt),tt+=It,!j&&Math.abs(tt*N)>5&&(j=!0),v.track.add(It),P=Tt,v.emit("dragged")}}function $(wt){!S&&v.track.details&&v.track.details.length&&(tt=0,S=!0,j=!1,F=!0,B=wt.id,Q(wt),P=at(wt),v.emit("dragStarted"))}function O(wt){S&&B===wt.idChanged&&(S=!1,v.emit("dragEnded"))}function Q(wt){var Tt=yt(),It=Tt?wt.y:wt.x,St=Tt?wt.x:wt.y,rt=C!==void 0&&q!==void 0&&Math.abs(q-St)<=Math.abs(C-It);return C=It,q=St,rt}function at(wt){return yt()?wt.y:wt.x}function yt(){return v.options.vertical}function Dt(){N=v.size,A=yt()?window.innerHeight:window.innerWidth;var wt=v.track.details;wt&&(ut=wt.min,st=wt.max)}function Ct(wt){j&&(is(wt),es(wt))}function Nt(){if(R.purge(),v.options.drag&&!v.options.disabled){var wt;wt=v.options.dragSpeed||1,ot=typeof wt=="function"?wt:function(It){return It*wt},n=v.options.rtl?-1:1,Dt(),U=v.container,function(){var It="data-keen-slider-clickable";Ls("[".concat(It,"]:not([").concat(It,"=false])"),U).map(function(St){R.add(St,"dragstart",is),R.add(St,"mousedown",is),R.add(St,"touchstart",is)})}(),R.add(U,"dragstart",function(It){es(It)}),R.add(U,"click",Ct,{capture:!0}),R.input(U,"ksDragStart",$),R.input(U,"ksDrag",K),R.input(U,"ksDragEnd",O),R.input(U,"mousedown",$),R.input(U,"mousemove",K),R.input(U,"mouseleave",O),R.input(U,"mouseup",O),R.input(U,"touchstart",$,{passive:!0}),R.input(U,"touchmove",K,{passive:!1}),R.input(U,"touchend",O),R.input(U,"touchcancel",O),R.add(window,"wheel",function(It){S&&es(It)});var Tt="data-keen-slider-scrollable";Ls("[".concat(Tt,"]:not([").concat(Tt,"=false])"),v.container).map(function(It){return function(St){var rt;R.input(St,"touchstart",function(bt){rt=at(bt),it=!0,W=!0},{passive:!0}),R.input(St,"touchmove",function(bt){var Lt=yt(),Pt=Lt?St.scrollHeight-St.clientHeight:St.scrollWidth-St.clientWidth,qt=rt-at(bt),Kt=Lt?St.scrollTop:St.scrollLeft,re=Lt&&St.style.overflowY==="scroll"||!Lt&&St.style.overflowX==="scroll";if(rt=at(bt),(qt<0&&Kt>0||qt>0&&Kt<Pt)&&W&&re)return it=!0;W=!1,es(bt),it=!1}),R.input(St,"touchend",function(){it=!1})}(It)})}}v.on("updated",Dt),v.on("optionsChanged",Nt),v.on("created",Nt),v.on("destroyed",R.purge)}function Eo(v){var U,x,n=null;function N(C,q,W){v.animator.active?S(C,q,W):requestAnimationFrame(function(){return S(C,q,W)})}function A(){N(!1,!1,x)}function S(C,q,W){var it=0,ut=v.size,st=v.track.details;if(st&&U){var R=st.slides;U.forEach(function(K,$){if(C)!n&&q&&B(K,null,W),F(K,null,W);else{if(!R[$])return;var O=R[$].size*ut;!n&&q&&B(K,O,W),F(K,R[$].distance*ut-it,W),it+=O}})}}function ot(C){return v.options.renderMode==="performance"?Math.round(C):C}function B(C,q,W){var it=W?"height":"width";q!==null&&(q=ot(q)+"px"),C.style["min-"+it]=q,C.style["max-"+it]=q}function F(C,q,W){if(q!==null){q=ot(q);var it=W?q:0;q="translate3d(".concat(W?0:q,"px, ").concat(it,"px, 0)")}C.style.transform=q,C.style["-webkit-transform"]=q}function P(){U&&(S(!0,!0,x),U=null),v.on("detailsChanged",A,!0)}function tt(){N(!1,!0,x)}function j(){P(),x=v.options.vertical,v.options.disabled||v.options.renderMode==="custom"||(n=We(v.options.slides,"perView",null)==="auto",v.on("detailsChanged",A),(U=v.slides).length&&tt())}v.on("created",j),v.on("optionsChanged",j),v.on("beforeOptionsChanged",function(){P()}),v.on("updated",tt),v.on("destroyed",P)}function So(v,U){return function(x){var n,N,A,S,ot,B=Rr();function F(Q){var at;vn(x.container,"reverse",(at=x.container,window.getComputedStyle(at,null).getPropertyValue("direction")!=="rtl"||Q?null:"")),vn(x.container,"v",x.options.vertical&&!Q?"":null),vn(x.container,"disabled",x.options.disabled&&!Q?"":null)}function P(){tt()&&it()}function tt(){var Q=null;if(S.forEach(function(yt){yt.matches&&(Q=yt.__media)}),Q===n)return!1;n||x.emit("beforeOptionsChanged"),n=Q;var at=Q?A.breakpoints[Q]:A;return x.options=Oi(Oi({},A),at),F(),$(),O(),st(),!0}function j(Q){var at=Fr(Q);return(x.options.vertical?at.height:at.width)/x.size||1}function C(){return x.options.trackConfig.length}function q(Q){for(var at in n=!1,A=Oi(Oi({},U),Q),B.purge(),N=x.size,S=[],A.breakpoints||[]){var yt=window.matchMedia(at);yt.__media=at,S.push(yt),B.add(yt,"change",P)}B.add(window,"orientationchange",K),B.add(window,"resize",R),tt()}function W(Q){x.animator.stop();var at=x.track.details;x.track.init(Q??(at?at.abs:0))}function it(Q){W(Q),x.emit("optionsChanged")}function ut(Q,at){if(Q)return q(Q),void it(at);$(),O();var yt=C();st(),C()!==yt?it(at):W(at),x.emit("updated")}function st(){var Q=x.options.slides;if(typeof Q=="function")return x.options.trackConfig=Q(x.size,x.slides);for(var at=x.slides,yt=at.length,Dt=typeof Q=="number"?Q:We(Q,"number",yt,!0),Ct=[],Nt=We(Q,"perView",1,!0),wt=We(Q,"spacing",0,!0)/x.size||0,Tt=Nt==="auto"?wt:wt/Nt,It=We(Q,"origin","auto"),St=0,rt=0;rt<Dt;rt++){var bt=Nt==="auto"?j(at[rt]):1/Nt-wt+Tt,Lt=It==="center"?.5-bt/2:It==="auto"?0:It;Ct.push({origin:Lt,size:bt,spacing:wt}),St+=bt}if(St+=wt*(Dt-1),It==="auto"&&!x.options.loop&&Nt!==1){var Pt=0;Ct.map(function(qt){var Kt=St-Pt;return Pt+=qt.size+wt,Kt>=1||(qt.origin=1-Kt-(St>1?0:1-St)),qt})}x.options.trackConfig=Ct}function R(){$();var Q=x.size;x.options.disabled||Q===N||(N=Q,ut())}function K(){R(),setTimeout(R,500),setTimeout(R,2e3)}function $(){var Q=Fr(x.container);x.size=(x.options.vertical?Q.height:Q.width)||1}function O(){x.slides=Ls(x.options.selector,x.container)}x.container=(ot=Ls(v,document)).length?ot[0]:null,x.destroy=function(){B.purge(),x.emit("destroyed"),F(!0)},x.prev=function(){x.moveToIdx(x.track.details.abs-1,!0)},x.next=function(){x.moveToIdx(x.track.details.abs+1,!0)},x.update=ut,q(x.options)}}var Co=function(v,U,x){try{return function(n,N){var A,S={};return A={emit:function(ot){S[ot]&&S[ot].forEach(function(F){F(A)});var B=A.options&&A.options[ot];B&&B(A)},moveToIdx:function(ot,B,F){var P=A.track.idxToDist(ot,B);if(P){var tt=A.options.defaultAnimation;A.animator.start([{distance:P,duration:We(F||tt,"duration",500),easing:We(F||tt,"easing",function(j){return 1+--j*j*j*j*j})}])}},on:function(ot,B,F){F===void 0&&(F=!1),S[ot]||(S[ot]=[]);var P=S[ot].indexOf(B);P>-1?F&&delete S[ot][P]:F||S[ot].push(B)},options:n},function(){if(A.track=wo(A),A.animator=Ao(A),N)for(var ot=0,B=N;ot<B.length;ot++)(0,B[ot])(A);A.track.init(A.options.initial||0),A.emit("created")}(),A}(U,kr([So(v,{drag:!0,mode:"snap",renderMode:"precision",rubberband:!0,selector:".keen-slider__slide"}),Eo,_o,xo],x||[],!0))}catch(n){console.error(n)}};const To=document.querySelectorAll('[data-role="slider-thumbnail"]'),Dr=document.getElementById("js-main-slider");function Mo(v){return U=>{function x(){v.forEach(n=>{n.addEventListener("click",()=>{U.moveToIdx(Number(n.dataset.target)),v.forEach(N=>{N.dataset.target!=n.dataset.target?N.classList.remove("slider-thumbnail__img_active"):N.classList.add("slider-thumbnail__img_active")})})})}U.on("created",()=>{x()}),U.on("animationEnded",()=>{const n=U.track.details.rel;v.forEach(N=>{N.dataset.target==n?N.classList.add("slider-thumbnail__img_active"):N.classList.remove("slider-thumbnail__img_active")})})}}Dr&&new Co(Dr,{slides:{perView:1},defaultAnimation:{duration:0}},[Mo(To)]),document.querySelectorAll('[data-role="zengin-input"]').forEach(v=>{v.addEventListener("change",ko)});function ko(v){let U=v.target.value;if(U){const x=Io(U);v.target.value=x}}function Io(v){const U=/[^0-9A-Zｱｲｳｴｵｶｷｸｹｺｻｼｽｾｿﾀﾁﾂﾃﾄﾅﾆﾇﾈﾉﾊﾋﾌﾍﾎﾏﾐﾑﾒﾓﾔﾕﾖﾗﾘﾙﾚﾛﾜﾝﾞﾟ\(\)｢｣\/\-\.\\ ]/g,x=["\uFF70","\uFF67","\uFF68","\uFF69","\uFF6A","\uFF6B","\uFF6F","\uFF6C","\uFF6D","\uFF6E","\uFF08","\uFF09"],n=["-","\uFF71","\uFF72","\uFF73","\uFF74","\uFF75","\uFF82","\uFF94","\uFF95","\uFF96","(",")"];let N;return N=v.toUpperCase(),N=Lo(N,"khsa"),x.forEach((A,S)=>{N=N.replaceAll(A,n[S])}),N=N.replace(U,""),N}function Lo(v,U){var x,n,N,A,S,ot;if(x=["\uFF76\uFF9E","\uFF77\uFF9E","\uFF78\uFF9E","\uFF79\uFF9E","\uFF7A\uFF9E","\uFF7B\uFF9E","\uFF7C\uFF9E","\uFF7D\uFF9E","\uFF7E\uFF9E","\uFF7F\uFF9E","\uFF80\uFF9E","\uFF81\uFF9E","\uFF82\uFF9E","\uFF83\uFF9E","\uFF84\uFF9E","\uFF8A\uFF9E","\uFF8A\uFF9F","\uFF8B\uFF9E","\uFF8B\uFF9F","\uFF8C\uFF9E","\uFF8C\uFF9F","\uFF8D\uFF9E","\uFF8D\uFF9F","\uFF8E\uFF9E","\uFF8E\uFF9F","\uFF73\uFF9E","\uFF70","\uFF67","\uFF71","\uFF68","\uFF72","\uFF69","\uFF73","\uFF6A","\uFF74","\uFF6B","\uFF75","\uFF76","\uFF77","\uFF78","\uFF79","\uFF7A","\uFF7B","\uFF7C","\uFF7D","\uFF7E","\uFF7F","\uFF80","\uFF81","\uFF6F","\uFF82","\uFF83","\uFF84","\uFF85","\uFF86","\uFF87","\uFF88","\uFF89","\uFF8A","\uFF8B","\uFF8C","\uFF8D","\uFF8E","\uFF8F","\uFF90","\uFF91","\uFF92","\uFF93","\uFF6C","\uFF94","\uFF6D","\uFF95","\uFF6E","\uFF96","\uFF97","\uFF98","\uFF99","\uFF9A","\uFF9B","\uFF9C","\uFF66","\uFF9D","\uFF76","\uFF79","\uFF9C","\uFF72","\uFF74","\uFF9E","\uFF9F"],n=["\u30AC","\u30AE","\u30B0","\u30B2","\u30B4","\u30B6","\u30B8","\u30BA","\u30BC","\u30BE","\u30C0","\u30C2","\u30C5","\u30C7","\u30C9","\u30D0","\u30D1","\u30D3","\u30D4","\u30D6","\u30D7","\u30D9","\u30DA","\u30DC","\u30DD","\u30F4","\u30FC","\u30A1","\u30A2","\u30A3","\u30A4","\u30A5","\u30A6","\u30A7","\u30A8","\u30A9","\u30AA","\u30AB","\u30AD","\u30AF","\u30B1","\u30B3","\u30B5","\u30B7","\u30B9","\u30BB","\u30BD","\u30BF","\u30C1","\u30C3","\u30C4","\u30C6","\u30C8","\u30CA","\u30CB","\u30CC","\u30CD","\u30CE","\u30CF","\u30D2","\u30D5","\u30D8","\u30DB","\u30DE","\u30DF","\u30E0","\u30E1","\u30E2","\u30E3","\u30E4","\u30E5","\u30E6","\u30E7","\u30E8","\u30E9","\u30EA","\u30EB","\u30EC","\u30ED","\u30EF","\u30F2","\u30F3","\u30F5","\u30F6","\u30EE","\u30F0","\u30F1","\u309B","\u309C"],N=["\u304C","\u304E","\u3050","\u3052","\u3054","\u3056","\u3058","\u305A","\u305C","\u305E","\u3060","\u3062","\u3065","\u3067","\u3069","\u3070","\u3071","\u3073","\u3074","\u3076","\u3077","\u3079","\u307A","\u307C","\u307D","\u30F4","\u30FC","\u3041","\u3042","\u3043","\u3044","\u3045","\u3046","\u3047","\u3048","\u3049","\u304A","\u304B","\u304D","\u304F","\u3051","\u3053","\u3055","\u3057","\u3059","\u305B","\u305D","\u305F","\u3061","\u3063","\u3064","\u3066","\u3068","\u306A","\u306B","\u306C","\u306D","\u306E","\u306F","\u3072","\u3075","\u3078","\u307B","\u307E","\u307F","\u3080","\u3081","\u3082","\u3083","\u3084","\u3085","\u3086","\u3087","\u3088","\u3089","\u308A","\u308B","\u308C","\u308D","\u308F","\u3092","\u3093","\u304B","\u3051","\u308E","\u3090","\u3091","\u309B","\u309C"],A=x.length,U.match(/[ra]/)&&(v=v.replace(/[Ａ-ｚ]/g,function(B){return String.fromCharCode(parseInt(B.charCodeAt(0))-65248)})),U.match(/[RA]/)&&(v=v.replace(/[A-z]/g,function(B){return String.fromCharCode(parseInt(B.charCodeAt(0))+65248)})),U.match(/[na]/)&&(v=v.replace(/[０-９]/g,function(B){return String.fromCharCode(parseInt(B.charCodeAt(0))-65248)})),U.match(/[NA]/)&&(v=v.replace(/[0-9]/g,function(B){return String.fromCharCode(parseInt(B.charCodeAt(0))+65248)})),U.match(/s/)&&(v=v.replace(/　/g," ")),U.match(/S/)&&(v=v.replace(/ /g,"\u3000")),U.match(/k/))for(S=0;S<A;S++)ot=new RegExp(n[S],"g"),v=v.replace(ot,x[S]);if(U.match(/K/))for(U.match(/V/)||(v=v.replace(/ﾞ/g,"\u309B"),v=v.replace(/ﾟ/g,"\u309C")),S=0;S<A;S++)ot=new RegExp(x[S],"g"),v=v.replace(ot,n[S]);if(U.match(/h/))for(S=0;S<A;S++)ot=new RegExp(N[S],"g"),v=v.replace(ot,x[S]);if(U.match(/H/))for(U.match(/V/)||(v=v.replace(/ﾞ/g,"\u309B"),v=v.replace(/ﾟ/g,"\u309C")),S=0;S<A;S++)ot=new RegExp(x[S],"g"),v=v.replace(ot,N[S]);if(U.match(/c/))for(S=0;S<A;S++)ot=new RegExp(n[S],"g"),v=v.replace(ot,N[S]);if(U.match(/C/))for(S=0;S<A;S++)ot=new RegExp(N[S],"g"),v=v.replace(ot,n[S]);return v}document.querySelectorAll('[data-role="toggle-input--btn"]').forEach(v=>{v.addEventListener("click",U=>{const x=U.target.dataset.group;document.querySelectorAll(`[data-group="${x}"][data-role="toggle-input--value"], [data-group="${x}"][data-role="toggle-input--input"]`).forEach(n=>{n.classList.toggle("toggle-input_show")})})});const Po=document.querySelectorAll('[data-role="resize-input"]'),Ro=document.querySelectorAll('[data-role="drop-input"]');document.querySelectorAll('[data-role="preview-img"]'),Po.forEach(v=>{v.addEventListener("change",Oo)}),Ro.forEach(v=>{v.addEventListener("dragover",U=>U.preventDefault()),v.addEventListener("drop",No)});function Nr(v,U){if(!v.type.match(Ho))throw new Error("invalid mime type");let x=new FileReader;x.onload=async()=>{const n=x.result,N=await Fo(n),A=await(await fetch(N)).blob();U.file=new File([A],"resize.jpeg",{type:"image/jpeg"}),Do(N,U.dataset.target)},x.readAsDataURL(v)}async function Fo(v){const U=await new Promise((A,S)=>{const ot=new Image;ot.onload=()=>{A(ot)},ot.onerror=()=>{S()},ot.src=v}),x=document.createElement("canvas");let n=U.naturalWidth,N=U.naturalHeight;for(;n*N>5e5;)n/=10,N/=10;return x.width=n,x.height=N,x.getContext("2d").drawImage(U,0,0,n,N),x.toDataURL("image/jpeg")}function Do(v,U){const x=document.querySelector(U),n=document.createElement("img");n.classList.add("preview-img"),n.onload=()=>{x.innerHTML=null,x.appendChild(n)},n.src=v}function No(v){v.preventDefault();const U=v.dataTransfer.files[0];Nr(U,v.target.childNodes[1])}function Oo(v){const U=v.target.files[0];Nr(U,v.target)}const Ho=/^(image\/jpg|image\/jpeg|image\/png|image\/webp)$/,Bo="modulepreload",jo=function(v){return"/"+v},Or={},mi=function(v,U,x){let n=Promise.resolve();if(U&&U.length>0){const N=document.getElementsByTagName("link"),A=document.querySelector("meta[property=csp-nonce]"),S=(A==null?void 0:A.nonce)||(A==null?void 0:A.getAttribute("nonce"));n=Promise.all(U.map(ot=>{if(ot=jo(ot),ot in Or)return;Or[ot]=!0;const B=ot.endsWith(".css"),F=B?'[rel="stylesheet"]':"";if(x)for(let tt=N.length-1;tt>=0;tt--){const j=N[tt];if(j.href===ot&&(!B||j.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${ot}"]${F}`))return;const P=document.createElement("link");if(P.rel=B?"stylesheet":Bo,B||(P.as="script",P.crossOrigin=""),P.href=ot,S&&P.setAttribute("nonce",S),document.head.appendChild(P),B)return new Promise((tt,j)=>{P.addEventListener("load",tt),P.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${ot}`)))})}))}return n.then(()=>v()).catch(N=>{const A=new Event("vite:preloadError",{cancelable:!0});if(A.payload=N,window.dispatchEvent(A),!A.defaultPrevented)throw N})};var zo={976:(v,U,x)=>{var he,zt,Fi,Ce,qr,Ee,Ur,lt,i,r,d,f,l,w,b,_,u,o,h,s,a,g,k,y,X,$r,V,Xs,p,En,J,Sn,m,z,Y,ht,gt,xt,Rt,Cn,ie,ee,ye,ve,Wr,fe,Tn;x.d(U,{AnnotationLayer:()=>ce,FreeTextAnnotationElement:()=>Ct,InkAnnotationElement:()=>bt,StampAnnotationElement:()=>re});var n=x(292),N=x(419),A=x(792);function S(ae){return Math.floor(Math.max(0,Math.min(1,ae))*255).toString(16).padStart(2,"0")}function ot(ae){return Math.max(0,Math.min(255,255*ae))}class B{static CMYK_G([H,T,nt,dt]){return["G",1-Math.min(1,.3*H+.59*nt+.11*T+dt)]}static G_CMYK([H]){return["CMYK",0,0,0,1-H]}static G_RGB([H]){return["RGB",H,H,H]}static G_rgb([H]){return H=ot(H),[H,H,H]}static G_HTML([H]){const T=S(H);return`#${T}${T}${T}`}static RGB_G([H,T,nt]){return["G",.3*H+.59*T+.11*nt]}static RGB_rgb(H){return H.map(ot)}static RGB_HTML(H){return`#${H.map(S).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([H,T,nt,dt]){return["RGB",1-Math.min(1,H+dt),1-Math.min(1,nt+dt),1-Math.min(1,T+dt)]}static CMYK_rgb([H,T,nt,dt]){return[ot(1-Math.min(1,H+dt)),ot(1-Math.min(1,nt+dt)),ot(1-Math.min(1,T+dt))]}static CMYK_HTML(H){const T=this.CMYK_RGB(H).slice(1);return this.RGB_HTML(T)}static RGB_CMYK([H,T,nt]){const dt=1-H,ft=1-T,Et=1-nt,_t=Math.min(dt,ft,Et);return["CMYK",dt,ft,Et,_t]}}var F=x(284);const P=1e3,tt=9,j=new WeakSet;function C(ae){return{width:ae[2]-ae[0],height:ae[3]-ae[1]}}class q{static create(H){switch(H.data.annotationType){case n.AnnotationType.LINK:return new it(H);case n.AnnotationType.TEXT:return new ut(H);case n.AnnotationType.WIDGET:switch(H.data.fieldType){case"Tx":return new R(H);case"Btn":return H.data.radioButton?new O(H):H.data.checkBox?new $(H):new Q(H);case"Ch":return new at(H);case"Sig":return new K(H)}return new st(H);case n.AnnotationType.POPUP:return new yt(H);case n.AnnotationType.FREETEXT:return new Ct(H);case n.AnnotationType.LINE:return new Nt(H);case n.AnnotationType.SQUARE:return new wt(H);case n.AnnotationType.CIRCLE:return new Tt(H);case n.AnnotationType.POLYLINE:return new It(H);case n.AnnotationType.CARET:return new rt(H);case n.AnnotationType.INK:return new bt(H);case n.AnnotationType.POLYGON:return new St(H);case n.AnnotationType.HIGHLIGHT:return new Lt(H);case n.AnnotationType.UNDERLINE:return new Pt(H);case n.AnnotationType.SQUIGGLY:return new qt(H);case n.AnnotationType.STRIKEOUT:return new Kt(H);case n.AnnotationType.STAMP:return new re(H);case n.AnnotationType.FILEATTACHMENT:return new _e(H);default:return new W(H)}}}const me=class me{constructor(H,{isRenderable:T=!1,ignoreBorder:nt=!1,createQuadrilaterals:dt=!1}={}){c(this,he,!1);this.isRenderable=T,this.data=H.data,this.layer=H.layer,this.linkService=H.linkService,this.downloadManager=H.downloadManager,this.imageResourcesPath=H.imageResourcesPath,this.renderForms=H.renderForms,this.svgFactory=H.svgFactory,this.annotationStorage=H.annotationStorage,this.enableScripting=H.enableScripting,this.hasJSActions=H.hasJSActions,this._fieldObjects=H.fieldObjects,this.parent=H.parent,T&&(this.container=this._createContainer(nt)),dt&&this._createQuadrilaterals()}static _hasPopupData({titleObj:H,contentsObj:T,richText:nt}){return!!(H!=null&&H.str||T!=null&&T.str||nt!=null&&nt.str)}get hasPopupData(){return me._hasPopupData(this.data)}_createContainer(H){const{data:T,parent:{page:nt,viewport:dt}}=this,ft=document.createElement("section");ft.setAttribute("data-annotation-id",T.id),this instanceof st||(ft.tabIndex=P),ft.style.zIndex=this.parent.zIndex++,T.popupRef&&ft.setAttribute("aria-haspopup","dialog"),T.alternativeText&&(ft.title=T.alternativeText),T.noRotate&&ft.classList.add("norotate");const{pageWidth:Et,pageHeight:_t,pageX:Wt,pageY:Ut}=dt.rawDims;if(!T.rect||this instanceof yt){const{rotation:Bt}=T;return!T.hasOwnCanvas&&Bt!==0&&this.setRotation(Bt,ft),ft}const{width:Ot,height:Qt}=C(T.rect),Gt=n.Util.normalizeRect([T.rect[0],nt.view[3]-T.rect[1]+nt.view[1],T.rect[2],nt.view[3]-T.rect[3]+nt.view[1]]);if(!H&&T.borderStyle.width>0){ft.style.borderWidth=`${T.borderStyle.width}px`;const Bt=T.borderStyle.horizontalCornerRadius,Zt=T.borderStyle.verticalCornerRadius;if(Bt>0||Zt>0){const de=`calc(${Bt}px * var(--scale-factor)) / calc(${Zt}px * var(--scale-factor))`;ft.style.borderRadius=de}else if(this instanceof O){const de=`calc(${Ot}px * var(--scale-factor)) / calc(${Qt}px * var(--scale-factor))`;ft.style.borderRadius=de}switch(T.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:ft.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:ft.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:ft.style.borderBottomStyle="solid";break}const ue=T.borderColor||null;ue?(D(this,he,!0),ft.style.borderColor=n.Util.makeHexColor(ue[0]|0,ue[1]|0,ue[2]|0)):ft.style.borderWidth=0}ft.style.left=`${100*(Gt[0]-Wt)/Et}%`,ft.style.top=`${100*(Gt[1]-Ut)/_t}%`;const{rotation:Mt}=T;return T.hasOwnCanvas||Mt===0?(ft.style.width=`${100*Ot/Et}%`,ft.style.height=`${100*Qt/_t}%`):this.setRotation(Mt,ft),ft}setRotation(H,T=this.container){if(!this.data.rect)return;const{pageWidth:nt,pageHeight:dt}=this.parent.viewport.rawDims,{width:ft,height:Et}=C(this.data.rect);let _t,Wt;H%180===0?(_t=100*ft/nt,Wt=100*Et/dt):(_t=100*Et/nt,Wt=100*ft/dt),T.style.width=`${_t}%`,T.style.height=`${Wt}%`,T.setAttribute("data-main-rotation",(360-H)%360)}get _commonActions(){const H=(T,nt,dt)=>{const ft=dt.detail[T],Et=ft[0],_t=ft.slice(1);dt.target.style[nt]=B[`${Et}_HTML`](_t),this.annotationStorage.setValue(this.data.id,{[nt]:B[`${Et}_rgb`](_t)})};return(0,n.shadow)(this,"_commonActions",{display:T=>{const{display:nt}=T.detail,dt=nt%2===1;this.container.style.visibility=dt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:dt,noPrint:nt===1||nt===2})},print:T=>{this.annotationStorage.setValue(this.data.id,{noPrint:!T.detail.print})},hidden:T=>{const{hidden:nt}=T.detail;this.container.style.visibility=nt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:nt,noView:nt})},focus:T=>{setTimeout(()=>T.target.focus({preventScroll:!1}),0)},userName:T=>{T.target.title=T.detail.userName},readonly:T=>{T.target.disabled=T.detail.readonly},required:T=>{this._setRequired(T.target,T.detail.required)},bgColor:T=>{H("bgColor","backgroundColor",T)},fillColor:T=>{H("fillColor","backgroundColor",T)},fgColor:T=>{H("fgColor","color",T)},textColor:T=>{H("textColor","color",T)},borderColor:T=>{H("borderColor","borderColor",T)},strokeColor:T=>{H("strokeColor","borderColor",T)},rotation:T=>{const nt=T.detail.rotation;this.setRotation(nt),this.annotationStorage.setValue(this.data.id,{rotation:nt})}})}_dispatchEventFromSandbox(H,T){var dt;const nt=this._commonActions;for(const ft of Object.keys(T.detail))(dt=H[ft]||nt[ft])==null||dt(T)}_setDefaultPropertiesFromJS(H){if(!this.enableScripting)return;const T=this.annotationStorage.getRawValue(this.data.id);if(!T)return;const nt=this._commonActions;for(const[dt,ft]of Object.entries(T)){const Et=nt[dt];if(Et){const _t={detail:{[dt]:ft},target:H};Et(_t),delete T[dt]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:H}=this.data;if(!H)return;const[T,nt,dt,ft]=this.data.rect;if(H.length===1){const[,{x:Zt,y:ue},{x:de,y:Se}]=H[0];if(dt===Zt&&ft===ue&&T===de&&nt===Se)return}const{style:Et}=this.container;let _t;if(t(this,he)){const{borderColor:Zt,borderWidth:ue}=Et;Et.borderWidth=0,_t=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Zt}" stroke-width="${ue}">`],this.container.classList.add("hasBorder")}const Wt=dt-T,Ut=ft-nt,{svgFactory:Ot}=this,Qt=Ot.createElement("svg");Qt.classList.add("quadrilateralsContainer"),Qt.setAttribute("width",0),Qt.setAttribute("height",0);const Gt=Ot.createElement("defs");Qt.append(Gt);const Mt=Ot.createElement("clipPath"),Bt=`clippath_${this.data.id}`;Mt.setAttribute("id",Bt),Mt.setAttribute("clipPathUnits","objectBoundingBox"),Gt.append(Mt);for(const[,{x:Zt,y:ue},{x:de,y:Se}]of H){const Me=Ot.createElement("rect"),Je=(de-T)/Wt,Xe=(ft-ue)/Ut,Ve=(Zt-de)/Wt,ii=(ue-Se)/Ut;Me.setAttribute("x",Je),Me.setAttribute("y",Xe),Me.setAttribute("width",Ve),Me.setAttribute("height",ii),Mt.append(Me),_t==null||_t.push(`<rect vector-effect="non-scaling-stroke" x="${Je}" y="${Xe}" width="${Ve}" height="${ii}"/>`)}t(this,he)&&(_t.push("</g></svg>')"),Et.backgroundImage=_t.join("")),this.container.append(Qt),this.container.style.clipPath=`url(#${Bt})`}_createPopup(){const{container:H,data:T}=this;H.setAttribute("aria-haspopup","dialog");const nt=new yt({data:{color:T.color,titleObj:T.titleObj,modificationDate:T.modificationDate,contentsObj:T.contentsObj,richText:T.richText,parentRect:T.rect,borderStyle:0,id:`popup_${T.id}`,rotation:T.rotation},parent:this.parent,elements:[this]});this.parent.div.append(nt.render())}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(H,T=null){const nt=[];if(this._fieldObjects){const dt=this._fieldObjects[H];if(dt)for(const{page:ft,id:Et,exportValues:_t}of dt){if(ft===-1||Et===T)continue;const Wt=typeof _t=="string"?_t:null,Ut=document.querySelector(`[data-element-id="${Et}"]`);if(Ut&&!j.has(Ut)){(0,n.warn)(`_getElementsByName - element not allowed: ${Et}`);continue}nt.push({id:Et,exportValue:Wt,domElement:Ut})}return nt}for(const dt of document.getElementsByName(H)){const{exportValue:ft}=dt,Et=dt.getAttribute("data-element-id");Et!==T&&j.has(dt)&&nt.push({id:Et,exportValue:ft,domElement:dt})}return nt}show(){var H;this.container&&(this.container.hidden=!1),(H=this.popup)==null||H.maybeShow()}hide(){var H;this.container&&(this.container.hidden=!0),(H=this.popup)==null||H.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const H=this.getElementsToTriggerPopup();if(Array.isArray(H))for(const T of H)T.classList.add("highlightArea");else H.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:H,data:{id:T}}=this;this.container.addEventListener("dblclick",()=>{var nt;(nt=this.linkService.eventBus)==null||nt.dispatch("switchannotationeditormode",{source:this,mode:H,editId:T})})}};he=new WeakMap;let W=me;class it extends W{constructor(T,nt=null){super(T,{isRenderable:!0,ignoreBorder:!!(nt!=null&&nt.ignoreBorder),createQuadrilaterals:!0});c(this,zt);c(this,Ce);c(this,Ee);this.isTooltipOnly=T.data.isTooltipOnly}render(){const{data:T,linkService:nt}=this,dt=document.createElement("a");dt.setAttribute("data-element-id",T.id);let ft=!1;return T.url?(nt.addLinkAttributes(dt,T.url,T.newWindow),ft=!0):T.action?(this._bindNamedAction(dt,T.action),ft=!0):T.attachment?(I(this,Ce,qr).call(this,dt,T.attachment,T.attachmentDest),ft=!0):T.setOCGState?(I(this,Ee,Ur).call(this,dt,T.setOCGState),ft=!0):T.dest?(this._bindLink(dt,T.dest),ft=!0):(T.actions&&(T.actions.Action||T.actions["Mouse Up"]||T.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(dt,T),ft=!0),T.resetForm?(this._bindResetFormAction(dt,T.resetForm),ft=!0):this.isTooltipOnly&&!ft&&(this._bindLink(dt,""),ft=!0)),this.container.classList.add("linkAnnotation"),ft&&this.container.append(dt),this.container}_bindLink(T,nt){T.href=this.linkService.getDestinationHash(nt),T.onclick=()=>(nt&&this.linkService.goToDestination(nt),!1),(nt||nt==="")&&I(this,zt,Fi).call(this)}_bindNamedAction(T,nt){T.href=this.linkService.getAnchorUrl(""),T.onclick=()=>(this.linkService.executeNamedAction(nt),!1),I(this,zt,Fi).call(this)}_bindJSAction(T,nt){T.href=this.linkService.getAnchorUrl("");const dt=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const ft of Object.keys(nt.actions)){const Et=dt.get(ft);Et&&(T[Et]=()=>{var _t;return(_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:nt.id,name:ft}}),!1})}T.onclick||(T.onclick=()=>!1),I(this,zt,Fi).call(this)}_bindResetFormAction(T,nt){const dt=T.onclick;if(dt||(T.href=this.linkService.getAnchorUrl("")),I(this,zt,Fi).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),dt||(T.onclick=()=>!1);return}T.onclick=()=>{var Qt;dt==null||dt();const{fields:ft,refs:Et,include:_t}=nt,Wt=[];if(ft.length!==0||Et.length!==0){const Gt=new Set(Et);for(const Mt of ft){const Bt=this._fieldObjects[Mt]||[];for(const{id:Zt}of Bt)Gt.add(Zt)}for(const Mt of Object.values(this._fieldObjects))for(const Bt of Mt)Gt.has(Bt.id)===_t&&Wt.push(Bt)}else for(const Gt of Object.values(this._fieldObjects))Wt.push(...Gt);const Ut=this.annotationStorage,Ot=[];for(const Gt of Wt){const{id:Mt}=Gt;switch(Ot.push(Mt),Gt.type){case"text":{const Zt=Gt.defaultValue||"";Ut.setValue(Mt,{value:Zt});break}case"checkbox":case"radiobutton":{const Zt=Gt.defaultValue===Gt.exportValues;Ut.setValue(Mt,{value:Zt});break}case"combobox":case"listbox":{const Zt=Gt.defaultValue||"";Ut.setValue(Mt,{value:Zt});break}default:continue}const Bt=document.querySelector(`[data-element-id="${Mt}"]`);if(Bt){if(!j.has(Bt)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${Mt}`);continue}}else continue;Bt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Qt=this.linkService.eventBus)==null||Qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Ot,name:"ResetForm"}})),!1}}}zt=new WeakSet,Fi=function(){this.container.setAttribute("data-internal-link","")},Ce=new WeakSet,qr=function(T,nt,dt=null){T.href=this.linkService.getAnchorUrl(""),T.onclick=()=>{var ft;return(ft=this.downloadManager)==null||ft.openOrDownloadData(nt.content,nt.filename,dt),!1},I(this,zt,Fi).call(this)},Ee=new WeakSet,Ur=function(T,nt){T.href=this.linkService.getAnchorUrl(""),T.onclick=()=>(this.linkService.executeSetOCGState(nt),!1),I(this,zt,Fi).call(this)};class ut extends W{constructor(H){super(H,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const H=document.createElement("img");return H.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",H.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),H.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(H),this.container}}class st extends W{render(){return this.container}showElementAndHideCanvas(H){var T;this.data.hasOwnCanvas&&(((T=H.previousSibling)==null?void 0:T.nodeName)==="CANVAS"&&(H.previousSibling.hidden=!0),H.hidden=!1)}_getKeyModifier(H){return n.FeatureTest.platform.isMac?H.metaKey:H.ctrlKey}_setEventListener(H,T,nt,dt,ft){nt.includes("mouse")?H.addEventListener(nt,Et=>{var _t;(_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:dt,value:ft(Et),shift:Et.shiftKey,modifier:this._getKeyModifier(Et)}})}):H.addEventListener(nt,Et=>{var _t;if(nt==="blur"){if(!T.focused||!Et.relatedTarget)return;T.focused=!1}else if(nt==="focus"){if(T.focused)return;T.focused=!0}ft&&((_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:dt,value:ft(Et)}}))})}_setEventListeners(H,T,nt,dt){var ft,Et,_t;for(const[Wt,Ut]of nt)(Ut==="Action"||(ft=this.data.actions)!=null&&ft[Ut])&&((Ut==="Focus"||Ut==="Blur")&&(T||(T={focused:!1})),this._setEventListener(H,T,Wt,Ut,dt),Ut==="Focus"&&!((Et=this.data.actions)!=null&&Et.Blur)?this._setEventListener(H,T,"blur","Blur",null):Ut==="Blur"&&!((_t=this.data.actions)!=null&&_t.Focus)&&this._setEventListener(H,T,"focus","Focus",null))}_setBackgroundColor(H){const T=this.data.backgroundColor||null;H.style.backgroundColor=T===null?"transparent":n.Util.makeHexColor(T[0],T[1],T[2])}_setTextStyle(H){const T=["left","center","right"],{fontColor:nt}=this.data.defaultAppearanceData,dt=this.data.defaultAppearanceData.fontSize||tt,ft=H.style;let Et;const _t=2,Wt=Ut=>Math.round(10*Ut)/10;if(this.data.multiLine){const Ut=Math.abs(this.data.rect[3]-this.data.rect[1]-_t),Ot=Math.round(Ut/(n.LINE_FACTOR*dt))||1,Qt=Ut/Ot;Et=Math.min(dt,Wt(Qt/n.LINE_FACTOR))}else{const Ut=Math.abs(this.data.rect[3]-this.data.rect[1]-_t);Et=Math.min(dt,Wt(Ut/n.LINE_FACTOR))}ft.fontSize=`calc(${Et}px * var(--scale-factor))`,ft.color=n.Util.makeHexColor(nt[0],nt[1],nt[2]),this.data.textAlignment!==null&&(ft.textAlign=T[this.data.textAlignment])}_setRequired(H,T){T?H.setAttribute("required",!0):H.removeAttribute("required"),H.setAttribute("aria-required",T)}}class R extends st{constructor(H){const T=H.renderForms||H.data.hasOwnCanvas||!H.data.hasAppearance&&!!H.data.fieldValue;super(H,{isRenderable:T})}setPropertyOnSiblings(H,T,nt,dt){const ft=this.annotationStorage;for(const Et of this._getElementsByName(H.name,H.id))Et.domElement&&(Et.domElement[T]=nt),ft.setValue(Et.id,{[dt]:nt})}render(){var dt,ft;const H=this.annotationStorage,T=this.data.id;this.container.classList.add("textWidgetAnnotation");let nt=null;if(this.renderForms){const Et=H.getValue(T,{value:this.data.fieldValue});let _t=Et.value||"";const Wt=H.getValue(T,{charLimit:this.data.maxLen}).charLimit;Wt&&_t.length>Wt&&(_t=_t.slice(0,Wt));let Ut=Et.formattedValue||((dt=this.data.textContent)==null?void 0:dt.join(`
`))||null;Ut&&this.data.comb&&(Ut=Ut.replaceAll(/\s+/g,""));const Ot={userValue:_t,formattedValue:Ut,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(nt=document.createElement("textarea"),nt.textContent=Ut??_t,this.data.doNotScroll&&(nt.style.overflowY="hidden")):(nt=document.createElement("input"),nt.type="text",nt.setAttribute("value",Ut??_t),this.data.doNotScroll&&(nt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(nt.hidden=!0),j.add(nt),nt.setAttribute("data-element-id",T),nt.disabled=this.data.readOnly,nt.name=this.data.fieldName,nt.tabIndex=P,this._setRequired(nt,this.data.required),Wt&&(nt.maxLength=Wt),nt.addEventListener("input",Gt=>{H.setValue(T,{value:Gt.target.value}),this.setPropertyOnSiblings(nt,"value",Gt.target.value,"value"),Ot.formattedValue=null}),nt.addEventListener("resetform",Gt=>{const Mt=this.data.defaultFieldValue??"";nt.value=Ot.userValue=Mt,Ot.formattedValue=null});let Qt=Gt=>{const{formattedValue:Mt}=Ot;Mt!=null&&(Gt.target.value=Mt),Gt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){nt.addEventListener("focus",Mt=>{var Zt;if(Ot.focused)return;const{target:Bt}=Mt;Ot.userValue&&(Bt.value=Ot.userValue),Ot.lastCommittedValue=Bt.value,Ot.commitKey=1,(Zt=this.data.actions)!=null&&Zt.Focus||(Ot.focused=!0)}),nt.addEventListener("updatefromsandbox",Mt=>{this.showElementAndHideCanvas(Mt.target);const Bt={value(Zt){Ot.userValue=Zt.detail.value??"",H.setValue(T,{value:Ot.userValue.toString()}),Zt.target.value=Ot.userValue},formattedValue(Zt){const{formattedValue:ue}=Zt.detail;Ot.formattedValue=ue,ue!=null&&Zt.target!==document.activeElement&&(Zt.target.value=ue),H.setValue(T,{formattedValue:ue})},selRange(Zt){Zt.target.setSelectionRange(...Zt.detail.selRange)},charLimit:Zt=>{var Me;const{charLimit:ue}=Zt.detail,{target:de}=Zt;if(ue===0){de.removeAttribute("maxLength");return}de.setAttribute("maxLength",ue);let Se=Ot.userValue;!Se||Se.length<=ue||(Se=Se.slice(0,ue),de.value=Ot.userValue=Se,H.setValue(T,{value:Se}),(Me=this.linkService.eventBus)==null||Me.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:Se,willCommit:!0,commitKey:1,selStart:de.selectionStart,selEnd:de.selectionEnd}}))}};this._dispatchEventFromSandbox(Bt,Mt)}),nt.addEventListener("keydown",Mt=>{var ue;Ot.commitKey=1;let Bt=-1;if(Mt.key==="Escape"?Bt=0:Mt.key==="Enter"&&!this.data.multiLine?Bt=2:Mt.key==="Tab"&&(Ot.commitKey=3),Bt===-1)return;const{value:Zt}=Mt.target;Ot.lastCommittedValue!==Zt&&(Ot.lastCommittedValue=Zt,Ot.userValue=Zt,(ue=this.linkService.eventBus)==null||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:Zt,willCommit:!0,commitKey:Bt,selStart:Mt.target.selectionStart,selEnd:Mt.target.selectionEnd}}))});const Gt=Qt;Qt=null,nt.addEventListener("blur",Mt=>{var Zt,ue;if(!Ot.focused||!Mt.relatedTarget)return;(Zt=this.data.actions)!=null&&Zt.Blur||(Ot.focused=!1);const{value:Bt}=Mt.target;Ot.userValue=Bt,Ot.lastCommittedValue!==Bt&&((ue=this.linkService.eventBus)==null||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:Bt,willCommit:!0,commitKey:Ot.commitKey,selStart:Mt.target.selectionStart,selEnd:Mt.target.selectionEnd}})),Gt(Mt)}),(ft=this.data.actions)!=null&&ft.Keystroke&&nt.addEventListener("beforeinput",Mt=>{var Xe;Ot.lastCommittedValue=null;const{data:Bt,target:Zt}=Mt,{value:ue,selectionStart:de,selectionEnd:Se}=Zt;let Me=de,Je=Se;switch(Mt.inputType){case"deleteWordBackward":{const Ve=ue.substring(0,de).match(/\w*[^\w]*$/);Ve&&(Me-=Ve[0].length);break}case"deleteWordForward":{const Ve=ue.substring(de).match(/^[^\w]*\w*/);Ve&&(Je+=Ve[0].length);break}case"deleteContentBackward":de===Se&&(Me-=1);break;case"deleteContentForward":de===Se&&(Je+=1);break}Mt.preventDefault(),(Xe=this.linkService.eventBus)==null||Xe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:ue,change:Bt||"",willCommit:!1,selStart:Me,selEnd:Je}})}),this._setEventListeners(nt,Ot,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Mt=>Mt.target.value)}if(Qt&&nt.addEventListener("blur",Qt),this.data.comb){const Gt=(this.data.rect[2]-this.data.rect[0])/Wt;nt.classList.add("comb"),nt.style.letterSpacing=`calc(${Gt}px * var(--scale-factor) - 1ch)`}}else nt=document.createElement("div"),nt.textContent=this.data.fieldValue,nt.style.verticalAlign="middle",nt.style.display="table-cell",this.data.hasOwnCanvas&&(nt.hidden=!0);return this._setTextStyle(nt),this._setBackgroundColor(nt),this._setDefaultPropertiesFromJS(nt),this.container.append(nt),this.container}}class K extends st{constructor(H){super(H,{isRenderable:!!H.data.hasOwnCanvas})}}class $ extends st{constructor(H){super(H,{isRenderable:H.renderForms})}render(){const H=this.annotationStorage,T=this.data,nt=T.id;let dt=H.getValue(nt,{value:T.exportValue===T.fieldValue}).value;typeof dt=="string"&&(dt=dt!=="Off",H.setValue(nt,{value:dt})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const ft=document.createElement("input");return j.add(ft),ft.setAttribute("data-element-id",nt),ft.disabled=T.readOnly,this._setRequired(ft,this.data.required),ft.type="checkbox",ft.name=T.fieldName,dt&&ft.setAttribute("checked",!0),ft.setAttribute("exportValue",T.exportValue),ft.tabIndex=P,ft.addEventListener("change",Et=>{const{name:_t,checked:Wt}=Et.target;for(const Ut of this._getElementsByName(_t,nt)){const Ot=Wt&&Ut.exportValue===T.exportValue;Ut.domElement&&(Ut.domElement.checked=Ot),H.setValue(Ut.id,{value:Ot})}H.setValue(nt,{value:Wt})}),ft.addEventListener("resetform",Et=>{const _t=T.defaultFieldValue||"Off";Et.target.checked=_t===T.exportValue}),this.enableScripting&&this.hasJSActions&&(ft.addEventListener("updatefromsandbox",Et=>{const _t={value(Wt){Wt.target.checked=Wt.detail.value!=="Off",H.setValue(nt,{value:Wt.target.checked})}};this._dispatchEventFromSandbox(_t,Et)}),this._setEventListeners(ft,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Et=>Et.target.checked)),this._setBackgroundColor(ft),this._setDefaultPropertiesFromJS(ft),this.container.append(ft),this.container}}class O extends st{constructor(H){super(H,{isRenderable:H.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const H=this.annotationStorage,T=this.data,nt=T.id;let dt=H.getValue(nt,{value:T.fieldValue===T.buttonValue}).value;if(typeof dt=="string"&&(dt=dt!==T.buttonValue,H.setValue(nt,{value:dt})),dt)for(const Et of this._getElementsByName(T.fieldName,nt))H.setValue(Et.id,{value:!1});const ft=document.createElement("input");if(j.add(ft),ft.setAttribute("data-element-id",nt),ft.disabled=T.readOnly,this._setRequired(ft,this.data.required),ft.type="radio",ft.name=T.fieldName,dt&&ft.setAttribute("checked",!0),ft.tabIndex=P,ft.addEventListener("change",Et=>{const{name:_t,checked:Wt}=Et.target;for(const Ut of this._getElementsByName(_t,nt))H.setValue(Ut.id,{value:!1});H.setValue(nt,{value:Wt})}),ft.addEventListener("resetform",Et=>{const _t=T.defaultFieldValue;Et.target.checked=_t!=null&&_t===T.buttonValue}),this.enableScripting&&this.hasJSActions){const Et=T.buttonValue;ft.addEventListener("updatefromsandbox",_t=>{const Wt={value:Ut=>{const Ot=Et===Ut.detail.value;for(const Qt of this._getElementsByName(Ut.target.name)){const Gt=Ot&&Qt.id===nt;Qt.domElement&&(Qt.domElement.checked=Gt),H.setValue(Qt.id,{value:Gt})}}};this._dispatchEventFromSandbox(Wt,_t)}),this._setEventListeners(ft,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_t=>_t.target.checked)}return this._setBackgroundColor(ft),this._setDefaultPropertiesFromJS(ft),this.container.append(ft),this.container}}class Q extends it{constructor(H){super(H,{ignoreBorder:H.data.hasAppearance})}render(){const H=super.render();H.classList.add("buttonWidgetAnnotation","pushButton");const T=H.lastChild;return this.enableScripting&&this.hasJSActions&&T&&(this._setDefaultPropertiesFromJS(T),T.addEventListener("updatefromsandbox",nt=>{this._dispatchEventFromSandbox({},nt)})),H}}class at extends st{constructor(H){super(H,{isRenderable:H.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const H=this.annotationStorage,T=this.data.id,nt=H.getValue(T,{value:this.data.fieldValue}),dt=document.createElement("select");j.add(dt),dt.setAttribute("data-element-id",T),dt.disabled=this.data.readOnly,this._setRequired(dt,this.data.required),dt.name=this.data.fieldName,dt.tabIndex=P;let ft=this.data.combo&&this.data.options.length>0;this.data.combo||(dt.size=this.data.options.length,this.data.multiSelect&&(dt.multiple=!0)),dt.addEventListener("resetform",Ot=>{const Qt=this.data.defaultFieldValue;for(const Gt of dt.options)Gt.selected=Gt.value===Qt});for(const Ot of this.data.options){const Qt=document.createElement("option");Qt.textContent=Ot.displayValue,Qt.value=Ot.exportValue,nt.value.includes(Ot.exportValue)&&(Qt.setAttribute("selected",!0),ft=!1),dt.append(Qt)}let Et=null;if(ft){const Ot=document.createElement("option");Ot.value=" ",Ot.setAttribute("hidden",!0),Ot.setAttribute("selected",!0),dt.prepend(Ot),Et=()=>{Ot.remove(),dt.removeEventListener("input",Et),Et=null},dt.addEventListener("input",Et)}const _t=Ot=>{const Qt=Ot?"value":"textContent",{options:Gt,multiple:Mt}=dt;return Mt?Array.prototype.filter.call(Gt,Bt=>Bt.selected).map(Bt=>Bt[Qt]):Gt.selectedIndex===-1?null:Gt[Gt.selectedIndex][Qt]};let Wt=_t(!1);const Ut=Ot=>{const Qt=Ot.target.options;return Array.prototype.map.call(Qt,Gt=>({displayValue:Gt.textContent,exportValue:Gt.value}))};return this.enableScripting&&this.hasJSActions?(dt.addEventListener("updatefromsandbox",Ot=>{const Qt={value(Gt){Et==null||Et();const Mt=Gt.detail.value,Bt=new Set(Array.isArray(Mt)?Mt:[Mt]);for(const Zt of dt.options)Zt.selected=Bt.has(Zt.value);H.setValue(T,{value:_t(!0)}),Wt=_t(!1)},multipleSelection(Gt){dt.multiple=!0},remove(Gt){const Mt=dt.options,Bt=Gt.detail.remove;Mt[Bt].selected=!1,dt.remove(Bt),Mt.length>0&&Array.prototype.findIndex.call(Mt,Zt=>Zt.selected)===-1&&(Mt[0].selected=!0),H.setValue(T,{value:_t(!0),items:Ut(Gt)}),Wt=_t(!1)},clear(Gt){for(;dt.length!==0;)dt.remove(0);H.setValue(T,{value:null,items:[]}),Wt=_t(!1)},insert(Gt){const{index:Mt,displayValue:Bt,exportValue:Zt}=Gt.detail.insert,ue=dt.children[Mt],de=document.createElement("option");de.textContent=Bt,de.value=Zt,ue?ue.before(de):dt.append(de),H.setValue(T,{value:_t(!0),items:Ut(Gt)}),Wt=_t(!1)},items(Gt){const{items:Mt}=Gt.detail;for(;dt.length!==0;)dt.remove(0);for(const Bt of Mt){const{displayValue:Zt,exportValue:ue}=Bt,de=document.createElement("option");de.textContent=Zt,de.value=ue,dt.append(de)}dt.options.length>0&&(dt.options[0].selected=!0),H.setValue(T,{value:_t(!0),items:Ut(Gt)}),Wt=_t(!1)},indices(Gt){const Mt=new Set(Gt.detail.indices);for(const Bt of Gt.target.options)Bt.selected=Mt.has(Bt.index);H.setValue(T,{value:_t(!0)}),Wt=_t(!1)},editable(Gt){Gt.target.disabled=!Gt.detail.editable}};this._dispatchEventFromSandbox(Qt,Ot)}),dt.addEventListener("input",Ot=>{var Gt;const Qt=_t(!0);H.setValue(T,{value:Qt}),Ot.preventDefault(),(Gt=this.linkService.eventBus)==null||Gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:Wt,changeEx:Qt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(dt,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Ot=>Ot.target.value)):dt.addEventListener("input",function(Ot){H.setValue(T,{value:_t(!0)})}),this.data.combo&&this._setTextStyle(dt),this._setBackgroundColor(dt),this._setDefaultPropertiesFromJS(dt),this.container.append(dt),this.container}}class yt extends W{constructor(H){const{data:T,elements:nt}=H;super(H,{isRenderable:W._hasPopupData(T)}),this.elements=nt}render(){this.container.classList.add("popupAnnotation");const H=new Dt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),T=[];for(const nt of this.elements)nt.popup=H,T.push(nt.data.id),nt.addHighlightArea();return this.container.setAttribute("aria-controls",T.map(nt=>`${n.AnnotationPrefix}${nt}`).join(",")),this.container}}class Dt{constructor({container:H,color:T,elements:nt,titleObj:dt,modificationDate:ft,contentsObj:Et,richText:_t,parent:Wt,rect:Ut,parentRect:Ot,open:Qt}){c(this,X);c(this,V);c(this,p);c(this,J);c(this,lt,I(this,X,$r).bind(this));c(this,i,I(this,J,Sn).bind(this));c(this,r,I(this,p,En).bind(this));c(this,d,I(this,V,Xs).bind(this));c(this,f,null);c(this,l,null);c(this,w,null);c(this,b,null);c(this,_,null);c(this,u,null);c(this,o,null);c(this,h,!1);c(this,s,null);c(this,a,null);c(this,g,null);c(this,k,null);c(this,y,!1);var Gt;D(this,l,H),D(this,k,dt),D(this,w,Et),D(this,g,_t),D(this,u,Wt),D(this,f,T),D(this,a,Ut),D(this,o,Ot),D(this,_,nt),D(this,b,N.PDFDateString.toDateObject(ft)),this.trigger=nt.flatMap(Mt=>Mt.getElementsToTriggerPopup());for(const Mt of this.trigger)Mt.addEventListener("click",t(this,d)),Mt.addEventListener("mouseenter",t(this,r)),Mt.addEventListener("mouseleave",t(this,i)),Mt.classList.add("popupTriggerArea");for(const Mt of nt)(Gt=Mt.container)==null||Gt.addEventListener("keydown",t(this,lt));t(this,l).hidden=!0,Qt&&I(this,V,Xs).call(this)}render(){if(t(this,s))return;const{page:{view:H},viewport:{rawDims:{pageWidth:T,pageHeight:nt,pageX:dt,pageY:ft}}}=t(this,u),Et=D(this,s,document.createElement("div"));if(Et.className="popup",t(this,f)){const Se=Et.style.outlineColor=n.Util.makeHexColor(...t(this,f));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Et.style.backgroundColor=`color-mix(in srgb, ${Se} 30%, white)`:Et.style.backgroundColor=n.Util.makeHexColor(...t(this,f).map(Me=>Math.floor(.7*(255-Me)+Me)))}const _t=document.createElement("span");_t.className="header";const Wt=document.createElement("h1");if(_t.append(Wt),{dir:Wt.dir,str:Wt.textContent}=t(this,k),Et.append(_t),t(this,b)){const Se=document.createElement("span");Se.classList.add("popupDate"),Se.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),Se.setAttribute("data-l10n-args",JSON.stringify({date:t(this,b).toLocaleDateString(),time:t(this,b).toLocaleTimeString()})),_t.append(Se)}const Ut=t(this,w),Ot=t(this,g);if(Ot!=null&&Ot.str&&(!(Ut!=null&&Ut.str)||Ut.str===Ot.str))F.XfaLayer.render({xfaHtml:Ot.html,intent:"richText",div:Et}),Et.lastChild.classList.add("richText","popupContent");else{const Se=this._formatContents(Ut);Et.append(Se)}let Qt=!!t(this,o),Gt=Qt?t(this,o):t(this,a);for(const Se of t(this,_))if(!Gt||n.Util.intersect(Se.data.rect,Gt)!==null){Gt=Se.data.rect,Qt=!0;break}const Mt=n.Util.normalizeRect([Gt[0],H[3]-Gt[1]+H[1],Gt[2],H[3]-Gt[3]+H[1]]),Bt=Qt?Gt[2]-Gt[0]+5:0,Zt=Mt[0]+Bt,ue=Mt[1],{style:de}=t(this,l);de.left=`${100*(Zt-dt)/T}%`,de.top=`${100*(ue-ft)/nt}%`,t(this,l).append(Et)}_formatContents({str:H,dir:T}){const nt=document.createElement("p");nt.classList.add("popupContent"),nt.dir=T;const dt=H.split(/(?:\r\n?|\n)/);for(let ft=0,Et=dt.length;ft<Et;++ft){const _t=dt[ft];nt.append(document.createTextNode(_t)),ft<Et-1&&nt.append(document.createElement("br"))}return nt}forceHide(){D(this,y,this.isVisible),t(this,y)&&(t(this,l).hidden=!0)}maybeShow(){t(this,y)&&(D(this,y,!1),t(this,l).hidden=!1)}get isVisible(){return t(this,l).hidden===!1}}lt=new WeakMap,i=new WeakMap,r=new WeakMap,d=new WeakMap,f=new WeakMap,l=new WeakMap,w=new WeakMap,b=new WeakMap,_=new WeakMap,u=new WeakMap,o=new WeakMap,h=new WeakMap,s=new WeakMap,a=new WeakMap,g=new WeakMap,k=new WeakMap,y=new WeakMap,X=new WeakSet,$r=function(H){H.altKey||H.shiftKey||H.ctrlKey||H.metaKey||(H.key==="Enter"||H.key==="Escape"&&t(this,h))&&I(this,V,Xs).call(this)},V=new WeakSet,Xs=function(){D(this,h,!t(this,h)),t(this,h)?(I(this,p,En).call(this),t(this,l).addEventListener("click",t(this,d)),t(this,l).addEventListener("keydown",t(this,lt))):(I(this,J,Sn).call(this),t(this,l).removeEventListener("click",t(this,d)),t(this,l).removeEventListener("keydown",t(this,lt)))},p=new WeakSet,En=function(){t(this,s)||this.render(),this.isVisible?t(this,h)&&t(this,l).classList.add("focused"):(t(this,l).hidden=!1,t(this,l).style.zIndex=parseInt(t(this,l).style.zIndex)+1e3)},J=new WeakSet,Sn=function(){t(this,l).classList.remove("focused"),!(t(this,h)||!this.isVisible)&&(t(this,l).hidden=!0,t(this,l).style.zIndex=parseInt(t(this,l).style.zIndex)-1e3)};class Ct extends W{constructor(H){super(H,{isRenderable:!0,ignoreBorder:!0}),this.textContent=H.data.textContent,this.textPosition=H.data.textPosition,this.annotationEditorType=n.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const H=document.createElement("div");H.classList.add("annotationTextContent"),H.setAttribute("role","comment");for(const T of this.textContent){const nt=document.createElement("span");nt.textContent=T,H.append(nt)}this.container.append(H)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class Nt extends W{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0});c(this,m,null)}render(){this.container.classList.add("lineAnnotation");const T=this.data,{width:nt,height:dt}=C(T.rect),ft=this.svgFactory.create(nt,dt,!0),Et=D(this,m,this.svgFactory.createElement("svg:line"));return Et.setAttribute("x1",T.rect[2]-T.lineCoordinates[0]),Et.setAttribute("y1",T.rect[3]-T.lineCoordinates[1]),Et.setAttribute("x2",T.rect[2]-T.lineCoordinates[2]),Et.setAttribute("y2",T.rect[3]-T.lineCoordinates[3]),Et.setAttribute("stroke-width",T.borderStyle.width||1),Et.setAttribute("stroke","transparent"),Et.setAttribute("fill","transparent"),ft.append(Et),this.container.append(ft),!T.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,m)}addHighlightArea(){this.container.classList.add("highlightArea")}}m=new WeakMap;class wt extends W{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0});c(this,z,null)}render(){this.container.classList.add("squareAnnotation");const T=this.data,{width:nt,height:dt}=C(T.rect),ft=this.svgFactory.create(nt,dt,!0),Et=T.borderStyle.width,_t=D(this,z,this.svgFactory.createElement("svg:rect"));return _t.setAttribute("x",Et/2),_t.setAttribute("y",Et/2),_t.setAttribute("width",nt-Et),_t.setAttribute("height",dt-Et),_t.setAttribute("stroke-width",Et||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),ft.append(_t),this.container.append(ft),!T.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,z)}addHighlightArea(){this.container.classList.add("highlightArea")}}z=new WeakMap;class Tt extends W{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0});c(this,Y,null)}render(){this.container.classList.add("circleAnnotation");const T=this.data,{width:nt,height:dt}=C(T.rect),ft=this.svgFactory.create(nt,dt,!0),Et=T.borderStyle.width,_t=D(this,Y,this.svgFactory.createElement("svg:ellipse"));return _t.setAttribute("cx",nt/2),_t.setAttribute("cy",dt/2),_t.setAttribute("rx",nt/2-Et/2),_t.setAttribute("ry",dt/2-Et/2),_t.setAttribute("stroke-width",Et||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),ft.append(_t),this.container.append(ft),!T.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Y)}addHighlightArea(){this.container.classList.add("highlightArea")}}Y=new WeakMap;class It extends W{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0});c(this,ht,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const T=this.data,{width:nt,height:dt}=C(T.rect),ft=this.svgFactory.create(nt,dt,!0);let Et=[];for(const Wt of T.vertices){const Ut=Wt.x-T.rect[0],Ot=T.rect[3]-Wt.y;Et.push(Ut+","+Ot)}Et=Et.join(" ");const _t=D(this,ht,this.svgFactory.createElement(this.svgElementName));return _t.setAttribute("points",Et),_t.setAttribute("stroke-width",T.borderStyle.width||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),ft.append(_t),this.container.append(ft),!T.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,ht)}addHighlightArea(){this.container.classList.add("highlightArea")}}ht=new WeakMap;class St extends It{constructor(H){super(H),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class rt extends W{constructor(H){super(H,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class bt extends W{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0});c(this,gt,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=n.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const T=this.data,{width:nt,height:dt}=C(T.rect),ft=this.svgFactory.create(nt,dt,!0);for(const Et of T.inkLists){let _t=[];for(const Ut of Et){const Ot=Ut.x-T.rect[0],Qt=T.rect[3]-Ut.y;_t.push(`${Ot},${Qt}`)}_t=_t.join(" ");const Wt=this.svgFactory.createElement(this.svgElementName);t(this,gt).push(Wt),Wt.setAttribute("points",_t),Wt.setAttribute("stroke-width",T.borderStyle.width||1),Wt.setAttribute("stroke","transparent"),Wt.setAttribute("fill","transparent"),!T.popupRef&&this.hasPopupData&&this._createPopup(),ft.append(Wt)}return this.container.append(ft),this.container}getElementsToTriggerPopup(){return t(this,gt)}addHighlightArea(){this.container.classList.add("highlightArea")}}gt=new WeakMap;class Lt extends W{constructor(H){super(H,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Pt extends W{constructor(H){super(H,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class qt extends W{constructor(H){super(H,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Kt extends W{constructor(H){super(H,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class re extends W{constructor(H){super(H,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class _e extends W{constructor(T){var ft;super(T,{isRenderable:!0});c(this,Rt);c(this,xt,null);const{filename:nt,content:dt}=this.data.file;this.filename=(0,N.getFilenameFromUrl)(nt,!0),this.content=dt,(ft=this.linkService.eventBus)==null||ft.dispatch("fileattachmentannotation",{source:this,filename:nt,content:dt})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:T,data:nt}=this;let dt;nt.hasAppearance||nt.fillAlpha===0?dt=document.createElement("div"):(dt=document.createElement("img"),dt.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(nt.name)?"paperclip":"pushpin"}.svg`,nt.fillAlpha&&nt.fillAlpha<1&&(dt.style=`filter: opacity(${Math.round(nt.fillAlpha*100)}%);`)),dt.addEventListener("dblclick",I(this,Rt,Cn).bind(this)),D(this,xt,dt);const{isMac:ft}=n.FeatureTest.platform;return T.addEventListener("keydown",Et=>{Et.key==="Enter"&&(ft?Et.metaKey:Et.ctrlKey)&&I(this,Rt,Cn).call(this)}),!nt.popupRef&&this.hasPopupData?this._createPopup():dt.classList.add("popupTriggerArea"),T.append(dt),T}getElementsToTriggerPopup(){return t(this,xt)}addHighlightArea(){this.container.classList.add("highlightArea")}}xt=new WeakMap,Rt=new WeakSet,Cn=function(){var T;(T=this.downloadManager)==null||T.openOrDownloadData(this.content,this.filename)};class ce{constructor({div:H,accessibilityManager:T,annotationCanvasMap:nt,page:dt,viewport:ft}){c(this,ve);c(this,fe);c(this,ie,null);c(this,ee,null);c(this,ye,new Map);this.div=H,D(this,ie,T),D(this,ee,nt),this.page=dt,this.viewport=ft,this.zIndex=0}async render(H){const{annotations:T}=H,nt=this.div;(0,N.setLayerDimensions)(nt,this.viewport);const dt=new Map,ft={data:null,layer:nt,linkService:H.linkService,downloadManager:H.downloadManager,imageResourcesPath:H.imageResourcesPath||"",renderForms:H.renderForms!==!1,svgFactory:new N.DOMSVGFactory,annotationStorage:H.annotationStorage||new A.AnnotationStorage,enableScripting:H.enableScripting===!0,hasJSActions:H.hasJSActions,fieldObjects:H.fieldObjects,parent:this,elements:null};for(const Et of T){if(Et.noHTML)continue;const _t=Et.annotationType===n.AnnotationType.POPUP;if(_t){const Ot=dt.get(Et.id);if(!Ot)continue;ft.elements=Ot}else{const{width:Ot,height:Qt}=C(Et.rect);if(Ot<=0||Qt<=0)continue}ft.data=Et;const Wt=q.create(ft);if(!Wt.isRenderable)continue;if(!_t&&Et.popupRef){const Ot=dt.get(Et.popupRef);Ot?Ot.push(Wt):dt.set(Et.popupRef,[Wt])}Wt.annotationEditorType>0&&t(this,ye).set(Wt.data.id,Wt);const Ut=Wt.render();Et.hidden&&(Ut.style.visibility="hidden"),I(this,ve,Wr).call(this,Ut,Et.id)}I(this,fe,Tn).call(this)}update({viewport:H}){const T=this.div;this.viewport=H,(0,N.setLayerDimensions)(T,{rotation:H.rotation}),I(this,fe,Tn).call(this),T.hidden=!1}getEditableAnnotations(){return Array.from(t(this,ye).values())}getEditableAnnotation(H){return t(this,ye).get(H)}}ie=new WeakMap,ee=new WeakMap,ye=new WeakMap,ve=new WeakSet,Wr=function(H,T){var dt;const nt=H.firstChild||H;nt.id=`${n.AnnotationPrefix}${T}`,this.div.append(H),(dt=t(this,ie))==null||dt.moveElementInDOM(this.div,H,nt,!1)},fe=new WeakSet,Tn=function(){if(!t(this,ee))return;const H=this.div;for(const[T,nt]of t(this,ee)){const dt=H.querySelector(`[data-annotation-id="${T}"]`);if(!dt)continue;const{firstChild:ft}=dt;ft?ft.nodeName==="CANVAS"?ft.replaceWith(nt):ft.before(nt):dt.append(nt)}t(this,ee).clear()}},792:(v,U,x)=>{var F,P,tt,Xr,C;x.d(U,{AnnotationStorage:()=>ot,PrintAnnotationStorage:()=>B,SerializableEmpty:()=>S});var n=x(292),N=x(310),A=x(651);const S=Object.freeze({map:null,hash:"",transfer:void 0});class ot{constructor(){c(this,tt);c(this,F,!1);c(this,P,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(W,it){const ut=t(this,P).get(W);return ut===void 0?it:Object.assign(it,ut)}getRawValue(W){return t(this,P).get(W)}remove(W){if(t(this,P).delete(W),t(this,P).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const it of t(this,P).values())if(it instanceof N.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(W,it){const ut=t(this,P).get(W);let st=!1;if(ut!==void 0)for(const[R,K]of Object.entries(it))ut[R]!==K&&(st=!0,ut[R]=K);else st=!0,t(this,P).set(W,it);st&&I(this,tt,Xr).call(this),it instanceof N.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(it.constructor._type)}has(W){return t(this,P).has(W)}getAll(){return t(this,P).size>0?(0,n.objectFromMap)(t(this,P)):null}setAll(W){for(const[it,ut]of Object.entries(W))this.setValue(it,ut)}get size(){return t(this,P).size}resetModified(){t(this,F)&&(D(this,F,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new B(this)}get serializable(){if(t(this,P).size===0)return S;const W=new Map,it=new A.MurmurHash3_64,ut=[],st=Object.create(null);let R=!1;for(const[K,$]of t(this,P)){const O=$ instanceof N.AnnotationEditor?$.serialize(!1,st):$;O&&(W.set(K,O),it.update(`${K}:${JSON.stringify(O)}`),R||(R=!!O.bitmap))}if(R)for(const K of W.values())K.bitmap&&ut.push(K.bitmap);return W.size>0?{map:W,hash:it.hexdigest(),transfer:ut}:S}get editorStats(){let W=null;const it=new Map;for(const ut of t(this,P).values()){if(!(ut instanceof N.AnnotationEditor))continue;const st=ut.telemetryFinalData;if(!st)continue;const{type:R}=st;it.has(R)||it.set(R,Object.getPrototypeOf(ut).constructor),W||(W=Object.create(null));const K=W[R]||(W[R]=new Map);for(const[$,O]of Object.entries(st)){if($==="type")continue;let Q=K.get($);Q||(Q=new Map,K.set($,Q));const at=Q.get(O)??0;Q.set(O,at+1)}}for(const[ut,st]of it)W[ut]=st.computeTelemetryFinalData(W[ut]);return W}}F=new WeakMap,P=new WeakMap,tt=new WeakSet,Xr=function(){t(this,F)||(D(this,F,!0),typeof this.onSetModified=="function"&&this.onSetModified())};class B extends ot{constructor(it){super();c(this,C,void 0);const{map:ut,hash:st,transfer:R}=it.serializable,K=structuredClone(ut,R?{transfer:R}:null);D(this,C,{map:K,hash:st,transfer:R})}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,C)}}C=new WeakMap},831:(v,U,x)=>{x.a(v,async(n,N)=>{var O,Q,at,yt,Ki,Ct,Vs,wt,Tt,It,St,rt,Ks,Lt,Pt,qt,Kt,re,vs,ce,he,Mn,zt,oe;try{let Ce=function(E){if(typeof E=="string"||E instanceof URL?E={url:E}:(E instanceof ArrayBuffer||ArrayBuffer.isView(E))&&(E={data:E}),typeof E!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!E.url&&!E.data&&!E.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const m=new b,{docId:z}=m,Y=E.url?se(E.url):null,ht=E.data?Ee(E.data):null,gt=E.httpHeaders||null,xt=E.withCredentials===!0,Rt=E.password??null,Xt=E.range instanceof _?E.range:null,ie=Number.isInteger(E.rangeChunkSize)&&E.rangeChunkSize>0?E.rangeChunkSize:ne;let ee=E.worker instanceof a?E.worker:null;const ye=E.verbosity,ve=typeof E.docBaseUrl=="string"&&!(0,ot.isDataScheme)(E.docBaseUrl)?E.docBaseUrl:null,Le=typeof E.cMapUrl=="string"?E.cMapUrl:null,fe=E.cMapPacked!==!1,Ie=E.CMapReaderFactory||d,ae=typeof E.standardFontDataUrl=="string"?E.standardFontDataUrl:null,H=E.StandardFontDataFactory||l,T=E.stopAtErrors!==!0,nt=Number.isInteger(E.maxImageSize)&&E.maxImageSize>-1?E.maxImageSize:-1,dt=E.isEvalSupported!==!1,ft=typeof E.isOffscreenCanvasSupported=="boolean"?E.isOffscreenCanvasSupported:!A.isNodeJS,Et=Number.isInteger(E.canvasMaxAreaInBytes)?E.canvasMaxAreaInBytes:-1,_t=typeof E.disableFontFace=="boolean"?E.disableFontFace:A.isNodeJS,Wt=E.fontExtraProperties===!0,Ut=E.enableXfa===!0,Ot=E.ownerDocument||globalThis.document,Qt=E.disableRange===!0,Gt=E.disableStream===!0,Mt=E.disableAutoFetch===!0,Bt=E.pdfBug===!0,Zt=Xt?Xt.length:E.length??NaN,ue=typeof E.useSystemFonts=="boolean"?E.useSystemFonts:!A.isNodeJS&&!_t,de=typeof E.useWorkerFetch=="boolean"?E.useWorkerFetch:Ie===ot.DOMCMapReaderFactory&&H===ot.DOMStandardFontDataFactory&&Le&&ae&&(0,ot.isValidFetchUrl)(Le,document.baseURI)&&(0,ot.isValidFetchUrl)(ae,document.baseURI),Se=E.canvasFactory||new r({ownerDocument:Ot}),Me=E.filterFactory||new f({docId:z,ownerDocument:Ot}),Je=null;(0,A.setVerbosityLevel)(ye);const Xe={canvasFactory:Se,filterFactory:Me};if(de||(Xe.cMapReaderFactory=new Ie({baseUrl:Le,isCompressed:fe}),Xe.standardFontDataFactory=new H({baseUrl:ae})),!ee){const Ge={verbosity:ye,port:j.GlobalWorkerOptions.workerPort};ee=Ge.port?a.fromPort(Ge):new a(Ge),m._worker=ee}const Ve={docId:z,apiVersion:"4.1.392",data:ht,password:Rt,disableAutoFetch:Mt,rangeChunkSize:ie,length:Zt,docBaseUrl:ve,enableXfa:Ut,evaluatorOptions:{maxImageSize:nt,disableFontFace:_t,ignoreErrors:T,isEvalSupported:dt,isOffscreenCanvasSupported:ft,canvasMaxAreaInBytes:Et,fontExtraProperties:Wt,useSystemFonts:ue,cMapUrl:de?Le:null,standardFontDataUrl:de?ae:null}},ii={ignoreErrors:T,isEvalSupported:dt,disableFontFace:_t,fontExtraProperties:Wt,enableXfa:Ut,ownerDocument:Ot,disableAutoFetch:Mt,pdfBug:Bt,styleElement:Je};return ee.promise.then(function(){if(m.destroyed)throw new Error("Loading aborted");const Ge=w(ee,Ve),G=new Promise(function(mt){let Ht;Xt?Ht=new it.PDFDataTransportStream(Xt,{disableRange:Qt,disableStream:Gt}):ht||(Ht=(jt=>A.isNodeJS?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&(0,ot.isValidFetchUrl)(jt.url)?new ut.PDFFetchStream(jt):new R.PDFNodeStream(jt):(0,ot.isValidFetchUrl)(jt.url)?new ut.PDFFetchStream(jt):new st.PDFNetworkStream(jt))({url:Y,length:Zt,httpHeaders:gt,withCredentials:xt,rangeChunkSize:ie,disableRange:Qt,disableStream:Gt})),mt(Ht)});return Promise.all([Ge,G]).then(function([mt,Ht]){if(m.destroyed)throw new Error("Loading aborted");const jt=new C.MessageHandler(z,mt,ee.port),Jt=new g(jt,m,Ht,ii,Xe);m._transport=Jt,jt.send("Ready",null)})}).catch(m._capability.reject),m},se=function(E){if(E instanceof URL)return E.href;try{return new URL(E,window.location).href}catch{if(A.isNodeJS&&typeof E=="string")return E}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")},Ee=function(E){if(A.isNodeJS&&typeof Buffer<"u"&&E instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(E instanceof Uint8Array&&E.byteLength===E.buffer.byteLength)return E;if(typeof E=="string")return(0,A.stringToBytes)(E);if(E instanceof ArrayBuffer||ArrayBuffer.isView(E)||typeof E=="object"&&!isNaN(E==null?void 0:E.length))return new Uint8Array(E);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")};x.d(U,{PDFDataRangeTransport:()=>_,PDFWorker:()=>a,build:()=>et,getDocument:()=>Ce,version:()=>V});var A=x(292),S=x(792),ot=x(419),B=x(10),F=x(573),P=x(923),tt=x(814),j=x(164),C=x(178),q=x(62),W=x(626),it=x(585),ut=x(94),st=x(457),R=x(786),K=x(50),$=n([F,R]);[F,R]=$.then?(await $)():$;const ne=65536,lt=100,i=5e3,r=A.isNodeJS?F.NodeCanvasFactory:ot.DOMCanvasFactory,d=A.isNodeJS?F.NodeCMapReaderFactory:ot.DOMCMapReaderFactory,f=A.isNodeJS?F.NodeFilterFactory:ot.DOMFilterFactory,l=A.isNodeJS?F.NodeStandardFontDataFactory:ot.DOMStandardFontDataFactory;async function w(E,m){if(E.destroyed)throw new Error("Worker was destroyed");const z=await E.messageHandler.sendWithPromise("GetDocRequest",m,m.data?[m.data.buffer]:null);if(E.destroyed)throw new Error("Worker was destroyed");return z}const p=class p{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${fi(p,O)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var m,z,Y;this.destroyed=!0;try{(m=this._worker)!=null&&m.port&&(this._worker._pendingDestroy=!0),await((z=this._transport)==null?void 0:z.destroy())}catch(ht){throw(Y=this._worker)!=null&&Y.port&&delete this._worker._pendingDestroy,ht}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};O=new WeakMap,c(p,O,0);let b=p;class _{constructor(m,z,Y=!1,ht=null){this.length=m,this.initialData=z,this.progressiveDone=Y,this.contentDispositionFilename=ht,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(m){this._rangeListeners.push(m)}addProgressListener(m){this._progressListeners.push(m)}addProgressiveReadListener(m){this._progressiveReadListeners.push(m)}addProgressiveDoneListener(m){this._progressiveDoneListeners.push(m)}onDataRange(m,z){for(const Y of this._rangeListeners)Y(m,z)}onDataProgress(m,z){this._readyCapability.promise.then(()=>{for(const Y of this._progressListeners)Y(m,z)})}onDataProgressiveRead(m){this._readyCapability.promise.then(()=>{for(const z of this._progressiveReadListeners)z(m)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const m of this._progressiveDoneListeners)m()})}transportReady(){this._readyCapability.resolve()}requestDataRange(m,z){(0,A.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class u{constructor(m,z){this._pdfInfo=m,this._transport=z}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,A.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(m){return this._transport.getPage(m)}getPageIndex(m){return this._transport.getPageIndex(m)}getDestinations(){return this._transport.getDestinations()}getDestination(m){return this._transport.getDestination(m)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:m="display"}={}){const{renderingIntent:z}=this._transport.getRenderingIntent(m);return this._transport.getOptionalContentConfig(z)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(m=!1){return this._transport.startCleanup(m||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class o{constructor(m,z,Y,ht=!1){c(this,yt);c(this,Ct);c(this,Q,null);c(this,at,!1);this._pageIndex=m,this._pageInfo=z,this._transport=Y,this._stats=ht?new ot.StatTimer:null,this._pdfBug=ht,this.commonObjs=Y.commonObjs,this.objs=new y,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:m,rotation:z=this.rotate,offsetX:Y=0,offsetY:ht=0,dontFlip:gt=!1}={}){return new ot.PageViewport({viewBox:this.view,scale:m,rotation:z,offsetX:Y,offsetY:ht,dontFlip:gt})}getAnnotations({intent:m="display"}={}){const{renderingIntent:z}=this._transport.getRenderingIntent(m);return this._transport.getAnnotations(this._pageIndex,z)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,A.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var m;return((m=this._transport._htmlForXfa)==null?void 0:m.children[this._pageIndex])||null}render({canvasContext:m,viewport:z,intent:Y="display",annotationMode:ht=A.AnnotationMode.ENABLE,transform:gt=null,background:xt=null,optionalContentConfigPromise:Rt=null,annotationCanvasMap:Xt=null,pageColors:ie=null,printAnnotationStorage:ee=null}){var nt,dt;(nt=this._stats)==null||nt.time("Overall");const ye=this._transport.getRenderingIntent(Y,ht,ee),{renderingIntent:ve,cacheKey:Le}=ye;D(this,at,!1),I(this,Ct,Vs).call(this),Rt||(Rt=this._transport.getOptionalContentConfig(ve));let fe=this._intentStates.get(Le);fe||(fe=Object.create(null),this._intentStates.set(Le,fe)),fe.streamReaderCancelTimeout&&(clearTimeout(fe.streamReaderCancelTimeout),fe.streamReaderCancelTimeout=null);const Ie=!!(ve&A.RenderingIntentFlag.PRINT);fe.displayReadyCapability||(fe.displayReadyCapability=Promise.withResolvers(),fe.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(dt=this._stats)==null||dt.time("Page Request"),this._pumpOperatorList(ye));const ae=ft=>{var Et,_t;fe.renderTasks.delete(H),(this._maybeCleanupAfterRender||Ie)&&D(this,at,!0),I(this,yt,Ki).call(this,!Ie),ft?(H.capability.reject(ft),this._abortOperatorList({intentState:fe,reason:ft instanceof Error?ft:new Error(ft)})):H.capability.resolve(),(Et=this._stats)==null||Et.timeEnd("Rendering"),(_t=this._stats)==null||_t.timeEnd("Overall")},H=new Z({callback:ae,params:{canvasContext:m,viewport:z,transform:gt,background:xt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Xt,operatorList:fe.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Ie,pdfBug:this._pdfBug,pageColors:ie});(fe.renderTasks||(fe.renderTasks=new Set)).add(H);const T=H.task;return Promise.all([fe.displayReadyCapability.promise,Rt]).then(([ft,Et])=>{var _t;if(this.destroyed){ae();return}if((_t=this._stats)==null||_t.time("Rendering"),!(Et.renderingIntent&ve))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");H.initializeGraphics({transparency:ft,optionalContentConfig:Et}),H.operatorListChanged()}).catch(ae),T}getOperatorList({intent:m="display",annotationMode:z=A.AnnotationMode.ENABLE,printAnnotationStorage:Y=null}={}){var Xt;function ht(){xt.operatorList.lastChunk&&(xt.opListReadCapability.resolve(xt.operatorList),xt.renderTasks.delete(Rt))}const gt=this._transport.getRenderingIntent(m,z,Y,!0);let xt=this._intentStates.get(gt.cacheKey);xt||(xt=Object.create(null),this._intentStates.set(gt.cacheKey,xt));let Rt;return xt.opListReadCapability||(Rt=Object.create(null),Rt.operatorListChanged=ht,xt.opListReadCapability=Promise.withResolvers(),(xt.renderTasks||(xt.renderTasks=new Set)).add(Rt),xt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Xt=this._stats)==null||Xt.time("Page Request"),this._pumpOperatorList(gt)),xt.opListReadCapability.promise}streamTextContent({includeMarkedContent:m=!1,disableNormalization:z=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:m===!0,disableNormalization:z===!0},{highWaterMark:100,size(Y){return Y.items.length}})}getTextContent(m={}){if(this._transport._htmlForXfa)return this.getXfa().then(Y=>K.XfaText.textContent(Y));const z=this.streamTextContent(m);return new Promise(function(Y,ht){function gt(){xt.read().then(function({value:Xt,done:ie}){if(ie){Y(Rt);return}Object.assign(Rt.styles,Xt.styles),Rt.items.push(...Xt.items),gt()},ht)}const xt=z.getReader(),Rt={items:[],styles:Object.create(null)};gt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const m=[];for(const z of this._intentStates.values())if(this._abortOperatorList({intentState:z,reason:new Error("Page was destroyed."),force:!0}),!z.opListReadCapability)for(const Y of z.renderTasks)m.push(Y.completed),Y.cancel();return this.objs.clear(),D(this,at,!1),I(this,Ct,Vs).call(this),Promise.all(m)}cleanup(m=!1){D(this,at,!0);const z=I(this,yt,Ki).call(this,!1);return m&&z&&this._stats&&(this._stats=new ot.StatTimer),z}_startRenderPage(m,z){var ht,gt;const Y=this._intentStates.get(z);Y&&((ht=this._stats)==null||ht.timeEnd("Page Request"),(gt=Y.displayReadyCapability)==null||gt.resolve(m))}_renderPageChunk(m,z){for(let Y=0,ht=m.length;Y<ht;Y++)z.operatorList.fnArray.push(m.fnArray[Y]),z.operatorList.argsArray.push(m.argsArray[Y]);z.operatorList.lastChunk=m.lastChunk,z.operatorList.separateAnnots=m.separateAnnots;for(const Y of z.renderTasks)Y.operatorListChanged();m.lastChunk&&I(this,yt,Ki).call(this,!0)}_pumpOperatorList({renderingIntent:m,cacheKey:z,annotationStorageSerializable:Y}){const{map:ht,transfer:gt}=Y,xt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:m,cacheKey:z,annotationStorage:ht},gt).getReader(),Rt=this._intentStates.get(z);Rt.streamReader=xt;const Xt=()=>{xt.read().then(({value:ie,done:ee})=>{if(ee){Rt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(ie,Rt),Xt())},ie=>{if(Rt.streamReader=null,!this._transport.destroyed){if(Rt.operatorList){Rt.operatorList.lastChunk=!0;for(const ee of Rt.renderTasks)ee.operatorListChanged();I(this,yt,Ki).call(this,!0)}if(Rt.displayReadyCapability)Rt.displayReadyCapability.reject(ie);else if(Rt.opListReadCapability)Rt.opListReadCapability.reject(ie);else throw ie}})};Xt()}_abortOperatorList({intentState:m,reason:z,force:Y=!1}){if(m.streamReader){if(m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null),!Y){if(m.renderTasks.size>0)return;if(z instanceof ot.RenderingCancelledException){let ht=lt;z.extraDelay>0&&z.extraDelay<1e3&&(ht+=z.extraDelay),m.streamReaderCancelTimeout=setTimeout(()=>{m.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:m,reason:z,force:!0})},ht);return}}if(m.streamReader.cancel(new A.AbortException(z.message)).catch(()=>{}),m.streamReader=null,!this._transport.destroyed){for(const[ht,gt]of this._intentStates)if(gt===m){this._intentStates.delete(ht);break}this.cleanup()}}}get stats(){return this._stats}}Q=new WeakMap,at=new WeakMap,yt=new WeakSet,Ki=function(m=!1){if(I(this,Ct,Vs).call(this),!t(this,at)||this.destroyed)return!1;if(m)return D(this,Q,setTimeout(()=>{D(this,Q,null),I(this,yt,Ki).call(this,!1)},i)),!1;for(const{renderTasks:z,operatorList:Y}of this._intentStates.values())if(z.size>0||!Y.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),D(this,at,!1),!0},Ct=new WeakSet,Vs=function(){t(this,Q)&&(clearTimeout(t(this,Q)),D(this,Q,null))};class h{constructor(){c(this,wt,new Set);c(this,Tt,Promise.resolve())}postMessage(m,z){const Y={data:structuredClone(m,z?{transfer:z}:null)};t(this,Tt).then(()=>{for(const ht of t(this,wt))ht.call(this,Y)})}addEventListener(m,z){t(this,wt).add(z)}removeEventListener(m,z){t(this,wt).delete(z)}terminate(){t(this,wt).clear()}}wt=new WeakMap,Tt=new WeakMap;const s={isWorkerDisabled:!1,fakeWorkerId:0};A.isNodeJS&&(s.isWorkerDisabled=!0,(It=j.GlobalWorkerOptions).workerSrc||(It.workerSrc="./pdf.worker.mjs")),s.isSameOrigin=function(E,m){let z;try{if(z=new URL(E),!z.origin||z.origin==="null")return!1}catch{return!1}const Y=new URL(m,z);return z.origin===Y.origin},s.createCDNWrapper=function(E){const m=`await import("${E}");`;return URL.createObjectURL(new Blob([m],{type:"text/javascript"}))};const M=class M{constructor({name:m=null,port:z=null,verbosity:Y=(0,A.getVerbosityLevel)()}={}){var ht;if(this.name=m,this.destroyed=!1,this.verbosity=Y,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,z){if((ht=t(M,St))!=null&&ht.has(z))throw new Error("Cannot use more than one PDFWorker per port.");(t(M,St)||D(M,St,new WeakMap)).set(z,this),this._initializeFromPort(z);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(m){this._port=m,this._messageHandler=new C.MessageHandler("main","worker",m),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!s.isWorkerDisabled&&!t(M,rt,Ks)){let{workerSrc:m}=M;try{s.isSameOrigin(window.location.href,m)||(m=s.createCDNWrapper(new URL(m,window.location).href));const z=new Worker(m,{type:"module"}),Y=new C.MessageHandler("main","worker",z),ht=()=>{z.removeEventListener("error",gt),Y.destroy(),z.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},gt=()=>{this._webWorker||ht()};z.addEventListener("error",gt),Y.on("test",Rt=>{if(z.removeEventListener("error",gt),this.destroyed){ht();return}Rt?(this._messageHandler=Y,this._port=z,this._webWorker=z,this._readyCapability.resolve(),Y.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),Y.destroy(),z.terminate())}),Y.on("ready",Rt=>{if(z.removeEventListener("error",gt),this.destroyed){ht();return}try{xt()}catch{this._setupFakeWorker()}});const xt=()=>{const Rt=new Uint8Array;Y.send("test",Rt,[Rt.buffer])};xt();return}catch{(0,A.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){s.isWorkerDisabled||((0,A.warn)("Setting up fake worker."),s.isWorkerDisabled=!0),M._setupFakeWorkerGlobal.then(m=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const z=new h;this._port=z;const Y=`fake${s.fakeWorkerId++}`,ht=new C.MessageHandler(Y+"_worker",Y,z);m.setup(ht,z);const gt=new C.MessageHandler(Y,Y+"_worker",z);this._messageHandler=gt,this._readyCapability.resolve(),gt.send("configure",{verbosity:this.verbosity})}).catch(m=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${m.message}".`))})}destroy(){var m;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(m=t(M,St))==null||m.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(m){var Y;if(!(m!=null&&m.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const z=(Y=t(this,St))==null?void 0:Y.get(m.port);if(z){if(z._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return z}return new M(m)}static get workerSrc(){if(j.GlobalWorkerOptions.workerSrc)return j.GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){const m=async()=>t(this,rt,Ks)?t(this,rt,Ks):(await mi(()=>import(this.workerSrc).then(async z=>(await z.__tla,z)),[])).WorkerMessageHandler;return(0,A.shadow)(this,"_setupFakeWorkerGlobal",m())}};St=new WeakMap,rt=new WeakSet,Ks=function(){var m;try{return((m=globalThis.pdfjsWorker)==null?void 0:m.WorkerMessageHandler)||null}catch{return null}},c(M,rt),c(M,St,void 0);let a=M;class g{constructor(m,z,Y,ht,gt){c(this,re);c(this,Lt,new Map);c(this,Pt,new Map);c(this,qt,new Map);c(this,Kt,null);this.messageHandler=m,this.loadingTask=z,this.commonObjs=new y,this.fontLoader=new B.FontLoader({ownerDocument:ht.ownerDocument,styleElement:ht.styleElement}),this._params=ht,this.canvasFactory=gt.canvasFactory,this.filterFactory=gt.filterFactory,this.cMapReaderFactory=gt.cMapReaderFactory,this.standardFontDataFactory=gt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Y,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return(0,A.shadow)(this,"annotationStorage",new S.AnnotationStorage)}getRenderingIntent(m,z=A.AnnotationMode.ENABLE,Y=null,ht=!1){let gt=A.RenderingIntentFlag.DISPLAY,xt=S.SerializableEmpty;switch(m){case"any":gt=A.RenderingIntentFlag.ANY;break;case"display":break;case"print":gt=A.RenderingIntentFlag.PRINT;break;default:(0,A.warn)(`getRenderingIntent - invalid intent: ${m}`)}switch(z){case A.AnnotationMode.DISABLE:gt+=A.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case A.AnnotationMode.ENABLE:break;case A.AnnotationMode.ENABLE_FORMS:gt+=A.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case A.AnnotationMode.ENABLE_STORAGE:gt+=A.RenderingIntentFlag.ANNOTATIONS_STORAGE,xt=(gt&A.RenderingIntentFlag.PRINT&&Y instanceof S.PrintAnnotationStorage?Y:this.annotationStorage).serializable;break;default:(0,A.warn)(`getRenderingIntent - invalid annotationMode: ${z}`)}return ht&&(gt+=A.RenderingIntentFlag.OPLIST),{renderingIntent:gt,cacheKey:`${gt}_${xt.hash}`,annotationStorageSerializable:xt}}destroy(){var Y;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(Y=t(this,Kt))==null||Y.reject(new Error("Worker was destroyed during onPassword callback"));const m=[];for(const ht of t(this,Pt).values())m.push(ht._destroy());t(this,Pt).clear(),t(this,qt).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const z=this.messageHandler.sendWithPromise("Terminate",null);return m.push(z),Promise.all(m).then(()=>{var ht;this.commonObjs.clear(),this.fontLoader.clear(),t(this,Lt).clear(),this.filterFactory.destroy(),(0,tt.cleanupTextLayer)(),(ht=this._networkStream)==null||ht.cancelAllRequests(new A.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:m,loadingTask:z}=this;m.on("GetReader",(Y,ht)=>{(0,A.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=gt=>{this._lastProgress={loaded:gt.loaded,total:gt.total}},ht.onPull=()=>{this._fullReader.read().then(function({value:gt,done:xt}){if(xt){ht.close();return}(0,A.assert)(gt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),ht.enqueue(new Uint8Array(gt),1,[gt])}).catch(gt=>{ht.error(gt)})},ht.onCancel=gt=>{this._fullReader.cancel(gt),ht.ready.catch(xt=>{if(!this.destroyed)throw xt})}}),m.on("ReaderHeadersReady",Y=>{const ht=Promise.withResolvers(),gt=this._fullReader;return gt.headersReady.then(()=>{var xt;(!gt.isStreamingSupported||!gt.isRangeSupported)&&(this._lastProgress&&((xt=z.onProgress)==null||xt.call(z,this._lastProgress)),gt.onProgress=Rt=>{var Xt;(Xt=z.onProgress)==null||Xt.call(z,{loaded:Rt.loaded,total:Rt.total})}),ht.resolve({isStreamingSupported:gt.isStreamingSupported,isRangeSupported:gt.isRangeSupported,contentLength:gt.contentLength})},ht.reject),ht.promise}),m.on("GetRangeReader",(Y,ht)=>{(0,A.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const gt=this._networkStream.getRangeReader(Y.begin,Y.end);if(!gt){ht.close();return}ht.onPull=()=>{gt.read().then(function({value:xt,done:Rt}){if(Rt){ht.close();return}(0,A.assert)(xt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),ht.enqueue(new Uint8Array(xt),1,[xt])}).catch(xt=>{ht.error(xt)})},ht.onCancel=xt=>{gt.cancel(xt),ht.ready.catch(Rt=>{if(!this.destroyed)throw Rt})}}),m.on("GetDoc",({pdfInfo:Y})=>{this._numPages=Y.numPages,this._htmlForXfa=Y.htmlForXfa,delete Y.htmlForXfa,z._capability.resolve(new u(Y,this))}),m.on("DocException",function(Y){let ht;switch(Y.name){case"PasswordException":ht=new A.PasswordException(Y.message,Y.code);break;case"InvalidPDFException":ht=new A.InvalidPDFException(Y.message);break;case"MissingPDFException":ht=new A.MissingPDFException(Y.message);break;case"UnexpectedResponseException":ht=new A.UnexpectedResponseException(Y.message,Y.status);break;case"UnknownErrorException":ht=new A.UnknownErrorException(Y.message,Y.details);break;default:(0,A.unreachable)("DocException - expected a valid Error.")}z._capability.reject(ht)}),m.on("PasswordRequest",Y=>{if(D(this,Kt,Promise.withResolvers()),z.onPassword){const ht=gt=>{gt instanceof Error?t(this,Kt).reject(gt):t(this,Kt).resolve({password:gt})};try{z.onPassword(ht,Y.code)}catch(gt){t(this,Kt).reject(gt)}}else t(this,Kt).reject(new A.PasswordException(Y.message,Y.code));return t(this,Kt).promise}),m.on("DataLoaded",Y=>{var ht;(ht=z.onProgress)==null||ht.call(z,{loaded:Y.length,total:Y.length}),this.downloadInfoCapability.resolve(Y)}),m.on("StartRenderPage",Y=>{this.destroyed||t(this,Pt).get(Y.pageIndex)._startRenderPage(Y.transparency,Y.cacheKey)}),m.on("commonobj",([Y,ht,gt])=>{var xt;if(this.destroyed||this.commonObjs.has(Y))return null;switch(ht){case"Font":const Rt=this._params;if("error"in gt){const ye=gt.error;(0,A.warn)(`Error during font loading: ${ye}`),this.commonObjs.resolve(Y,ye);break}const Xt=Rt.pdfBug&&((xt=globalThis.FontInspector)!=null&&xt.enabled)?(ye,ve)=>globalThis.FontInspector.fontAdded(ye,ve):null,ie=new B.FontFaceObject(gt,{isEvalSupported:Rt.isEvalSupported,disableFontFace:Rt.disableFontFace,ignoreErrors:Rt.ignoreErrors,inspectFont:Xt});this.fontLoader.bind(ie).catch(()=>m.sendWithPromise("FontFallback",{id:Y})).finally(()=>{!Rt.fontExtraProperties&&ie.data&&(ie.data=null),this.commonObjs.resolve(Y,ie)});break;case"CopyLocalImage":const{imageRef:ee}=gt;(0,A.assert)(ee,"The imageRef must be defined.");for(const ye of t(this,Pt).values())for(const[,ve]of ye.objs)if(ve.ref===ee)return ve.dataLen?(this.commonObjs.resolve(Y,structuredClone(ve)),ve.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Y,gt);break;default:throw new Error(`Got unknown common object type ${ht}`)}return null}),m.on("obj",([Y,ht,gt,xt])=>{var Xt;if(this.destroyed)return;const Rt=t(this,Pt).get(ht);if(!Rt.objs.has(Y)){if(Rt._intentStates.size===0){(Xt=xt==null?void 0:xt.bitmap)==null||Xt.close();return}switch(gt){case"Image":Rt.objs.resolve(Y,xt),(xt==null?void 0:xt.dataLen)>A.MAX_IMAGE_SIZE_TO_CACHE&&(Rt._maybeCleanupAfterRender=!0);break;case"Pattern":Rt.objs.resolve(Y,xt);break;default:throw new Error(`Got unknown object type ${gt}`)}}}),m.on("DocProgress",Y=>{var ht;this.destroyed||((ht=z.onProgress)==null||ht.call(z,{loaded:Y.loaded,total:Y.total}))}),m.on("FetchBuiltInCMap",Y=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Y):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),m.on("FetchStandardFontData",Y=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Y):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Y;this.annotationStorage.size<=0&&(0,A.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:m,transfer:z}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:m,filename:((Y=this._fullReader)==null?void 0:Y.filename)??null},z).finally(()=>{this.annotationStorage.resetModified()})}getPage(m){if(!Number.isInteger(m)||m<=0||m>this._numPages)return Promise.reject(new Error("Invalid page request."));const z=m-1,Y=t(this,qt).get(z);if(Y)return Y;const ht=this.messageHandler.sendWithPromise("GetPage",{pageIndex:z}).then(gt=>{if(this.destroyed)throw new Error("Transport destroyed");const xt=new o(z,gt,this,this._params.pdfBug);return t(this,Pt).set(z,xt),xt});return t(this,qt).set(z,ht),ht}getPageIndex(m){return typeof m!="object"||m===null||!Number.isInteger(m.num)||m.num<0||!Number.isInteger(m.gen)||m.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:m.num,gen:m.gen})}getAnnotations(m,z){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:m,intent:z})}getFieldObjects(){return I(this,re,vs).call(this,"GetFieldObjects")}hasJSActions(){return I(this,re,vs).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(m){return typeof m!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:m})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return I(this,re,vs).call(this,"GetDocJSActions")}getPageJSActions(m){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:m})}getStructTree(m){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:m})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(m){return I(this,re,vs).call(this,"GetOptionalContentConfig").then(z=>new W.OptionalContentConfig(z,m))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const m="GetMetadata",z=t(this,Lt).get(m);if(z)return z;const Y=this.messageHandler.sendWithPromise(m,null).then(ht=>{var gt,xt;return{info:ht[0],metadata:ht[1]?new q.Metadata(ht[1]):null,contentDispositionFilename:((gt=this._fullReader)==null?void 0:gt.filename)??null,contentLength:((xt=this._fullReader)==null?void 0:xt.contentLength)??null}});return t(this,Lt).set(m,Y),Y}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(m=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const z of t(this,Pt).values())if(!z.cleanup())throw new Error(`startCleanup: Page ${z.pageNumber} is currently rendering.`);this.commonObjs.clear(),m||this.fontLoader.clear(),t(this,Lt).clear(),this.filterFactory.destroy(!0),(0,tt.cleanupTextLayer)()}}get loadingParams(){const{disableAutoFetch:m,enableXfa:z}=this._params;return(0,A.shadow)(this,"loadingParams",{disableAutoFetch:m,enableXfa:z})}}Lt=new WeakMap,Pt=new WeakMap,qt=new WeakMap,Kt=new WeakMap,re=new WeakSet,vs=function(m,z=null){const Y=t(this,Lt).get(m);if(Y)return Y;const ht=this.messageHandler.sendWithPromise(m,z);return t(this,Lt).set(m,ht),ht};const k=Symbol("INITIAL_DATA");class y{constructor(){c(this,he);c(this,ce,Object.create(null))}get(m,z=null){if(z){const ht=I(this,he,Mn).call(this,m);return ht.promise.then(()=>z(ht.data)),null}const Y=t(this,ce)[m];if(!Y||Y.data===k)throw new Error(`Requesting object that isn't resolved yet ${m}.`);return Y.data}has(m){const z=t(this,ce)[m];return!!z&&z.data!==k}resolve(m,z=null){const Y=I(this,he,Mn).call(this,m);Y.data=z,Y.resolve()}clear(){var m;for(const z in t(this,ce)){const{data:Y}=t(this,ce)[z];(m=Y==null?void 0:Y.bitmap)==null||m.close()}D(this,ce,Object.create(null))}*[Symbol.iterator](){for(const m in t(this,ce)){const{data:z}=t(this,ce)[m];z!==k&&(yield[m,z])}}}ce=new WeakMap,he=new WeakSet,Mn=function(m){var z;return(z=t(this,ce))[m]||(z[m]={...Promise.withResolvers(),data:k})};class X{constructor(m){c(this,zt,null);D(this,zt,m),this.onContinue=null}get promise(){return t(this,zt).capability.promise}cancel(m=0){t(this,zt).cancel(null,m)}get separateAnnots(){const{separateAnnots:m}=t(this,zt).operatorList;if(!m)return!1;const{annotationCanvasMap:z}=t(this,zt);return m.form||m.canvas&&(z==null?void 0:z.size)>0}}zt=new WeakMap;const J=class J{constructor({callback:m,params:z,objs:Y,commonObjs:ht,annotationCanvasMap:gt,operatorList:xt,pageIndex:Rt,canvasFactory:Xt,filterFactory:ie,useRequestAnimationFrame:ee=!1,pdfBug:ye=!1,pageColors:ve=null}){this.callback=m,this.params=z,this.objs=Y,this.commonObjs=ht,this.annotationCanvasMap=gt,this.operatorListIdx=null,this.operatorList=xt,this._pageIndex=Rt,this.canvasFactory=Xt,this.filterFactory=ie,this._pdfBug=ye,this.pageColors=ve,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=ee===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new X(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=z.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:m=!1,optionalContentConfig:z}){var Rt,Xt;if(this.cancelled)return;if(this._canvas){if(t(J,oe).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(J,oe).add(this._canvas)}this._pdfBug&&((Rt=globalThis.StepperManager)!=null&&Rt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Y,viewport:ht,transform:gt,background:xt}=this.params;this.gfx=new P.CanvasGraphics(Y,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:z},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:gt,viewport:ht,transparency:m,background:xt}),this.operatorListIdx=0,this.graphicsReady=!0,(Xt=this.graphicsReadyCallback)==null||Xt.call(this)}cancel(m=null,z=0){var Y;this.running=!1,this.cancelled=!0,(Y=this.gfx)==null||Y.endDrawing(),t(J,oe).delete(this._canvas),this.callback(m||new ot.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,z))}operatorListChanged(){var m;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(m=this.stepper)==null||m.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),t(J,oe).delete(this._canvas),this.callback())))}};oe=new WeakMap,c(J,oe,new WeakSet);let Z=J;const V="4.1.392",et="fcb76a78d";N()}catch(Ce){N(Ce)}})},583:(v,U,x)=>{x.d(U,{BaseCMapReaderFactory:()=>S,BaseCanvasFactory:()=>A,BaseFilterFactory:()=>N,BaseSVGFactory:()=>B,BaseStandardFontDataFactory:()=>ot});var n=x(292);class N{constructor(){this.constructor===N&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(P){return"none"}addHCMFilter(P,tt){return"none"}addHighlightHCMFilter(P,tt,j,C,q){return"none"}destroy(P=!1){}}class A{constructor(){this.constructor===A&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(P,tt){if(P<=0||tt<=0)throw new Error("Invalid canvas size");const j=this._createCanvas(P,tt);return{canvas:j,context:j.getContext("2d")}}reset(P,tt,j){if(!P.canvas)throw new Error("Canvas is not specified");if(tt<=0||j<=0)throw new Error("Invalid canvas size");P.canvas.width=tt,P.canvas.height=j}destroy(P){if(!P.canvas)throw new Error("Canvas is not specified");P.canvas.width=0,P.canvas.height=0,P.canvas=null,P.context=null}_createCanvas(P,tt){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}class S{constructor({baseUrl:P=null,isCompressed:tt=!0}){this.constructor===S&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=P,this.isCompressed=tt}async fetch({name:P}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!P)throw new Error("CMap name must be specified.");const tt=this.baseUrl+P+(this.isCompressed?".bcmap":""),j=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(tt,j).catch(C=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${tt}`)})}_fetchData(P,tt){(0,n.unreachable)("Abstract method `_fetchData` called.")}}class ot{constructor({baseUrl:P=null}){this.constructor===ot&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=P}async fetch({filename:P}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!P)throw new Error("Font filename must be specified.");const tt=`${this.baseUrl}${P}`;return this._fetchData(tt).catch(j=>{throw new Error(`Unable to load font data at: ${tt}`)})}_fetchData(P){(0,n.unreachable)("Abstract method `_fetchData` called.")}}class B{constructor(){this.constructor===B&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(P,tt,j=!1){if(P<=0||tt<=0)throw new Error("Invalid SVG dimensions");const C=this._createSVG("svg:svg");return C.setAttribute("version","1.1"),j||(C.setAttribute("width",`${P}px`),C.setAttribute("height",`${tt}px`)),C.setAttribute("preserveAspectRatio","none"),C.setAttribute("viewBox",`0 0 ${P} ${tt}`),C}createElement(P){if(typeof P!="string")throw new Error("Invalid SVG element type");return this._createSVG(P)}_createSVG(P){(0,n.unreachable)("Abstract method `_createSVG` called.")}}},923:(v,U,x)=>{var oe,kn,se,In;x.d(U,{CanvasGraphics:()=>me});var n=x(292),N=x(419);const A={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function S(lt,i){if(!i)return;const r=i[2]-i[0],d=i[3]-i[1],f=new Path2D;f.rect(i[0],i[1],r,d),lt.clip(f)}class ot{constructor(){this.constructor===ot&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class B extends ot{constructor(i){super(),this._type=i[1],this._bbox=i[2],this._colorStops=i[3],this._p0=i[4],this._p1=i[5],this._r0=i[6],this._r1=i[7],this.matrix=null}_createGradient(i){let r;this._type==="axial"?r=i.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(r=i.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const d of this._colorStops)r.addColorStop(d[0],d[1]);return r}getPattern(i,r,d,f){let l;if(f===A.STROKE||f===A.FILL){const w=r.current.getClippedPathBoundingBox(f,(0,N.getCurrentTransform)(i))||[0,0,0,0],b=Math.ceil(w[2]-w[0])||1,_=Math.ceil(w[3]-w[1])||1,u=r.cachedCanvases.getCanvas("pattern",b,_,!0),o=u.context;o.clearRect(0,0,o.canvas.width,o.canvas.height),o.beginPath(),o.rect(0,0,o.canvas.width,o.canvas.height),o.translate(-w[0],-w[1]),d=n.Util.transform(d,[1,0,0,1,w[0],w[1]]),o.transform(...r.baseTransform),this.matrix&&o.transform(...this.matrix),S(o,this._bbox),o.fillStyle=this._createGradient(o),o.fill(),l=i.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(d);l.setTransform(h)}else S(i,this._bbox),l=this._createGradient(i);return l}}function F(lt,i,r,d,f,l,w,b){const _=i.coords,u=i.colors,o=lt.data,h=lt.width*4;let s;_[r+1]>_[d+1]&&(s=r,r=d,d=s,s=l,l=w,w=s),_[d+1]>_[f+1]&&(s=d,d=f,f=s,s=w,w=b,b=s),_[r+1]>_[d+1]&&(s=r,r=d,d=s,s=l,l=w,w=s);const a=(_[r]+i.offsetX)*i.scaleX,g=(_[r+1]+i.offsetY)*i.scaleY,k=(_[d]+i.offsetX)*i.scaleX,y=(_[d+1]+i.offsetY)*i.scaleY,X=(_[f]+i.offsetX)*i.scaleX,Z=(_[f+1]+i.offsetY)*i.scaleY;if(g>=Z)return;const V=u[l],et=u[l+1],p=u[l+2],M=u[w],J=u[w+1],E=u[w+2],m=u[b],z=u[b+1],Y=u[b+2],ht=Math.round(g),gt=Math.round(Z);let xt,Rt,Xt,ie,ee,ye,ve,Le;for(let fe=ht;fe<=gt;fe++){if(fe<y){const nt=fe<g?0:(g-fe)/(g-y);xt=a-(a-k)*nt,Rt=V-(V-M)*nt,Xt=et-(et-J)*nt,ie=p-(p-E)*nt}else{let nt;fe>Z?nt=1:y===Z?nt=0:nt=(y-fe)/(y-Z),xt=k-(k-X)*nt,Rt=M-(M-m)*nt,Xt=J-(J-z)*nt,ie=E-(E-Y)*nt}let Ie;fe<g?Ie=0:fe>Z?Ie=1:Ie=(g-fe)/(g-Z),ee=a-(a-X)*Ie,ye=V-(V-m)*Ie,ve=et-(et-z)*Ie,Le=p-(p-Y)*Ie;const ae=Math.round(Math.min(xt,ee)),H=Math.round(Math.max(xt,ee));let T=h*fe+ae*4;for(let nt=ae;nt<=H;nt++)Ie=(xt-nt)/(xt-ee),Ie<0?Ie=0:Ie>1&&(Ie=1),o[T++]=Rt-(Rt-ye)*Ie|0,o[T++]=Xt-(Xt-ve)*Ie|0,o[T++]=ie-(ie-Le)*Ie|0,o[T++]=255}}function P(lt,i,r){const d=i.coords,f=i.colors;let l,w;switch(i.type){case"lattice":const b=i.verticesPerRow,_=Math.floor(d.length/b)-1,u=b-1;for(l=0;l<_;l++){let o=l*b;for(let h=0;h<u;h++,o++)F(lt,r,d[o],d[o+1],d[o+b],f[o],f[o+1],f[o+b]),F(lt,r,d[o+b+1],d[o+1],d[o+b],f[o+b+1],f[o+1],f[o+b])}break;case"triangles":for(l=0,w=d.length;l<w;l+=3)F(lt,r,d[l],d[l+1],d[l+2],f[l],f[l+1],f[l+2]);break;default:throw new Error("illegal figure")}}class tt extends ot{constructor(i){super(),this._coords=i[2],this._colors=i[3],this._figures=i[4],this._bounds=i[5],this._bbox=i[7],this._background=i[8],this.matrix=null}_createMeshCanvas(i,r,d){const f=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),w=Math.ceil(this._bounds[2])-f,b=Math.ceil(this._bounds[3])-l,_=Math.min(Math.ceil(Math.abs(w*i[0]*1.1)),3e3),u=Math.min(Math.ceil(Math.abs(b*i[1]*1.1)),3e3),o=w/_,h=b/u,s={coords:this._coords,colors:this._colors,offsetX:-f,offsetY:-l,scaleX:1/o,scaleY:1/h},a=_+2*2,g=u+2*2,k=d.getCanvas("mesh",a,g,!1),y=k.context,X=y.createImageData(_,u);if(r){const Z=X.data;for(let V=0,et=Z.length;V<et;V+=4)Z[V]=r[0],Z[V+1]=r[1],Z[V+2]=r[2],Z[V+3]=255}for(const Z of this._figures)P(X,Z,s);return y.putImageData(X,2,2),{canvas:k.canvas,offsetX:f-2*o,offsetY:l-2*h,scaleX:o,scaleY:h}}getPattern(i,r,d,f){S(i,this._bbox);let l;if(f===A.SHADING)l=n.Util.singularValueDecompose2dScale((0,N.getCurrentTransform)(i));else if(l=n.Util.singularValueDecompose2dScale(r.baseTransform),this.matrix){const b=n.Util.singularValueDecompose2dScale(this.matrix);l=[l[0]*b[0],l[1]*b[1]]}const w=this._createMeshCanvas(l,f===A.SHADING?null:this._background,r.cachedCanvases);return f!==A.SHADING&&(i.setTransform(...r.baseTransform),this.matrix&&i.transform(...this.matrix)),i.translate(w.offsetX,w.offsetY),i.scale(w.scaleX,w.scaleY),i.createPattern(w.canvas,"no-repeat")}}class j extends ot{getPattern(){return"hotpink"}}function C(lt){switch(lt[0]){case"RadialAxial":return new B(lt);case"Mesh":return new tt(lt);case"Dummy":return new j}throw new Error(`Unknown IR type: ${lt[0]}`)}const q={COLORED:1,UNCOLORED:2},zt=class zt{constructor(i,r,d,f,l){this.operatorList=i[2],this.matrix=i[3]||[1,0,0,1,0,0],this.bbox=i[4],this.xstep=i[5],this.ystep=i[6],this.paintType=i[7],this.tilingType=i[8],this.color=r,this.ctx=d,this.canvasGraphicsFactory=f,this.baseTransform=l}createPatternCanvas(i){const r=this.operatorList,d=this.bbox,f=this.xstep,l=this.ystep,w=this.paintType,b=this.tilingType,_=this.color,u=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+b);const o=d[0],h=d[1],s=d[2],a=d[3],g=n.Util.singularValueDecompose2dScale(this.matrix),k=n.Util.singularValueDecompose2dScale(this.baseTransform),y=[g[0]*k[0],g[1]*k[1]],X=this.getSizeAndScale(f,this.ctx.canvas.width,y[0]),Z=this.getSizeAndScale(l,this.ctx.canvas.height,y[1]),V=i.cachedCanvases.getCanvas("pattern",X.size,Z.size,!0),et=V.context,p=u.createCanvasGraphics(et);p.groupLevel=i.groupLevel,this.setFillAndStrokeStyleToContext(p,w,_);let M=o,J=h,E=s,m=a;return o<0&&(M=0,E+=Math.abs(o)),h<0&&(J=0,m+=Math.abs(h)),et.translate(-(X.scale*M),-(Z.scale*J)),p.transform(X.scale,0,0,Z.scale,0,0),et.save(),this.clipBbox(p,M,J,E,m),p.baseTransform=(0,N.getCurrentTransform)(p.ctx),p.executeOperatorList(r),p.endDrawing(),{canvas:V.canvas,scaleX:X.scale,scaleY:Z.scale,offsetX:M,offsetY:J}}getSizeAndScale(i,r,d){i=Math.abs(i);const f=Math.max(zt.MAX_PATTERN_SIZE,r);let l=Math.ceil(i*d);return l>=f?l=f:d=l/i,{scale:d,size:l}}clipBbox(i,r,d,f,l){const w=f-r,b=l-d;i.ctx.rect(r,d,w,b),i.current.updateRectMinMax((0,N.getCurrentTransform)(i.ctx),[r,d,f,l]),i.clip(),i.endPath()}setFillAndStrokeStyleToContext(i,r,d){const f=i.ctx,l=i.current;switch(r){case q.COLORED:const w=this.ctx;f.fillStyle=w.fillStyle,f.strokeStyle=w.strokeStyle,l.fillColor=w.fillStyle,l.strokeColor=w.strokeStyle;break;case q.UNCOLORED:const b=n.Util.makeHexColor(d[0],d[1],d[2]);f.fillStyle=b,f.strokeStyle=b,l.fillColor=b,l.strokeColor=b;break;default:throw new n.FormatError(`Unsupported paint type: ${r}`)}}getPattern(i,r,d,f){let l=d;f!==A.SHADING&&(l=n.Util.transform(l,r.baseTransform),this.matrix&&(l=n.Util.transform(l,this.matrix)));const w=this.createPatternCanvas(r);let b=new DOMMatrix(l);b=b.translate(w.offsetX,w.offsetY),b=b.scale(1/w.scaleX,1/w.scaleY);const _=i.createPattern(w.canvas,"repeat");return _.setTransform(b),_}};be(zt,"MAX_PATTERN_SIZE",3e3);let W=zt;function it({src:lt,srcPos:i=0,dest:r,width:d,height:f,nonBlackColor:l=4294967295,inverseDecode:w=!1}){const b=n.FeatureTest.isLittleEndian?4278190080:255,[_,u]=w?[l,b]:[b,l],o=d>>3,h=d&7,s=lt.length;r=new Uint32Array(r.buffer);let a=0;for(let g=0;g<f;g++){for(const y=i+o;i<y;i++){const X=i<s?lt[i]:255;r[a++]=X&128?u:_,r[a++]=X&64?u:_,r[a++]=X&32?u:_,r[a++]=X&16?u:_,r[a++]=X&8?u:_,r[a++]=X&4?u:_,r[a++]=X&2?u:_,r[a++]=X&1?u:_}if(h===0)continue;const k=i<s?lt[i++]:255;for(let y=0;y<h;y++)r[a++]=k&1<<7-y?u:_}return{srcPos:i,destPos:a}}const ut=16,st=100,R=4096,K=15,$=10,O=1e3,Q=16;function at(lt,i){if(lt._removeMirroring)throw new Error("Context is already forwarding operations.");lt.__originalSave=lt.save,lt.__originalRestore=lt.restore,lt.__originalRotate=lt.rotate,lt.__originalScale=lt.scale,lt.__originalTranslate=lt.translate,lt.__originalTransform=lt.transform,lt.__originalSetTransform=lt.setTransform,lt.__originalResetTransform=lt.resetTransform,lt.__originalClip=lt.clip,lt.__originalMoveTo=lt.moveTo,lt.__originalLineTo=lt.lineTo,lt.__originalBezierCurveTo=lt.bezierCurveTo,lt.__originalRect=lt.rect,lt.__originalClosePath=lt.closePath,lt.__originalBeginPath=lt.beginPath,lt._removeMirroring=()=>{lt.save=lt.__originalSave,lt.restore=lt.__originalRestore,lt.rotate=lt.__originalRotate,lt.scale=lt.__originalScale,lt.translate=lt.__originalTranslate,lt.transform=lt.__originalTransform,lt.setTransform=lt.__originalSetTransform,lt.resetTransform=lt.__originalResetTransform,lt.clip=lt.__originalClip,lt.moveTo=lt.__originalMoveTo,lt.lineTo=lt.__originalLineTo,lt.bezierCurveTo=lt.__originalBezierCurveTo,lt.rect=lt.__originalRect,lt.closePath=lt.__originalClosePath,lt.beginPath=lt.__originalBeginPath,delete lt._removeMirroring},lt.save=function(){i.save(),this.__originalSave()},lt.restore=function(){i.restore(),this.__originalRestore()},lt.translate=function(r,d){i.translate(r,d),this.__originalTranslate(r,d)},lt.scale=function(r,d){i.scale(r,d),this.__originalScale(r,d)},lt.transform=function(r,d,f,l,w,b){i.transform(r,d,f,l,w,b),this.__originalTransform(r,d,f,l,w,b)},lt.setTransform=function(r,d,f,l,w,b){i.setTransform(r,d,f,l,w,b),this.__originalSetTransform(r,d,f,l,w,b)},lt.resetTransform=function(){i.resetTransform(),this.__originalResetTransform()},lt.rotate=function(r){i.rotate(r),this.__originalRotate(r)},lt.clip=function(r){i.clip(r),this.__originalClip(r)},lt.moveTo=function(r,d){i.moveTo(r,d),this.__originalMoveTo(r,d)},lt.lineTo=function(r,d){i.lineTo(r,d),this.__originalLineTo(r,d)},lt.bezierCurveTo=function(r,d,f,l,w,b){i.bezierCurveTo(r,d,f,l,w,b),this.__originalBezierCurveTo(r,d,f,l,w,b)},lt.rect=function(r,d,f,l){i.rect(r,d,f,l),this.__originalRect(r,d,f,l)},lt.closePath=function(){i.closePath(),this.__originalClosePath()},lt.beginPath=function(){i.beginPath(),this.__originalBeginPath()}}class yt{constructor(i){this.canvasFactory=i,this.cache=Object.create(null)}getCanvas(i,r,d){let f;return this.cache[i]!==void 0?(f=this.cache[i],this.canvasFactory.reset(f,r,d)):(f=this.canvasFactory.create(r,d),this.cache[i]=f),f}delete(i){delete this.cache[i]}clear(){for(const i in this.cache){const r=this.cache[i];this.canvasFactory.destroy(r),delete this.cache[i]}}}function Dt(lt,i,r,d,f,l,w,b,_,u){const[o,h,s,a,g,k]=(0,N.getCurrentTransform)(lt);if(h===0&&s===0){const Z=w*o+g,V=Math.round(Z),et=b*a+k,p=Math.round(et),M=(w+_)*o+g,J=Math.abs(Math.round(M)-V)||1,E=(b+u)*a+k,m=Math.abs(Math.round(E)-p)||1;return lt.setTransform(Math.sign(o),0,0,Math.sign(a),V,p),lt.drawImage(i,r,d,f,l,0,0,J,m),lt.setTransform(o,h,s,a,g,k),[J,m]}if(o===0&&a===0){const Z=b*s+g,V=Math.round(Z),et=w*h+k,p=Math.round(et),M=(b+u)*s+g,J=Math.abs(Math.round(M)-V)||1,E=(w+_)*h+k,m=Math.abs(Math.round(E)-p)||1;return lt.setTransform(0,Math.sign(h),Math.sign(s),0,V,p),lt.drawImage(i,r,d,f,l,0,0,m,J),lt.setTransform(o,h,s,a,g,k),[m,J]}lt.drawImage(i,r,d,f,l,w,b,_,u);const y=Math.hypot(o,h),X=Math.hypot(s,a);return[y*_,X*u]}function Ct(lt){const{width:i,height:r}=lt;if(i>O||r>O)return null;const d=1e3,f=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),l=i+1;let w=new Uint8Array(l*(r+1)),b,_,u;const o=i+7&-8;let h=new Uint8Array(o*r),s=0;for(const y of lt.data){let X=128;for(;X>0;)h[s++]=y&X?0:255,X>>=1}let a=0;for(s=0,h[s]!==0&&(w[0]=1,++a),_=1;_<i;_++)h[s]!==h[s+1]&&(w[_]=h[s]?2:1,++a),s++;for(h[s]!==0&&(w[_]=2,++a),b=1;b<r;b++){s=b*o,u=b*l,h[s-o]!==h[s]&&(w[u]=h[s]?1:8,++a);let y=(h[s]?4:0)+(h[s-o]?8:0);for(_=1;_<i;_++)y=(y>>2)+(h[s+1]?4:0)+(h[s-o+1]?8:0),f[y]&&(w[u+_]=f[y],++a),s++;if(h[s-o]!==h[s]&&(w[u+_]=h[s]?2:4,++a),a>d)return null}for(s=o*(r-1),u=b*l,h[s]!==0&&(w[u]=8,++a),_=1;_<i;_++)h[s]!==h[s+1]&&(w[u+_]=h[s]?4:8,++a),s++;if(h[s]!==0&&(w[u+_]=4,++a),a>d)return null;const g=new Int32Array([0,l,-1,0,-l,0,0,0,1]),k=new Path2D;for(b=0;a&&b<=r;b++){let y=b*l;const X=y+i;for(;y<X&&!w[y];)y++;if(y===X)continue;k.moveTo(y%l,b);const Z=y;let V=w[y];do{const et=g[V];do y+=et;while(!w[y]);const p=w[y];p!==5&&p!==10?(V=p,w[y]=0):(V=p&51*V>>4,w[y]&=V>>2|V<<2),k.lineTo(y%l,y/l|0),w[y]||--a}while(Z!==y);--b}return h=null,w=null,function(y){y.save(),y.scale(1/i,-1/r),y.translate(0,-r),y.fill(k),y.beginPath(),y.restore()}}class Nt{constructor(i,r){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,i,r])}clone(){const i=Object.create(this);return i.clipBox=this.clipBox.slice(),i}setCurrentPoint(i,r){this.x=i,this.y=r}updatePathMinMax(i,r,d){[r,d]=n.Util.applyTransform([r,d],i),this.minX=Math.min(this.minX,r),this.minY=Math.min(this.minY,d),this.maxX=Math.max(this.maxX,r),this.maxY=Math.max(this.maxY,d)}updateRectMinMax(i,r){const d=n.Util.applyTransform(r,i),f=n.Util.applyTransform(r.slice(2),i),l=n.Util.applyTransform([r[0],r[3]],i),w=n.Util.applyTransform([r[2],r[1]],i);this.minX=Math.min(this.minX,d[0],f[0],l[0],w[0]),this.minY=Math.min(this.minY,d[1],f[1],l[1],w[1]),this.maxX=Math.max(this.maxX,d[0],f[0],l[0],w[0]),this.maxY=Math.max(this.maxY,d[1],f[1],l[1],w[1])}updateScalingPathMinMax(i,r){n.Util.scaleMinMax(i,r),this.minX=Math.min(this.minX,r[0]),this.minY=Math.min(this.minY,r[1]),this.maxX=Math.max(this.maxX,r[2]),this.maxY=Math.max(this.maxY,r[3])}updateCurvePathMinMax(i,r,d,f,l,w,b,_,u,o){const h=n.Util.bezierBoundingBox(r,d,f,l,w,b,_,u,o);o||this.updateRectMinMax(i,h)}getPathBoundingBox(i=A.FILL,r=null){const d=[this.minX,this.minY,this.maxX,this.maxY];if(i===A.STROKE){r||(0,n.unreachable)("Stroke bounding box must include transform.");const f=n.Util.singularValueDecompose2dScale(r),l=f[0]*this.lineWidth/2,w=f[1]*this.lineWidth/2;d[0]-=l,d[1]-=w,d[2]+=l,d[3]+=w}return d}updateClipFromPath(){const i=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(i||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(i){this.clipBox=i,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(i=A.FILL,r=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(i,r))}}function wt(lt,i){if(typeof ImageData<"u"&&i instanceof ImageData){lt.putImageData(i,0,0);return}const r=i.height,d=i.width,f=r%Q,l=(r-f)/Q,w=f===0?l:l+1,b=lt.createImageData(d,Q);let _=0,u;const o=i.data,h=b.data;let s,a,g,k;if(i.kind===n.ImageKind.GRAYSCALE_1BPP){const y=o.byteLength,X=new Uint32Array(h.buffer,0,h.byteLength>>2),Z=X.length,V=d+7>>3,et=4294967295,p=n.FeatureTest.isLittleEndian?4278190080:255;for(s=0;s<w;s++){for(g=s<l?Q:f,u=0,a=0;a<g;a++){const M=y-_;let J=0;const E=M>V?d:M*8-7,m=E&-8;let z=0,Y=0;for(;J<m;J+=8)Y=o[_++],X[u++]=Y&128?et:p,X[u++]=Y&64?et:p,X[u++]=Y&32?et:p,X[u++]=Y&16?et:p,X[u++]=Y&8?et:p,X[u++]=Y&4?et:p,X[u++]=Y&2?et:p,X[u++]=Y&1?et:p;for(;J<E;J++)z===0&&(Y=o[_++],z=128),X[u++]=Y&z?et:p,z>>=1}for(;u<Z;)X[u++]=0;lt.putImageData(b,0,s*Q)}}else if(i.kind===n.ImageKind.RGBA_32BPP){for(a=0,k=d*Q*4,s=0;s<l;s++)h.set(o.subarray(_,_+k)),_+=k,lt.putImageData(b,0,a),a+=Q;s<w&&(k=d*f*4,h.set(o.subarray(_,_+k)),lt.putImageData(b,0,a))}else if(i.kind===n.ImageKind.RGB_24BPP)for(g=Q,k=d*g,s=0;s<w;s++){for(s>=l&&(g=f,k=d*g),u=0,a=k;a--;)h[u++]=o[_++],h[u++]=o[_++],h[u++]=o[_++],h[u++]=255;lt.putImageData(b,0,s*Q)}else throw new Error(`bad image kind: ${i.kind}`)}function Tt(lt,i){if(i.bitmap){lt.drawImage(i.bitmap,0,0);return}const r=i.height,d=i.width,f=r%Q,l=(r-f)/Q,w=f===0?l:l+1,b=lt.createImageData(d,Q);let _=0;const u=i.data,o=b.data;for(let h=0;h<w;h++){const s=h<l?Q:f;({srcPos:_}=it({src:u,srcPos:_,dest:o,width:d,height:s,nonBlackColor:0})),lt.putImageData(b,0,h*Q)}}function It(lt,i){const r=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const d of r)lt[d]!==void 0&&(i[d]=lt[d]);lt.setLineDash!==void 0&&(i.setLineDash(lt.getLineDash()),i.lineDashOffset=lt.lineDashOffset)}function St(lt){if(lt.strokeStyle=lt.fillStyle="#000000",lt.fillRule="nonzero",lt.globalAlpha=1,lt.lineWidth=1,lt.lineCap="butt",lt.lineJoin="miter",lt.miterLimit=10,lt.globalCompositeOperation="source-over",lt.font="10px sans-serif",lt.setLineDash!==void 0&&(lt.setLineDash([]),lt.lineDashOffset=0),!n.isNodeJS){const{filter:i}=lt;i!=="none"&&i!==""&&(lt.filter="none")}}function rt(lt,i,r,d){const f=lt.length;for(let l=3;l<f;l+=4){const w=lt[l];if(w===0)lt[l-3]=i,lt[l-2]=r,lt[l-1]=d;else if(w<255){const b=255-w;lt[l-3]=lt[l-3]*w+i*b>>8,lt[l-2]=lt[l-2]*w+r*b>>8,lt[l-1]=lt[l-1]*w+d*b>>8}}}function bt(lt,i,r){const d=lt.length,f=1/255;for(let l=3;l<d;l+=4){const w=r?r[lt[l]]:lt[l];i[l]=i[l]*w*f|0}}function Lt(lt,i,r){const d=lt.length;for(let f=3;f<d;f+=4){const l=lt[f-3]*77+lt[f-2]*152+lt[f-1]*28;i[f]=r?i[f]*r[l>>8]>>8:i[f]*l>>16}}function Pt(lt,i,r,d,f,l,w,b,_,u,o){const h=!!l,s=h?l[0]:0,a=h?l[1]:0,g=h?l[2]:0,k=f==="Luminosity"?Lt:bt,y=Math.min(d,Math.ceil(1048576/r));for(let X=0;X<d;X+=y){const Z=Math.min(y,d-X),V=lt.getImageData(b-u,X+(_-o),r,Z),et=i.getImageData(b,X+_,r,Z);h&&rt(V.data,s,a,g),k(V.data,et.data,w),i.putImageData(et,b,X+_)}}function qt(lt,i,r,d){const f=d[0],l=d[1],w=d[2]-f,b=d[3]-l;w===0||b===0||(Pt(i.context,r,w,b,i.subtype,i.backdrop,i.transferMap,f,l,i.offsetX,i.offsetY),lt.save(),lt.globalAlpha=1,lt.globalCompositeOperation="source-over",lt.setTransform(1,0,0,1,0,0),lt.drawImage(r.canvas,0,0),lt.restore())}function Kt(lt,i){const r=n.Util.singularValueDecompose2dScale(lt);r[0]=Math.fround(r[0]),r[1]=Math.fround(r[1]);const d=Math.fround((globalThis.devicePixelRatio||1)*N.PixelsPerInch.PDF_TO_CSS_UNITS);return i!==void 0?i:r[0]<=d||r[1]<=d}const re=["butt","round","square"],_e=["miter","round","bevel"],ce={},he={},ne=class ne{constructor(i,r,d,f,l,{optionalContentConfig:w,markedContentStack:b=null},_,u){c(this,oe);c(this,se);this.ctx=i,this.current=new Nt(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=r,this.objs=d,this.canvasFactory=f,this.filterFactory=l,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=b||[],this.optionalContentConfig=w,this.cachedCanvases=new yt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=_,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(i,r=null){return typeof i=="string"?i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i):r}beginDrawing({transform:i,viewport:r,transparency:d=!1,background:f=null}){const l=this.ctx.canvas.width,w=this.ctx.canvas.height,b=this.ctx.fillStyle;if(this.ctx.fillStyle=f||"#ffffff",this.ctx.fillRect(0,0,l,w),this.ctx.fillStyle=b,d){const _=this.cachedCanvases.getCanvas("transparent",l,w);this.compositeCtx=this.ctx,this.transparentCanvas=_.canvas,this.ctx=_.context,this.ctx.save(),this.ctx.transform(...(0,N.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),St(this.ctx),i&&(this.ctx.transform(...i),this.outputScaleX=i[0],this.outputScaleY=i[0]),this.ctx.transform(...r.transform),this.viewportScale=r.scale,this.baseTransform=(0,N.getCurrentTransform)(this.ctx)}executeOperatorList(i,r,d,f){const l=i.argsArray,w=i.fnArray;let b=r||0;const _=l.length;if(_===b)return b;const u=_-b>$&&typeof d=="function",o=u?Date.now()+K:0;let h=0;const s=this.commonObjs,a=this.objs;let g;for(;;){if(f!==void 0&&b===f.nextBreakPoint)return f.breakIt(b,d),b;if(g=w[b],g!==n.OPS.dependency)this[g].apply(this,l[b]);else for(const k of l[b]){const y=k.startsWith("g_")?s:a;if(!y.has(k))return y.get(k,d),b}if(b++,b===_)return b;if(u&&++h>$){if(Date.now()>o)return d(),b;h=0}}}endDrawing(){I(this,oe,kn).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const i of this._cachedBitmapsMap.values()){for(const r of i.values())typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&(r.width=r.height=0);i.clear()}this._cachedBitmapsMap.clear(),I(this,se,In).call(this)}_scaleImage(i,r){const d=i.width,f=i.height;let l=Math.max(Math.hypot(r[0],r[1]),1),w=Math.max(Math.hypot(r[2],r[3]),1),b=d,_=f,u="prescale1",o,h;for(;l>2&&b>1||w>2&&_>1;){let s=b,a=_;l>2&&b>1&&(s=b>=16384?Math.floor(b/2)-1||1:Math.ceil(b/2),l/=b/s),w>2&&_>1&&(a=_>=16384?Math.floor(_/2)-1||1:Math.ceil(_)/2,w/=_/a),o=this.cachedCanvases.getCanvas(u,s,a),h=o.context,h.clearRect(0,0,s,a),h.drawImage(i,0,0,b,_,0,0,s,a),i=o.canvas,b=s,_=a,u=u==="prescale1"?"prescale2":"prescale1"}return{img:i,paintWidth:b,paintHeight:_}}_createMaskCanvas(i){const r=this.ctx,{width:d,height:f}=i,l=this.current.fillColor,w=this.current.patternFill,b=(0,N.getCurrentTransform)(r);let _,u,o,h;if((i.bitmap||i.data)&&i.count>1){const E=i.bitmap||i.data.buffer;u=JSON.stringify(w?b:[b.slice(0,4),l]),_=this._cachedBitmapsMap.get(E),_||(_=new Map,this._cachedBitmapsMap.set(E,_));const m=_.get(u);if(m&&!w){const z=Math.round(Math.min(b[0],b[2])+b[4]),Y=Math.round(Math.min(b[1],b[3])+b[5]);return{canvas:m,offsetX:z,offsetY:Y}}o=m}o||(h=this.cachedCanvases.getCanvas("maskCanvas",d,f),Tt(h.context,i));let s=n.Util.transform(b,[1/d,0,0,-1/f,0,0]);s=n.Util.transform(s,[1,0,0,1,0,-f]);const[a,g,k,y]=n.Util.getAxialAlignedBoundingBox([0,0,d,f],s),X=Math.round(k-a)||1,Z=Math.round(y-g)||1,V=this.cachedCanvases.getCanvas("fillCanvas",X,Z),et=V.context,p=a,M=g;et.translate(-p,-M),et.transform(...s),o||(o=this._scaleImage(h.canvas,(0,N.getCurrentTransformInverse)(et)),o=o.img,_&&w&&_.set(u,o)),et.imageSmoothingEnabled=Kt((0,N.getCurrentTransform)(et),i.interpolate),Dt(et,o,0,0,o.width,o.height,0,0,d,f),et.globalCompositeOperation="source-in";const J=n.Util.transform((0,N.getCurrentTransformInverse)(et),[1,0,0,1,-p,-M]);return et.fillStyle=w?l.getPattern(r,this,J,A.FILL):l,et.fillRect(0,0,d,f),_&&!w&&(this.cachedCanvases.delete("fillCanvas"),_.set(u,V.canvas)),{canvas:V.canvas,offsetX:Math.round(p),offsetY:Math.round(M)}}setLineWidth(i){i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(i){this.ctx.lineCap=re[i]}setLineJoin(i){this.ctx.lineJoin=_e[i]}setMiterLimit(i){this.ctx.miterLimit=i}setDash(i,r){const d=this.ctx;d.setLineDash!==void 0&&(d.setLineDash(i),d.lineDashOffset=r)}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[r,d]of i)switch(r){case"LW":this.setLineWidth(d);break;case"LC":this.setLineCap(d);break;case"LJ":this.setLineJoin(d);break;case"ML":this.setMiterLimit(d);break;case"D":this.setDash(d[0],d[1]);break;case"RI":this.setRenderingIntent(d);break;case"FL":this.setFlatness(d);break;case"Font":this.setFont(d[0],d[1]);break;case"CA":this.current.strokeAlpha=d;break;case"ca":this.current.fillAlpha=d,this.ctx.globalAlpha=d;break;case"BM":this.ctx.globalCompositeOperation=d;break;case"SMask":this.current.activeSMask=d?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(d);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const i=this.inSMaskMode;this.current.activeSMask&&!i?this.beginSMaskMode():!this.current.activeSMask&&i&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,r=this.ctx.canvas.height,d="smaskGroupAt"+this.groupLevel,f=this.cachedCanvases.getCanvas(d,i,r);this.suspendedCtx=this.ctx,this.ctx=f.context;const l=this.ctx;l.setTransform(...(0,N.getCurrentTransform)(this.suspendedCtx)),It(this.suspendedCtx,l),at(l,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),It(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(i){if(!this.current.activeSMask)return;i?(i[0]=Math.floor(i[0]),i[1]=Math.floor(i[1]),i[2]=Math.ceil(i[2]),i[3]=Math.ceil(i[3])):i=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const r=this.current.activeSMask,d=this.suspendedCtx;qt(d,r,this.ctx,i),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(It(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),It(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(i,r,d,f,l,w){this.ctx.transform(i,r,d,f,l,w),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(i,r,d){const f=this.ctx,l=this.current;let w=l.x,b=l.y,_,u;const o=(0,N.getCurrentTransform)(f),h=o[0]===0&&o[3]===0||o[1]===0&&o[2]===0,s=h?d.slice(0):null;for(let a=0,g=0,k=i.length;a<k;a++)switch(i[a]|0){case n.OPS.rectangle:w=r[g++],b=r[g++];const y=r[g++],X=r[g++],Z=w+y,V=b+X;f.moveTo(w,b),y===0||X===0?f.lineTo(Z,V):(f.lineTo(Z,b),f.lineTo(Z,V),f.lineTo(w,V)),h||l.updateRectMinMax(o,[w,b,Z,V]),f.closePath();break;case n.OPS.moveTo:w=r[g++],b=r[g++],f.moveTo(w,b),h||l.updatePathMinMax(o,w,b);break;case n.OPS.lineTo:w=r[g++],b=r[g++],f.lineTo(w,b),h||l.updatePathMinMax(o,w,b);break;case n.OPS.curveTo:_=w,u=b,w=r[g+4],b=r[g+5],f.bezierCurveTo(r[g],r[g+1],r[g+2],r[g+3],w,b),l.updateCurvePathMinMax(o,_,u,r[g],r[g+1],r[g+2],r[g+3],w,b,s),g+=6;break;case n.OPS.curveTo2:_=w,u=b,f.bezierCurveTo(w,b,r[g],r[g+1],r[g+2],r[g+3]),l.updateCurvePathMinMax(o,_,u,w,b,r[g],r[g+1],r[g+2],r[g+3],s),w=r[g+2],b=r[g+3],g+=4;break;case n.OPS.curveTo3:_=w,u=b,w=r[g+2],b=r[g+3],f.bezierCurveTo(r[g],r[g+1],w,b,w,b),l.updateCurvePathMinMax(o,_,u,r[g],r[g+1],w,b,w,b,s),g+=4;break;case n.OPS.closePath:f.closePath();break}h&&l.updateScalingPathMinMax(o,s),l.setCurrentPoint(w,b)}closePath(){this.ctx.closePath()}stroke(i=!0){const r=this.ctx,d=this.current.strokeColor;r.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof d=="object"&&(d!=null&&d.getPattern)?(r.save(),r.strokeStyle=d.getPattern(r,this,(0,N.getCurrentTransformInverse)(r),A.STROKE),this.rescaleAndStroke(!1),r.restore()):this.rescaleAndStroke(!0)),i&&this.consumePath(this.current.getClippedPathBoundingBox()),r.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(i=!0){const r=this.ctx,d=this.current.fillColor,f=this.current.patternFill;let l=!1;f&&(r.save(),r.fillStyle=d.getPattern(r,this,(0,N.getCurrentTransformInverse)(r),A.FILL),l=!0);const w=this.current.getClippedPathBoundingBox();this.contentVisible&&w!==null&&(this.pendingEOFill?(r.fill("evenodd"),this.pendingEOFill=!1):r.fill()),l&&r.restore(),i&&this.consumePath(w)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ce}eoClip(){this.pendingClip=he}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const i=this.pendingTextPaths,r=this.ctx;if(i===void 0){r.beginPath();return}r.save(),r.beginPath();for(const d of i)r.setTransform(...d.transform),r.translate(d.x,d.y),d.addToPath(r,d.fontSize);r.restore(),r.clip(),r.beginPath(),delete this.pendingTextPaths}setCharSpacing(i){this.current.charSpacing=i}setWordSpacing(i){this.current.wordSpacing=i}setHScale(i){this.current.textHScale=i/100}setLeading(i){this.current.leading=-i}setFont(i,r){var o;const d=this.commonObjs.get(i),f=this.current;if(!d)throw new Error(`Can't find font for ${i}`);if(f.fontMatrix=d.fontMatrix||n.FONT_IDENTITY_MATRIX,(f.fontMatrix[0]===0||f.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+i),r<0?(r=-r,f.fontDirection=-1):f.fontDirection=1,this.current.font=d,this.current.fontSize=r,d.isType3Font)return;const l=d.loadedName||"sans-serif",w=((o=d.systemFontInfo)==null?void 0:o.css)||`"${l}", ${d.fallbackName}`;let b="normal";d.black?b="900":d.bold&&(b="bold");const _=d.italic?"italic":"normal";let u=r;r<ut?u=ut:r>st&&(u=st),this.current.fontSizeScale=r/u,this.ctx.font=`${_} ${b} ${u}px ${w}`}setTextRenderingMode(i){this.current.textRenderingMode=i}setTextRise(i){this.current.textRise=i}moveText(i,r){this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=r}setLeadingMoveText(i,r){this.setLeading(-r),this.moveText(i,r)}setTextMatrix(i,r,d,f,l,w){this.current.textMatrix=[i,r,d,f,l,w],this.current.textMatrixScale=Math.hypot(i,r),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(i,r,d,f){const l=this.ctx,w=this.current,b=w.font,_=w.textRenderingMode,u=w.fontSize/w.fontSizeScale,o=_&n.TextRenderingMode.FILL_STROKE_MASK,h=!!(_&n.TextRenderingMode.ADD_TO_PATH_FLAG),s=w.patternFill&&!b.missingFile;let a;(b.disableFontFace||h||s)&&(a=b.getPathGenerator(this.commonObjs,i)),b.disableFontFace||s?(l.save(),l.translate(r,d),l.beginPath(),a(l,u),f&&l.setTransform(...f),(o===n.TextRenderingMode.FILL||o===n.TextRenderingMode.FILL_STROKE)&&l.fill(),(o===n.TextRenderingMode.STROKE||o===n.TextRenderingMode.FILL_STROKE)&&l.stroke(),l.restore()):((o===n.TextRenderingMode.FILL||o===n.TextRenderingMode.FILL_STROKE)&&l.fillText(i,r,d),(o===n.TextRenderingMode.STROKE||o===n.TextRenderingMode.FILL_STROKE)&&l.strokeText(i,r,d)),h&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,N.getCurrentTransform)(l),x:r,y:d,fontSize:u,addToPath:a})}get isFontSubpixelAAEnabled(){const{context:i}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);i.scale(1.5,1),i.fillText("I",0,10);const r=i.getImageData(0,0,10,10).data;let d=!1;for(let f=3;f<r.length;f+=4)if(r[f]>0&&r[f]<255){d=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",d)}showText(i){const r=this.current,d=r.font;if(d.isType3Font)return this.showType3Text(i);const f=r.fontSize;if(f===0)return;const l=this.ctx,w=r.fontSizeScale,b=r.charSpacing,_=r.wordSpacing,u=r.fontDirection,o=r.textHScale*u,h=i.length,s=d.vertical,a=s?1:-1,g=d.defaultVMetrics,k=f*r.fontMatrix[0],y=r.textRenderingMode===n.TextRenderingMode.FILL&&!d.disableFontFace&&!r.patternFill;l.save(),l.transform(...r.textMatrix),l.translate(r.x,r.y+r.textRise),u>0?l.scale(o,-1):l.scale(o,1);let X;if(r.patternFill){l.save();const M=r.fillColor.getPattern(l,this,(0,N.getCurrentTransformInverse)(l),A.FILL);X=(0,N.getCurrentTransform)(l),l.restore(),l.fillStyle=M}let Z=r.lineWidth;const V=r.textMatrixScale;if(V===0||Z===0){const M=r.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(M===n.TextRenderingMode.STROKE||M===n.TextRenderingMode.FILL_STROKE)&&(Z=this.getSinglePixelWidth())}else Z/=V;if(w!==1&&(l.scale(w,w),Z/=w),l.lineWidth=Z,d.isInvalidPDFjsFont){const M=[];let J=0;for(const E of i)M.push(E.unicode),J+=E.width;l.fillText(M.join(""),0,0),r.x+=J*k*o,l.restore(),this.compose();return}let et=0,p;for(p=0;p<h;++p){const M=i[p];if(typeof M=="number"){et+=a*M*f/1e3;continue}let J=!1;const E=(M.isSpace?_:0)+b,m=M.fontChar,z=M.accent;let Y,ht,gt=M.width;if(s){const Rt=M.vmetric||g,Xt=-(M.vmetric?Rt[1]:gt*.5)*k,ie=Rt[2]*k;gt=Rt?-Rt[0]:gt,Y=Xt/w,ht=(et+ie)/w}else Y=et/w,ht=0;if(d.remeasure&&gt>0){const Rt=l.measureText(m).width*1e3/f*w;if(gt<Rt&&this.isFontSubpixelAAEnabled){const Xt=gt/Rt;J=!0,l.save(),l.scale(Xt,1),Y/=Xt}else gt!==Rt&&(Y+=(gt-Rt)/2e3*f/w)}if(this.contentVisible&&(M.isInFont||d.missingFile)){if(y&&!z)l.fillText(m,Y,ht);else if(this.paintChar(m,Y,ht,X),z){const Rt=Y+f*z.offset.x/w,Xt=ht-f*z.offset.y/w;this.paintChar(z.fontChar,Rt,Xt,X)}}const xt=s?gt*k-E*u:gt*k+E*u;et+=xt,J&&l.restore()}s?r.y-=et:r.x+=et*o,l.restore(),this.compose()}showType3Text(i){const r=this.ctx,d=this.current,f=d.font,l=d.fontSize,w=d.fontDirection,b=f.vertical?1:-1,_=d.charSpacing,u=d.wordSpacing,o=d.textHScale*w,h=d.fontMatrix||n.FONT_IDENTITY_MATRIX,s=i.length,a=d.textRenderingMode===n.TextRenderingMode.INVISIBLE;let g,k,y,X;if(!(a||l===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),r.transform(...d.textMatrix),r.translate(d.x,d.y),r.scale(o,w),g=0;g<s;++g){if(k=i[g],typeof k=="number"){X=b*k*l/1e3,this.ctx.translate(X,0),d.x+=X*o;continue}const Z=(k.isSpace?u:0)+_,V=f.charProcOperatorList[k.operatorListId];if(!V){(0,n.warn)(`Type3 character "${k.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=k,this.save(),r.scale(l,l),r.transform(...h),this.executeOperatorList(V),this.restore()),y=n.Util.applyTransform([k.width,0],h)[0]*l+Z,r.translate(y,0),d.x+=y*o}r.restore(),this.processingType3=null}}setCharWidth(i,r){}setCharWidthAndBounds(i,r,d,f,l,w){this.ctx.rect(d,f,l-d,w-f),this.ctx.clip(),this.endPath()}getColorN_Pattern(i){let r;if(i[0]==="TilingPattern"){const d=i[1],f=this.baseTransform||(0,N.getCurrentTransform)(this.ctx),l={createCanvasGraphics:w=>new ne(w,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};r=new W(i,d,this.ctx,l,f)}else r=this._getPattern(i[1],i[2]);return r}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(i,r,d){const f=n.Util.makeHexColor(i,r,d);this.ctx.strokeStyle=f,this.current.strokeColor=f}setFillRGBColor(i,r,d){const f=n.Util.makeHexColor(i,r,d);this.ctx.fillStyle=f,this.current.fillColor=f,this.current.patternFill=!1}_getPattern(i,r=null){let d;return this.cachedPatterns.has(i)?d=this.cachedPatterns.get(i):(d=C(this.getObject(i)),this.cachedPatterns.set(i,d)),r&&(d.matrix=r),d}shadingFill(i){if(!this.contentVisible)return;const r=this.ctx;this.save();const d=this._getPattern(i);r.fillStyle=d.getPattern(r,this,(0,N.getCurrentTransformInverse)(r),A.SHADING);const f=(0,N.getCurrentTransformInverse)(r);if(f){const{width:l,height:w}=r.canvas,[b,_,u,o]=n.Util.getAxialAlignedBoundingBox([0,0,l,w],f);this.ctx.fillRect(b,_,u-b,o-_)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(i,r){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(i)&&i.length===6&&this.transform(...i),this.baseTransform=(0,N.getCurrentTransform)(this.ctx),r)){const d=r[2]-r[0],f=r[3]-r[1];this.ctx.rect(r[0],r[1],d,f),this.current.updateRectMinMax((0,N.getCurrentTransform)(this.ctx),r),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(i){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;i.isolated||(0,n.info)("TODO: Support non-isolated groups."),i.knockout&&(0,n.warn)("Knockout groups not supported.");const d=(0,N.getCurrentTransform)(r);if(i.matrix&&r.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let f=n.Util.getAxialAlignedBoundingBox(i.bbox,(0,N.getCurrentTransform)(r));const l=[0,0,r.canvas.width,r.canvas.height];f=n.Util.intersect(f,l)||[0,0,0,0];const w=Math.floor(f[0]),b=Math.floor(f[1]);let _=Math.max(Math.ceil(f[2])-w,1),u=Math.max(Math.ceil(f[3])-b,1),o=1,h=1;_>R&&(o=_/R,_=R),u>R&&(h=u/R,u=R),this.current.startNewPathAndClipBox([0,0,_,u]);let s="groupAt"+this.groupLevel;i.smask&&(s+="_smask_"+this.smaskCounter++%2);const a=this.cachedCanvases.getCanvas(s,_,u),g=a.context;g.scale(1/o,1/h),g.translate(-w,-b),g.transform(...d),i.smask?this.smaskStack.push({canvas:a.canvas,context:g,offsetX:w,offsetY:b,scaleX:o,scaleY:h,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}):(r.setTransform(1,0,0,1,0,0),r.translate(w,b),r.scale(o,h),r.save()),It(r,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(i){if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,d=this.groupStack.pop();if(this.ctx=d,this.ctx.imageSmoothingEnabled=!1,i.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const f=(0,N.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...f);const l=n.Util.getAxialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],f);this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(i,r,d,f,l){if(I(this,oe,kn).call(this),St(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(r)&&r.length===4){const w=r[2]-r[0],b=r[3]-r[1];if(l&&this.annotationCanvasMap){d=d.slice(),d[4]-=r[0],d[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=w,r[3]=b;const[_,u]=n.Util.singularValueDecompose2dScale((0,N.getCurrentTransform)(this.ctx)),{viewportScale:o}=this,h=Math.ceil(w*this.outputScaleX*o),s=Math.ceil(b*this.outputScaleY*o);this.annotationCanvas=this.canvasFactory.create(h,s);const{canvas:a,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(i,a),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(_,0,0,-u,0,b*u),St(this.ctx)}else St(this.ctx),this.ctx.rect(r[0],r[1],w,b),this.ctx.clip(),this.endPath()}this.current=new Nt(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...d),this.transform(...f)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),I(this,se,In).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(i){if(!this.contentVisible)return;const r=i.count;i=this.getObject(i.data,i),i.count=r;const d=this.ctx,f=this.processingType3;if(f&&(f.compiled===void 0&&(f.compiled=Ct(i)),f.compiled)){f.compiled(d);return}const l=this._createMaskCanvas(i),w=l.canvas;d.save(),d.setTransform(1,0,0,1,0,0),d.drawImage(w,l.offsetX,l.offsetY),d.restore(),this.compose()}paintImageMaskXObjectRepeat(i,r,d=0,f=0,l,w){if(!this.contentVisible)return;i=this.getObject(i.data,i);const b=this.ctx;b.save();const _=(0,N.getCurrentTransform)(b);b.transform(r,d,f,l,0,0);const u=this._createMaskCanvas(i);b.setTransform(1,0,0,1,u.offsetX-_[4],u.offsetY-_[5]);for(let o=0,h=w.length;o<h;o+=2){const s=n.Util.transform(_,[r,d,f,l,w[o],w[o+1]]),[a,g]=n.Util.applyTransform([0,0],s);b.drawImage(u.canvas,a,g)}b.restore(),this.compose()}paintImageMaskXObjectGroup(i){if(!this.contentVisible)return;const r=this.ctx,d=this.current.fillColor,f=this.current.patternFill;for(const l of i){const{data:w,width:b,height:_,transform:u}=l,o=this.cachedCanvases.getCanvas("maskCanvas",b,_),h=o.context;h.save();const s=this.getObject(w,l);Tt(h,s),h.globalCompositeOperation="source-in",h.fillStyle=f?d.getPattern(h,this,(0,N.getCurrentTransformInverse)(r),A.FILL):d,h.fillRect(0,0,b,_),h.restore(),r.save(),r.transform(...u),r.scale(1,-1),Dt(r,o.canvas,0,0,b,_,0,-1,1,1),r.restore()}this.compose()}paintImageXObject(i){if(!this.contentVisible)return;const r=this.getObject(i);if(!r){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(r)}paintImageXObjectRepeat(i,r,d,f){if(!this.contentVisible)return;const l=this.getObject(i);if(!l){(0,n.warn)("Dependent image isn't ready yet");return}const w=l.width,b=l.height,_=[];for(let u=0,o=f.length;u<o;u+=2)_.push({transform:[r,0,0,d,f[u],f[u+1]],x:0,y:0,w,h:b});this.paintInlineImageXObjectGroup(l,_)}applyTransferMapsToCanvas(i){return this.current.transferMaps!=="none"&&(i.filter=this.current.transferMaps,i.drawImage(i.canvas,0,0),i.filter="none"),i.canvas}applyTransferMapsToBitmap(i){if(this.current.transferMaps==="none")return i.bitmap;const{bitmap:r,width:d,height:f}=i,l=this.cachedCanvases.getCanvas("inlineImage",d,f),w=l.context;return w.filter=this.current.transferMaps,w.drawImage(r,0,0),w.filter="none",l.canvas}paintInlineImageXObject(i){if(!this.contentVisible)return;const r=i.width,d=i.height,f=this.ctx;if(this.save(),!n.isNodeJS){const{filter:b}=f;b!=="none"&&b!==""&&(f.filter="none")}f.scale(1/r,-1/d);let l;if(i.bitmap)l=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)l=i;else{const b=this.cachedCanvases.getCanvas("inlineImage",r,d).context;wt(b,i),l=this.applyTransferMapsToCanvas(b)}const w=this._scaleImage(l,(0,N.getCurrentTransformInverse)(f));f.imageSmoothingEnabled=Kt((0,N.getCurrentTransform)(f),i.interpolate),Dt(f,w.img,0,0,w.paintWidth,w.paintHeight,0,-d,r,d),this.compose(),this.restore()}paintInlineImageXObjectGroup(i,r){if(!this.contentVisible)return;const d=this.ctx;let f;if(i.bitmap)f=i.bitmap;else{const l=i.width,w=i.height,b=this.cachedCanvases.getCanvas("inlineImage",l,w).context;wt(b,i),f=this.applyTransferMapsToCanvas(b)}for(const l of r)d.save(),d.transform(...l.transform),d.scale(1,-1),Dt(d,f,l.x,l.y,l.w,l.h,0,-1,1,1),d.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(i){}markPointProps(i,r){}beginMarkedContent(i){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(i,r){i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(i){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const d=this.ctx;this.pendingClip&&(r||(this.pendingClip===he?d.clip("evenodd"):d.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),d.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const i=(0,N.getCurrentTransform)(this.ctx);if(i[1]===0&&i[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(i[0]),Math.abs(i[3]));else{const r=Math.abs(i[0]*i[3]-i[2]*i[1]),d=Math.hypot(i[0],i[2]),f=Math.hypot(i[1],i[3]);this._cachedGetSinglePixelWidth=Math.max(d,f)/r}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:i}=this.current,{a:r,b:d,c:f,d:l}=this.ctx.getTransform();let w,b;if(d===0&&f===0){const _=Math.abs(r),u=Math.abs(l);if(_===u)if(i===0)w=b=1/_;else{const o=_*i;w=b=o<1?1/o:1}else if(i===0)w=1/_,b=1/u;else{const o=_*i,h=u*i;w=o<1?1/o:1,b=h<1?1/h:1}}else{const _=Math.abs(r*l-d*f),u=Math.hypot(r,d),o=Math.hypot(f,l);if(i===0)w=o/_,b=u/_;else{const h=i*_;w=o>h?o/h:1,b=u>h?u/h:1}}this._cachedScaleForStroking[0]=w,this._cachedScaleForStroking[1]=b}return this._cachedScaleForStroking}rescaleAndStroke(i){const{ctx:r}=this,{lineWidth:d}=this.current,[f,l]=this.getScaleForStroking();if(r.lineWidth=d||1,f===1&&l===1){r.stroke();return}const w=r.getLineDash();if(i&&r.save(),r.scale(f,l),w.length>0){const b=Math.max(f,l);r.setLineDash(w.map(_=>_/b)),r.lineDashOffset/=b}r.stroke(),i&&r.restore()}isContentVisible(){for(let i=this.markedContentStack.length-1;i>=0;i--)if(!this.markedContentStack[i].visible)return!1;return!0}};oe=new WeakSet,kn=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},se=new WeakSet,In=function(){if(this.pageColors){const i=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(i!=="none"){const r=this.ctx.filter;this.ctx.filter=i,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=r}}};let me=ne;for(const lt in n.OPS)me.prototype[lt]!==void 0&&(me.prototype[n.OPS[lt]]=me.prototype[lt])},419:(v,U,x)=>{var It,St,rt,bt,Lt,Pt,qt,Yi,re,Qi,ce,Ji,me,Ln,oe,Ys,se,Qs,ne,bs,i,ys;x.d(U,{DOMCMapReaderFactory:()=>P,DOMCanvasFactory:()=>B,DOMFilterFactory:()=>ot,DOMSVGFactory:()=>j,DOMStandardFontDataFactory:()=>tt,PDFDateString:()=>Q,PageViewport:()=>C,PixelsPerInch:()=>S,RenderingCancelledException:()=>q,StatTimer:()=>R,fetchData:()=>F,getColorValues:()=>Dt,getCurrentTransform:()=>Ct,getCurrentTransformInverse:()=>Nt,getFilenameFromUrl:()=>ut,getPdfFilenameFromUrl:()=>st,getRGB:()=>yt,getXfaPageViewport:()=>at,isDataScheme:()=>W,isPdfFile:()=>it,isValidFetchUrl:()=>K,noContextMenu:()=>$,setLayerDimensions:()=>wt});var n=x(583),N=x(292);const A="http://www.w3.org/2000/svg",Tt=class Tt{};be(Tt,"CSS",96),be(Tt,"PDF",72),be(Tt,"PDF_TO_CSS_UNITS",Tt.CSS/Tt.PDF);let S=Tt;class ot extends n.BaseFilterFactory{constructor({docId:l,ownerDocument:w=globalThis.document}={}){super();c(this,qt);c(this,re);c(this,ce);c(this,me);c(this,oe);c(this,se);c(this,ne);c(this,i);c(this,It,void 0);c(this,St,void 0);c(this,rt,void 0);c(this,bt,void 0);c(this,Lt,void 0);c(this,Pt,0);D(this,rt,l),D(this,bt,w)}addFilter(l){if(!l)return"none";let w=t(this,qt,Yi).get(l);if(w)return w;let b,_,u,o;if(l.length===1){const g=l[0],k=new Array(256);for(let y=0;y<256;y++)k[y]=g[y]/255;o=b=_=u=k.join(",")}else{const[g,k,y]=l,X=new Array(256),Z=new Array(256),V=new Array(256);for(let et=0;et<256;et++)X[et]=g[et]/255,Z[et]=k[et]/255,V[et]=y[et]/255;b=X.join(","),_=Z.join(","),u=V.join(","),o=`${b}${_}${u}`}if(w=t(this,qt,Yi).get(o),w)return t(this,qt,Yi).set(l,w),w;const h=`g_${t(this,rt)}_transfer_map_${fi(this,Pt)._++}`,s=`url(#${h})`;t(this,qt,Yi).set(l,s),t(this,qt,Yi).set(o,s);const a=I(this,oe,Ys).call(this,h);return I(this,ne,bs).call(this,b,_,u,a),s}addHCMFilter(l,w){var X;const b=`${l}-${w}`,_="base";let u=t(this,re,Qi).get(_);if((u==null?void 0:u.key)===b||(u?((X=u.filter)==null||X.remove(),u.key=b,u.url="none",u.filter=null):(u={key:b,url:"none",filter:null},t(this,re,Qi).set(_,u)),!l||!w))return u.url;const o=I(this,i,ys).call(this,l);l=N.Util.makeHexColor(...o);const h=I(this,i,ys).call(this,w);if(w=N.Util.makeHexColor(...h),t(this,ce,Ji).style.color="",l==="#000000"&&w==="#ffffff"||l===w)return u.url;const s=new Array(256);for(let Z=0;Z<=255;Z++){const V=Z/255;s[Z]=V<=.03928?V/12.92:((V+.055)/1.055)**2.4}const a=s.join(","),g=`g_${t(this,rt)}_hcm_filter`,k=u.filter=I(this,oe,Ys).call(this,g);I(this,ne,bs).call(this,a,a,a,k),I(this,me,Ln).call(this,k);const y=(Z,V)=>{const et=o[Z]/255,p=h[Z]/255,M=new Array(V+1);for(let J=0;J<=V;J++)M[J]=et+J/V*(p-et);return M.join(",")};return I(this,ne,bs).call(this,y(0,5),y(1,5),y(2,5),k),u.url=`url(#${g})`,u.url}addHighlightHCMFilter(l,w,b,_,u){var p;const o=`${w}-${b}-${_}-${u}`;let h=t(this,re,Qi).get(l);if((h==null?void 0:h.key)===o||(h?((p=h.filter)==null||p.remove(),h.key=o,h.url="none",h.filter=null):(h={key:o,url:"none",filter:null},t(this,re,Qi).set(l,h)),!w||!b))return h.url;const[s,a]=[w,b].map(I(this,i,ys).bind(this));let g=Math.round(.2126*s[0]+.7152*s[1]+.0722*s[2]),k=Math.round(.2126*a[0]+.7152*a[1]+.0722*a[2]),[y,X]=[_,u].map(I(this,i,ys).bind(this));k<g&&([g,k,y,X]=[k,g,X,y]),t(this,ce,Ji).style.color="";const Z=(M,J,E)=>{const m=new Array(256),z=(k-g)/E,Y=M/255,ht=(J-M)/(255*E);let gt=0;for(let xt=0;xt<=E;xt++){const Rt=Math.round(g+xt*z),Xt=Y+xt*ht;for(let ie=gt;ie<=Rt;ie++)m[ie]=Xt;gt=Rt+1}for(let xt=gt;xt<256;xt++)m[xt]=m[gt-1];return m.join(",")},V=`g_${t(this,rt)}_hcm_${l}_filter`,et=h.filter=I(this,oe,Ys).call(this,V);return I(this,me,Ln).call(this,et),I(this,ne,bs).call(this,Z(y[0],X[0],5),Z(y[1],X[1],5),Z(y[2],X[2],5),et),h.url=`url(#${V})`,h.url}destroy(l=!1){l&&t(this,re,Qi).size!==0||(t(this,St)&&(t(this,St).parentNode.parentNode.remove(),D(this,St,null)),t(this,It)&&(t(this,It).clear(),D(this,It,null)),D(this,Pt,0))}}It=new WeakMap,St=new WeakMap,rt=new WeakMap,bt=new WeakMap,Lt=new WeakMap,Pt=new WeakMap,qt=new WeakSet,Yi=function(){return t(this,It)||D(this,It,new Map)},re=new WeakSet,Qi=function(){return t(this,Lt)||D(this,Lt,new Map)},ce=new WeakSet,Ji=function(){if(!t(this,St)){const l=t(this,bt).createElement("div"),{style:w}=l;w.visibility="hidden",w.contain="strict",w.width=w.height=0,w.position="absolute",w.top=w.left=0,w.zIndex=-1;const b=t(this,bt).createElementNS(A,"svg");b.setAttribute("width",0),b.setAttribute("height",0),D(this,St,t(this,bt).createElementNS(A,"defs")),l.append(b),b.append(t(this,St)),t(this,bt).body.append(l)}return t(this,St)},me=new WeakSet,Ln=function(l){const w=t(this,bt).createElementNS(A,"feColorMatrix");w.setAttribute("type","matrix"),w.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),l.append(w)},oe=new WeakSet,Ys=function(l){const w=t(this,bt).createElementNS(A,"filter");return w.setAttribute("color-interpolation-filters","sRGB"),w.setAttribute("id",l),t(this,ce,Ji).append(w),w},se=new WeakSet,Qs=function(l,w,b){const _=t(this,bt).createElementNS(A,w);_.setAttribute("type","discrete"),_.setAttribute("tableValues",b),l.append(_)},ne=new WeakSet,bs=function(l,w,b,_){const u=t(this,bt).createElementNS(A,"feComponentTransfer");_.append(u),I(this,se,Qs).call(this,u,"feFuncR",l),I(this,se,Qs).call(this,u,"feFuncG",w),I(this,se,Qs).call(this,u,"feFuncB",b)},i=new WeakSet,ys=function(l){return t(this,ce,Ji).style.color=l,yt(getComputedStyle(t(this,ce,Ji)).getPropertyValue("color"))};class B extends n.BaseCanvasFactory{constructor({ownerDocument:f=globalThis.document}={}){super(),this._document=f}_createCanvas(f,l){const w=this._document.createElement("canvas");return w.width=f,w.height=l,w}}async function F(d,f="text"){if(K(d,document.baseURI)){const l=await fetch(d);if(!l.ok)throw new Error(l.statusText);switch(f){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"json":return l.json()}return l.text()}return new Promise((l,w)=>{const b=new XMLHttpRequest;b.open("GET",d,!0),b.responseType=f,b.onreadystatechange=()=>{if(b.readyState===XMLHttpRequest.DONE){if(b.status===200||b.status===0){switch(f){case"arraybuffer":case"blob":case"json":l(b.response);return}l(b.responseText);return}w(new Error(b.statusText))}},b.send(null)})}class P extends n.BaseCMapReaderFactory{_fetchData(f,l){return F(f,this.isCompressed?"arraybuffer":"text").then(w=>({cMapData:w instanceof ArrayBuffer?new Uint8Array(w):(0,N.stringToBytes)(w),compressionType:l}))}}class tt extends n.BaseStandardFontDataFactory{_fetchData(f){return F(f,"arraybuffer").then(l=>new Uint8Array(l))}}class j extends n.BaseSVGFactory{_createSVG(f){return document.createElementNS(A,f)}}class C{constructor({viewBox:f,scale:l,rotation:w,offsetX:b=0,offsetY:_=0,dontFlip:u=!1}){this.viewBox=f,this.scale=l,this.rotation=w,this.offsetX=b,this.offsetY=_;const o=(f[2]+f[0])/2,h=(f[3]+f[1])/2;let s,a,g,k;switch(w%=360,w<0&&(w+=360),w){case 180:s=-1,a=0,g=0,k=1;break;case 90:s=0,a=1,g=1,k=0;break;case 270:s=0,a=-1,g=-1,k=0;break;case 0:s=1,a=0,g=0,k=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(g=-g,k=-k);let y,X,Z,V;s===0?(y=Math.abs(h-f[1])*l+b,X=Math.abs(o-f[0])*l+_,Z=(f[3]-f[1])*l,V=(f[2]-f[0])*l):(y=Math.abs(o-f[0])*l+b,X=Math.abs(h-f[1])*l+_,Z=(f[2]-f[0])*l,V=(f[3]-f[1])*l),this.transform=[s*l,a*l,g*l,k*l,y-s*l*o-g*l*h,X-a*l*o-k*l*h],this.width=Z,this.height=V}get rawDims(){const{viewBox:f}=this;return(0,N.shadow)(this,"rawDims",{pageWidth:f[2]-f[0],pageHeight:f[3]-f[1],pageX:f[0],pageY:f[1]})}clone({scale:f=this.scale,rotation:l=this.rotation,offsetX:w=this.offsetX,offsetY:b=this.offsetY,dontFlip:_=!1}={}){return new C({viewBox:this.viewBox.slice(),scale:f,rotation:l,offsetX:w,offsetY:b,dontFlip:_})}convertToViewportPoint(f,l){return N.Util.applyTransform([f,l],this.transform)}convertToViewportRectangle(f){const l=N.Util.applyTransform([f[0],f[1]],this.transform),w=N.Util.applyTransform([f[2],f[3]],this.transform);return[l[0],l[1],w[0],w[1]]}convertToPdfPoint(f,l){return N.Util.applyInverseTransform([f,l],this.transform)}}class q extends N.BaseException{constructor(f,l=0){super(f,"RenderingCancelledException"),this.extraDelay=l}}function W(d){const f=d.length;let l=0;for(;l<f&&d[l].trim()==="";)l++;return d.substring(l,l+5).toLowerCase()==="data:"}function it(d){return typeof d=="string"&&/\.pdf$/i.test(d)}function ut(d,f=!1){return f||([d]=d.split(/[#?]/,1)),d.substring(d.lastIndexOf("/")+1)}function st(d,f="document.pdf"){if(typeof d!="string")return f;if(W(d))return(0,N.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),f;const l=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,w=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,b=l.exec(d);let _=w.exec(b[1])||w.exec(b[2])||w.exec(b[3]);if(_&&(_=_[0],_.includes("%")))try{_=w.exec(decodeURIComponent(_))[0]}catch{}return _||f}class R{constructor(){be(this,"started",Object.create(null));be(this,"times",[])}time(f){f in this.started&&(0,N.warn)(`Timer is already running for ${f}`),this.started[f]=Date.now()}timeEnd(f){f in this.started||(0,N.warn)(`Timer has not been started for ${f}`),this.times.push({name:f,start:this.started[f],end:Date.now()}),delete this.started[f]}toString(){const f=[];let l=0;for(const{name:w}of this.times)l=Math.max(w.length,l);for(const{name:w,start:b,end:_}of this.times)f.push(`${w.padEnd(l)} ${_-b}ms
`);return f.join("")}}function K(d,f){try{const{protocol:l}=f?new URL(d,f):new URL(d);return l==="http:"||l==="https:"}catch{return!1}}function $(d){d.preventDefault()}let O;class Q{static toDateObject(f){if(!f||typeof f!="string")return null;O||(O=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const l=O.exec(f);if(!l)return null;const w=parseInt(l[1],10);let b=parseInt(l[2],10);b=b>=1&&b<=12?b-1:0;let _=parseInt(l[3],10);_=_>=1&&_<=31?_:1;let u=parseInt(l[4],10);u=u>=0&&u<=23?u:0;let o=parseInt(l[5],10);o=o>=0&&o<=59?o:0;let h=parseInt(l[6],10);h=h>=0&&h<=59?h:0;const s=l[7]||"Z";let a=parseInt(l[8],10);a=a>=0&&a<=23?a:0;let g=parseInt(l[9],10)||0;return g=g>=0&&g<=59?g:0,s==="-"?(u+=a,o+=g):s==="+"&&(u-=a,o-=g),new Date(Date.UTC(w,b,_,u,o,h))}}function at(d,{scale:f=1,rotation:l=0}){const{width:w,height:b}=d.attributes.style,_=[0,0,parseInt(w),parseInt(b)];return new C({viewBox:_,scale:f,rotation:l})}function yt(d){if(d.startsWith("#")){const f=parseInt(d.slice(1),16);return[(f&16711680)>>16,(f&65280)>>8,f&255]}return d.startsWith("rgb(")?d.slice(4,-1).split(",").map(f=>parseInt(f)):d.startsWith("rgba(")?d.slice(5,-1).split(",").map(f=>parseInt(f)).slice(0,3):((0,N.warn)(`Not a valid color format: "${d}"`),[0,0,0])}function Dt(d){const f=document.createElement("span");f.style.visibility="hidden",document.body.append(f);for(const l of d.keys()){f.style.color=l;const w=window.getComputedStyle(f).color;d.set(l,yt(w))}f.remove()}function Ct(d){const{a:f,b:l,c:w,d:b,e:_,f:u}=d.getTransform();return[f,l,w,b,_,u]}function Nt(d){const{a:f,b:l,c:w,d:b,e:_,f:u}=d.getTransform().invertSelf();return[f,l,w,b,_,u]}function wt(d,f,l=!1,w=!0){if(f instanceof C){const{pageWidth:b,pageHeight:_}=f.rawDims,{style:u}=d,o=N.FeatureTest.isCSSRoundSupported,h=`var(--scale-factor) * ${b}px`,s=`var(--scale-factor) * ${_}px`,a=o?`round(${h}, 1px)`:`calc(${h})`,g=o?`round(${s}, 1px)`:`calc(${s})`;!l||f.rotation%180===0?(u.width=a,u.height=g):(u.width=g,u.height=a)}w&&d.setAttribute("data-main-rotation",f.rotation)}},47:(v,U,x)=>{var S,ot,B,F,P,Pn,j,Rn,q,Vr;x.d(U,{DrawLayer:()=>A});var n=x(419),N=x(292);const it=class it{constructor({pageIndex:st}){c(this,j);c(this,q);c(this,S,null);c(this,ot,0);c(this,B,new Map);c(this,F,new Map);this.pageIndex=st}setParent(st){if(!t(this,S)){D(this,S,st);return}if(t(this,S)!==st){if(t(this,B).size>0)for(const R of t(this,B).values())R.remove(),st.append(R);D(this,S,st)}}static get _svgFactory(){return(0,N.shadow)(this,"_svgFactory",new n.DOMSVGFactory)}highlight(st,R,K,$=!1){const O=fi(this,ot)._++,Q=I(this,j,Rn).call(this,st.box);Q.classList.add("highlight"),st.free&&Q.classList.add("free");const at=it._svgFactory.createElement("defs");Q.append(at);const yt=it._svgFactory.createElement("path");at.append(yt);const Dt=`path_p${this.pageIndex}_${O}`;yt.setAttribute("id",Dt),yt.setAttribute("d",st.toSVGPath()),$&&t(this,F).set(O,yt);const Ct=I(this,q,Vr).call(this,at,Dt),Nt=it._svgFactory.createElement("use");return Q.append(Nt),Q.setAttribute("fill",R),Q.setAttribute("fill-opacity",K),Nt.setAttribute("href",`#${Dt}`),t(this,B).set(O,Q),{id:O,clipPathId:`url(#${Ct})`}}highlightOutline(st){const R=fi(this,ot)._++,K=I(this,j,Rn).call(this,st.box);K.classList.add("highlightOutline");const $=it._svgFactory.createElement("defs");K.append($);const O=it._svgFactory.createElement("path");$.append(O);const Q=`path_p${this.pageIndex}_${R}`;O.setAttribute("id",Q),O.setAttribute("d",st.toSVGPath()),O.setAttribute("vector-effect","non-scaling-stroke");let at;if(st.free){K.classList.add("free");const Ct=it._svgFactory.createElement("mask");$.append(Ct),at=`mask_p${this.pageIndex}_${R}`,Ct.setAttribute("id",at),Ct.setAttribute("maskUnits","objectBoundingBox");const Nt=it._svgFactory.createElement("rect");Ct.append(Nt),Nt.setAttribute("width","1"),Nt.setAttribute("height","1"),Nt.setAttribute("fill","white");const wt=it._svgFactory.createElement("use");Ct.append(wt),wt.setAttribute("href",`#${Q}`),wt.setAttribute("stroke","none"),wt.setAttribute("fill","black"),wt.setAttribute("fill-rule","nonzero"),wt.classList.add("mask")}const yt=it._svgFactory.createElement("use");K.append(yt),yt.setAttribute("href",`#${Q}`),at&&yt.setAttribute("mask",`url(#${at})`);const Dt=yt.cloneNode();return K.append(Dt),yt.classList.add("mainOutline"),Dt.classList.add("secondaryOutline"),t(this,B).set(R,K),R}finalizeLine(st,R){const K=t(this,F).get(st);t(this,F).delete(st),this.updateBox(st,R.box),K.setAttribute("d",R.toSVGPath())}updateLine(st,R){t(this,B).get(st).firstChild.firstChild.setAttribute("d",R.toSVGPath())}removeFreeHighlight(st){this.remove(st),t(this,F).delete(st)}updatePath(st,R){t(this,F).get(st).setAttribute("d",R.toSVGPath())}updateBox(st,R){var K;I(K=it,P,Pn).call(K,t(this,B).get(st),R)}show(st,R){t(this,B).get(st).classList.toggle("hidden",!R)}rotate(st,R){t(this,B).get(st).setAttribute("data-main-rotation",R)}changeColor(st,R){t(this,B).get(st).setAttribute("fill",R)}changeOpacity(st,R){t(this,B).get(st).setAttribute("fill-opacity",R)}addClass(st,R){t(this,B).get(st).classList.add(R)}removeClass(st,R){t(this,B).get(st).classList.remove(R)}remove(st){t(this,S)!==null&&(t(this,B).get(st).remove(),t(this,B).delete(st))}destroy(){D(this,S,null);for(const st of t(this,B).values())st.remove();t(this,B).clear()}};S=new WeakMap,ot=new WeakMap,B=new WeakMap,F=new WeakMap,P=new WeakSet,Pn=function(st,{x:R=0,y:K=0,width:$=1,height:O=1}={}){const{style:Q}=st;Q.top=`${100*K}%`,Q.left=`${100*R}%`,Q.width=`${100*$}%`,Q.height=`${100*O}%`},j=new WeakSet,Rn=function(st){var K;const R=it._svgFactory.create(1,1,!0);return t(this,S).append(R),R.setAttribute("aria-hidden",!0),I(K=it,P,Pn).call(K,R,st),R},q=new WeakSet,Vr=function(st,R){const K=it._svgFactory.createElement("clipPath");st.append(K);const $=`clip_${R}`;K.setAttribute("id",$),K.setAttribute("clipPathUnits","objectBoundingBox");const O=it._svgFactory.createElement("use");return K.append(O),O.setAttribute("href",`#${R}`),O.classList.add("clip"),$},c(it,P);let A=it},731:(v,U,x)=>{var it,ut,st,R,K,$,O,Q,at,yt,Dt,Kr,Nt,Yr,Tt,Qr,St,Js,bt,Zs,Pt,tn,Kt,Jr,_e,Fn,he,Zr,oe,Ce,se,Ee,ne,lt,i,r,d,f,l,w,b,_,u,o,h,s,a,g,Dn,y,Nn,Z,ta,et,ea,M,ia,E,On,z,As,ht,Zi,xt,sa,Xt,en,ee,ws,ve,na,fe,ra,ae,aa,T,oa,ft,Et,_t,Wt,Ut,Ot,Qt,Gt,Mt,Bt,Zt,ue,de,Se,Me,Je,la,Ve,ha,Ge,ca,mt,da,jt,Hn,te,ua,Ae,Bn,He,pa,$e,ga,Ti,fa,Fs,ma,Ds,va,ci,Di,ss,jn,Hi,sn,Bi,nn,vi,ts,ns,zn,ji,rn,Ns,ba,rs,Gn,Os,ya,Hs,Aa,as,qn,zi,an,Mi,xs,qe,Ue,bi,di,yi,Gi,ai,ki,oi,si,os,Ii,_s,Li,Es,qi,on,ls,Un,Bs,wa,js,xa,hs,$n,Ui,ln,zs,_a,Pi,$i,li,Ri,ui,pi,gi,Ze,Ai,Wi,Xi,Ye,pe,wi,Gs,Ea,ds,Wn,us,Xn,ps,Vn,Vi,hn;x.d(U,{AnnotationEditorLayer:()=>W});var n=x(292),N=x(310),A=x(830),S=x(976);const ot=/\r\n?|\n/g,zt=class zt extends N.AnnotationEditor{constructor(e){super({...e,name:"freeTextEditor"});c(this,Dt);c(this,Nt);c(this,Tt);c(this,St);c(this,Pt);c(this,Kt);c(this,he);c(this,it,this.editorDivBlur.bind(this));c(this,ut,this.editorDivFocus.bind(this));c(this,st,this.editorDivInput.bind(this));c(this,R,this.editorDivKeydown.bind(this));c(this,K,this.editorDivPaste.bind(this));c(this,$,void 0);c(this,O,"");c(this,Q,`${this.id}-editor`);c(this,at,void 0);c(this,yt,null);D(this,$,e.color||zt._defaultColor||N.AnnotationEditor._defaultLineColor),D(this,at,e.fontSize||zt._defaultFontSize)}static get _keyboardManager(){const e=zt.prototype,L=At=>At.isEmpty(),ct=A.AnnotationEditorUIManager.TRANSLATE_SMALL,pt=A.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new A.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-ct,0],checker:L}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-pt,0],checker:L}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[ct,0],checker:L}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[pt,0],checker:L}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-ct],checker:L}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-pt],checker:L}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,ct],checker:L}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,pt],checker:L}]]))}static initialize(e,L){N.AnnotationEditor.initialize(e,L,{strings:["pdfjs-free-text-default-content"]});const ct=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ct.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,L){switch(e){case n.AnnotationEditorParamsType.FREETEXT_SIZE:zt._defaultFontSize=L;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:zt._defaultColor=L;break}}updateParams(e,L){switch(e){case n.AnnotationEditorParamsType.FREETEXT_SIZE:I(this,Dt,Kr).call(this,L);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:I(this,Nt,Yr).call(this,L);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,zt._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,zt._defaultColor||N.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,at)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,$)]]}_translateEmpty(e,L){this._uiManager.translateSelectedEditors(e,L,!0)}getInitialTranslation(){const e=this.parentScale;return[-zt._internalPadding*e,-(zt._internalPadding+t(this,at))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,R)),this.editorDiv.addEventListener("focus",t(this,ut)),this.editorDiv.addEventListener("blur",t(this,it)),this.editorDiv.addEventListener("input",t(this,st)),this.editorDiv.addEventListener("paste",t(this,K)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,Q)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",t(this,R)),this.editorDiv.removeEventListener("focus",t(this,ut)),this.editorDiv.removeEventListener("blur",t(this,it)),this.editorDiv.removeEventListener("input",t(this,st)),this.editorDiv.removeEventListener("paste",t(this,K)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=t(this,O),L=D(this,O,I(this,Tt,Qr).call(this).trimEnd());if(e===L)return;const ct=pt=>{if(D(this,O,pt),!pt){this.remove();return}I(this,Pt,tn).call(this),this._uiManager.rebuild(this),I(this,St,Js).call(this)};this.addCommands({cmd:()=>{ct(L)},undo:()=>{ct(e)},mustExec:!1}),I(this,St,Js).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){zt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,L;this.width&&(e=this.x,L=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,Q)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),N.AnnotationEditor._l10nPromise.get("pdfjs-free-text-default-content").then(pt=>{var At;return(At=this.editorDiv)==null?void 0:At.setAttribute("default-content",pt)}),this.editorDiv.contentEditable=!0;const{style:ct}=this.editorDiv;if(ct.fontSize=`calc(${t(this,at)}px * var(--scale-factor))`,ct.color=t(this,$),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,A.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[pt,At]=this.parentDimensions;if(this.annotationElementId){const{position:Ft}=t(this,yt);let[$t,kt]=this.getInitialTranslation();[$t,kt]=this.pageTranslationToScreen($t,kt);const[Yt,Vt]=this.pageDimensions,[we,xe]=this.pageTranslation;let Te,ke;switch(this.rotation){case 0:Te=e+(Ft[0]-we)/Yt,ke=L+this.height-(Ft[1]-xe)/Vt;break;case 90:Te=e+(Ft[0]-we)/Yt,ke=L-(Ft[1]-xe)/Vt,[$t,kt]=[kt,-$t];break;case 180:Te=e-this.width+(Ft[0]-we)/Yt,ke=L-(Ft[1]-xe)/Vt,[$t,kt]=[-$t,-kt];break;case 270:Te=e+(Ft[0]-we-this.height*Vt)/Yt,ke=L+(Ft[1]-xe-this.width*Yt)/Vt,[$t,kt]=[-kt,$t];break}this.setAt(Te*pt,ke*At,$t,kt)}else this.setAt(e*pt,L*At,this.width*pt,this.height*At);I(this,Pt,tn).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var Te,ke,ze;const L=e.clipboardData||window.clipboardData,{types:ct}=L;if(ct.length===1&&ct[0]==="text/plain")return;e.preventDefault();const pt=I(Te=zt,_e,Fn).call(Te,L.getData("text")||"").replaceAll(ot,`
`);if(!pt)return;const At=window.getSelection();if(!At.rangeCount)return;this.editorDiv.normalize(),At.deleteFromDocument();const Ft=At.getRangeAt(0);if(!pt.includes(`
`)){Ft.insertNode(document.createTextNode(pt)),this.editorDiv.normalize(),At.collapseToStart();return}const{startContainer:$t,startOffset:kt}=Ft,Yt=[],Vt=[];if($t.nodeType===Node.TEXT_NODE){const De=$t.parentElement;if(Vt.push($t.nodeValue.slice(kt).replaceAll(ot,"")),De!==this.editorDiv){let je=Yt;for(const Be of this.editorDiv.childNodes){if(Be===De){je=Vt;continue}je.push(I(ke=zt,bt,Zs).call(ke,Be))}}Yt.push($t.nodeValue.slice(0,kt).replaceAll(ot,""))}else if($t===this.editorDiv){let De=Yt,je=0;for(const Be of this.editorDiv.childNodes)je++===kt&&(De=Vt),De.push(I(ze=zt,bt,Zs).call(ze,Be))}D(this,O,`${Yt.join(`
`)}${pt}${Vt.join(`
`)}`),I(this,Pt,tn).call(this);const we=new Range;let xe=Yt.reduce((De,je)=>De+je.length,0);for(const{firstChild:De}of this.editorDiv.childNodes)if(De.nodeType===Node.TEXT_NODE){const je=De.nodeValue.length;if(xe<=je){we.setStart(De,xe),we.setEnd(De,xe);break}xe-=je}At.removeAllRanges(),At.addRange(we)}get contentDiv(){return this.editorDiv}static deserialize(e,L,ct){var Ft;let pt=null;if(e instanceof S.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:$t,fontColor:kt},rect:Yt,rotation:Vt,id:we},textContent:xe,textPosition:Te,parent:{page:{pageNumber:ke}}}=e;if(!xe||xe.length===0)return null;pt=e={annotationType:n.AnnotationEditorType.FREETEXT,color:Array.from(kt),fontSize:$t,value:xe.join(`
`),position:Te,pageIndex:ke-1,rect:Yt,rotation:Vt,id:we,deleted:!1}}const At=super.deserialize(e,L,ct);return D(At,at,e.fontSize),D(At,$,n.Util.makeHexColor(...e.color)),D(At,O,I(Ft=zt,_e,Fn).call(Ft,e.value)),At.annotationElementId=e.id||null,D(At,yt,pt),At}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const L=zt._internalPadding*this.parentScale,ct=this.getRect(L,L),pt=N.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,$)),At={annotationType:n.AnnotationEditorType.FREETEXT,color:pt,fontSize:t(this,at),value:I(this,Kt,Jr).call(this),pageIndex:this.pageIndex,rect:ct,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?At:this.annotationElementId&&!I(this,he,Zr).call(this,At)?null:(At.id=this.annotationElementId,At)}};it=new WeakMap,ut=new WeakMap,st=new WeakMap,R=new WeakMap,K=new WeakMap,$=new WeakMap,O=new WeakMap,Q=new WeakMap,at=new WeakMap,yt=new WeakMap,Dt=new WeakSet,Kr=function(e){const L=pt=>{this.editorDiv.style.fontSize=`calc(${pt}px * var(--scale-factor))`,this.translate(0,-(pt-t(this,at))*this.parentScale),D(this,at,pt),I(this,St,Js).call(this)},ct=t(this,at);this.addCommands({cmd:L.bind(this,e),undo:L.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Nt=new WeakSet,Yr=function(e){const L=pt=>{D(this,$,this.editorDiv.style.color=pt)},ct=t(this,$);this.addCommands({cmd:L.bind(this,e),undo:L.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Tt=new WeakSet,Qr=function(){var L;const e=[];this.editorDiv.normalize();for(const ct of this.editorDiv.childNodes)e.push(I(L=zt,bt,Zs).call(L,ct));return e.join(`
`)},St=new WeakSet,Js=function(){const[e,L]=this.parentDimensions;let ct;if(this.isAttachedToDOM)ct=this.div.getBoundingClientRect();else{const{currentLayer:pt,div:At}=this,Ft=At.style.display;At.style.display="hidden",pt.div.append(this.div),ct=At.getBoundingClientRect(),At.remove(),At.style.display=Ft}this.rotation%180===this.parentRotation%180?(this.width=ct.width/e,this.height=ct.height/L):(this.width=ct.height/e,this.height=ct.width/L),this.fixAndSetPosition()},bt=new WeakSet,Zs=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(ot,"")},Pt=new WeakSet,tn=function(){if(this.editorDiv.replaceChildren(),!!t(this,O))for(const e of t(this,O).split(`
`)){const L=document.createElement("div");L.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(L)}},Kt=new WeakSet,Jr=function(){return t(this,O).replaceAll("\xA0"," ")},_e=new WeakSet,Fn=function(e){return e.replaceAll(" ","\xA0")},he=new WeakSet,Zr=function(e){const{value:L,fontSize:ct,color:pt,pageIndex:At}=t(this,yt);return this._hasBeenMoved||e.value!==L||e.fontSize!==ct||e.color.some((Ft,$t)=>Ft!==pt[$t])||e.pageIndex!==At},c(zt,bt),c(zt,_e),be(zt,"_freeTextDefaultContent",""),be(zt,"_internalPadding",0),be(zt,"_defaultColor",null),be(zt,"_defaultFontSize",10),be(zt,"_type","freetext"),be(zt,"_editorType",n.AnnotationEditorType.FREETEXT);let B=zt;var F=x(61),P=x(259),tt=x(419);const dt=class dt extends N.AnnotationEditor{constructor(e){super({...e,name:"highlightEditor"});c(this,g);c(this,y);c(this,Z);c(this,et);c(this,M);c(this,E);c(this,z);c(this,xt);c(this,Xt);c(this,ee);c(this,ve);c(this,fe);c(this,oe,null);c(this,Ce,0);c(this,se,void 0);c(this,Ee,null);c(this,ne,null);c(this,lt,null);c(this,i,null);c(this,r,0);c(this,d,null);c(this,f,null);c(this,l,null);c(this,w,!1);c(this,b,I(this,xt,sa).bind(this));c(this,_,null);c(this,u,void 0);c(this,o,null);c(this,h,"");c(this,s,void 0);c(this,a,"");this.color=e.color||dt._defaultColor,D(this,s,e.thickness||dt._defaultThickness),D(this,u,e.opacity||dt._defaultOpacity),D(this,se,e.boxes||null),D(this,a,e.methodOfCreation||""),D(this,h,e.text||""),this._isDraggable=!1,e.highlightId>-1?(D(this,w,!0),I(this,y,Nn).call(this,e),I(this,z,As).call(this)):(D(this,oe,e.anchorNode),D(this,Ce,e.anchorOffset),D(this,i,e.focusNode),D(this,r,e.focusOffset),I(this,g,Dn).call(this),I(this,z,As).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=dt.prototype;return(0,n.shadow)(this,"_keyboardManager",new A.KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:t(this,w)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:t(this,s),methodOfCreation:t(this,a)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,L){var ct;N.AnnotationEditor.initialize(e,L),dt._defaultColor||(dt._defaultColor=((ct=L.highlightColors)==null?void 0:ct.values().next().value)||"#fff066")}static updateDefaultParams(e,L){switch(e){case n.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:dt._defaultColor=L;break;case n.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:dt._defaultThickness=L;break}}translateInPage(e,L){}get toolbarPosition(){return t(this,_)}updateParams(e,L){switch(e){case n.AnnotationEditorParamsType.HIGHLIGHT_COLOR:I(this,Z,ta).call(this,L);break;case n.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:I(this,et,ea).call(this,L);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,dt._defaultColor],[n.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,dt._defaultThickness]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||dt._defaultColor],[n.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,t(this,s)||dt._defaultThickness],[n.AnnotationEditorParamsType.HIGHLIGHT_FREE,t(this,w)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(D(this,ne,new P.ColorPicker({editor:this})),e.addColorPicker(t(this,ne))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(I(this,ee,ws).call(this))}getBaseTranslation(){return[0,0]}getRect(e,L){return super.getRect(e,L,I(this,ee,ws).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){I(this,E,On).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(I(this,z,As).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var ct;let L=!1;this.parent&&!e?I(this,E,On).call(this):e&&(I(this,z,As).call(this,e),L=!this.parent&&((ct=this.div)==null?void 0:ct.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),L&&this.select()}rotate(e){var pt,At,Ft;const{drawLayer:L}=this.parent;let ct;t(this,w)?(e=(e-this.rotation+360)%360,ct=I(pt=dt,ht,Zi).call(pt,t(this,f).box,e)):ct=I(At=dt,ht,Zi).call(At,this,e),L.rotate(t(this,l),e),L.rotate(t(this,o),e),L.updateBox(t(this,l),ct),L.updateBox(t(this,o),I(Ft=dt,ht,Zi).call(Ft,t(this,lt).box,e))}render(){if(this.div)return this.div;const e=super.render();t(this,h)&&(e.setAttribute("aria-label",t(this,h)),e.setAttribute("role","mark")),t(this,w)?e.classList.add("free"):this.div.addEventListener("keydown",t(this,b));const L=D(this,d,document.createElement("div"));e.append(L),L.setAttribute("aria-hidden","true"),L.className="internal",L.style.clipPath=t(this,Ee);const[ct,pt]=this.parentDimensions;return this.setDims(this.width*ct,this.height*pt),(0,A.bindEvents)(this,t(this,d),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(t(this,o),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(t(this,o),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:I(this,Xt,en).call(this,!0);break;case 1:case 3:I(this,Xt,en).call(this,!1);break}}select(){var e,L;super.select(),t(this,o)&&((e=this.parent)==null||e.drawLayer.removeClass(t(this,o),"hovered"),(L=this.parent)==null||L.drawLayer.addClass(t(this,o),"selected"))}unselect(){var e;super.unselect(),t(this,o)&&((e=this.parent)==null||e.drawLayer.removeClass(t(this,o),"selected"),t(this,w)||I(this,Xt,en).call(this,!1))}get _mustFixPosition(){return!t(this,w)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(t(this,l),e),this.parent.drawLayer.show(t(this,o),e))}static startHighlighting(e,L,{target:ct,x:pt,y:At}){const{x:Ft,y:$t,width:kt,height:Yt}=ct.getBoundingClientRect(),Vt=ke=>{I(this,ae,aa).call(this,e,ke)},we={capture:!0,passive:!1},xe=ke=>{ke.preventDefault(),ke.stopPropagation()},Te=ke=>{ct.removeEventListener("pointermove",Vt),window.removeEventListener("blur",Te),window.removeEventListener("pointerup",Te),window.removeEventListener("pointerdown",xe,we),window.removeEventListener("contextmenu",tt.noContextMenu),I(this,T,oa).call(this,e,ke)};window.addEventListener("blur",Te),window.addEventListener("pointerup",Te),window.addEventListener("pointerdown",xe,we),window.addEventListener("contextmenu",tt.noContextMenu),ct.addEventListener("pointermove",Vt),this._freeHighlight=new F.FreeOutliner({x:pt,y:At},[Ft,$t,kt,Yt],e.scale,this._defaultThickness/2,L,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(e,L,ct){var ke;const pt=super.deserialize(e,L,ct),{rect:[At,Ft,$t,kt],color:Yt,quadPoints:Vt}=e;pt.color=n.Util.makeHexColor(...Yt),D(pt,u,e.opacity);const[we,xe]=pt.pageDimensions;pt.width=($t-At)/we,pt.height=(kt-Ft)/xe;const Te=D(pt,se,[]);for(let ze=0;ze<Vt.length;ze+=8)Te.push({x:(Vt[4]-$t)/we,y:(kt-(1-Vt[ze+5]))/xe,width:(Vt[ze+2]-Vt[ze])/we,height:(Vt[ze+5]-Vt[ze+1])/xe});return I(ke=pt,g,Dn).call(ke),pt}serialize(e=!1){if(this.isEmpty()||e)return null;const L=this.getRect(0,0),ct=N.AnnotationEditor._colorManager.convert(this.color);return{annotationType:n.AnnotationEditorType.HIGHLIGHT,color:ct,opacity:t(this,u),thickness:t(this,s),quadPoints:I(this,ve,na).call(this),outlines:I(this,fe,ra).call(this,L),pageIndex:this.pageIndex,rect:L,rotation:I(this,ee,ws).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};oe=new WeakMap,Ce=new WeakMap,se=new WeakMap,Ee=new WeakMap,ne=new WeakMap,lt=new WeakMap,i=new WeakMap,r=new WeakMap,d=new WeakMap,f=new WeakMap,l=new WeakMap,w=new WeakMap,b=new WeakMap,_=new WeakMap,u=new WeakMap,o=new WeakMap,h=new WeakMap,s=new WeakMap,a=new WeakMap,g=new WeakSet,Dn=function(){const e=new F.Outliner(t(this,se),.001);D(this,f,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=t(this,f).box;const L=new F.Outliner(t(this,se),.0025,.001,this._uiManager.direction==="ltr");D(this,lt,L.getOutlines());const{lastPoint:ct}=t(this,lt).box;D(this,_,[(ct[0]-this.x)/this.width,(ct[1]-this.y)/this.height])},y=new WeakSet,Nn=function({highlightOutlines:e,highlightId:L,clipPathId:ct}){var Vt,we;if(D(this,f,e),D(this,lt,e.getNewOutline(t(this,s)/2+1.5,.0025)),L>=0)D(this,l,L),D(this,Ee,ct),this.parent.drawLayer.finalizeLine(L,e),D(this,o,this.parent.drawLayer.highlightOutline(t(this,lt)));else if(this.parent){const xe=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(t(this,l),e),this.parent.drawLayer.updateBox(t(this,l),I(Vt=dt,ht,Zi).call(Vt,t(this,f).box,(xe-this.rotation+360)%360)),this.parent.drawLayer.updateLine(t(this,o),t(this,lt)),this.parent.drawLayer.updateBox(t(this,o),I(we=dt,ht,Zi).call(we,t(this,lt).box,xe))}const{x:At,y:Ft,width:$t,height:kt}=e.box;switch(this.rotation){case 0:this.x=At,this.y=Ft,this.width=$t,this.height=kt;break;case 90:{const[xe,Te]=this.parentDimensions;this.x=Ft,this.y=1-At,this.width=$t*Te/xe,this.height=kt*xe/Te;break}case 180:this.x=1-At,this.y=1-Ft,this.width=$t,this.height=kt;break;case 270:{const[xe,Te]=this.parentDimensions;this.x=1-Ft,this.y=At,this.width=$t*Te/xe,this.height=kt*xe/Te;break}}const{lastPoint:Yt}=t(this,lt).box;D(this,_,[(Yt[0]-At)/$t,(Yt[1]-Ft)/kt])},Z=new WeakSet,ta=function(e){const L=pt=>{var At,Ft;this.color=pt,(At=this.parent)==null||At.drawLayer.changeColor(t(this,l),pt),(Ft=t(this,ne))==null||Ft.updateColor(pt)},ct=this.color;this.addCommands({cmd:L.bind(this,e),undo:L.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n.AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},et=new WeakSet,ea=function(e){const L=t(this,s),ct=pt=>{D(this,s,pt),I(this,M,ia).call(this,pt)};this.addCommands({cmd:ct.bind(this,e),undo:ct.bind(this,L),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},M=new WeakSet,ia=function(e){if(!t(this,w))return;I(this,y,Nn).call(this,{highlightOutlines:t(this,f).getNewOutline(e/2)}),this.fixAndSetPosition();const[L,ct]=this.parentDimensions;this.setDims(this.width*L,this.height*ct)},E=new WeakSet,On=function(){t(this,l)===null||!this.parent||(this.parent.drawLayer.remove(t(this,l)),D(this,l,null),this.parent.drawLayer.remove(t(this,o)),D(this,o,null))},z=new WeakSet,As=function(e=this.parent){t(this,l)===null&&({id:fi(this,l)._,clipPathId:fi(this,Ee)._}=e.drawLayer.highlight(t(this,f),this.color,t(this,u)),D(this,o,e.drawLayer.highlightOutline(t(this,lt))),t(this,d)&&(t(this,d).style.clipPath=t(this,Ee)))},ht=new WeakSet,Zi=function({x:e,y:L,width:ct,height:pt},At){switch(At){case 90:return{x:1-L-pt,y:e,width:pt,height:ct};case 180:return{x:1-e-ct,y:1-L-pt,width:ct,height:pt};case 270:return{x:L,y:1-e-ct,width:pt,height:ct}}return{x:e,y:L,width:ct,height:pt}},xt=new WeakSet,sa=function(e){dt._keyboardManager.exec(this,e)},Xt=new WeakSet,en=function(e){if(!t(this,oe))return;const L=window.getSelection();e?L.setPosition(t(this,oe),t(this,Ce)):L.setPosition(t(this,i),t(this,r))},ee=new WeakSet,ws=function(){return t(this,w)?this.rotation:0},ve=new WeakSet,na=function(){if(t(this,w))return null;const[e,L]=this.pageDimensions,ct=t(this,se),pt=new Array(ct.length*8);let At=0;for(const{x:Ft,y:$t,width:kt,height:Yt}of ct){const Vt=Ft*e,we=(1-$t-Yt)*L;pt[At]=pt[At+4]=Vt,pt[At+1]=pt[At+3]=we,pt[At+2]=pt[At+6]=Vt+kt*e,pt[At+5]=pt[At+7]=we+Yt*L,At+=8}return pt},fe=new WeakSet,ra=function(e){return t(this,f).serialize(e,I(this,ee,ws).call(this))},ae=new WeakSet,aa=function(e,L){this._freeHighlight.add(L)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},T=new WeakSet,oa=function(e,L){this._freeHighlight.isEmpty()?e.drawLayer.removeFreeHighlight(this._freeHighlightId):e.createAndAddNewEditor(L,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},c(dt,ht),c(dt,ae),c(dt,T),be(dt,"_defaultColor",null),be(dt,"_defaultOpacity",1),be(dt,"_defaultThickness",12),be(dt,"_l10nPromise"),be(dt,"_type","highlight"),be(dt,"_editorType",n.AnnotationEditorType.HIGHLIGHT),be(dt,"_freeHighlightId",-1),be(dt,"_freeHighlight",null),be(dt,"_freeHighlightClipId","");let j=dt;const Ne=class Ne extends N.AnnotationEditor{constructor(e){super({...e,name:"inkEditor"});c(this,Je);c(this,Ve);c(this,Ge);c(this,mt);c(this,jt);c(this,te);c(this,Ae);c(this,He);c(this,$e);c(this,Ti);c(this,Fs);c(this,Ds);c(this,ci);c(this,ss);c(this,Hi);c(this,Bi);c(this,vi);c(this,ns);c(this,ji);c(this,Hs);c(this,as);c(this,zi);c(this,Mi);c(this,ft,0);c(this,Et,0);c(this,_t,this.canvasPointermove.bind(this));c(this,Wt,this.canvasPointerleave.bind(this));c(this,Ut,this.canvasPointerup.bind(this));c(this,Ot,this.canvasPointerdown.bind(this));c(this,Qt,null);c(this,Gt,new Path2D);c(this,Mt,!1);c(this,Bt,!1);c(this,Zt,!1);c(this,ue,null);c(this,de,0);c(this,Se,0);c(this,Me,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,L){N.AnnotationEditor.initialize(e,L)}static updateDefaultParams(e,L){switch(e){case n.AnnotationEditorParamsType.INK_THICKNESS:Ne._defaultThickness=L;break;case n.AnnotationEditorParamsType.INK_COLOR:Ne._defaultColor=L;break;case n.AnnotationEditorParamsType.INK_OPACITY:Ne._defaultOpacity=L/100;break}}updateParams(e,L){switch(e){case n.AnnotationEditorParamsType.INK_THICKNESS:I(this,Je,la).call(this,L);break;case n.AnnotationEditorParamsType.INK_COLOR:I(this,Ve,ha).call(this,L);break;case n.AnnotationEditorParamsType.INK_OPACITY:I(this,Ge,ca).call(this,L);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,Ne._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,Ne._defaultColor||N.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(Ne._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Ne._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||Ne._defaultColor||N.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Ne._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(I(this,Hi,sn).call(this),I(this,Bi,nn).call(this)),this.isAttachedToDOM||(this.parent.add(this),I(this,vi,ts).call(this)),I(this,Mi,xs).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,Qt)&&(clearTimeout(t(this,Qt)),D(this,Qt,null)),t(this,ue).disconnect(),D(this,ue,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,L]=this.parentDimensions,ct=this.width*e,pt=this.height*L;this.setDimensions(ct,pt)}enableEditMode(){t(this,Mt)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",t(this,Ot)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,Ot)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,Mt)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),D(this,Mt,!0),this.div.classList.add("disabled"),I(this,Mi,xs).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||t(this,Mt)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),I(this,te,ua).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),I(this,Ae,Bn).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),I(this,ss,jn).call(this,e)}canvasPointerleave(e){I(this,ss,jn).call(this,e)}get isResizable(){return!this.isEmpty()&&t(this,Mt)}render(){if(this.div)return this.div;let e,L;this.width&&(e=this.x,L=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[ct,pt,At,Ft]=I(this,mt,da).call(this);if(this.setAt(ct,pt,0,0),this.setDims(At,Ft),I(this,Hi,sn).call(this),this.width){const[$t,kt]=this.parentDimensions;this.setAspectRatio(this.width*$t,this.height*kt),this.setAt(e*$t,L*kt,this.width*$t,this.height*kt),D(this,Zt,!0),I(this,vi,ts).call(this),this.setDims(this.width*$t,this.height*kt),I(this,ci,Di).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return I(this,Bi,nn).call(this),this.div}setDimensions(e,L){const ct=Math.round(e),pt=Math.round(L);if(t(this,de)===ct&&t(this,Se)===pt)return;D(this,de,ct),D(this,Se,pt),this.canvas.style.visibility="hidden";const[At,Ft]=this.parentDimensions;this.width=e/At,this.height=L/Ft,this.fixAndSetPosition(),t(this,Mt)&&I(this,ns,zn).call(this,e,L),I(this,vi,ts).call(this),I(this,ci,Di).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(e,L,ct){var ze,De,je;if(e instanceof S.InkAnnotationElement)return null;const pt=super.deserialize(e,L,ct);pt.thickness=e.thickness,pt.color=n.Util.makeHexColor(...e.color),pt.opacity=e.opacity;const[At,Ft]=pt.pageDimensions,$t=pt.width*At,kt=pt.height*Ft,Yt=pt.parentScale,Vt=e.thickness/2;D(pt,Mt,!0),D(pt,de,Math.round($t)),D(pt,Se,Math.round(kt));const{paths:we,rect:xe,rotation:Te}=e;for(let{bezier:Be}of we){Be=I(ze=Ne,Os,ya).call(ze,Be,xe,Te);const hi=[];pt.paths.push(hi);let gs=Yt*(Be[0]-Vt),fs=Yt*(Be[1]-Vt);for(let ri=2,wn=Be.length;ri<wn;ri+=6){const xn=Yt*(Be[ri]-Vt),Us=Yt*(Be[ri+1]-Vt),$s=Yt*(Be[ri+2]-Vt),Ws=Yt*(Be[ri+3]-Vt),ms=Yt*(Be[ri+4]-Vt),Gr=Yt*(Be[ri+5]-Vt);hi.push([[gs,fs],[xn,Us],[$s,Ws],[ms,Gr]]),gs=ms,fs=Gr}const qs=I(this,Ns,ba).call(this,hi);pt.bezierPath2D.push(qs)}const ke=I(De=pt,as,qn).call(De);return D(pt,Et,Math.max(N.AnnotationEditor.MIN_SIZE,ke[2]-ke[0])),D(pt,ft,Math.max(N.AnnotationEditor.MIN_SIZE,ke[3]-ke[1])),I(je=pt,ns,zn).call(je,$t,kt),pt}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),L=N.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:L,thickness:this.thickness,opacity:this.opacity,paths:I(this,Hs,Aa).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};ft=new WeakMap,Et=new WeakMap,_t=new WeakMap,Wt=new WeakMap,Ut=new WeakMap,Ot=new WeakMap,Qt=new WeakMap,Gt=new WeakMap,Mt=new WeakMap,Bt=new WeakMap,Zt=new WeakMap,ue=new WeakMap,de=new WeakMap,Se=new WeakMap,Me=new WeakMap,Je=new WeakSet,la=function(e){const L=pt=>{this.thickness=pt,I(this,Mi,xs).call(this)},ct=this.thickness;this.addCommands({cmd:L.bind(this,e),undo:L.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Ve=new WeakSet,ha=function(e){const L=pt=>{this.color=pt,I(this,ci,Di).call(this)},ct=this.color;this.addCommands({cmd:L.bind(this,e),undo:L.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ge=new WeakSet,ca=function(e){const L=pt=>{this.opacity=pt,I(this,ci,Di).call(this)};e/=100;const ct=this.opacity;this.addCommands({cmd:L.bind(this,e),undo:L.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},mt=new WeakSet,da=function(){const{parentRotation:e,parentDimensions:[L,ct]}=this;switch(e){case 90:return[0,ct,ct,L];case 180:return[L,ct,L,ct];case 270:return[L,0,ct,L];default:return[0,0,L,ct]}},jt=new WeakSet,Hn=function(){const{ctx:e,color:L,opacity:ct,thickness:pt,parentScale:At,scaleFactor:Ft}=this;e.lineWidth=pt*At/Ft,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${L}${(0,A.opacityToHex)(ct)}`},te=new WeakSet,ua=function(e,L){this.canvas.addEventListener("contextmenu",tt.noContextMenu),this.canvas.addEventListener("pointerleave",t(this,Wt)),this.canvas.addEventListener("pointermove",t(this,_t)),this.canvas.addEventListener("pointerup",t(this,Ut)),this.canvas.removeEventListener("pointerdown",t(this,Ot)),this.isEditing=!0,t(this,Zt)||(D(this,Zt,!0),I(this,vi,ts).call(this),this.thickness||(this.thickness=Ne._defaultThickness),this.color||(this.color=Ne._defaultColor||N.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Ne._defaultOpacity)),this.currentPath.push([e,L]),D(this,Bt,!1),I(this,jt,Hn).call(this),D(this,Me,()=>{I(this,Ti,fa).call(this),t(this,Me)&&window.requestAnimationFrame(t(this,Me))}),window.requestAnimationFrame(t(this,Me))},Ae=new WeakSet,Bn=function(e,L){const[ct,pt]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===ct&&L===pt)return;const At=this.currentPath;let Ft=t(this,Gt);if(At.push([e,L]),D(this,Bt,!0),At.length<=2){Ft.moveTo(...At[0]),Ft.lineTo(e,L);return}At.length===3&&(D(this,Gt,Ft=new Path2D),Ft.moveTo(...At[0])),I(this,Fs,ma).call(this,Ft,...At.at(-3),...At.at(-2),e,L)},He=new WeakSet,pa=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);t(this,Gt).lineTo(...e)},$e=new WeakSet,ga=function(e,L){D(this,Me,null),e=Math.min(Math.max(e,0),this.canvas.width),L=Math.min(Math.max(L,0),this.canvas.height),I(this,Ae,Bn).call(this,e,L),I(this,He,pa).call(this);let ct;if(this.currentPath.length!==1)ct=I(this,Ds,va).call(this);else{const kt=[e,L];ct=[[kt,kt.slice(),kt.slice(),kt]]}const pt=t(this,Gt),At=this.currentPath;this.currentPath=[],D(this,Gt,new Path2D);const Ft=()=>{this.allRawPaths.push(At),this.paths.push(ct),this.bezierPath2D.push(pt),this._uiManager.rebuild(this)},$t=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(I(this,Hi,sn).call(this),I(this,Bi,nn).call(this)),I(this,Mi,xs).call(this))};this.addCommands({cmd:Ft,undo:$t,mustExec:!0})},Ti=new WeakSet,fa=function(){if(!t(this,Bt))return;D(this,Bt,!1);const e=Math.ceil(this.thickness*this.parentScale),L=this.currentPath.slice(-3),ct=L.map(Ft=>Ft[0]),pt=L.map(Ft=>Ft[1]);Math.min(...ct)-e,Math.max(...ct)+e,Math.min(...pt)-e,Math.max(...pt)+e;const{ctx:At}=this;At.save(),At.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Ft of this.bezierPath2D)At.stroke(Ft);At.stroke(t(this,Gt)),At.restore()},Fs=new WeakSet,ma=function(e,L,ct,pt,At,Ft,$t){const kt=(L+pt)/2,Yt=(ct+At)/2,Vt=(pt+Ft)/2,we=(At+$t)/2;e.bezierCurveTo(kt+2*(pt-kt)/3,Yt+2*(At-Yt)/3,Vt+2*(pt-Vt)/3,we+2*(At-we)/3,Vt,we)},Ds=new WeakSet,va=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const L=[];let ct,[pt,At]=e[0];for(ct=1;ct<e.length-2;ct++){const[xe,Te]=e[ct],[ke,ze]=e[ct+1],De=(xe+ke)/2,je=(Te+ze)/2,Be=[pt+2*(xe-pt)/3,At+2*(Te-At)/3],hi=[De+2*(xe-De)/3,je+2*(Te-je)/3];L.push([[pt,At],Be,hi,[De,je]]),[pt,At]=[De,je]}const[Ft,$t]=e[ct],[kt,Yt]=e[ct+1],Vt=[pt+2*(Ft-pt)/3,At+2*($t-At)/3],we=[kt+2*(Ft-kt)/3,Yt+2*($t-Yt)/3];return L.push([[pt,At],Vt,we,[kt,Yt]]),L},ci=new WeakSet,Di=function(){if(this.isEmpty()){I(this,ji,rn).call(this);return}I(this,jt,Hn).call(this);const{canvas:e,ctx:L}=this;L.setTransform(1,0,0,1,0,0),L.clearRect(0,0,e.width,e.height),I(this,ji,rn).call(this);for(const ct of this.bezierPath2D)L.stroke(ct)},ss=new WeakSet,jn=function(e){this.canvas.removeEventListener("pointerleave",t(this,Wt)),this.canvas.removeEventListener("pointermove",t(this,_t)),this.canvas.removeEventListener("pointerup",t(this,Ut)),this.canvas.addEventListener("pointerdown",t(this,Ot)),t(this,Qt)&&clearTimeout(t(this,Qt)),D(this,Qt,setTimeout(()=>{D(this,Qt,null),this.canvas.removeEventListener("contextmenu",tt.noContextMenu)},10)),I(this,$e,ga).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Hi=new WeakSet,sn=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Bi=new WeakSet,nn=function(){D(this,ue,new ResizeObserver(e=>{const L=e[0].contentRect;L.width&&L.height&&this.setDimensions(L.width,L.height)})),t(this,ue).observe(this.div)},vi=new WeakSet,ts=function(){if(!t(this,Zt))return;const[e,L]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*L),I(this,ji,rn).call(this)},ns=new WeakSet,zn=function(e,L){const ct=I(this,zi,an).call(this),pt=(e-ct)/t(this,Et),At=(L-ct)/t(this,ft);this.scaleFactor=Math.min(pt,At)},ji=new WeakSet,rn=function(){const e=I(this,zi,an).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},Ns=new WeakSet,ba=function(e){const L=new Path2D;for(let ct=0,pt=e.length;ct<pt;ct++){const[At,Ft,$t,kt]=e[ct];ct===0&&L.moveTo(...At),L.bezierCurveTo(Ft[0],Ft[1],$t[0],$t[1],kt[0],kt[1])}return L},rs=new WeakSet,Gn=function(e,L,ct){const[pt,At,Ft,$t]=L;switch(ct){case 0:for(let kt=0,Yt=e.length;kt<Yt;kt+=2)e[kt]+=pt,e[kt+1]=$t-e[kt+1];break;case 90:for(let kt=0,Yt=e.length;kt<Yt;kt+=2){const Vt=e[kt];e[kt]=e[kt+1]+pt,e[kt+1]=Vt+At}break;case 180:for(let kt=0,Yt=e.length;kt<Yt;kt+=2)e[kt]=Ft-e[kt],e[kt+1]+=At;break;case 270:for(let kt=0,Yt=e.length;kt<Yt;kt+=2){const Vt=e[kt];e[kt]=Ft-e[kt+1],e[kt+1]=$t-Vt}break;default:throw new Error("Invalid rotation")}return e},Os=new WeakSet,ya=function(e,L,ct){const[pt,At,Ft,$t]=L;switch(ct){case 0:for(let kt=0,Yt=e.length;kt<Yt;kt+=2)e[kt]-=pt,e[kt+1]=$t-e[kt+1];break;case 90:for(let kt=0,Yt=e.length;kt<Yt;kt+=2){const Vt=e[kt];e[kt]=e[kt+1]-At,e[kt+1]=Vt-pt}break;case 180:for(let kt=0,Yt=e.length;kt<Yt;kt+=2)e[kt]=Ft-e[kt],e[kt+1]-=At;break;case 270:for(let kt=0,Yt=e.length;kt<Yt;kt+=2){const Vt=e[kt];e[kt]=$t-e[kt+1],e[kt+1]=Ft-Vt}break;default:throw new Error("Invalid rotation")}return e},Hs=new WeakSet,Aa=function(e,L,ct,pt){var Yt,Vt;const At=[],Ft=this.thickness/2,$t=e*L+Ft,kt=e*ct+Ft;for(const we of this.paths){const xe=[],Te=[];for(let ke=0,ze=we.length;ke<ze;ke++){const[De,je,Be,hi]=we[ke];if(De[0]===hi[0]&&De[1]===hi[1]&&ze===1){const Ws=e*De[0]+$t,ms=e*De[1]+kt;xe.push(Ws,ms),Te.push(Ws,ms);break}const gs=e*De[0]+$t,fs=e*De[1]+kt,qs=e*je[0]+$t,ri=e*je[1]+kt,wn=e*Be[0]+$t,xn=e*Be[1]+kt,Us=e*hi[0]+$t,$s=e*hi[1]+kt;ke===0&&(xe.push(gs,fs),Te.push(gs,fs)),xe.push(qs,ri,wn,xn,Us,$s),Te.push(qs,ri),ke===ze-1&&Te.push(Us,$s)}At.push({bezier:I(Yt=Ne,rs,Gn).call(Yt,xe,pt,this.rotation),points:I(Vt=Ne,rs,Gn).call(Vt,Te,pt,this.rotation)})}return At},as=new WeakSet,qn=function(){let e=1/0,L=-1/0,ct=1/0,pt=-1/0;for(const At of this.paths)for(const[Ft,$t,kt,Yt]of At){const Vt=n.Util.bezierBoundingBox(...Ft,...$t,...kt,...Yt);e=Math.min(e,Vt[0]),ct=Math.min(ct,Vt[1]),L=Math.max(L,Vt[2]),pt=Math.max(pt,Vt[3])}return[e,ct,L,pt]},zi=new WeakSet,an=function(){return t(this,Mt)?Math.ceil(this.thickness*this.parentScale):0},Mi=new WeakSet,xs=function(e=!1){if(this.isEmpty())return;if(!t(this,Mt)){I(this,ci,Di).call(this);return}const L=I(this,as,qn).call(this),ct=I(this,zi,an).call(this);D(this,Et,Math.max(N.AnnotationEditor.MIN_SIZE,L[2]-L[0])),D(this,ft,Math.max(N.AnnotationEditor.MIN_SIZE,L[3]-L[1]));const pt=Math.ceil(ct+t(this,Et)*this.scaleFactor),At=Math.ceil(ct+t(this,ft)*this.scaleFactor),[Ft,$t]=this.parentDimensions;this.width=pt/Ft,this.height=At/$t,this.setAspectRatio(pt,At);const kt=this.translationX,Yt=this.translationY;this.translationX=-L[0],this.translationY=-L[1],I(this,vi,ts).call(this),I(this,ci,Di).call(this),D(this,de,pt),D(this,Se,At),this.setDims(pt,At);const Vt=e?ct/this.scaleFactor/2:0;this.translate(kt-this.translationX-Vt,Yt-this.translationY-Vt)},c(Ne,Ns),c(Ne,rs),c(Ne,Os),be(Ne,"_defaultColor",null),be(Ne,"_defaultOpacity",1),be(Ne,"_defaultThickness",1),be(Ne,"_type","ink"),be(Ne,"_editorType",n.AnnotationEditorType.INK);let C=Ne;const cs=class cs extends N.AnnotationEditor{constructor(e){super({...e,name:"stampEditor"});c(this,Ii);c(this,Li);c(this,qi);c(this,ls);c(this,Bs);c(this,js);c(this,hs);c(this,Ui);c(this,zs);c(this,qe,null);c(this,Ue,null);c(this,bi,null);c(this,di,null);c(this,yi,null);c(this,Gi,"");c(this,ai,null);c(this,ki,null);c(this,oi,null);c(this,si,!1);c(this,os,!1);D(this,di,e.bitmapUrl),D(this,yi,e.bitmapFile)}static initialize(e,L){N.AnnotationEditor.initialize(e,L)}static get supportedTypes(){const e=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,n.shadow)(this,"supportedTypes",e.map(L=>`image/${L}`))}static get supportedTypesStr(){return(0,n.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,L){L.pasteEditor(n.AnnotationEditorType.STAMP,{bitmapFile:e.getAsFile()})}remove(){var e,L;t(this,Ue)&&(D(this,qe,null),this._uiManager.imageManager.deleteId(t(this,Ue)),(e=t(this,ai))==null||e.remove(),D(this,ai,null),(L=t(this,ki))==null||L.disconnect(),D(this,ki,null),t(this,oi)&&(clearTimeout(t(this,oi)),D(this,oi,null))),super.remove()}rebuild(){if(!this.parent){t(this,Ue)&&I(this,qi,on).call(this);return}super.rebuild(),this.div!==null&&(t(this,Ue)&&t(this,ai)===null&&I(this,qi,on).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(t(this,bi)||t(this,qe)||t(this,di)||t(this,yi)||t(this,Ue))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,L;if(this.width&&(e=this.x,L=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),t(this,qe)?I(this,ls,Un).call(this):I(this,qi,on).call(this),this.width){const[ct,pt]=this.parentDimensions;this.setAt(e*ct,L*pt,this.width*ct,this.height*pt)}return this.div}getImageForAltText(){return t(this,ai)}static deserialize(e,L,ct){if(e instanceof S.StampAnnotationElement)return null;const pt=super.deserialize(e,L,ct),{rect:At,bitmapUrl:Ft,bitmapId:$t,isSvg:kt,accessibilityData:Yt}=e;$t&&ct.imageManager.isValidId($t)?D(pt,Ue,$t):D(pt,di,Ft),D(pt,si,kt);const[Vt,we]=pt.pageDimensions;return pt.width=(At[2]-At[0])/Vt,pt.height=(At[3]-At[1])/we,Yt&&(pt.altTextData=Yt),pt}serialize(e=!1,L=null){if(this.isEmpty())return null;const ct={annotationType:n.AnnotationEditorType.STAMP,bitmapId:t(this,Ue),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,si),structTreeParentId:this._structTreeParentId};if(e)return ct.bitmapUrl=I(this,Ui,ln).call(this,!0),ct.accessibilityData=this.altTextData,ct;const{decorative:pt,altText:At}=this.altTextData;if(!pt&&At&&(ct.accessibilityData={type:"Figure",alt:At}),L===null)return ct;L.stamps||(L.stamps=new Map);const Ft=t(this,si)?(ct.rect[2]-ct.rect[0])*(ct.rect[3]-ct.rect[1]):null;if(!L.stamps.has(t(this,Ue)))L.stamps.set(t(this,Ue),{area:Ft,serialized:ct}),ct.bitmap=I(this,Ui,ln).call(this,!1);else if(t(this,si)){const $t=L.stamps.get(t(this,Ue));Ft>$t.area&&($t.area=Ft,$t.serialized.bitmap.close(),$t.serialized.bitmap=I(this,Ui,ln).call(this,!1))}return ct}};qe=new WeakMap,Ue=new WeakMap,bi=new WeakMap,di=new WeakMap,yi=new WeakMap,Gi=new WeakMap,ai=new WeakMap,ki=new WeakMap,oi=new WeakMap,si=new WeakMap,os=new WeakMap,Ii=new WeakSet,_s=function(e,L=!1){if(!e){this.remove();return}D(this,qe,e.bitmap),L||(D(this,Ue,e.id),D(this,si,e.isSvg)),e.file&&D(this,Gi,e.file.name),I(this,ls,Un).call(this)},Li=new WeakSet,Es=function(){D(this,bi,null),this._uiManager.enableWaiting(!1),t(this,ai)&&this.div.focus()},qi=new WeakSet,on=function(){if(t(this,Ue)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(t(this,Ue)).then(L=>I(this,Ii,_s).call(this,L,!0)).finally(()=>I(this,Li,Es).call(this));return}if(t(this,di)){const L=t(this,di);D(this,di,null),this._uiManager.enableWaiting(!0),D(this,bi,this._uiManager.imageManager.getFromUrl(L).then(ct=>I(this,Ii,_s).call(this,ct)).finally(()=>I(this,Li,Es).call(this)));return}if(t(this,yi)){const L=t(this,yi);D(this,yi,null),this._uiManager.enableWaiting(!0),D(this,bi,this._uiManager.imageManager.getFromFile(L).then(ct=>I(this,Ii,_s).call(this,ct)).finally(()=>I(this,Li,Es).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=cs.supportedTypesStr,D(this,bi,new Promise(L=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const ct=await this._uiManager.imageManager.getFromFile(e.files[0]);I(this,Ii,_s).call(this,ct)}L()}),e.addEventListener("cancel",()=>{this.remove(),L()})}).finally(()=>I(this,Li,Es).call(this))),e.click()},ls=new WeakSet,Un=function(){const{div:e}=this;let{width:L,height:ct}=t(this,qe);const[pt,At]=this.pageDimensions,Ft=.75;if(this.width)L=this.width*pt,ct=this.height*At;else if(L>Ft*pt||ct>Ft*At){const Vt=Math.min(Ft*pt/L,Ft*At/ct);L*=Vt,ct*=Vt}const[$t,kt]=this.parentDimensions;this.setDims(L*$t/pt,ct*kt/At),this._uiManager.enableWaiting(!1);const Yt=D(this,ai,document.createElement("canvas"));e.append(Yt),e.hidden=!1,I(this,hs,$n).call(this,L,ct),I(this,zs,_a).call(this),t(this,os)||(this.parent.addUndoableEditor(this),D(this,os,!0)),this._reportTelemetry({action:"inserted_image"}),t(this,Gi)&&Yt.setAttribute("aria-label",t(this,Gi))},Bs=new WeakSet,wa=function(e,L){var Ft;const[ct,pt]=this.parentDimensions;this.width=e/ct,this.height=L/pt,this.setDims(e,L),(Ft=this._initialOptions)!=null&&Ft.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,t(this,oi)!==null&&clearTimeout(t(this,oi)),D(this,oi,setTimeout(()=>{D(this,oi,null),I(this,hs,$n).call(this,e,L)},200))},js=new WeakSet,xa=function(e,L){const{width:ct,height:pt}=t(this,qe);let At=ct,Ft=pt,$t=t(this,qe);for(;At>2*e||Ft>2*L;){const kt=At,Yt=Ft;At>2*e&&(At=At>=16384?Math.floor(At/2)-1:Math.ceil(At/2)),Ft>2*L&&(Ft=Ft>=16384?Math.floor(Ft/2)-1:Math.ceil(Ft/2));const Vt=new OffscreenCanvas(At,Ft);Vt.getContext("2d").drawImage($t,0,0,kt,Yt,0,0,At,Ft),$t=Vt.transferToImageBitmap()}return $t},hs=new WeakSet,$n=function(e,L){e=Math.ceil(e),L=Math.ceil(L);const ct=t(this,ai);if(!ct||ct.width===e&&ct.height===L)return;ct.width=e,ct.height=L;const pt=t(this,si)?t(this,qe):I(this,js,xa).call(this,e,L);if(this._uiManager.hasMLManager&&!this.hasAltText()){const Ft=new OffscreenCanvas(e,L);Ft.getContext("2d").drawImage(pt,0,0,pt.width,pt.height,0,0,e,L),Ft.convertToBlob().then($t=>{const kt=new FileReader;kt.onload=()=>{const Yt=kt.result;this._uiManager.mlGuess({service:"image-to-text",request:{imageData:Yt}}).then(Vt=>{const we=(Vt==null?void 0:Vt.output)||"";this.parent&&we&&!this.hasAltText()&&(this.altTextData={altText:we,decorative:!1})})},kt.readAsDataURL($t)})}const At=ct.getContext("2d");At.filter=this._uiManager.hcmFilter,At.drawImage(pt,0,0,pt.width,pt.height,0,0,e,L)},Ui=new WeakSet,ln=function(e){if(e){if(t(this,si)){const ct=this._uiManager.imageManager.getSvgUrl(t(this,Ue));if(ct)return ct}const L=document.createElement("canvas");return{width:L.width,height:L.height}=t(this,qe),L.getContext("2d").drawImage(t(this,qe),0,0),L.toDataURL()}if(t(this,si)){const[L,ct]=this.pageDimensions,pt=Math.round(this.width*L*tt.PixelsPerInch.PDF_TO_CSS_UNITS),At=Math.round(this.height*ct*tt.PixelsPerInch.PDF_TO_CSS_UNITS),Ft=new OffscreenCanvas(pt,At);return Ft.getContext("2d").drawImage(t(this,qe),0,0,t(this,qe).width,t(this,qe).height,0,0,pt,At),Ft.transferToImageBitmap()}return structuredClone(t(this,qe))},zs=new WeakSet,_a=function(){D(this,ki,new ResizeObserver(e=>{const L=e[0].contentRect;L.width&&L.height&&I(this,Bs,wa).call(this,L.width,L.height)})),t(this,ki).observe(this.div)},be(cs,"_type","stamp"),be(cs,"_editorType",n.AnnotationEditorType.STAMP);let q=cs;const ni=class ni{constructor({uiManager:vt,pageIndex:e,div:L,accessibilityManager:ct,annotationLayer:pt,drawLayer:At,textLayer:Ft,viewport:$t,l10n:kt}){c(this,Gs);c(this,ds);c(this,us);c(this,ps);c(this,Vi);c(this,Pi,void 0);c(this,$i,!1);c(this,li,null);c(this,Ri,null);c(this,ui,null);c(this,pi,null);c(this,gi,null);c(this,Ze,new Map);c(this,Ai,!1);c(this,Wi,!1);c(this,Xi,!1);c(this,Ye,null);c(this,pe,void 0);const Yt=[...t(ni,wi).values()];if(!ni._initialized){ni._initialized=!0;for(const Vt of Yt)Vt.initialize(kt,vt)}vt.registerEditorTypes(Yt),D(this,pe,vt),this.pageIndex=e,this.div=L,D(this,Pi,ct),D(this,li,pt),this.viewport=$t,D(this,Ye,Ft),this.drawLayer=At,t(this,pe).addLayer(this)}get isEmpty(){return t(this,Ze).size===0}get isInvisible(){return this.isEmpty&&t(this,pe).getMode()===n.AnnotationEditorType.NONE}updateToolbar(vt){t(this,pe).updateToolbar(vt)}updateMode(vt=t(this,pe).getMode()){switch(I(this,Vi,hn).call(this),vt){case n.AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case n.AnnotationEditorType.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case n.AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const L of t(ni,wi).values())e.toggle(`${L._type}Editing`,vt===L._editorType);this.div.hidden=!1}hasTextLayer(vt){var e;return vt===((e=t(this,Ye))==null?void 0:e.div)}addInkEditorIfNeeded(vt){if(t(this,pe).getMode()===n.AnnotationEditorType.INK){if(!vt){for(const e of t(this,Ze).values())if(e.isEmpty()){e.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(vt){t(this,pe).setEditingState(vt)}addCommands(vt){t(this,pe).addCommands(vt)}togglePointerEvents(vt=!1){this.div.classList.toggle("disabled",!vt)}toggleAnnotationLayerPointerEvents(vt=!1){var e;(e=t(this,li))==null||e.div.classList.toggle("disabled",!vt)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const vt=new Set;for(const L of t(this,Ze).values())L.enableEditing(),L.annotationElementId&&vt.add(L.annotationElementId);if(!t(this,li))return;const e=t(this,li).getEditableAnnotations();for(const L of e){if(L.hide(),t(this,pe).isDeletedAnnotationElement(L.data.id)||vt.has(L.data.id))continue;const ct=this.deserialize(L);ct&&(this.addOrRebuild(ct),ct.enableEditing())}}disable(){var L;D(this,Xi,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const vt=new Set;for(const ct of t(this,Ze).values()){if(ct.disableEditing(),!ct.annotationElementId||ct.serialize()!==null){vt.add(ct.annotationElementId);continue}(L=this.getEditableAnnotation(ct.annotationElementId))==null||L.show(),ct.remove()}if(t(this,li)){const ct=t(this,li).getEditableAnnotations();for(const pt of ct){const{id:At}=pt.data;vt.has(At)||t(this,pe).isDeletedAnnotationElement(At)||pt.show()}}I(this,Vi,hn).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const ct of t(ni,wi).values())e.remove(`${ct._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),D(this,Xi,!1)}getEditableAnnotation(vt){var e;return((e=t(this,li))==null?void 0:e.getEditableAnnotation(vt))||null}setActiveEditor(vt){t(this,pe).getActive()!==vt&&t(this,pe).setActiveEditor(vt)}enableTextSelection(){var vt;this.div.tabIndex=-1,(vt=t(this,Ye))!=null&&vt.div&&!t(this,pi)&&(D(this,pi,I(this,Gs,Ea).bind(this)),t(this,Ye).div.addEventListener("pointerdown",t(this,pi)),t(this,Ye).div.classList.add("highlighting"))}disableTextSelection(){var vt;this.div.tabIndex=0,(vt=t(this,Ye))!=null&&vt.div&&t(this,pi)&&(t(this,Ye).div.removeEventListener("pointerdown",t(this,pi)),D(this,pi,null),t(this,Ye).div.classList.remove("highlighting"))}enableClick(){t(this,ui)||(D(this,ui,this.pointerdown.bind(this)),D(this,Ri,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",t(this,ui)),this.div.addEventListener("pointerup",t(this,Ri)))}disableClick(){t(this,ui)&&(this.div.removeEventListener("pointerdown",t(this,ui)),this.div.removeEventListener("pointerup",t(this,Ri)),D(this,ui,null),D(this,Ri,null))}attach(vt){t(this,Ze).set(vt.id,vt);const{annotationElementId:e}=vt;e&&t(this,pe).isDeletedAnnotationElement(e)&&t(this,pe).removeDeletedAnnotationElement(vt)}detach(vt){var e;t(this,Ze).delete(vt.id),(e=t(this,Pi))==null||e.removePointerInTextLayer(vt.contentDiv),!t(this,Xi)&&vt.annotationElementId&&t(this,pe).addDeletedAnnotationElement(vt)}remove(vt){this.detach(vt),t(this,pe).removeEditor(vt),vt.div.remove(),vt.isAttachedToDOM=!1,t(this,Wi)||this.addInkEditorIfNeeded(!1)}changeParent(vt){var e;vt.parent!==this&&(vt.annotationElementId&&(t(this,pe).addDeletedAnnotationElement(vt.annotationElementId),N.AnnotationEditor.deleteAnnotationElement(vt),vt.annotationElementId=null),this.attach(vt),(e=vt.parent)==null||e.detach(vt),vt.setParent(this),vt.div&&vt.isAttachedToDOM&&(vt.div.remove(),this.div.append(vt.div)))}add(vt){if(!(vt.parent===this&&vt.isAttachedToDOM)){if(this.changeParent(vt),t(this,pe).addEditor(vt),this.attach(vt),!vt.isAttachedToDOM){const e=vt.render();this.div.append(e),vt.isAttachedToDOM=!0}vt.fixAndSetPosition(),vt.onceAdded(),t(this,pe).addToAnnotationStorage(vt),vt._reportTelemetry(vt.telemetryInitialData)}}moveEditorInDOM(vt){var L;if(!vt.isAttachedToDOM)return;const{activeElement:e}=document;vt.div.contains(e)&&!t(this,gi)&&(vt._focusEventsAllowed=!1,D(this,gi,setTimeout(()=>{D(this,gi,null),vt.div.contains(document.activeElement)?vt._focusEventsAllowed=!0:(vt.div.addEventListener("focusin",()=>{vt._focusEventsAllowed=!0},{once:!0}),e.focus())},0))),vt._structTreeParentId=(L=t(this,Pi))==null?void 0:L.moveElementInDOM(this.div,vt.div,vt.contentDiv,!0)}addOrRebuild(vt){vt.needsToBeRebuilt()?(vt.parent||(vt.parent=this),vt.rebuild(),vt.show()):this.add(vt)}addUndoableEditor(vt){const e=()=>vt._uiManager.rebuild(vt),L=()=>{vt.remove()};this.addCommands({cmd:e,undo:L,mustExec:!1})}getNextId(){return t(this,pe).getId()}canCreateNewEmptyEditor(){var vt;return(vt=t(this,ds,Wn))==null?void 0:vt.canCreateNewEmptyEditor()}pasteEditor(vt,e){t(this,pe).updateToolbar(vt),t(this,pe).updateMode(vt);const{offsetX:L,offsetY:ct}=I(this,ps,Vn).call(this),pt=this.getNextId(),At=I(this,us,Xn).call(this,{parent:this,id:pt,x:L,y:ct,uiManager:t(this,pe),isCentered:!0,...e});At&&this.add(At)}deserialize(vt){var e;return((e=t(ni,wi).get(vt.annotationType??vt.annotationEditorType))==null?void 0:e.deserialize(vt,this,t(this,pe)))||null}createAndAddNewEditor(vt,e,L={}){const ct=this.getNextId(),pt=I(this,us,Xn).call(this,{parent:this,id:ct,x:vt.offsetX,y:vt.offsetY,uiManager:t(this,pe),isCentered:e,...L});return pt&&this.add(pt),pt}addNewEditor(){this.createAndAddNewEditor(I(this,ps,Vn).call(this),!0)}setSelected(vt){t(this,pe).setSelected(vt)}toggleSelected(vt){t(this,pe).toggleSelected(vt)}isSelected(vt){return t(this,pe).isSelected(vt)}unselect(vt){t(this,pe).unselect(vt)}pointerup(vt){const{isMac:e}=n.FeatureTest.platform;if(!(vt.button!==0||vt.ctrlKey&&e)&&vt.target===this.div&&t(this,Ai)){if(D(this,Ai,!1),!t(this,$i)){D(this,$i,!0);return}if(t(this,pe).getMode()===n.AnnotationEditorType.STAMP){t(this,pe).unselectAll();return}this.createAndAddNewEditor(vt,!1)}}pointerdown(vt){if(t(this,pe).getMode()===n.AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),t(this,Ai)){D(this,Ai,!1);return}const{isMac:e}=n.FeatureTest.platform;if(vt.button!==0||vt.ctrlKey&&e||vt.target!==this.div)return;D(this,Ai,!0);const L=t(this,pe).getActive();D(this,$i,!L||L.isEmpty())}findNewParent(vt,e,L){const ct=t(this,pe).findParent(e,L);return ct===null||ct===this?!1:(ct.changeParent(vt),!0)}destroy(){var vt,e;((vt=t(this,pe).getActive())==null?void 0:vt.parent)===this&&(t(this,pe).commitOrRemove(),t(this,pe).setActiveEditor(null)),t(this,gi)&&(clearTimeout(t(this,gi)),D(this,gi,null));for(const L of t(this,Ze).values())(e=t(this,Pi))==null||e.removePointerInTextLayer(L.contentDiv),L.setParent(null),L.isAttachedToDOM=!1,L.div.remove();this.div=null,t(this,Ze).clear(),t(this,pe).removeLayer(this)}render({viewport:vt}){this.viewport=vt,(0,tt.setLayerDimensions)(this.div,vt);for(const e of t(this,pe).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:vt}){t(this,pe).commitOrRemove(),I(this,Vi,hn).call(this);const e=this.viewport.rotation,L=vt.rotation;if(this.viewport=vt,(0,tt.setLayerDimensions)(this.div,{rotation:L}),e!==L)for(const ct of t(this,Ze).values())ct.rotate(L);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:vt,pageHeight:e}=this.viewport.rawDims;return[vt,e]}get scale(){return t(this,pe).viewParameters.realScale}};Pi=new WeakMap,$i=new WeakMap,li=new WeakMap,Ri=new WeakMap,ui=new WeakMap,pi=new WeakMap,gi=new WeakMap,Ze=new WeakMap,Ai=new WeakMap,Wi=new WeakMap,Xi=new WeakMap,Ye=new WeakMap,pe=new WeakMap,wi=new WeakMap,Gs=new WeakSet,Ea=function(vt){if(t(this,pe).unselectAll(),vt.target===t(this,Ye).div){const{isMac:e}=n.FeatureTest.platform;if(vt.button!==0||vt.ctrlKey&&e)return;t(this,pe).showAllEditors("highlight",!0,!0),t(this,Ye).div.classList.add("free"),j.startHighlighting(this,t(this,pe).direction==="ltr",vt),t(this,Ye).div.addEventListener("pointerup",()=>{t(this,Ye).div.classList.remove("free")},{once:!0}),vt.preventDefault()}},ds=new WeakSet,Wn=function(){return t(ni,wi).get(t(this,pe).getMode())},us=new WeakSet,Xn=function(vt){const e=t(this,ds,Wn);return e?new e.prototype.constructor(vt):null},ps=new WeakSet,Vn=function(){const{x:vt,y:e,width:L,height:ct}=this.div.getBoundingClientRect(),pt=Math.max(0,vt),At=Math.max(0,e),Ft=Math.min(window.innerWidth,vt+L),$t=Math.min(window.innerHeight,e+ct),kt=(pt+Ft)/2-vt,Yt=(At+$t)/2-e,[Vt,we]=this.viewport.rotation%180===0?[kt,Yt]:[Yt,kt];return{offsetX:Vt,offsetY:we}},Vi=new WeakSet,hn=function(){D(this,Wi,!0);for(const vt of t(this,Ze).values())vt.isEmpty()&&vt.remove();D(this,Wi,!1)},be(ni,"_initialized",!1),c(ni,wi,new Map([B,C,q,j].map(vt=>[vt._editorType,vt])));let W=ni},259:(v,U,x)=>{var ot,B,F,P,tt,j,C,q,W,it,ut,st,R,Kn,$,Yn,Q,Sa,yt,Ni,Ct,Ca,wt,xi;x.d(U,{ColorPicker:()=>S});var n=x(292),N=x(830),A=x(419);const It=class It{constructor({editor:rt=null,uiManager:bt=null}){c(this,R);c(this,$);c(this,Q);c(this,yt);c(this,Ct);c(this,wt);c(this,ot,I(this,Q,Sa).bind(this));c(this,B,I(this,Ct,Ca).bind(this));c(this,F,null);c(this,P,null);c(this,tt,void 0);c(this,j,null);c(this,C,!1);c(this,q,!1);c(this,W,null);c(this,it,void 0);c(this,ut,null);c(this,st,void 0);var Lt;rt?(D(this,q,!1),D(this,st,n.AnnotationEditorParamsType.HIGHLIGHT_COLOR),D(this,W,rt)):(D(this,q,!0),D(this,st,n.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR)),D(this,ut,(rt==null?void 0:rt._uiManager)||bt),D(this,it,t(this,ut)._eventBus),D(this,tt,(rt==null?void 0:rt.color)||((Lt=t(this,ut))==null?void 0:Lt.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return(0,n.shadow)(this,"_keyboardManager",new N.KeyboardManager([[["Escape","mac+Escape"],It.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],It.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],It.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],It.prototype._moveToPrevious],[["Home","mac+Home"],It.prototype._moveToBeginning],[["End","mac+End"],It.prototype._moveToEnd]]))}renderButton(){const rt=D(this,F,document.createElement("button"));rt.className="colorPicker",rt.tabIndex="0",rt.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),rt.setAttribute("aria-haspopup",!0),rt.addEventListener("click",I(this,yt,Ni).bind(this)),rt.addEventListener("keydown",t(this,ot));const bt=D(this,P,document.createElement("span"));return bt.className="swatch",bt.setAttribute("aria-hidden",!0),bt.style.backgroundColor=t(this,tt),rt.append(bt),rt}renderMainDropdown(){const rt=D(this,j,I(this,R,Kn).call(this));return rt.setAttribute("aria-orientation","horizontal"),rt.setAttribute("aria-labelledby","highlightColorPickerLabel"),rt}_colorSelectFromKeyboard(rt){if(rt.target===t(this,F)){I(this,yt,Ni).call(this,rt);return}const bt=rt.target.getAttribute("data-color");bt&&I(this,$,Yn).call(this,bt,rt)}_moveToNext(rt){var bt,Lt;if(!t(this,wt,xi)){I(this,yt,Ni).call(this,rt);return}if(rt.target===t(this,F)){(bt=t(this,j).firstChild)==null||bt.focus();return}(Lt=rt.target.nextSibling)==null||Lt.focus()}_moveToPrevious(rt){var bt,Lt;if(rt.target===((bt=t(this,j))==null?void 0:bt.firstChild)||rt.target===t(this,F)){t(this,wt,xi)&&this._hideDropdownFromKeyboard();return}t(this,wt,xi)||I(this,yt,Ni).call(this,rt),(Lt=rt.target.previousSibling)==null||Lt.focus()}_moveToBeginning(rt){var bt;if(!t(this,wt,xi)){I(this,yt,Ni).call(this,rt);return}(bt=t(this,j).firstChild)==null||bt.focus()}_moveToEnd(rt){var bt;if(!t(this,wt,xi)){I(this,yt,Ni).call(this,rt);return}(bt=t(this,j).lastChild)==null||bt.focus()}hideDropdown(){var rt;(rt=t(this,j))==null||rt.classList.add("hidden"),window.removeEventListener("pointerdown",t(this,B))}_hideDropdownFromKeyboard(){var rt;if(!t(this,q)){if(!t(this,wt,xi)){(rt=t(this,W))==null||rt.unselect();return}this.hideDropdown(),t(this,F).focus({preventScroll:!0,focusVisible:t(this,C)})}}updateColor(rt){if(t(this,P)&&(t(this,P).style.backgroundColor=rt),!t(this,j))return;const bt=t(this,ut).highlightColors.values();for(const Lt of t(this,j).children)Lt.setAttribute("aria-selected",bt.next().value===rt)}destroy(){var rt,bt;(rt=t(this,F))==null||rt.remove(),D(this,F,null),D(this,P,null),(bt=t(this,j))==null||bt.remove(),D(this,j,null)}};ot=new WeakMap,B=new WeakMap,F=new WeakMap,P=new WeakMap,tt=new WeakMap,j=new WeakMap,C=new WeakMap,q=new WeakMap,W=new WeakMap,it=new WeakMap,ut=new WeakMap,st=new WeakMap,R=new WeakSet,Kn=function(){const rt=document.createElement("div");rt.addEventListener("contextmenu",A.noContextMenu),rt.className="dropdown",rt.role="listbox",rt.setAttribute("aria-multiselectable",!1),rt.setAttribute("aria-orientation","vertical"),rt.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[bt,Lt]of t(this,ut).highlightColors){const Pt=document.createElement("button");Pt.tabIndex="0",Pt.role="option",Pt.setAttribute("data-color",Lt),Pt.title=bt,Pt.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${bt}`);const qt=document.createElement("span");Pt.append(qt),qt.className="swatch",qt.style.backgroundColor=Lt,Pt.setAttribute("aria-selected",Lt===t(this,tt)),Pt.addEventListener("click",I(this,$,Yn).bind(this,Lt)),rt.append(Pt)}return rt.addEventListener("keydown",t(this,ot)),rt},$=new WeakSet,Yn=function(rt,bt){bt.stopPropagation(),t(this,it).dispatch("switchannotationeditorparams",{source:this,type:t(this,st),value:rt})},Q=new WeakSet,Sa=function(rt){It._keyboardManager.exec(this,rt)},yt=new WeakSet,Ni=function(rt){if(t(this,wt,xi)){this.hideDropdown();return}if(D(this,C,rt.detail===0),window.addEventListener("pointerdown",t(this,B)),t(this,j)){t(this,j).classList.remove("hidden");return}const bt=D(this,j,I(this,R,Kn).call(this));t(this,F).append(bt)},Ct=new WeakSet,Ca=function(rt){var bt;(bt=t(this,j))!=null&&bt.contains(rt.target)||this.hideDropdown()},wt=new WeakSet,xi=function(){return t(this,j)&&!t(this,j).classList.contains("hidden")};let S=It},310:(v,U,x)=>{var P,tt,j,C,q,W,it,ut,Qn,K,$,O,Q,at,yt,Dt,Ct,Nt,wt,Tt,It,St,rt,bt,Lt,Pt,qt,Kt,re,_e,ce,Jn,me,Zn,oe,tr,se,Ta,ne,Ma,i,er,d,ir,l,sr,b,ka,u,Ia,h,La,a,Pa,k,nr,X,Ss;x.d(U,{AnnotationEditor:()=>B});var n=x(830),N=x(292),A=x(419);const R=class R{constructor(p){c(this,ut);c(this,P,"");c(this,tt,!1);c(this,j,null);c(this,C,null);c(this,q,null);c(this,W,!1);c(this,it,null);D(this,it,p)}static initialize(p){R._l10nPromise||(R._l10nPromise=p)}async render(){const p=D(this,j,document.createElement("button"));p.className="altText";const M=await R._l10nPromise.get("pdfjs-editor-alt-text-button-label");p.textContent=M,p.setAttribute("aria-label",M),p.tabIndex="0",p.addEventListener("contextmenu",A.noContextMenu),p.addEventListener("pointerdown",E=>E.stopPropagation());const J=E=>{E.preventDefault(),t(this,it)._uiManager.editAltText(t(this,it))};return p.addEventListener("click",J,{capture:!0}),p.addEventListener("keydown",E=>{E.target===p&&E.key==="Enter"&&(D(this,W,!0),J(E))}),await I(this,ut,Qn).call(this),p}finish(){t(this,j)&&(t(this,j).focus({focusVisible:t(this,W)}),D(this,W,!1))}isEmpty(){return!t(this,P)&&!t(this,tt)}get data(){return{altText:t(this,P),decorative:t(this,tt)}}set data({altText:p,decorative:M}){t(this,P)===p&&t(this,tt)===M||(D(this,P,p),D(this,tt,M),I(this,ut,Qn).call(this))}toggle(p=!1){t(this,j)&&(!p&&t(this,q)&&(clearTimeout(t(this,q)),D(this,q,null)),t(this,j).disabled=!p)}destroy(){var p;(p=t(this,j))==null||p.remove(),D(this,j,null),D(this,C,null)}};P=new WeakMap,tt=new WeakMap,j=new WeakMap,C=new WeakMap,q=new WeakMap,W=new WeakMap,it=new WeakMap,ut=new WeakSet,Qn=async function(){var J,E;const p=t(this,j);if(!p)return;if(!t(this,P)&&!t(this,tt)){p.classList.remove("done"),(J=t(this,C))==null||J.remove();return}p.classList.add("done"),R._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(m=>{p.setAttribute("aria-label",m)});let M=t(this,C);if(!M){D(this,C,M=document.createElement("span")),M.className="tooltip",M.setAttribute("role","tooltip");const m=M.id=`alt-text-tooltip-${t(this,it).id}`;p.setAttribute("aria-describedby",m);const z=100;p.addEventListener("mouseenter",()=>{D(this,q,setTimeout(()=>{D(this,q,null),t(this,C).classList.add("show"),t(this,it)._reportTelemetry({action:"alt_text_tooltip"})},z))}),p.addEventListener("mouseleave",()=>{var Y;t(this,q)&&(clearTimeout(t(this,q)),D(this,q,null)),(Y=t(this,C))==null||Y.classList.remove("show")})}M.innerText=t(this,tt)?await R._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):t(this,P),M.parentNode||p.append(M),(E=t(this,it).getImageForAltText())==null||E.setAttribute("aria-describedby",M.id)},be(R,"_l10nPromise",null);let S=R;var ot=x(362);const V=class V{constructor(p){c(this,ce);c(this,oe);c(this,se);c(this,ne);c(this,i);c(this,d);c(this,l);c(this,b);c(this,u);c(this,h);c(this,a);c(this,k);c(this,X);c(this,K,null);c(this,$,null);c(this,O,!1);c(this,Q,!1);c(this,at,null);c(this,yt,null);c(this,Dt,this.focusin.bind(this));c(this,Ct,this.focusout.bind(this));c(this,Nt,null);c(this,wt,"");c(this,Tt,!1);c(this,It,null);c(this,St,!1);c(this,rt,!1);c(this,bt,!1);c(this,Lt,null);c(this,Pt,0);c(this,qt,0);c(this,Kt,null);be(this,"_initialOptions",Object.create(null));be(this,"_isVisible",!0);be(this,"_uiManager",null);be(this,"_focusEventsAllowed",!0);be(this,"_l10nPromise",null);c(this,re,!1);c(this,_e,V._zIndex++);this.constructor===V&&(0,N.unreachable)("Cannot initialize AnnotationEditor."),this.parent=p.parent,this.id=p.id,this.width=this.height=null,this.pageIndex=p.parent.pageIndex,this.name=p.name,this.div=null,this._uiManager=p.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=p.isCentered,this._structTreeParentId=null;const{rotation:M,rawDims:{pageWidth:J,pageHeight:E,pageX:m,pageY:z}}=this.parent.viewport;this.rotation=M,this.pageRotation=(360+M-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[J,E],this.pageTranslation=[m,z];const[Y,ht]=this.parentDimensions;this.x=p.x/Y,this.y=p.y/ht,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const p=V.prototype._resizeWithKeyboard,M=n.AnnotationEditorUIManager.TRANSLATE_SMALL,J=n.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,N.shadow)(this,"_resizerKeyboardManager",new n.KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],p,{args:[-M,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],p,{args:[-J,0]}],[["ArrowRight","mac+ArrowRight"],p,{args:[M,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],p,{args:[J,0]}],[["ArrowUp","mac+ArrowUp"],p,{args:[0,-M]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],p,{args:[0,-J]}],[["ArrowDown","mac+ArrowDown"],p,{args:[0,M]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],p,{args:[0,J]}],[["Escape","mac+Escape"],V.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,N.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(p){const M=new F({id:p.parent.getNextId(),parent:p.parent,uiManager:p._uiManager});M.annotationElementId=p.annotationElementId,M.deleted=!0,M._uiManager.addToAnnotationStorage(M)}static initialize(p,M,J){if(V._l10nPromise||(V._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(m=>[m,p.get(m.replaceAll(/([A-Z])/g,z=>`-${z.toLowerCase()}`))]))),J==null?void 0:J.strings)for(const m of J.strings)V._l10nPromise.set(m,p.get(m));if(V._borderLineWidth!==-1)return;const E=getComputedStyle(document.documentElement);V._borderLineWidth=parseFloat(E.getPropertyValue("--outline-width"))||0}static updateDefaultParams(p,M){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(p){return!1}static paste(p,M){(0,N.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return t(this,re)}set _isDraggable(p){var M;D(this,re,p),(M=this.div)==null||M.classList.toggle("draggable",p)}get isEnterHandled(){return!0}center(){const[p,M]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*M/(p*2),this.y+=this.width*p/(M*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*M/(p*2),this.y-=this.width*p/(M*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(p){this._uiManager.addCommands(p)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,_e)}setParent(p){p!==null?(this.pageIndex=p.pageIndex,this.pageDimensions=p.pageDimensions):I(this,X,Ss).call(this),this.parent=p}focusin(p){this._focusEventsAllowed&&(t(this,Tt)?D(this,Tt,!1):this.parent.setSelected(this))}focusout(p){var M,J;!this._focusEventsAllowed||!this.isAttachedToDOM||(M=p.relatedTarget)!=null&&M.closest(`#${this.id}`)||(p.preventDefault(),(J=this.parent)!=null&&J.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(p,M,J,E){const[m,z]=this.parentDimensions;[J,E]=this.screenToPageTranslation(J,E),this.x=(p+J)/m,this.y=(M+E)/z,this.fixAndSetPosition()}translate(p,M){I(this,ce,Jn).call(this,this.parentDimensions,p,M)}translateInPage(p,M){t(this,It)||D(this,It,[this.x,this.y]),I(this,ce,Jn).call(this,this.pageDimensions,p,M),this.div.scrollIntoView({block:"nearest"})}drag(p,M){t(this,It)||D(this,It,[this.x,this.y]);const[J,E]=this.parentDimensions;if(this.x+=p/J,this.y+=M/E,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:gt,y:xt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,gt,xt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:m,y:z}=this;const[Y,ht]=this.getBaseTranslation();m+=Y,z+=ht,this.div.style.left=`${(100*m).toFixed(2)}%`,this.div.style.top=`${(100*z).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!t(this,It)&&(t(this,It)[0]!==this.x||t(this,It)[1]!==this.y)}getBaseTranslation(){const[p,M]=this.parentDimensions,{_borderLineWidth:J}=V,E=J/p,m=J/M;switch(this.rotation){case 90:return[-E,m];case 180:return[E,m];case 270:return[E,-m];default:return[-E,-m]}}get _mustFixPosition(){return!0}fixAndSetPosition(p=this.rotation){const[M,J]=this.pageDimensions;let{x:E,y:m,width:z,height:Y}=this;if(z*=M,Y*=J,E*=M,m*=J,this._mustFixPosition)switch(p){case 0:E=Math.max(0,Math.min(M-z,E)),m=Math.max(0,Math.min(J-Y,m));break;case 90:E=Math.max(0,Math.min(M-Y,E)),m=Math.min(J,Math.max(z,m));break;case 180:E=Math.min(M,Math.max(z,E)),m=Math.min(J,Math.max(Y,m));break;case 270:E=Math.min(M,Math.max(Y,E)),m=Math.max(0,Math.min(J-z,m));break}this.x=E/=M,this.y=m/=J;const[ht,gt]=this.getBaseTranslation();E+=ht,m+=gt;const{style:xt}=this.div;xt.left=`${(100*E).toFixed(2)}%`,xt.top=`${(100*m).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(p,M){var J;return I(J=V,me,Zn).call(J,p,M,this.parentRotation)}pageTranslationToScreen(p,M){var J;return I(J=V,me,Zn).call(J,p,M,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:p,pageDimensions:[M,J]}=this,E=M*p,m=J*p;return N.FeatureTest.isCSSRoundSupported?[Math.round(E),Math.round(m)]:[E,m]}setDims(p,M){const[J,E]=this.parentDimensions;this.div.style.width=`${(100*p/J).toFixed(2)}%`,t(this,Q)||(this.div.style.height=`${(100*M/E).toFixed(2)}%`)}fixDims(){const{style:p}=this.div,{height:M,width:J}=p,E=J.endsWith("%"),m=!t(this,Q)&&M.endsWith("%");if(E&&m)return;const[z,Y]=this.parentDimensions;E||(p.width=`${(100*parseFloat(J)/z).toFixed(2)}%`),!t(this,Q)&&!m&&(p.height=`${(100*parseFloat(M)/Y).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var p;(p=t(this,$))==null||p.finish()}async addEditToolbar(){return t(this,Nt)||t(this,rt)?t(this,Nt):(D(this,Nt,new ot.EditorToolbar(this)),this.div.append(t(this,Nt).render()),t(this,$)&&t(this,Nt).addAltTextButton(await t(this,$).render()),t(this,Nt))}removeEditToolbar(){var p;t(this,Nt)&&(t(this,Nt).remove(),D(this,Nt,null),(p=t(this,$))==null||p.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){t(this,$)||(S.initialize(V._l10nPromise),D(this,$,new S(this)),await this.addEditToolbar())}get altTextData(){var p;return(p=t(this,$))==null?void 0:p.data}set altTextData(p){t(this,$)&&(t(this,$).data=p)}hasAltText(){var p;return!((p=t(this,$))!=null&&p.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=t(this,O)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",t(this,Dt)),this.div.addEventListener("focusout",t(this,Ct));const[p,M]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*M/p).toFixed(2)}%`,this.div.style.maxHeight=`${(100*p/M).toFixed(2)}%`);const[J,E]=this.getInitialTranslation();return this.translate(J,E),(0,n.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(p){const{isMac:M}=N.FeatureTest.platform;if(p.button!==0||p.ctrlKey&&M){p.preventDefault();return}if(D(this,Tt,!0),this._isDraggable){I(this,b,ka).call(this,p);return}I(this,l,sr).call(this,p)}moveInDOM(){t(this,Lt)&&clearTimeout(t(this,Lt)),D(this,Lt,setTimeout(()=>{var p;D(this,Lt,null),(p=this.parent)==null||p.moveEditorInDOM(this)},0))}_setParentAndPosition(p,M,J){p.changeParent(this),this.x=M,this.y=J,this.fixAndSetPosition()}getRect(p,M,J=this.rotation){const E=this.parentScale,[m,z]=this.pageDimensions,[Y,ht]=this.pageTranslation,gt=p/E,xt=M/E,Rt=this.x*m,Xt=this.y*z,ie=this.width*m,ee=this.height*z;switch(J){case 0:return[Rt+gt+Y,z-Xt-xt-ee+ht,Rt+gt+ie+Y,z-Xt-xt+ht];case 90:return[Rt+xt+Y,z-Xt+gt+ht,Rt+xt+ee+Y,z-Xt+gt+ie+ht];case 180:return[Rt-gt-ie+Y,z-Xt+xt+ht,Rt-gt+Y,z-Xt+xt+ee+ht];case 270:return[Rt-xt-ee+Y,z-Xt-gt-ie+ht,Rt-xt+Y,z-Xt-gt+ht];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(p,M){const[J,E,m,z]=p,Y=m-J,ht=z-E;switch(this.rotation){case 0:return[J,M-z,Y,ht];case 90:return[J,M-E,ht,Y];case 180:return[m,M-E,Y,ht];case 270:return[m,M-z,ht,Y];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){D(this,rt,!0)}disableEditMode(){D(this,rt,!1)}isInEditMode(){return t(this,rt)}shouldGetKeyboardEvents(){return t(this,bt)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var p,M;(p=this.div)==null||p.addEventListener("focusin",t(this,Dt)),(M=this.div)==null||M.addEventListener("focusout",t(this,Ct))}rotate(p){}serialize(p=!1,M=null){(0,N.unreachable)("An editor must be serializable")}static deserialize(p,M,J){const E=new this.prototype.constructor({parent:M,id:M.getNextId(),uiManager:J});E.rotation=p.rotation;const[m,z]=E.pageDimensions,[Y,ht,gt,xt]=E.getRectInCurrentCoords(p.rect,z);return E.x=Y/m,E.y=ht/z,E.width=gt/m,E.height=xt/z,E}remove(){if(this.div.removeEventListener("focusin",t(this,Dt)),this.div.removeEventListener("focusout",t(this,Ct)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),t(this,Lt)&&(clearTimeout(t(this,Lt)),D(this,Lt,null)),I(this,X,Ss).call(this),this.removeEditToolbar(),t(this,Kt)){for(const p of t(this,Kt).values())clearTimeout(p);D(this,Kt,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(I(this,se,Ta).call(this),t(this,at).classList.remove("hidden"),(0,n.bindEvents)(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(p){if(!this.isResizable||p.target!==this.div||p.key!=="Enter")return;this._uiManager.setSelected(this),D(this,yt,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const M=t(this,at).children;if(!t(this,K)){D(this,K,Array.from(M));const z=I(this,u,Ia).bind(this),Y=I(this,h,La).bind(this);for(const ht of t(this,K)){const gt=ht.getAttribute("data-resizer-name");ht.setAttribute("role","spinbutton"),ht.addEventListener("keydown",z),ht.addEventListener("blur",Y),ht.addEventListener("focus",I(this,a,Pa).bind(this,gt)),V._l10nPromise.get(`pdfjs-editor-resizer-label-${gt}`).then(xt=>ht.setAttribute("aria-label",xt))}}const J=t(this,K)[0];let E=0;for(const z of M){if(z===J)break;E++}const m=(360-this.rotation+this.parentRotation)%360/90*(t(this,K).length/4);if(m!==E){if(m<E)for(let Y=0;Y<E-m;Y++)t(this,at).append(t(this,at).firstChild);else if(m>E)for(let Y=0;Y<m-E;Y++)t(this,at).firstChild.before(t(this,at).lastChild);let z=0;for(const Y of M){const ht=t(this,K)[z++].getAttribute("data-resizer-name");V._l10nPromise.get(`pdfjs-editor-resizer-label-${ht}`).then(gt=>Y.setAttribute("aria-label",gt))}}I(this,k,nr).call(this,0),D(this,bt,!0),t(this,at).firstChild.focus({focusVisible:!0}),p.preventDefault(),p.stopImmediatePropagation()}_resizeWithKeyboard(p,M){t(this,bt)&&I(this,d,ir).call(this,t(this,wt),{movementX:p,movementY:M})}_stopResizingWithKeyboard(){I(this,X,Ss).call(this),this.div.focus()}select(){var p,M;if(this.makeResizable(),(p=this.div)==null||p.classList.add("selectedEditor"),!t(this,Nt)){this.addEditToolbar().then(()=>{var J,E;(J=this.div)!=null&&J.classList.contains("selectedEditor")&&((E=t(this,Nt))==null||E.show())});return}(M=t(this,Nt))==null||M.show()}unselect(){var p,M,J,E;(p=t(this,at))==null||p.classList.add("hidden"),(M=this.div)==null||M.classList.remove("selectedEditor"),(J=this.div)!=null&&J.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(E=t(this,Nt))==null||E.hide()}updateParams(p,M){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return t(this,St)}set isEditing(p){D(this,St,p),this.parent&&(p?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(p,M){D(this,Q,!0);const J=p/M,{style:E}=this.div;E.aspectRatio=J,E.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(p,M=!1){if(M){t(this,Kt)||D(this,Kt,new Map);const{action:J}=p;let E=t(this,Kt).get(J);E&&clearTimeout(E),E=setTimeout(()=>{this._reportTelemetry(p),t(this,Kt).delete(J),t(this,Kt).size===0&&D(this,Kt,null)},V._telemetryTimeout),t(this,Kt).set(J,E);return}p.type||(p.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:p}})}show(p=this._isVisible){this.div.classList.toggle("hidden",!p),this._isVisible=p}enable(){this.div&&(this.div.tabIndex=0),D(this,O,!1)}disable(){this.div&&(this.div.tabIndex=-1),D(this,O,!0)}};K=new WeakMap,$=new WeakMap,O=new WeakMap,Q=new WeakMap,at=new WeakMap,yt=new WeakMap,Dt=new WeakMap,Ct=new WeakMap,Nt=new WeakMap,wt=new WeakMap,Tt=new WeakMap,It=new WeakMap,St=new WeakMap,rt=new WeakMap,bt=new WeakMap,Lt=new WeakMap,Pt=new WeakMap,qt=new WeakMap,Kt=new WeakMap,re=new WeakMap,_e=new WeakMap,ce=new WeakSet,Jn=function([p,M],J,E){[J,E]=this.screenToPageTranslation(J,E),this.x+=J/p,this.y+=E/M,this.fixAndSetPosition()},me=new WeakSet,Zn=function(p,M,J){switch(J){case 90:return[M,-p];case 180:return[-p,-M];case 270:return[-M,p];default:return[p,M]}},oe=new WeakSet,tr=function(p){switch(p){case 90:{const[M,J]=this.pageDimensions;return[0,-M/J,J/M,0]}case 180:return[-1,0,0,-1];case 270:{const[M,J]=this.pageDimensions;return[0,M/J,-J/M,0]}default:return[1,0,0,1]}},se=new WeakSet,Ta=function(){if(t(this,at))return;D(this,at,document.createElement("div")),t(this,at).classList.add("resizers");const p=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const M of p){const J=document.createElement("div");t(this,at).append(J),J.classList.add("resizer",M),J.setAttribute("data-resizer-name",M),J.addEventListener("pointerdown",I(this,ne,Ma).bind(this,M)),J.addEventListener("contextmenu",A.noContextMenu),J.tabIndex=-1}this.div.prepend(t(this,at))},ne=new WeakSet,Ma=function(p,M){var ee;M.preventDefault();const{isMac:J}=N.FeatureTest.platform;if(M.button!==0||M.ctrlKey&&J)return;(ee=t(this,$))==null||ee.toggle(!1);const E=I(this,d,ir).bind(this,p),m=this._isDraggable;this._isDraggable=!1;const z={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E,z);const Y=this.x,ht=this.y,gt=this.width,xt=this.height,Rt=this.parent.div.style.cursor,Xt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(M.target).cursor;const ie=()=>{var ye;this.parent.togglePointerEvents(!0),(ye=t(this,$))==null||ye.toggle(!0),this._isDraggable=m,window.removeEventListener("pointerup",ie),window.removeEventListener("blur",ie),window.removeEventListener("pointermove",E,z),this.parent.div.style.cursor=Rt,this.div.style.cursor=Xt,I(this,i,er).call(this,Y,ht,gt,xt)};window.addEventListener("pointerup",ie),window.addEventListener("blur",ie)},i=new WeakSet,er=function(p,M,J,E){const m=this.x,z=this.y,Y=this.width,ht=this.height;m===p&&z===M&&Y===J&&ht===E||this.addCommands({cmd:()=>{this.width=Y,this.height=ht,this.x=m,this.y=z;const[gt,xt]=this.parentDimensions;this.setDims(gt*Y,xt*ht),this.fixAndSetPosition()},undo:()=>{this.width=J,this.height=E,this.x=p,this.y=M;const[gt,xt]=this.parentDimensions;this.setDims(gt*J,xt*E),this.fixAndSetPosition()},mustExec:!0})},d=new WeakSet,ir=function(p,M){const[J,E]=this.parentDimensions,m=this.x,z=this.y,Y=this.width,ht=this.height,gt=V.MIN_SIZE/J,xt=V.MIN_SIZE/E,Rt=Mt=>Math.round(Mt*1e4)/1e4,Xt=I(this,oe,tr).call(this,this.rotation),ie=(Mt,Bt)=>[Xt[0]*Mt+Xt[2]*Bt,Xt[1]*Mt+Xt[3]*Bt],ee=I(this,oe,tr).call(this,360-this.rotation),ye=(Mt,Bt)=>[ee[0]*Mt+ee[2]*Bt,ee[1]*Mt+ee[3]*Bt];let ve,Le,fe=!1,Ie=!1;switch(p){case"topLeft":fe=!0,ve=(Mt,Bt)=>[0,0],Le=(Mt,Bt)=>[Mt,Bt];break;case"topMiddle":ve=(Mt,Bt)=>[Mt/2,0],Le=(Mt,Bt)=>[Mt/2,Bt];break;case"topRight":fe=!0,ve=(Mt,Bt)=>[Mt,0],Le=(Mt,Bt)=>[0,Bt];break;case"middleRight":Ie=!0,ve=(Mt,Bt)=>[Mt,Bt/2],Le=(Mt,Bt)=>[0,Bt/2];break;case"bottomRight":fe=!0,ve=(Mt,Bt)=>[Mt,Bt],Le=(Mt,Bt)=>[0,0];break;case"bottomMiddle":ve=(Mt,Bt)=>[Mt/2,Bt],Le=(Mt,Bt)=>[Mt/2,0];break;case"bottomLeft":fe=!0,ve=(Mt,Bt)=>[0,Bt],Le=(Mt,Bt)=>[Mt,0];break;case"middleLeft":Ie=!0,ve=(Mt,Bt)=>[0,Bt/2],Le=(Mt,Bt)=>[Mt,Bt/2];break}const ae=ve(Y,ht),H=Le(Y,ht);let T=ie(...H);const nt=Rt(m+T[0]),dt=Rt(z+T[1]);let ft=1,Et=1,[_t,Wt]=this.screenToPageTranslation(M.movementX,M.movementY);if([_t,Wt]=ye(_t/J,Wt/E),fe){const Mt=Math.hypot(Y,ht);ft=Et=Math.max(Math.min(Math.hypot(H[0]-ae[0]-_t,H[1]-ae[1]-Wt)/Mt,1/Y,1/ht),gt/Y,xt/ht)}else Ie?ft=Math.max(gt,Math.min(1,Math.abs(H[0]-ae[0]-_t)))/Y:Et=Math.max(xt,Math.min(1,Math.abs(H[1]-ae[1]-Wt)))/ht;const Ut=Rt(Y*ft),Ot=Rt(ht*Et);T=ie(...Le(Ut,Ot));const Qt=nt-T[0],Gt=dt-T[1];this.width=Ut,this.height=Ot,this.x=Qt,this.y=Gt,this.setDims(J*Ut,E*Ot),this.fixAndSetPosition()},l=new WeakSet,sr=function(p){const{isMac:M}=N.FeatureTest.platform;p.ctrlKey&&!M||p.shiftKey||p.metaKey&&M?this.parent.toggleSelected(this):this.parent.setSelected(this)},b=new WeakSet,ka=function(p){const M=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let J,E;M&&(this.div.classList.add("moving"),J={passive:!0,capture:!0},D(this,Pt,p.clientX),D(this,qt,p.clientY),E=z=>{const{clientX:Y,clientY:ht}=z,[gt,xt]=this.screenToPageTranslation(Y-t(this,Pt),ht-t(this,qt));D(this,Pt,Y),D(this,qt,ht),this._uiManager.dragSelectedEditors(gt,xt)},window.addEventListener("pointermove",E,J));const m=()=>{window.removeEventListener("pointerup",m),window.removeEventListener("blur",m),M&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",E,J)),D(this,Tt,!1),this._uiManager.endDragSession()||I(this,l,sr).call(this,p)};window.addEventListener("pointerup",m),window.addEventListener("blur",m)},u=new WeakSet,Ia=function(p){V._resizerKeyboardManager.exec(this,p)},h=new WeakSet,La=function(p){var M;t(this,bt)&&((M=p.relatedTarget)==null?void 0:M.parentNode)!==t(this,at)&&I(this,X,Ss).call(this)},a=new WeakSet,Pa=function(p){D(this,wt,t(this,bt)?p:"")},k=new WeakSet,nr=function(p){if(t(this,K))for(const M of t(this,K))M.tabIndex=p},X=new WeakSet,Ss=function(){if(D(this,bt,!1),I(this,k,nr).call(this,-1),t(this,yt)){const{savedX:p,savedY:M,savedWidth:J,savedHeight:E}=t(this,yt);I(this,i,er).call(this,p,M,J,E),D(this,yt,null)}},c(V,me),be(V,"_borderLineWidth",-1),be(V,"_colorManager",new n.ColorManager),be(V,"_zIndex",1),be(V,"_telemetryTimeout",1e3);let B=V;class F extends B{constructor(p){super(p),this.annotationElementId=p.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},61:(v,U,x)=>{var F,P,tt,j,Ra,q,cn,it,Fa,st,Da,K,rr,O,Q,at,yt,Dt,Ct,Nt,wt,Tt,It,St,rt,bt,Lt,Pt,qt,Kt,re,_e,ar,me,zt,oe,Ce,se,Ee,ne,lt,Cs,r,Ts,f,Na;x.d(U,{FreeOutliner:()=>ot,Outliner:()=>N});var n=x(292);class N{constructor(b,_=0,u=0,o=!0){c(this,j);c(this,q);c(this,it);c(this,st);c(this,K);c(this,F,void 0);c(this,P,[]);c(this,tt,[]);let h=1/0,s=-1/0,a=1/0,g=-1/0;const k=10**-4;for(const{x:M,y:J,width:E,height:m}of b){const z=Math.floor((M-_)/k)*k,Y=Math.ceil((M+E+_)/k)*k,ht=Math.floor((J-_)/k)*k,gt=Math.ceil((J+m+_)/k)*k,xt=[z,ht,gt,!0],Rt=[Y,ht,gt,!1];t(this,P).push(xt,Rt),h=Math.min(h,z),s=Math.max(s,Y),a=Math.min(a,ht),g=Math.max(g,gt)}const y=s-h+2*u,X=g-a+2*u,Z=h-u,V=a-u,et=t(this,P).at(o?-1:-2),p=[et[0],et[2]];for(const M of t(this,P)){const[J,E,m]=M;M[0]=(J-Z)/y,M[1]=(E-V)/X,M[2]=(m-V)/X}D(this,F,{x:Z,y:V,width:y,height:X,lastPoint:p})}getOutlines(){t(this,P).sort((_,u)=>_[0]-u[0]||_[1]-u[1]||_[2]-u[2]);const b=[];for(const _ of t(this,P))_[3]?(b.push(...I(this,K,rr).call(this,_)),I(this,it,Fa).call(this,_)):(I(this,st,Da).call(this,_),b.push(...I(this,K,rr).call(this,_)));return I(this,j,Ra).call(this,b)}}F=new WeakMap,P=new WeakMap,tt=new WeakMap,j=new WeakSet,Ra=function(b){const _=[],u=new Set;for(const s of b){const[a,g,k]=s;_.push([a,g,s],[a,k,s])}_.sort((s,a)=>s[1]-a[1]||s[0]-a[0]);for(let s=0,a=_.length;s<a;s+=2){const g=_[s][2],k=_[s+1][2];g.push(k),k.push(g),u.add(g),u.add(k)}const o=[];let h;for(;u.size>0;){const s=u.values().next().value;let[a,g,k,y,X]=s;u.delete(s);let Z=a,V=g;for(h=[a,k],o.push(h);;){let et;if(u.has(y))et=y;else if(u.has(X))et=X;else break;u.delete(et),[a,g,k,y,X]=et,Z!==a&&(h.push(Z,V,a,V===g?g:k),Z=a),V=V===g?k:g}h.push(Z,V)}return new S(o,t(this,F))},q=new WeakSet,cn=function(b){const _=t(this,tt);let u=0,o=_.length-1;for(;u<=o;){const h=u+o>>1,s=_[h][0];if(s===b)return h;s<b?u=h+1:o=h-1}return o+1},it=new WeakSet,Fa=function([,b,_]){const u=I(this,q,cn).call(this,b);t(this,tt).splice(u,0,[b,_])},st=new WeakSet,Da=function([,b,_]){const u=I(this,q,cn).call(this,b);for(let o=u;o<t(this,tt).length;o++){const[h,s]=t(this,tt)[o];if(h!==b)break;if(h===b&&s===_){t(this,tt).splice(o,1);return}}for(let o=u-1;o>=0;o--){const[h,s]=t(this,tt)[o];if(h!==b)break;if(h===b&&s===_){t(this,tt).splice(o,1);return}}},K=new WeakSet,rr=function(b){const[_,u,o]=b,h=[[_,u,o]],s=I(this,q,cn).call(this,o);for(let a=0;a<s;a++){const[g,k]=t(this,tt)[a];for(let y=0,X=h.length;y<X;y++){const[,Z,V]=h[y];if(!(k<=Z||V<=g)){if(Z>=g){if(V>k)h[y][1]=k;else{if(X===1)return[];h.splice(y,1),y--,X--}continue}h[y][2]=g,V>k&&h.push([_,k,V])}}}return h};class A{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(b,_){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof B}}class S extends A{constructor(_,u){super();c(this,O,void 0);c(this,Q,void 0);D(this,Q,_),D(this,O,u)}toSVGPath(){const _=[];for(const u of t(this,Q)){let[o,h]=u;_.push(`M${o} ${h}`);for(let s=2;s<u.length;s+=2){const a=u[s],g=u[s+1];a===o?(_.push(`V${g}`),h=g):g===h&&(_.push(`H${a}`),o=a)}_.push("Z")}return _.join(" ")}serialize([_,u,o,h],s){const a=[],g=o-_,k=h-u;for(const y of t(this,Q)){const X=new Array(y.length);for(let Z=0;Z<y.length;Z+=2)X[Z]=_+y[Z]*g,X[Z+1]=h-y[Z+1]*k;a.push(X)}return a}get box(){return t(this,O)}}O=new WeakMap,Q=new WeakMap;const he=class he{constructor({x:b,y:_},u,o,h,s,a=0){c(this,_e);c(this,at,void 0);c(this,yt,[]);c(this,Dt,void 0);c(this,Ct,void 0);c(this,Nt,[]);c(this,wt,new Float64Array(18));c(this,Tt,void 0);c(this,It,void 0);c(this,St,void 0);c(this,rt,void 0);c(this,bt,void 0);c(this,Lt,void 0);c(this,Pt,[]);D(this,at,u),D(this,Lt,h*o),D(this,Ct,s),t(this,wt).set([NaN,NaN,NaN,NaN,b,_],6),D(this,Dt,a),D(this,rt,t(he,qt)*o),D(this,St,t(he,re)*o),D(this,bt,o),t(this,Pt).push(b,_)}get free(){return!0}isEmpty(){return isNaN(t(this,wt)[8])}add({x:b,y:_}){var xt;D(this,Tt,b),D(this,It,_);const[u,o,h,s]=t(this,at);let[a,g,k,y]=t(this,wt).subarray(8,12);const X=b-k,Z=_-y,V=Math.hypot(X,Z);if(V<t(this,St))return!1;const et=V-t(this,rt),p=et/V,M=p*X,J=p*Z;let E=a,m=g;a=k,g=y,k+=M,y+=J,(xt=t(this,Pt))==null||xt.push(b,_);const z=-J/et,Y=M/et,ht=z*t(this,Lt),gt=Y*t(this,Lt);return t(this,wt).set(t(this,wt).subarray(2,8),0),t(this,wt).set([k+ht,y+gt],4),t(this,wt).set(t(this,wt).subarray(14,18),12),t(this,wt).set([k-ht,y-gt],16),isNaN(t(this,wt)[6])?(t(this,Nt).length===0&&(t(this,wt).set([a+ht,g+gt],2),t(this,Nt).push(NaN,NaN,NaN,NaN,(a+ht-u)/h,(g+gt-o)/s),t(this,wt).set([a-ht,g-gt],14),t(this,yt).push(NaN,NaN,NaN,NaN,(a-ht-u)/h,(g-gt-o)/s)),t(this,wt).set([E,m,a,g,k,y],6),!this.isEmpty()):(t(this,wt).set([E,m,a,g,k,y],6),Math.abs(Math.atan2(m-g,E-a)-Math.atan2(J,M))<Math.PI/2?([a,g,k,y]=t(this,wt).subarray(2,6),t(this,Nt).push(NaN,NaN,NaN,NaN,((a+k)/2-u)/h,((g+y)/2-o)/s),[a,g,E,m]=t(this,wt).subarray(14,18),t(this,yt).push(NaN,NaN,NaN,NaN,((E+a)/2-u)/h,((m+g)/2-o)/s),!0):([E,m,a,g,k,y]=t(this,wt).subarray(0,6),t(this,Nt).push(((E+5*a)/6-u)/h,((m+5*g)/6-o)/s,((5*a+k)/6-u)/h,((5*g+y)/6-o)/s,((a+k)/2-u)/h,((g+y)/2-o)/s),[k,y,a,g,E,m]=t(this,wt).subarray(12,18),t(this,yt).push(((E+5*a)/6-u)/h,((m+5*g)/6-o)/s,((5*a+k)/6-u)/h,((5*g+y)/6-o)/s,((a+k)/2-u)/h,((g+y)/2-o)/s),!0))}toSVGPath(){if(this.isEmpty())return"";const b=t(this,Nt),_=t(this,yt),u=t(this,wt).subarray(4,6),o=t(this,wt).subarray(16,18),[h,s,a,g]=t(this,at),[k,y,X,Z]=I(this,_e,ar).call(this);if(isNaN(t(this,wt)[6])&&!this.isEmpty())return`M${(t(this,wt)[2]-h)/a} ${(t(this,wt)[3]-s)/g} L${(t(this,wt)[4]-h)/a} ${(t(this,wt)[5]-s)/g} L${k} ${y} L${X} ${Z} L${(t(this,wt)[16]-h)/a} ${(t(this,wt)[17]-s)/g} L${(t(this,wt)[14]-h)/a} ${(t(this,wt)[15]-s)/g} Z`;const V=[];V.push(`M${b[4]} ${b[5]}`);for(let et=6;et<b.length;et+=6)isNaN(b[et])?V.push(`L${b[et+4]} ${b[et+5]}`):V.push(`C${b[et]} ${b[et+1]} ${b[et+2]} ${b[et+3]} ${b[et+4]} ${b[et+5]}`);V.push(`L${(u[0]-h)/a} ${(u[1]-s)/g} L${k} ${y} L${X} ${Z} L${(o[0]-h)/a} ${(o[1]-s)/g}`);for(let et=_.length-6;et>=6;et-=6)isNaN(_[et])?V.push(`L${_[et+4]} ${_[et+5]}`):V.push(`C${_[et]} ${_[et+1]} ${_[et+2]} ${_[et+3]} ${_[et+4]} ${_[et+5]}`);return V.push(`L${_[4]} ${_[5]} Z`),V.join(" ")}getOutlines(){var J;const b=t(this,Nt),_=t(this,yt),u=t(this,wt),o=u.subarray(4,6),h=u.subarray(16,18),[s,a,g,k]=t(this,at),y=new Float64Array((((J=t(this,Pt))==null?void 0:J.length)??0)+2);for(let E=0,m=y.length-2;E<m;E+=2)y[E]=(t(this,Pt)[E]-s)/g,y[E+1]=(t(this,Pt)[E+1]-a)/k;y[y.length-2]=(t(this,Tt)-s)/g,y[y.length-1]=(t(this,It)-a)/k;const[X,Z,V,et]=I(this,_e,ar).call(this);if(isNaN(u[6])&&!this.isEmpty()){const E=new Float64Array(36);return E.set([NaN,NaN,NaN,NaN,(u[2]-s)/g,(u[3]-a)/k,NaN,NaN,NaN,NaN,(u[4]-s)/g,(u[5]-a)/k,NaN,NaN,NaN,NaN,X,Z,NaN,NaN,NaN,NaN,V,et,NaN,NaN,NaN,NaN,(u[16]-s)/g,(u[17]-a)/k,NaN,NaN,NaN,NaN,(u[14]-s)/g,(u[15]-a)/k],0),new B(E,y,t(this,at),t(this,bt),t(this,Dt),t(this,Ct))}const p=new Float64Array(t(this,Nt).length+24+t(this,yt).length);let M=b.length;for(let E=0;E<M;E+=2){if(isNaN(b[E])){p[E]=p[E+1]=NaN;continue}p[E]=b[E],p[E+1]=b[E+1]}p.set([NaN,NaN,NaN,NaN,(o[0]-s)/g,(o[1]-a)/k,NaN,NaN,NaN,NaN,X,Z,NaN,NaN,NaN,NaN,V,et,NaN,NaN,NaN,NaN,(h[0]-s)/g,(h[1]-a)/k],M),M+=24;for(let E=_.length-6;E>=6;E-=6)for(let m=0;m<6;m+=2){if(isNaN(_[E+m])){p[M]=p[M+1]=NaN,M+=2;continue}p[M]=_[E+m],p[M+1]=_[E+m+1],M+=2}return p.set([NaN,NaN,NaN,NaN,_[4],_[5]],M),new B(p,y,t(this,at),t(this,bt),t(this,Dt),t(this,Ct))}};at=new WeakMap,yt=new WeakMap,Dt=new WeakMap,Ct=new WeakMap,Nt=new WeakMap,wt=new WeakMap,Tt=new WeakMap,It=new WeakMap,St=new WeakMap,rt=new WeakMap,bt=new WeakMap,Lt=new WeakMap,Pt=new WeakMap,qt=new WeakMap,Kt=new WeakMap,re=new WeakMap,_e=new WeakSet,ar=function(){const b=t(this,wt).subarray(4,6),_=t(this,wt).subarray(16,18),[u,o,h,s]=t(this,at);return[(t(this,Tt)+(b[0]-_[0])/2-u)/h,(t(this,It)+(b[1]-_[1])/2-o)/s,(t(this,Tt)+(_[0]-b[0])/2-u)/h,(t(this,It)+(_[1]-b[1])/2-o)/s]},c(he,qt,8),c(he,Kt,2),c(he,re,t(he,qt)+t(he,Kt));let ot=he;class B extends A{constructor(_,u,o,h,s,a){super();c(this,lt);c(this,r);c(this,f);c(this,me,void 0);c(this,zt,null);c(this,oe,void 0);c(this,Ce,void 0);c(this,se,void 0);c(this,Ee,void 0);c(this,ne,void 0);D(this,ne,_),D(this,se,u),D(this,me,o),D(this,Ee,h),D(this,oe,s),D(this,Ce,a),I(this,f,Na).call(this,a);const{x:g,y:k,width:y,height:X}=t(this,zt);for(let Z=0,V=_.length;Z<V;Z+=2)_[Z]=(_[Z]-g)/y,_[Z+1]=(_[Z+1]-k)/X;for(let Z=0,V=u.length;Z<V;Z+=2)u[Z]=(u[Z]-g)/y,u[Z+1]=(u[Z+1]-k)/X}toSVGPath(){const _=[`M${t(this,ne)[4]} ${t(this,ne)[5]}`];for(let u=6,o=t(this,ne).length;u<o;u+=6){if(isNaN(t(this,ne)[u])){_.push(`L${t(this,ne)[u+4]} ${t(this,ne)[u+5]}`);continue}_.push(`C${t(this,ne)[u]} ${t(this,ne)[u+1]} ${t(this,ne)[u+2]} ${t(this,ne)[u+3]} ${t(this,ne)[u+4]} ${t(this,ne)[u+5]}`)}return _.push("Z"),_.join(" ")}serialize([_,u,o,h],s){const a=o-_,g=h-u;let k,y;switch(s){case 0:k=I(this,lt,Cs).call(this,t(this,ne),_,h,a,-g),y=I(this,lt,Cs).call(this,t(this,se),_,h,a,-g);break;case 90:k=I(this,r,Ts).call(this,t(this,ne),_,u,a,g),y=I(this,r,Ts).call(this,t(this,se),_,u,a,g);break;case 180:k=I(this,lt,Cs).call(this,t(this,ne),o,u,-a,g),y=I(this,lt,Cs).call(this,t(this,se),o,u,-a,g);break;case 270:k=I(this,r,Ts).call(this,t(this,ne),o,h,-a,-g),y=I(this,r,Ts).call(this,t(this,se),o,h,-a,-g);break}return{outline:Array.from(k),points:[Array.from(y)]}}get box(){return t(this,zt)}getNewOutline(_,u){const{x:o,y:h,width:s,height:a}=t(this,zt),[g,k,y,X]=t(this,me),Z=s*y,V=a*X,et=o*y+g,p=h*X+k,M=new ot({x:t(this,se)[0]*Z+et,y:t(this,se)[1]*V+p},t(this,me),t(this,Ee),_,t(this,Ce),u??t(this,oe));for(let J=2;J<t(this,se).length;J+=2)M.add({x:t(this,se)[J]*Z+et,y:t(this,se)[J+1]*V+p});return M.getOutlines()}}me=new WeakMap,zt=new WeakMap,oe=new WeakMap,Ce=new WeakMap,se=new WeakMap,Ee=new WeakMap,ne=new WeakMap,lt=new WeakSet,Cs=function(_,u,o,h,s){const a=new Float64Array(_.length);for(let g=0,k=_.length;g<k;g+=2)a[g]=u+_[g]*h,a[g+1]=o+_[g+1]*s;return a},r=new WeakSet,Ts=function(_,u,o,h,s){const a=new Float64Array(_.length);for(let g=0,k=_.length;g<k;g+=2)a[g]=u+_[g+1]*h,a[g+1]=o+_[g]*s;return a},f=new WeakSet,Na=function(_){const u=t(this,ne);let o=u[4],h=u[5],s=o,a=h,g=o,k=h,y=o,X=h;const Z=_?Math.max:Math.min;for(let J=6,E=u.length;J<E;J+=6){if(isNaN(u[J]))s=Math.min(s,u[J+4]),a=Math.min(a,u[J+5]),g=Math.max(g,u[J+4]),k=Math.max(k,u[J+5]),X<u[J+5]?(y=u[J+4],X=u[J+5]):X===u[J+5]&&(y=Z(y,u[J+4]));else{const m=n.Util.bezierBoundingBox(o,h,...u.slice(J,J+6));s=Math.min(s,m[0]),a=Math.min(a,m[1]),g=Math.max(g,m[2]),k=Math.max(k,m[3]),X<m[3]?(y=m[2],X=m[3]):X===m[3]&&(y=Z(y,m[2]))}o=u[J+4],h=u[J+5]}const V=s-t(this,oe),et=a-t(this,oe),p=g-s+2*t(this,oe),M=k-a+2*t(this,oe);D(this,zt,{x:V,y:et,width:p,height:M,lastPoint:[y,X]})}},362:(v,U,x)=>{var S,ot,B,F,P,Oa,j,Ha,q,Ba,it,dn,st,ja,K,or,Q,at,yt,Dt,za,Nt,Ga,Tt,qa;x.d(U,{EditorToolbar:()=>N,HighlightToolbar:()=>A});var n=x(419);const O=class O{constructor(rt){c(this,j);c(this,q);c(this,it);c(this,st);c(this,K);c(this,S,null);c(this,ot,null);c(this,B,void 0);c(this,F,null);D(this,B,rt)}render(){const rt=D(this,S,document.createElement("div"));rt.className="editToolbar",rt.setAttribute("role","toolbar"),rt.addEventListener("contextmenu",n.noContextMenu),rt.addEventListener("pointerdown",I(O,P,Oa));const bt=D(this,F,document.createElement("div"));bt.className="buttons",rt.append(bt);const Lt=t(this,B).toolbarPosition;if(Lt){const{style:Pt}=rt,qt=t(this,B)._uiManager.direction==="ltr"?1-Lt[0]:Lt[0];Pt.insetInlineEnd=`${100*qt}%`,Pt.top=`calc(${100*Lt[1]}% + var(--editor-toolbar-vert-offset))`}return I(this,st,ja).call(this),rt}hide(){var rt;t(this,S).classList.add("hidden"),(rt=t(this,ot))==null||rt.hideDropdown()}show(){t(this,S).classList.remove("hidden")}addAltTextButton(rt){I(this,it,dn).call(this,rt),t(this,F).prepend(rt,t(this,K,or))}addColorPicker(rt){D(this,ot,rt);const bt=rt.renderButton();I(this,it,dn).call(this,bt),t(this,F).prepend(bt,t(this,K,or))}remove(){var rt;t(this,S).remove(),(rt=t(this,ot))==null||rt.destroy(),D(this,ot,null)}};S=new WeakMap,ot=new WeakMap,B=new WeakMap,F=new WeakMap,P=new WeakSet,Oa=function(rt){rt.stopPropagation()},j=new WeakSet,Ha=function(rt){t(this,B)._focusEventsAllowed=!1,rt.preventDefault(),rt.stopPropagation()},q=new WeakSet,Ba=function(rt){t(this,B)._focusEventsAllowed=!0,rt.preventDefault(),rt.stopPropagation()},it=new WeakSet,dn=function(rt){rt.addEventListener("focusin",I(this,j,Ha).bind(this),{capture:!0}),rt.addEventListener("focusout",I(this,q,Ba).bind(this),{capture:!0}),rt.addEventListener("contextmenu",n.noContextMenu)},st=new WeakSet,ja=function(){const rt=document.createElement("button");rt.className="delete",rt.tabIndex=0,rt.setAttribute("data-l10n-id",`pdfjs-editor-remove-${t(this,B).editorType}-button`),I(this,it,dn).call(this,rt),rt.addEventListener("click",bt=>{t(this,B)._uiManager.delete()}),t(this,F).append(rt)},K=new WeakSet,or=function(){const rt=document.createElement("div");return rt.className="divider",rt},c(O,P);let N=O;class A{constructor(rt){c(this,Dt);c(this,Nt);c(this,Tt);c(this,Q,null);c(this,at,null);c(this,yt,void 0);D(this,yt,rt)}show(rt,bt,Lt){const[Pt,qt]=I(this,Nt,Ga).call(this,bt,Lt),{style:Kt}=t(this,at)||D(this,at,I(this,Dt,za).call(this));rt.append(t(this,at)),Kt.insetInlineEnd=`${100*Pt}%`,Kt.top=`calc(${100*qt}% + var(--editor-toolbar-vert-offset))`}hide(){t(this,at).remove()}}Q=new WeakMap,at=new WeakMap,yt=new WeakMap,Dt=new WeakSet,za=function(){const rt=D(this,at,document.createElement("div"));rt.className="editToolbar",rt.setAttribute("role","toolbar"),rt.addEventListener("contextmenu",n.noContextMenu);const bt=D(this,Q,document.createElement("div"));return bt.className="buttons",rt.append(bt),I(this,Tt,qa).call(this),rt},Nt=new WeakSet,Ga=function(rt,bt){let Lt=0,Pt=0;for(const qt of rt){const Kt=qt.y+qt.height;if(Kt<Lt)continue;const re=qt.x+(bt?qt.width:0);if(Kt>Lt){Pt=re,Lt=Kt;continue}bt?re>Pt&&(Pt=re):re<Pt&&(Pt=re)}return[bt?1-Pt:Pt,Lt]},Tt=new WeakSet,qa=function(){const rt=document.createElement("button");rt.className="highlightButton",rt.tabIndex=0,rt.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const bt=document.createElement("span");rt.append(bt),bt.className="visuallyHidden",bt.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),rt.addEventListener("contextmenu",n.noContextMenu),rt.addEventListener("click",()=>{t(this,yt).highlightSelection("floating_button")}),t(this,Q).append(rt)}},830:(v,U,x)=>{var q,W,it,ut,st,lr,$,O,Q,at,yt,Ua,Nt,wt,Tt,It,St,rt,bt,Lt,Pt,qt,Kt,re,_e,ce,he,me,zt,oe,Ce,se,Ee,ne,lt,i,r,d,f,l,w,b,_,u,o,h,s,a,g,k,y,X,Z,V,et,p,M,J,un,m,$a,Y,Wa,gt,pn,Rt,Xa,ie,Va,ye,Ka,Le,hr,Ie,cr,H,dr,nt,ur,ft,pr,_t,Qe,Ut,_i,Qt,Ya,Mt,Qa,Zt,gr,de,Ja,Me,Ms,Xe,fr;x.d(U,{AnnotationEditorUIManager:()=>C,ColorManager:()=>j,KeyboardManager:()=>tt,bindEvents:()=>S,opacityToHex:()=>ot});var n=x(292),N=x(419),A=x(362);function S(Ge,G,mt){for(const Ht of mt)G.addEventListener(Ht,Ge[Ht].bind(Ge))}function ot(Ge){return Math.round(Math.min(255,Math.max(1,255*Ge))).toString(16).padStart(2,"0")}class B{constructor(){c(this,q,0)}get id(){return`${n.AnnotationEditorPrefix}${fi(this,q)._++}`}}q=new WeakMap;const K=class K{constructor(){c(this,st);c(this,W,(0,n.getUuid)());c(this,it,0);c(this,ut,null)}static get _isSVGFittingCanvas(){const G='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',mt=new OffscreenCanvas(1,3).getContext("2d"),Ht=new Image;Ht.src=G;const jt=Ht.decode().then(()=>(mt.drawImage(Ht,0,0,1,1,0,0,1,3),new Uint32Array(mt.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,n.shadow)(this,"_isSVGFittingCanvas",jt)}async getFromFile(G){const{lastModified:mt,name:Ht,size:jt,type:Jt}=G;return I(this,st,lr).call(this,`${mt}_${Ht}_${jt}_${Jt}`,G)}async getFromUrl(G){return I(this,st,lr).call(this,G,G)}async getFromId(G){t(this,ut)||D(this,ut,new Map);const mt=t(this,ut).get(G);return mt?mt.bitmap?(mt.refCounter+=1,mt):mt.file?this.getFromFile(mt.file):this.getFromUrl(mt.url):null}getSvgUrl(G){const mt=t(this,ut).get(G);return mt!=null&&mt.isSvg?mt.svgUrl:null}deleteId(G){t(this,ut)||D(this,ut,new Map);const mt=t(this,ut).get(G);mt&&(mt.refCounter-=1,mt.refCounter===0&&(mt.bitmap=null))}isValidId(G){return G.startsWith(`image_${t(this,W)}_`)}};W=new WeakMap,it=new WeakMap,ut=new WeakMap,st=new WeakSet,lr=async function(G,mt){t(this,ut)||D(this,ut,new Map);let Ht=t(this,ut).get(G);if(Ht===null)return null;if(Ht!=null&&Ht.bitmap)return Ht.refCounter+=1,Ht;try{Ht||(Ht={bitmap:null,id:`image_${t(this,W)}_${fi(this,it)._++}`,refCounter:0,isSvg:!1});let jt;if(typeof mt=="string"?(Ht.url=mt,jt=await(0,N.fetchData)(mt,"blob")):jt=Ht.file=mt,jt.type==="image/svg+xml"){const Jt=K._isSVGFittingCanvas,te=new FileReader,le=new Image,Ae=new Promise((Pe,He)=>{le.onload=()=>{Ht.bitmap=le,Ht.isSvg=!0,Pe()},te.onload=async()=>{const Ke=Ht.svgUrl=te.result;le.src=await Jt?`${Ke}#svgView(preserveAspectRatio(none))`:Ke},le.onerror=te.onerror=He});te.readAsDataURL(jt),await Ae}else Ht.bitmap=await createImageBitmap(jt);Ht.refCounter=1}catch(jt){console.error(jt),Ht=null}return t(this,ut).set(G,Ht),Ht&&t(this,ut).set(Ht.id,Ht),Ht};let F=K;class P{constructor(G=128){c(this,$,[]);c(this,O,!1);c(this,Q,void 0);c(this,at,-1);D(this,Q,G)}add({cmd:G,undo:mt,post:Ht,mustExec:jt,type:Jt=NaN,overwriteIfSameType:te=!1,keepUndo:le=!1}){if(jt&&G(),t(this,O))return;const Ae={cmd:G,undo:mt,post:Ht,type:Jt};if(t(this,at)===-1){t(this,$).length>0&&(t(this,$).length=0),D(this,at,0),t(this,$).push(Ae);return}if(te&&t(this,$)[t(this,at)].type===Jt){le&&(Ae.undo=t(this,$)[t(this,at)].undo),t(this,$)[t(this,at)]=Ae;return}const Pe=t(this,at)+1;Pe===t(this,Q)?t(this,$).splice(0,1):(D(this,at,Pe),Pe<t(this,$).length&&t(this,$).splice(Pe)),t(this,$).push(Ae)}undo(){if(t(this,at)===-1)return;D(this,O,!0);const{undo:G,post:mt}=t(this,$)[t(this,at)];G(),mt==null||mt(),D(this,O,!1),D(this,at,t(this,at)-1)}redo(){if(t(this,at)<t(this,$).length-1){D(this,at,t(this,at)+1),D(this,O,!0);const{cmd:G,post:mt}=t(this,$)[t(this,at)];G(),mt==null||mt(),D(this,O,!1)}}hasSomethingToUndo(){return t(this,at)!==-1}hasSomethingToRedo(){return t(this,at)<t(this,$).length-1}destroy(){D(this,$,null)}}$=new WeakMap,O=new WeakMap,Q=new WeakMap,at=new WeakMap;class tt{constructor(G){c(this,yt);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:mt}=n.FeatureTest.platform;for(const[Ht,jt,Jt={}]of G)for(const te of Ht){const le=te.startsWith("mac+");mt&&le?(this.callbacks.set(te.slice(4),{callback:jt,options:Jt}),this.allKeys.add(te.split("+").at(-1))):!mt&&!le&&(this.callbacks.set(te,{callback:jt,options:Jt}),this.allKeys.add(te.split("+").at(-1)))}}exec(G,mt){if(!this.allKeys.has(mt.key))return;const Ht=this.callbacks.get(I(this,yt,Ua).call(this,mt));if(!Ht)return;const{callback:jt,options:{bubbles:Jt=!1,args:te=[],checker:le=null}}=Ht;le&&!le(G,mt)||(jt.bind(G,...te,mt)(),Jt||(mt.stopPropagation(),mt.preventDefault()))}}yt=new WeakSet,Ua=function(G){G.altKey&&this.buffer.push("alt"),G.ctrlKey&&this.buffer.push("ctrl"),G.metaKey&&this.buffer.push("meta"),G.shiftKey&&this.buffer.push("shift"),this.buffer.push(G.key);const mt=this.buffer.join("+");return this.buffer.length=0,mt};const Ct=class Ct{get _colors(){const G=new Map([["CanvasText",null],["Canvas",null]]);return(0,N.getColorValues)(G),(0,n.shadow)(this,"_colors",G)}convert(G){const mt=(0,N.getRGB)(G);if(!window.matchMedia("(forced-colors: active)").matches)return mt;for(const[Ht,jt]of this._colors)if(jt.every((Jt,te)=>Jt===mt[te]))return Ct._colorsMapping.get(Ht);return mt}getHexCode(G){const mt=this._colors.get(G);return mt?n.Util.makeHexColor(...mt):G}};be(Ct,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let j=Ct;const ii=class ii{constructor(G,mt,Ht,jt,Jt,te,le,Ae,Pe){c(this,J);c(this,m);c(this,Y);c(this,gt);c(this,Rt);c(this,ie);c(this,ye);c(this,Le);c(this,Ie);c(this,H);c(this,nt);c(this,ft);c(this,_t);c(this,Ut);c(this,Qt);c(this,Mt);c(this,Zt);c(this,de);c(this,Me);c(this,Xe);c(this,Nt,null);c(this,wt,new Map);c(this,Tt,new Map);c(this,It,null);c(this,St,null);c(this,rt,new P);c(this,bt,0);c(this,Lt,new Set);c(this,Pt,null);c(this,qt,null);c(this,Kt,new Set);c(this,re,!1);c(this,_e,null);c(this,ce,null);c(this,he,null);c(this,me,!1);c(this,zt,null);c(this,oe,new B);c(this,Ce,!1);c(this,se,!1);c(this,Ee,null);c(this,ne,null);c(this,lt,null);c(this,i,n.AnnotationEditorType.NONE);c(this,r,new Set);c(this,d,null);c(this,f,null);c(this,l,null);c(this,w,this.blur.bind(this));c(this,b,this.focus.bind(this));c(this,_,this.copy.bind(this));c(this,u,this.cut.bind(this));c(this,o,this.paste.bind(this));c(this,h,this.keydown.bind(this));c(this,s,this.keyup.bind(this));c(this,a,this.onEditingAction.bind(this));c(this,g,this.onPageChanging.bind(this));c(this,k,this.onScaleChanging.bind(this));c(this,y,I(this,Y,Wa).bind(this));c(this,X,this.onRotationChanging.bind(this));c(this,Z,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});c(this,V,[0,0]);c(this,et,null);c(this,p,null);c(this,M,null);D(this,p,G),D(this,M,mt),D(this,It,Ht),this._eventBus=jt,this._eventBus._on("editingaction",t(this,a)),this._eventBus._on("pagechanging",t(this,g)),this._eventBus._on("scalechanging",t(this,k)),this._eventBus._on("rotationchanging",t(this,X)),I(this,Rt,Xa).call(this),I(this,Ie,cr).call(this),D(this,St,Jt.annotationStorage),D(this,_e,Jt.filterFactory),D(this,f,te),D(this,he,le||null),D(this,re,Ae),D(this,lt,Pe||null),this.viewParameters={realScale:N.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const G=ii.prototype,mt=te=>t(te,p).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&te.hasSomethingToControl(),Ht=(te,{target:le})=>{if(le instanceof HTMLInputElement){const{type:Ae}=le;return Ae!=="text"&&Ae!=="number"}return!0},jt=this.TRANSLATE_SMALL,Jt=this.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new tt([[["ctrl+a","mac+meta+a"],G.selectAll,{checker:Ht}],[["ctrl+z","mac+meta+z"],G.undo,{checker:Ht}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],G.redo,{checker:Ht}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],G.delete,{checker:Ht}],[["Enter","mac+Enter"],G.addNewEditorFromKeyboard,{checker:(te,{target:le})=>!(le instanceof HTMLButtonElement)&&t(te,p).contains(le)&&!te.isEnterHandled}],[[" ","mac+ "],G.addNewEditorFromKeyboard,{checker:(te,{target:le})=>!(le instanceof HTMLButtonElement)&&t(te,p).contains(document.activeElement)}],[["Escape","mac+Escape"],G.unselectAll],[["ArrowLeft","mac+ArrowLeft"],G.translateSelectedEditors,{args:[-jt,0],checker:mt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],G.translateSelectedEditors,{args:[-Jt,0],checker:mt}],[["ArrowRight","mac+ArrowRight"],G.translateSelectedEditors,{args:[jt,0],checker:mt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],G.translateSelectedEditors,{args:[Jt,0],checker:mt}],[["ArrowUp","mac+ArrowUp"],G.translateSelectedEditors,{args:[0,-jt],checker:mt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],G.translateSelectedEditors,{args:[0,-Jt],checker:mt}],[["ArrowDown","mac+ArrowDown"],G.translateSelectedEditors,{args:[0,jt],checker:mt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],G.translateSelectedEditors,{args:[0,Jt],checker:mt}]]))}destroy(){var G,mt;I(this,H,dr).call(this),I(this,Le,hr).call(this),this._eventBus._off("editingaction",t(this,a)),this._eventBus._off("pagechanging",t(this,g)),this._eventBus._off("scalechanging",t(this,k)),this._eventBus._off("rotationchanging",t(this,X));for(const Ht of t(this,Tt).values())Ht.destroy();t(this,Tt).clear(),t(this,wt).clear(),t(this,Kt).clear(),D(this,Nt,null),t(this,r).clear(),t(this,rt).destroy(),(G=t(this,It))==null||G.destroy(),(mt=t(this,zt))==null||mt.hide(),D(this,zt,null),t(this,ce)&&(clearTimeout(t(this,ce)),D(this,ce,null)),t(this,et)&&(clearTimeout(t(this,et)),D(this,et,null)),I(this,ie,Va).call(this)}async mlGuess(G){var mt;return((mt=t(this,lt))==null?void 0:mt.guess(G))||null}get hasMLManager(){return!!t(this,lt)}get hcmFilter(){return(0,n.shadow)(this,"hcmFilter",t(this,f)?t(this,_e).addHCMFilter(t(this,f).foreground,t(this,f).background):"none")}get direction(){return(0,n.shadow)(this,"direction",getComputedStyle(t(this,p)).direction)}get highlightColors(){return(0,n.shadow)(this,"highlightColors",t(this,he)?new Map(t(this,he).split(",").map(G=>G.split("=").map(mt=>mt.trim()))):null)}get highlightColorNames(){return(0,n.shadow)(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,G=>G.reverse())):null)}setMainHighlightColorPicker(G){D(this,ne,G)}editAltText(G){var mt;(mt=t(this,It))==null||mt.editAltText(this,G)}onPageChanging({pageNumber:G}){D(this,bt,G-1)}focusMainContainer(){t(this,p).focus()}findParent(G,mt){for(const Ht of t(this,Tt).values()){const{x:jt,y:Jt,width:te,height:le}=Ht.div.getBoundingClientRect();if(G>=jt&&G<=jt+te&&mt>=Jt&&mt<=Jt+le)return Ht}return null}disableUserSelect(G=!1){t(this,M).classList.toggle("noUserSelect",G)}addShouldRescale(G){t(this,Kt).add(G)}removeShouldRescale(G){t(this,Kt).delete(G)}onScaleChanging({scale:G}){this.commitOrRemove(),this.viewParameters.realScale=G*N.PixelsPerInch.PDF_TO_CSS_UNITS;for(const mt of t(this,Kt))mt.onScaleChanging()}onRotationChanging({pagesRotation:G}){this.commitOrRemove(),this.viewParameters.rotation=G}highlightSelection(G=""){const mt=document.getSelection();if(!mt||mt.isCollapsed)return;const{anchorNode:Ht,anchorOffset:jt,focusNode:Jt,focusOffset:te}=mt,le=mt.toString(),Ae=I(this,J,un).call(this,mt).closest(".textLayer"),Pe=this.getSelectionBoxes(Ae);if(Pe){mt.empty(),t(this,i)===n.AnnotationEditorType.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:n.AnnotationEditorType.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const He of t(this,Tt).values())if(He.hasTextLayer(Ae)){He.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:G,boxes:Pe,anchorNode:Ht,anchorOffset:jt,focusNode:Jt,focusOffset:te,text:le});break}}}addToAnnotationStorage(G){!G.isEmpty()&&t(this,St)&&!t(this,St).has(G.id)&&t(this,St).setValue(G.id,G)}blur(){if(this.isShiftKeyDown=!1,t(this,me)&&(D(this,me,!1),I(this,gt,pn).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:G}=document;for(const mt of t(this,r))if(mt.div.contains(G)){D(this,Ee,[mt,G]),mt._focusEventsAllowed=!1;break}}focus(){if(!t(this,Ee))return;const[G,mt]=t(this,Ee);D(this,Ee,null),mt.addEventListener("focusin",()=>{G._focusEventsAllowed=!0},{once:!0}),mt.focus()}addEditListeners(){I(this,Ie,cr).call(this),I(this,nt,ur).call(this)}removeEditListeners(){I(this,H,dr).call(this),I(this,ft,pr).call(this)}copy(G){var Ht;if(G.preventDefault(),(Ht=t(this,Nt))==null||Ht.commitOrRemove(),!this.hasSelection)return;const mt=[];for(const jt of t(this,r)){const Jt=jt.serialize(!0);Jt&&mt.push(Jt)}mt.length!==0&&G.clipboardData.setData("application/pdfjs",JSON.stringify(mt))}cut(G){this.copy(G),this.delete()}paste(G){G.preventDefault();const{clipboardData:mt}=G;for(const Jt of mt.items)for(const te of t(this,qt))if(te.isHandlingMimeForPasting(Jt.type)){te.paste(Jt,this.currentLayer);return}let Ht=mt.getData("application/pdfjs");if(!Ht)return;try{Ht=JSON.parse(Ht)}catch(Jt){(0,n.warn)(`paste: "${Jt.message}".`);return}if(!Array.isArray(Ht))return;this.unselectAll();const jt=this.currentLayer;try{const Jt=[];for(const Ae of Ht){const Pe=jt.deserialize(Ae);if(!Pe)return;Jt.push(Pe)}const te=()=>{for(const Ae of Jt)I(this,Zt,gr).call(this,Ae);I(this,Xe,fr).call(this,Jt)},le=()=>{for(const Ae of Jt)Ae.remove()};this.addCommands({cmd:te,undo:le,mustExec:!0})}catch(Jt){(0,n.warn)(`paste: "${Jt.message}".`)}}keydown(G){!this.isShiftKeyDown&&G.key==="Shift"&&(this.isShiftKeyDown=!0),t(this,i)!==n.AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&ii._keyboardManager.exec(this,G)}keyup(G){this.isShiftKeyDown&&G.key==="Shift"&&(this.isShiftKeyDown=!1,t(this,me)&&(D(this,me,!1),I(this,gt,pn).call(this,"main_toolbar")))}onEditingAction({name:G}){switch(G){case"undo":case"redo":case"delete":case"selectAll":this[G]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(G){G?(I(this,ye,Ka).call(this),I(this,nt,ur).call(this),I(this,_t,Qe).call(this,{isEditing:t(this,i)!==n.AnnotationEditorType.NONE,isEmpty:I(this,Me,Ms).call(this),hasSomethingToUndo:t(this,rt).hasSomethingToUndo(),hasSomethingToRedo:t(this,rt).hasSomethingToRedo(),hasSelectedEditor:!1})):(I(this,Le,hr).call(this),I(this,ft,pr).call(this),I(this,_t,Qe).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(G){if(!t(this,qt)){D(this,qt,G);for(const mt of t(this,qt))I(this,Ut,_i).call(this,mt.defaultPropertiesToUpdate)}}getId(){return t(this,oe).id}get currentLayer(){return t(this,Tt).get(t(this,bt))}getLayer(G){return t(this,Tt).get(G)}get currentPageIndex(){return t(this,bt)}addLayer(G){t(this,Tt).set(G.pageIndex,G),t(this,Ce)?G.enable():G.disable()}removeLayer(G){t(this,Tt).delete(G.pageIndex)}updateMode(G,mt=null,Ht=!1){if(t(this,i)!==G){if(D(this,i,G),G===n.AnnotationEditorType.NONE){this.setEditingState(!1),I(this,Mt,Qa).call(this);return}this.setEditingState(!0),I(this,Qt,Ya).call(this),this.unselectAll();for(const jt of t(this,Tt).values())jt.updateMode(G);if(!mt&&Ht){this.addNewEditorFromKeyboard();return}if(mt){for(const jt of t(this,wt).values())if(jt.annotationElementId===mt){this.setSelected(jt),jt.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(G){G!==t(this,i)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:G})}updateParams(G,mt){var Ht;if(t(this,qt)){switch(G){case n.AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor();return;case n.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:(Ht=t(this,ne))==null||Ht.updateColor(mt);break;case n.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(t(this,l)||D(this,l,new Map)).set(G,mt),this.showAllEditors("highlight",mt);break}for(const jt of t(this,r))jt.updateParams(G,mt);for(const jt of t(this,qt))jt.updateDefaultParams(G,mt)}}showAllEditors(G,mt,Ht=!1){var jt;for(const Jt of t(this,wt).values())Jt.editorType===G&&Jt.show(mt);(((jt=t(this,l))==null?void 0:jt.get(n.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))??!0)!==mt&&I(this,Ut,_i).call(this,[[n.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,mt]])}enableWaiting(G=!1){if(t(this,se)!==G){D(this,se,G);for(const mt of t(this,Tt).values())G?mt.disableClick():mt.enableClick(),mt.div.classList.toggle("waiting",G)}}getEditors(G){const mt=[];for(const Ht of t(this,wt).values())Ht.pageIndex===G&&mt.push(Ht);return mt}getEditor(G){return t(this,wt).get(G)}addEditor(G){t(this,wt).set(G.id,G)}removeEditor(G){var mt;G.div.contains(document.activeElement)&&(t(this,ce)&&clearTimeout(t(this,ce)),D(this,ce,setTimeout(()=>{this.focusMainContainer(),D(this,ce,null)},0))),t(this,wt).delete(G.id),this.unselect(G),(!G.annotationElementId||!t(this,Lt).has(G.annotationElementId))&&((mt=t(this,St))==null||mt.remove(G.id))}addDeletedAnnotationElement(G){t(this,Lt).add(G.annotationElementId),G.deleted=!0}isDeletedAnnotationElement(G){return t(this,Lt).has(G)}removeDeletedAnnotationElement(G){t(this,Lt).delete(G.annotationElementId),G.deleted=!1}setActiveEditor(G){t(this,Nt)!==G&&(D(this,Nt,G),G&&I(this,Ut,_i).call(this,G.propertiesToUpdate))}updateUI(G){t(this,de,Ja)===G&&I(this,Ut,_i).call(this,G.propertiesToUpdate)}toggleSelected(G){if(t(this,r).has(G)){t(this,r).delete(G),G.unselect(),I(this,_t,Qe).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,r).add(G),G.select(),I(this,Ut,_i).call(this,G.propertiesToUpdate),I(this,_t,Qe).call(this,{hasSelectedEditor:!0})}setSelected(G){for(const mt of t(this,r))mt!==G&&mt.unselect();t(this,r).clear(),t(this,r).add(G),G.select(),I(this,Ut,_i).call(this,G.propertiesToUpdate),I(this,_t,Qe).call(this,{hasSelectedEditor:!0})}isSelected(G){return t(this,r).has(G)}get firstSelectedEditor(){return t(this,r).values().next().value}unselect(G){G.unselect(),t(this,r).delete(G),I(this,_t,Qe).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,r).size!==0}get isEnterHandled(){return t(this,r).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){t(this,rt).undo(),I(this,_t,Qe).call(this,{hasSomethingToUndo:t(this,rt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:I(this,Me,Ms).call(this)})}redo(){t(this,rt).redo(),I(this,_t,Qe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,rt).hasSomethingToRedo(),isEmpty:I(this,Me,Ms).call(this)})}addCommands(G){t(this,rt).add(G),I(this,_t,Qe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:I(this,Me,Ms).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const G=[...t(this,r)],mt=()=>{for(const jt of G)jt.remove()},Ht=()=>{for(const jt of G)I(this,Zt,gr).call(this,jt)};this.addCommands({cmd:mt,undo:Ht,mustExec:!0})}commitOrRemove(){var G;(G=t(this,Nt))==null||G.commitOrRemove()}hasSomethingToControl(){return t(this,Nt)||this.hasSelection}selectAll(){for(const G of t(this,r))G.commit();I(this,Xe,fr).call(this,t(this,wt).values())}unselectAll(){if(!(t(this,Nt)&&(t(this,Nt).commitOrRemove(),t(this,i)!==n.AnnotationEditorType.NONE))&&this.hasSelection){for(const G of t(this,r))G.unselect();t(this,r).clear(),I(this,_t,Qe).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(G,mt,Ht=!1){if(Ht||this.commitOrRemove(),!this.hasSelection)return;t(this,V)[0]+=G,t(this,V)[1]+=mt;const[jt,Jt]=t(this,V),te=[...t(this,r)];t(this,et)&&clearTimeout(t(this,et)),D(this,et,setTimeout(()=>{D(this,et,null),t(this,V)[0]=t(this,V)[1]=0,this.addCommands({cmd:()=>{for(const Ae of te)t(this,wt).has(Ae.id)&&Ae.translateInPage(jt,Jt)},undo:()=>{for(const Ae of te)t(this,wt).has(Ae.id)&&Ae.translateInPage(-jt,-Jt)},mustExec:!1})},1e3));for(const Ae of te)Ae.translateInPage(G,mt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),D(this,Pt,new Map);for(const G of t(this,r))t(this,Pt).set(G,{savedX:G.x,savedY:G.y,savedPageIndex:G.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!t(this,Pt))return!1;this.disableUserSelect(!1);const G=t(this,Pt);D(this,Pt,null);let mt=!1;for(const[{x:jt,y:Jt,pageIndex:te},le]of G)le.newX=jt,le.newY=Jt,le.newPageIndex=te,mt||(mt=jt!==le.savedX||Jt!==le.savedY||te!==le.savedPageIndex);if(!mt)return!1;const Ht=(jt,Jt,te,le)=>{if(t(this,wt).has(jt.id)){const Ae=t(this,Tt).get(le);Ae?jt._setParentAndPosition(Ae,Jt,te):(jt.pageIndex=le,jt.x=Jt,jt.y=te)}};return this.addCommands({cmd:()=>{for(const[jt,{newX:Jt,newY:te,newPageIndex:le}]of G)Ht(jt,Jt,te,le)},undo:()=>{for(const[jt,{savedX:Jt,savedY:te,savedPageIndex:le}]of G)Ht(jt,Jt,te,le)},mustExec:!0}),!0}dragSelectedEditors(G,mt){if(t(this,Pt))for(const Ht of t(this,Pt).keys())Ht.drag(G,mt)}rebuild(G){if(G.parent===null){const mt=this.getLayer(G.pageIndex);mt?(mt.changeParent(G),mt.addOrRebuild(G)):(this.addEditor(G),this.addToAnnotationStorage(G),G.rebuild())}else G.parent.addOrRebuild(G)}get isEditorHandlingKeyboard(){var G;return((G=this.getActive())==null?void 0:G.shouldGetKeyboardEvents())||t(this,r).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(G){return t(this,Nt)===G}getActive(){return t(this,Nt)}getMode(){return t(this,i)}get imageManager(){return(0,n.shadow)(this,"imageManager",new F)}getSelectionBoxes(G){if(!G)return null;const mt=document.getSelection();for(let Pe=0,He=mt.rangeCount;Pe<He;Pe++)if(!G.contains(mt.getRangeAt(Pe).commonAncestorContainer))return null;const{x:Ht,y:jt,width:Jt,height:te}=G.getBoundingClientRect();let le;switch(G.getAttribute("data-main-rotation")){case"90":le=(Pe,He,Ke,$e)=>({x:(He-jt)/te,y:1-(Pe+Ke-Ht)/Jt,width:$e/te,height:Ke/Jt});break;case"180":le=(Pe,He,Ke,$e)=>({x:1-(Pe+Ke-Ht)/Jt,y:1-(He+$e-jt)/te,width:Ke/Jt,height:$e/te});break;case"270":le=(Pe,He,Ke,$e)=>({x:1-(He+$e-jt)/te,y:(Pe-Ht)/Jt,width:$e/te,height:Ke/Jt});break;default:le=(Pe,He,Ke,$e)=>({x:(Pe-Ht)/Jt,y:(He-jt)/te,width:Ke/Jt,height:$e/te});break}const Ae=[];for(let Pe=0,He=mt.rangeCount;Pe<He;Pe++){const Ke=mt.getRangeAt(Pe);if(!Ke.collapsed)for(const{x:$e,y:nl,width:Ti,height:zr}of Ke.getClientRects())Ti===0||zr===0||Ae.push(le($e,nl,Ti,zr))}return Ae.length===0?null:Ae}};Nt=new WeakMap,wt=new WeakMap,Tt=new WeakMap,It=new WeakMap,St=new WeakMap,rt=new WeakMap,bt=new WeakMap,Lt=new WeakMap,Pt=new WeakMap,qt=new WeakMap,Kt=new WeakMap,re=new WeakMap,_e=new WeakMap,ce=new WeakMap,he=new WeakMap,me=new WeakMap,zt=new WeakMap,oe=new WeakMap,Ce=new WeakMap,se=new WeakMap,Ee=new WeakMap,ne=new WeakMap,lt=new WeakMap,i=new WeakMap,r=new WeakMap,d=new WeakMap,f=new WeakMap,l=new WeakMap,w=new WeakMap,b=new WeakMap,_=new WeakMap,u=new WeakMap,o=new WeakMap,h=new WeakMap,s=new WeakMap,a=new WeakMap,g=new WeakMap,k=new WeakMap,y=new WeakMap,X=new WeakMap,Z=new WeakMap,V=new WeakMap,et=new WeakMap,p=new WeakMap,M=new WeakMap,J=new WeakSet,un=function({anchorNode:G}){return G.nodeType===Node.TEXT_NODE?G.parentElement:G},m=new WeakSet,$a=function(){const G=document.getSelection();if(!G||G.isCollapsed)return;const mt=I(this,J,un).call(this,G).closest(".textLayer"),Ht=this.getSelectionBoxes(mt);Ht&&(t(this,zt)||D(this,zt,new A.HighlightToolbar(this)),t(this,zt).show(mt,Ht,this.direction==="ltr"))},Y=new WeakSet,Wa=function(){var Ht,jt,Jt;const G=document.getSelection();if(!G||G.isCollapsed){t(this,d)&&((Ht=t(this,zt))==null||Ht.hide(),D(this,d,null),I(this,_t,Qe).call(this,{hasSelectedText:!1}));return}const{anchorNode:mt}=G;if(mt!==t(this,d)){if(!I(this,J,un).call(this,G).closest(".textLayer")){t(this,d)&&((jt=t(this,zt))==null||jt.hide(),D(this,d,null),I(this,_t,Qe).call(this,{hasSelectedText:!1}));return}if((Jt=t(this,zt))==null||Jt.hide(),D(this,d,mt),I(this,_t,Qe).call(this,{hasSelectedText:!0}),!(t(this,i)!==n.AnnotationEditorType.HIGHLIGHT&&t(this,i)!==n.AnnotationEditorType.NONE)&&(t(this,i)===n.AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),D(this,me,this.isShiftKeyDown),!this.isShiftKeyDown)){const te=le=>{le.type==="pointerup"&&le.button!==0||(window.removeEventListener("pointerup",te),window.removeEventListener("blur",te),le.type==="pointerup"&&I(this,gt,pn).call(this,"main_toolbar"))};window.addEventListener("pointerup",te),window.addEventListener("blur",te)}}},gt=new WeakSet,pn=function(G=""){t(this,i)===n.AnnotationEditorType.HIGHLIGHT?this.highlightSelection(G):t(this,re)&&I(this,m,$a).call(this)},Rt=new WeakSet,Xa=function(){document.addEventListener("selectionchange",t(this,y))},ie=new WeakSet,Va=function(){document.removeEventListener("selectionchange",t(this,y))},ye=new WeakSet,Ka=function(){window.addEventListener("focus",t(this,b)),window.addEventListener("blur",t(this,w))},Le=new WeakSet,hr=function(){window.removeEventListener("focus",t(this,b)),window.removeEventListener("blur",t(this,w))},Ie=new WeakSet,cr=function(){window.addEventListener("keydown",t(this,h)),window.addEventListener("keyup",t(this,s))},H=new WeakSet,dr=function(){window.removeEventListener("keydown",t(this,h)),window.removeEventListener("keyup",t(this,s))},nt=new WeakSet,ur=function(){document.addEventListener("copy",t(this,_)),document.addEventListener("cut",t(this,u)),document.addEventListener("paste",t(this,o))},ft=new WeakSet,pr=function(){document.removeEventListener("copy",t(this,_)),document.removeEventListener("cut",t(this,u)),document.removeEventListener("paste",t(this,o))},_t=new WeakSet,Qe=function(G){Object.entries(G).some(([mt,Ht])=>t(this,Z)[mt]!==Ht)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,Z),G)}),t(this,i)===n.AnnotationEditorType.HIGHLIGHT&&G.hasSelectedEditor===!1&&I(this,Ut,_i).call(this,[[n.AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))},Ut=new WeakSet,_i=function(G){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:G})},Qt=new WeakSet,Ya=function(){if(!t(this,Ce)){D(this,Ce,!0);for(const G of t(this,Tt).values())G.enable();for(const G of t(this,wt).values())G.enable()}},Mt=new WeakSet,Qa=function(){if(this.unselectAll(),t(this,Ce)){D(this,Ce,!1);for(const G of t(this,Tt).values())G.disable();for(const G of t(this,wt).values())G.disable()}},Zt=new WeakSet,gr=function(G){const mt=t(this,Tt).get(G.pageIndex);mt?mt.addOrRebuild(G):(this.addEditor(G),this.addToAnnotationStorage(G))},de=new WeakSet,Ja=function(){let G=null;for(G of t(this,r));return G},Me=new WeakSet,Ms=function(){if(t(this,wt).size===0)return!0;if(t(this,wt).size===1)for(const G of t(this,wt).values())return G.isEmpty();return!1},Xe=new WeakSet,fr=function(G){for(const mt of t(this,r))mt.unselect();t(this,r).clear();for(const mt of G)mt.isEmpty()||(t(this,r).add(mt),mt.select());I(this,_t,Qe).call(this,{hasSelectedEditor:this.hasSelection})},be(ii,"TRANSLATE_SMALL",1),be(ii,"TRANSLATE_BIG",10);let C=ii},94:(v,U,x)=>{x.d(U,{PDFFetchStream:()=>B});var n=x(292),N=x(490);function A(tt,j,C){return{method:"GET",headers:tt,signal:C.signal,mode:"cors",credentials:j?"include":"same-origin",redirect:"follow"}}function S(tt){const j=new Headers;for(const C in tt){const q=tt[C];q!==void 0&&j.append(C,q)}return j}function ot(tt){return tt instanceof Uint8Array?tt.buffer:tt instanceof ArrayBuffer?tt:((0,n.warn)(`getArrayBuffer - unexpected data format: ${tt}`),new Uint8Array(tt).buffer)}class B{constructor(j){this.source=j,this.isHttp=/^https?:/i.test(j.url),this.httpHeaders=this.isHttp&&j.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var j;return((j=this._fullRequestReader)==null?void 0:j._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new F(this),this._fullRequestReader}getRangeReader(j,C){if(C<=this._progressiveDataLength)return null;const q=new P(this,j,C);return this._rangeRequestReaders.push(q),q}cancelAllRequests(j){var C;(C=this._fullRequestReader)==null||C.cancel(j);for(const q of this._rangeRequestReaders.slice(0))q.cancel(j)}}class F{constructor(j){this._stream=j,this._reader=null,this._loaded=0,this._filename=null;const C=j.source;this._withCredentials=C.withCredentials||!1,this._contentLength=C.length,this._headersCapability=Promise.withResolvers(),this._disableRange=C.disableRange||!1,this._rangeChunkSize=C.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!C.disableStream,this._isRangeSupported=!C.disableRange,this._headers=S(this._stream.httpHeaders);const q=C.url;fetch(q,A(this._headers,this._withCredentials,this._abortController)).then(W=>{if(!(0,N.validateResponseStatus)(W.status))throw(0,N.createResponseStatusError)(W.status,q);this._reader=W.body.getReader(),this._headersCapability.resolve();const it=R=>W.headers.get(R),{allowRangeRequests:ut,suggestedLength:st}=(0,N.validateRangeRequestCapabilities)({getResponseHeader:it,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=ut,this._contentLength=st||this._contentLength,this._filename=(0,N.extractFilenameFromHeader)(it),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var q;await this._headersCapability.promise;const{value:j,done:C}=await this._reader.read();return C?{value:j,done:C}:(this._loaded+=j.byteLength,(q=this.onProgress)==null||q.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ot(j),done:!1})}cancel(j){var C;(C=this._reader)==null||C.cancel(j),this._abortController.abort()}}class P{constructor(j,C,q){this._stream=j,this._reader=null,this._loaded=0;const W=j.source;this._withCredentials=W.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!W.disableStream,this._abortController=new AbortController,this._headers=S(this._stream.httpHeaders),this._headers.append("Range",`bytes=${C}-${q-1}`);const it=W.url;fetch(it,A(this._headers,this._withCredentials,this._abortController)).then(ut=>{if(!(0,N.validateResponseStatus)(ut.status))throw(0,N.createResponseStatusError)(ut.status,it);this._readCapability.resolve(),this._reader=ut.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var q;await this._readCapability.promise;const{value:j,done:C}=await this._reader.read();return C?{value:j,done:C}:(this._loaded+=j.byteLength,(q=this.onProgress)==null||q.call(this,{loaded:this._loaded}),{value:ot(j),done:!1})}cancel(j){var C;(C=this._reader)==null||C.cancel(j),this._abortController.abort()}}},10:(v,U,x)=>{var S;x.d(U,{FontFaceObject:()=>A,FontLoader:()=>N});var n=x(292);class N{constructor({ownerDocument:B=globalThis.document,styleElement:F=null}){c(this,S,new Set);this._document=B,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(B){this.nativeFontFaces.add(B),this._document.fonts.add(B)}removeNativeFontFace(B){this.nativeFontFaces.delete(B),this._document.fonts.delete(B)}insertRule(B){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const F=this.styleElement.sheet;F.insertRule(B,F.cssRules.length)}clear(){for(const B of this.nativeFontFaces)this._document.fonts.delete(B);this.nativeFontFaces.clear(),t(this,S).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:B,_inspectFont:F}){if(!(!B||t(this,S).has(B.loadedName))){if((0,n.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:P,src:tt,style:j}=B,C=new FontFace(P,tt,j);this.addNativeFontFace(C);try{await C.load(),t(this,S).add(P),F==null||F(B)}catch{(0,n.warn)(`Cannot load system font: ${B.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(C)}return}(0,n.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(B){if(B.attached||B.missingFile&&!B.systemFontInfo)return;if(B.attached=!0,B.systemFontInfo){await this.loadSystemFont(B);return}if(this.isFontLoadingAPISupported){const P=B.createNativeFontFace();if(P){this.addNativeFontFace(P);try{await P.loaded}catch(tt){throw(0,n.warn)(`Failed to load font '${P.family}': '${tt}'.`),B.disableFontFace=!0,tt}}return}const F=B.createFontFaceRule();if(F){if(this.insertRule(F),this.isSyncFontLoadingSupported)return;await new Promise(P=>{const tt=this._queueLoadingCallback(P);this._prepareFontLoadEvent(B,tt)})}}get isFontLoadingAPISupported(){var F;const B=!!((F=this._document)!=null&&F.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",B)}get isSyncFontLoadingSupported(){let B=!1;return(n.isNodeJS||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(B=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",B)}_queueLoadingCallback(B){function F(){for((0,n.assert)(!tt.done,"completeRequest() cannot be called twice."),tt.done=!0;P.length>0&&P[0].done;){const j=P.shift();setTimeout(j.callback,0)}}const{loadingRequests:P}=this,tt={done:!1,complete:F,callback:B};return P.push(tt),tt}get _loadTestFont(){const B=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",B)}_prepareFontLoadEvent(B,F){function P(Dt,Ct){return Dt.charCodeAt(Ct)<<24|Dt.charCodeAt(Ct+1)<<16|Dt.charCodeAt(Ct+2)<<8|Dt.charCodeAt(Ct+3)&255}function tt(Dt,Ct,Nt,wt){const Tt=Dt.substring(0,Ct),It=Dt.substring(Ct+Nt);return Tt+wt+It}let j,C;const q=this._document.createElement("canvas");q.width=1,q.height=1;const W=q.getContext("2d");let it=0;function ut(Dt,Ct){if(++it>30){(0,n.warn)("Load test font never loaded."),Ct();return}if(W.font="30px "+Dt,W.fillText(".",0,20),W.getImageData(0,0,1,1).data[3]>0){Ct();return}setTimeout(ut.bind(null,Dt,Ct))}const st=`lt${Date.now()}${this.loadTestFontId++}`;let R=this._loadTestFont;R=tt(R,976,st.length,st);const K=16,$=1482184792;let O=P(R,K);for(j=0,C=st.length-3;j<C;j+=4)O=O-$+P(st,j)|0;j<st.length&&(O=O-$+P(st+"XXX",j)|0),R=tt(R,K,4,(0,n.string32)(O));const Q=`url(data:font/opentype;base64,${btoa(R)});`,at=`@font-face {font-family:"${st}";src:${Q}}`;this.insertRule(at);const yt=this._document.createElement("div");yt.style.visibility="hidden",yt.style.width=yt.style.height="10px",yt.style.position="absolute",yt.style.top=yt.style.left="0px";for(const Dt of[B.loadedName,st]){const Ct=this._document.createElement("span");Ct.textContent="Hi",Ct.style.fontFamily=Dt,yt.append(Ct)}this._document.body.append(yt),ut(st,()=>{yt.remove(),F.complete()})}}S=new WeakMap;class A{constructor(B,{isEvalSupported:F=!0,disableFontFace:P=!1,ignoreErrors:tt=!1,inspectFont:j=null}){this.compiledGlyphs=Object.create(null);for(const C in B)this[C]=B[C];this.isEvalSupported=F!==!1,this.disableFontFace=P===!0,this.ignoreErrors=tt===!0,this._inspectFont=j}createNativeFontFace(){var F;if(!this.data||this.disableFontFace)return null;let B;if(!this.cssFontInfo)B=new FontFace(this.loadedName,this.data,{});else{const P={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(P.style=`oblique ${this.cssFontInfo.italicAngle}deg`),B=new FontFace(this.cssFontInfo.fontFamily,this.data,P)}return(F=this._inspectFont)==null||F.call(this,this),B}createFontFaceRule(){var tt;if(!this.data||this.disableFontFace)return null;const B=(0,n.bytesToString)(this.data),F=`url(data:${this.mimetype};base64,${btoa(B)});`;let P;if(!this.cssFontInfo)P=`@font-face {font-family:"${this.loadedName}";src:${F}}`;else{let j=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(j+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),P=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${j}src:${F}}`}return(tt=this._inspectFont)==null||tt.call(this,this,F),P}getPathGenerator(B,F){if(this.compiledGlyphs[F]!==void 0)return this.compiledGlyphs[F];let P;try{P=B.get(this.loadedName+"_path_"+F)}catch(tt){if(!this.ignoreErrors)throw tt;return(0,n.warn)(`getPathGenerator - ignoring character: "${tt}".`),this.compiledGlyphs[F]=function(j,C){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const tt=[];for(const j of P){const C=j.args!==void 0?j.args.join(","):"";tt.push("c.",j.cmd,"(",C,`);
`)}return this.compiledGlyphs[F]=new Function("c","size",tt.join(""))}return this.compiledGlyphs[F]=function(tt,j){for(const C of P)C.cmd==="scale"&&(C.args=[j,-j]),tt[C.cmd].apply(tt,C.args)}}}},62:(v,U,x)=>{var A,S;x.d(U,{Metadata:()=>N});var n=x(292);class N{constructor({parsedData:B,rawData:F}){c(this,A,void 0);c(this,S,void 0);D(this,A,B),D(this,S,F)}getRaw(){return t(this,S)}get(B){return t(this,A).get(B)??null}getAll(){return(0,n.objectFromMap)(t(this,A))}has(B){return t(this,A).has(B)}}A=new WeakMap,S=new WeakMap},457:(v,U,x)=>{x.d(U,{PDFNetworkStream:()=>F});var n=x(292),N=x(490);const A=200,S=206;function ot(j){const C=j.response;return typeof C!="string"?C:(0,n.stringToBytes)(C).buffer}class B{constructor(C,q={}){this.url=C,this.isHttp=/^https?:/i.test(C),this.httpHeaders=this.isHttp&&q.httpHeaders||Object.create(null),this.withCredentials=q.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(C,q,W){const it={begin:C,end:q};for(const ut in W)it[ut]=W[ut];return this.request(it)}requestFull(C){return this.request(C)}request(C){const q=new XMLHttpRequest,W=this.currXhrId++,it=this.pendingRequests[W]={xhr:q};q.open("GET",this.url),q.withCredentials=this.withCredentials;for(const ut in this.httpHeaders){const st=this.httpHeaders[ut];st!==void 0&&q.setRequestHeader(ut,st)}return this.isHttp&&"begin"in C&&"end"in C?(q.setRequestHeader("Range",`bytes=${C.begin}-${C.end-1}`),it.expectedStatus=S):it.expectedStatus=A,q.responseType="arraybuffer",C.onError&&(q.onerror=function(ut){C.onError(q.status)}),q.onreadystatechange=this.onStateChange.bind(this,W),q.onprogress=this.onProgress.bind(this,W),it.onHeadersReceived=C.onHeadersReceived,it.onDone=C.onDone,it.onError=C.onError,it.onProgress=C.onProgress,q.send(null),W}onProgress(C,q){var it;const W=this.pendingRequests[C];W&&((it=W.onProgress)==null||it.call(W,q))}onStateChange(C,q){var R,K,$;const W=this.pendingRequests[C];if(!W)return;const it=W.xhr;if(it.readyState>=2&&W.onHeadersReceived&&(W.onHeadersReceived(),delete W.onHeadersReceived),it.readyState!==4||!(C in this.pendingRequests))return;if(delete this.pendingRequests[C],it.status===0&&this.isHttp){(R=W.onError)==null||R.call(W,it.status);return}const ut=it.status||A;if(!(ut===A&&W.expectedStatus===S)&&ut!==W.expectedStatus){(K=W.onError)==null||K.call(W,it.status);return}const st=ot(it);if(ut===S){const O=it.getResponseHeader("Content-Range"),Q=/bytes (\d+)-(\d+)\/(\d+)/.exec(O);W.onDone({begin:parseInt(Q[1],10),chunk:st})}else st?W.onDone({begin:0,chunk:st}):($=W.onError)==null||$.call(W,it.status)}getRequestXhr(C){return this.pendingRequests[C].xhr}isPendingRequest(C){return C in this.pendingRequests}abortRequest(C){const q=this.pendingRequests[C].xhr;delete this.pendingRequests[C],q.abort()}}class F{constructor(C){this._source=C,this._manager=new B(C.url,{httpHeaders:C.httpHeaders,withCredentials:C.withCredentials}),this._rangeChunkSize=C.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(C){const q=this._rangeRequestReaders.indexOf(C);q>=0&&this._rangeRequestReaders.splice(q,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new P(this._manager,this._source),this._fullRequestReader}getRangeReader(C,q){const W=new tt(this._manager,C,q);return W.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(W),W}cancelAllRequests(C){var q;(q=this._fullRequestReader)==null||q.cancel(C);for(const W of this._rangeRequestReaders.slice(0))W.cancel(C)}}class P{constructor(C,q){this._manager=C;const W={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=q.url,this._fullRequestId=C.requestFull(W),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=q.disableRange||!1,this._contentLength=q.length,this._rangeChunkSize=q.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const C=this._fullRequestId,q=this._manager.getRequestXhr(C),W=st=>q.getResponseHeader(st),{allowRangeRequests:it,suggestedLength:ut}=(0,N.validateRangeRequestCapabilities)({getResponseHeader:W,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});it&&(this._isRangeSupported=!0),this._contentLength=ut||this._contentLength,this._filename=(0,N.extractFilenameFromHeader)(W),this._isRangeSupported&&this._manager.abortRequest(C),this._headersReceivedCapability.resolve()}_onDone(C){if(C&&(this._requests.length>0?this._requests.shift().resolve({value:C.chunk,done:!1}):this._cachedChunks.push(C.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const q of this._requests)q.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(C){this._storedError=(0,N.createResponseStatusError)(C,this._url),this._headersReceivedCapability.reject(this._storedError);for(const q of this._requests)q.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(C){var q;(q=this.onProgress)==null||q.call(this,{loaded:C.loaded,total:C.lengthComputable?C.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const C=Promise.withResolvers();return this._requests.push(C),C.promise}cancel(C){this._done=!0,this._headersReceivedCapability.reject(C);for(const q of this._requests)q.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class tt{constructor(C,q,W){this._manager=C;const it={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=C.url,this._requestId=C.requestRange(q,W,it),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var C;(C=this.onClosed)==null||C.call(this,this)}_onDone(C){const q=C.chunk;this._requests.length>0?this._requests.shift().resolve({value:q,done:!1}):this._queuedChunk=q,this._done=!0;for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(C){this._storedError=(0,N.createResponseStatusError)(C,this._url);for(const q of this._requests)q.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(C){var q;this.isStreamingSupported||((q=this.onProgress)==null||q.call(this,{loaded:C.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const q=this._queuedChunk;return this._queuedChunk=null,{value:q,done:!1}}if(this._done)return{value:void 0,done:!0};const C=Promise.withResolvers();return this._requests.push(C),C.promise}cancel(C){this._done=!0;for(const q of this._requests)q.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},490:(v,U,x)=>{x.d(U,{createResponseStatusError:()=>B,extractFilenameFromHeader:()=>ot,validateRangeRequestCapabilities:()=>S,validateResponseStatus:()=>F});var n=x(292);function N(P){let tt=!0,j=C("filename\\*","i").exec(P);if(j){j=j[1];let K=ut(j);return K=unescape(K),K=st(K),K=R(K),W(K)}if(j=it(P),j){const K=R(j);return W(K)}if(j=C("filename","i").exec(P),j){j=j[1];let K=ut(j);return K=R(K),W(K)}function C(K,$){return new RegExp("(?:^|;)\\s*"+K+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',$)}function q(K,$){if(K){if(!/^[\x00-\xFF]+$/.test($))return $;try{const O=new TextDecoder(K,{fatal:!0}),Q=(0,n.stringToBytes)($);$=O.decode(Q),tt=!1}catch{}}return $}function W(K){return tt&&/[\x80-\xff]/.test(K)&&(K=q("utf-8",K),tt&&(K=q("iso-8859-1",K))),K}function it(K){const $=[];let O;const Q=C("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(O=Q.exec(K))!==null;){let[,yt,Dt,Ct]=O;if(yt=parseInt(yt,10),yt in $){if(yt===0)break;continue}$[yt]=[Dt,Ct]}const at=[];for(let yt=0;yt<$.length&&yt in $;++yt){let[Dt,Ct]=$[yt];Ct=ut(Ct),Dt&&(Ct=unescape(Ct),yt===0&&(Ct=st(Ct))),at.push(Ct)}return at.join("")}function ut(K){if(K.startsWith('"')){const $=K.slice(1).split('\\"');for(let O=0;O<$.length;++O){const Q=$[O].indexOf('"');Q!==-1&&($[O]=$[O].slice(0,Q),$.length=O+1),$[O]=$[O].replaceAll(/\\(.)/g,"$1")}K=$.join('"')}return K}function st(K){const $=K.indexOf("'");if($===-1)return K;const O=K.slice(0,$),Q=K.slice($+1).replace(/^[^']*'/,"");return q(O,Q)}function R(K){return!K.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(K)?K:K.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function($,O,Q,at){if(Q==="q"||Q==="Q")return at=at.replaceAll("_"," "),at=at.replaceAll(/=([0-9a-fA-F]{2})/g,function(yt,Dt){return String.fromCharCode(parseInt(Dt,16))}),q(O,at);try{at=atob(at)}catch{}return q(O,at)})}return""}var A=x(419);function S({getResponseHeader:P,isHttp:tt,rangeChunkSize:j,disableRange:C}){const q={allowRangeRequests:!1,suggestedLength:void 0},W=parseInt(P("Content-Length"),10);return!Number.isInteger(W)||(q.suggestedLength=W,W<=2*j)||C||!tt||P("Accept-Ranges")!=="bytes"||(P("Content-Encoding")||"identity")!=="identity"||(q.allowRangeRequests=!0),q}function ot(P){const tt=P("Content-Disposition");if(tt){let j=N(tt);if(j.includes("%"))try{j=decodeURIComponent(j)}catch{}if((0,A.isPdfFile)(j))return j}return null}function B(P,tt){return P===404||P===0&&tt.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+tt+'".'):new n.UnexpectedResponseException(`Unexpected server response (${P}) while retrieving PDF "${tt}".`,P)}function F(P){return P===200||P===206}},786:(v,U,x)=>{x.a(v,async(n,N)=>{try{let ot=function($){const O=j.parse($);return O.protocol==="file:"||O.host?O:/^[a-z]:[/\\]/i.test($)?j.parse(`file:///${$}`):(O.host||(O.protocol="file:"),O)},B=function($,O){return{protocol:$.protocol,auth:$.auth,host:$.hostname,port:$.port,path:$.path,method:"GET",headers:O}};x.d(U,{PDFNodeStream:()=>q});var A=x(292),S=x(490);let F,P,tt,j;A.isNodeJS&&(F=await mi(()=>import("./chunk.js"),[]),P=await mi(()=>import("./chunk.js"),[]),tt=await mi(()=>import("./chunk.js"),[]),j=await mi(()=>import("./chunk.js"),[]));const C=/^file:\/\/\/[a-zA-Z]:\//;class q{constructor(O){this.source=O,this.url=ot(O.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&O.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var O;return((O=this._fullRequestReader)==null?void 0:O._loaded)??0}getFullReader(){return(0,A.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new R(this):new ut(this),this._fullRequestReader}getRangeReader(O,Q){if(Q<=this._progressiveDataLength)return null;const at=this.isFsUrl?new K(this,O,Q):new st(this,O,Q);return this._rangeRequestReaders.push(at),at}cancelAllRequests(O){var Q;(Q=this._fullRequestReader)==null||Q.cancel(O);for(const at of this._rangeRequestReaders.slice(0))at.cancel(O)}}class W{constructor(O){this._url=O.url,this._done=!1,this._storedError=null,this.onProgress=null;const Q=O.source;this._contentLength=Q.length,this._loaded=0,this._filename=null,this._disableRange=Q.disableRange||!1,this._rangeChunkSize=Q.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!Q.disableStream,this._isRangeSupported=!Q.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Q;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const O=this._readableStream.read();return O===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=O.length,(Q=this.onProgress)==null||Q.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(O).buffer,done:!1})}cancel(O){if(!this._readableStream){this._error(O);return}this._readableStream.destroy(O)}_error(O){this._storedError=O,this._readCapability.resolve()}_setReadableStream(O){this._readableStream=O,O.on("readable",()=>{this._readCapability.resolve()}),O.on("end",()=>{O.destroy(),this._done=!0,this._readCapability.resolve()}),O.on("error",Q=>{this._error(Q)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new A.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class it{constructor(O){this._url=O.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const Q=O.source;this._isStreamingSupported=!Q.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Q;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const O=this._readableStream.read();return O===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=O.length,(Q=this.onProgress)==null||Q.call(this,{loaded:this._loaded}),{value:new Uint8Array(O).buffer,done:!1})}cancel(O){if(!this._readableStream){this._error(O);return}this._readableStream.destroy(O)}_error(O){this._storedError=O,this._readCapability.resolve()}_setReadableStream(O){this._readableStream=O,O.on("readable",()=>{this._readCapability.resolve()}),O.on("end",()=>{O.destroy(),this._done=!0,this._readCapability.resolve()}),O.on("error",Q=>{this._error(Q)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class ut extends W{constructor(O){super(O);const Q=at=>{if(at.statusCode===404){const Nt=new A.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Nt,this._headersCapability.reject(Nt);return}this._headersCapability.resolve(),this._setReadableStream(at);const yt=Nt=>this._readableStream.headers[Nt.toLowerCase()],{allowRangeRequests:Dt,suggestedLength:Ct}=(0,S.validateRangeRequestCapabilities)({getResponseHeader:yt,isHttp:O.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Dt,this._contentLength=Ct||this._contentLength,this._filename=(0,S.extractFilenameFromHeader)(yt)};this._request=null,this._url.protocol==="http:"?this._request=P.request(B(this._url,O.httpHeaders),Q):this._request=tt.request(B(this._url,O.httpHeaders),Q),this._request.on("error",at=>{this._storedError=at,this._headersCapability.reject(at)}),this._request.end()}}class st extends it{constructor(O,Q,at){super(O),this._httpHeaders={};for(const Dt in O.httpHeaders){const Ct=O.httpHeaders[Dt];Ct!==void 0&&(this._httpHeaders[Dt]=Ct)}this._httpHeaders.Range=`bytes=${Q}-${at-1}`;const yt=Dt=>{if(Dt.statusCode===404){const Ct=new A.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Ct;return}this._setReadableStream(Dt)};this._request=null,this._url.protocol==="http:"?this._request=P.request(B(this._url,this._httpHeaders),yt):this._request=tt.request(B(this._url,this._httpHeaders),yt),this._request.on("error",Dt=>{this._storedError=Dt}),this._request.end()}}class R extends W{constructor(O){super(O);let Q=decodeURIComponent(this._url.path);C.test(this._url.href)&&(Q=Q.replace(/^\//,"")),F.promises.lstat(Q).then(at=>{this._contentLength=at.size,this._setReadableStream(F.createReadStream(Q)),this._headersCapability.resolve()},at=>{at.code==="ENOENT"&&(at=new A.MissingPDFException(`Missing PDF "${Q}".`)),this._storedError=at,this._headersCapability.reject(at)})}}class K extends it{constructor(O,Q,at){super(O);let yt=decodeURIComponent(this._url.path);C.test(this._url.href)&&(yt=yt.replace(/^\//,"")),this._setReadableStream(F.createReadStream(yt,{start:Q,end:at-1}))}}N()}catch(ot){N(ot)}},1)},573:(v,U,x)=>{x.a(v,async(n,N)=>{try{x.d(U,{NodeCMapReaderFactory:()=>C,NodeCanvasFactory:()=>j,NodeFilterFactory:()=>tt,NodeStandardFontDataFactory:()=>q});var A=x(583),S=x(292);let ot,B,F;if(S.isNodeJS){ot=await mi(()=>import("./chunk.js"),[]);try{B=await mi(()=>import("./chunk.js"),[])}catch{}try{F=await mi(()=>import("./chunk2.js"),[])}catch{}}const P=function(W){return ot.promises.readFile(W).then(it=>new Uint8Array(it))};class tt extends A.BaseFilterFactory{}class j extends A.BaseCanvasFactory{_createCanvas(it,ut){return B.createCanvas(it,ut)}}class C extends A.BaseCMapReaderFactory{_fetchData(it,ut){return P(it).then(st=>({cMapData:st,compressionType:ut}))}}class q extends A.BaseStandardFontDataFactory{_fetchData(it){return P(it)}}N()}catch(ot){N(ot)}},1)},626:(v,U,x)=>{var B,F,P,tt,j,C,q,W,it,mr;x.d(U,{OptionalContentConfig:()=>ot});var n=x(292),N=x(651);const A=Symbol("INTERNAL");class S{constructor(R,{name:K,intent:$,usage:O}){c(this,B,!1);c(this,F,!1);c(this,P,!1);c(this,tt,!0);D(this,B,!!(R&n.RenderingIntentFlag.DISPLAY)),D(this,F,!!(R&n.RenderingIntentFlag.PRINT)),this.name=K,this.intent=$,this.usage=O}get visible(){if(t(this,P))return t(this,tt);if(!t(this,tt))return!1;const{print:R,view:K}=this.usage;return t(this,B)?(K==null?void 0:K.viewState)!=="OFF":t(this,F)?(R==null?void 0:R.printState)!=="OFF":!0}_setVisible(R,K,$=!1){R!==A&&(0,n.unreachable)("Internal method `_setVisible` called."),D(this,P,$),D(this,tt,K)}}B=new WeakMap,F=new WeakMap,P=new WeakMap,tt=new WeakMap;class ot{constructor(R,K=n.RenderingIntentFlag.DISPLAY){c(this,it);c(this,j,null);c(this,C,new Map);c(this,q,null);c(this,W,null);if(this.renderingIntent=K,this.name=null,this.creator=null,R!==null){this.name=R.name,this.creator=R.creator,D(this,W,R.order);for(const $ of R.groups)t(this,C).set($.id,new S(K,$));if(R.baseState==="OFF")for(const $ of t(this,C).values())$._setVisible(A,!1);for(const $ of R.on)t(this,C).get($)._setVisible(A,!0);for(const $ of R.off)t(this,C).get($)._setVisible(A,!1);D(this,q,this.getHash())}}isVisible(R){if(t(this,C).size===0)return!0;if(!R)return(0,n.info)("Optional content group not defined."),!0;if(R.type==="OCG")return t(this,C).has(R.id)?t(this,C).get(R.id).visible:((0,n.warn)(`Optional content group not found: ${R.id}`),!0);if(R.type==="OCMD"){if(R.expression)return I(this,it,mr).call(this,R.expression);if(!R.policy||R.policy==="AnyOn"){for(const K of R.ids){if(!t(this,C).has(K))return(0,n.warn)(`Optional content group not found: ${K}`),!0;if(t(this,C).get(K).visible)return!0}return!1}else if(R.policy==="AllOn"){for(const K of R.ids){if(!t(this,C).has(K))return(0,n.warn)(`Optional content group not found: ${K}`),!0;if(!t(this,C).get(K).visible)return!1}return!0}else if(R.policy==="AnyOff"){for(const K of R.ids){if(!t(this,C).has(K))return(0,n.warn)(`Optional content group not found: ${K}`),!0;if(!t(this,C).get(K).visible)return!0}return!1}else if(R.policy==="AllOff"){for(const K of R.ids){if(!t(this,C).has(K))return(0,n.warn)(`Optional content group not found: ${K}`),!0;if(t(this,C).get(K).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${R.policy}.`),!0}return(0,n.warn)(`Unknown group type ${R.type}.`),!0}setVisibility(R,K=!0){const $=t(this,C).get(R);if(!$){(0,n.warn)(`Optional content group not found: ${R}`);return}$._setVisible(A,!!K,!0),D(this,j,null)}setOCGState({state:R,preserveRB:K}){let $;for(const O of R){switch(O){case"ON":case"OFF":case"Toggle":$=O;continue}const Q=t(this,C).get(O);if(Q)switch($){case"ON":Q._setVisible(A,!0);break;case"OFF":Q._setVisible(A,!1);break;case"Toggle":Q._setVisible(A,!Q.visible);break}}D(this,j,null)}get hasInitialVisibility(){return t(this,q)===null||this.getHash()===t(this,q)}getOrder(){return t(this,C).size?t(this,W)?t(this,W).slice():[...t(this,C).keys()]:null}getGroups(){return t(this,C).size>0?(0,n.objectFromMap)(t(this,C)):null}getGroup(R){return t(this,C).get(R)||null}getHash(){if(t(this,j)!==null)return t(this,j);const R=new N.MurmurHash3_64;for(const[K,$]of t(this,C))R.update(`${K}:${$.visible}`);return D(this,j,R.hexdigest())}}j=new WeakMap,C=new WeakMap,q=new WeakMap,W=new WeakMap,it=new WeakSet,mr=function(R){const K=R.length;if(K<2)return!0;const $=R[0];for(let O=1;O<K;O++){const Q=R[O];let at;if(Array.isArray(Q))at=I(this,it,mr).call(this,Q);else if(t(this,C).has(Q))at=t(this,C).get(Q).visible;else return(0,n.warn)(`Optional content group not found: ${Q}`),!0;switch($){case"And":if(!at)return!1;break;case"Or":if(at)return!0;break;case"Not":return!at;default:return!0}}return $==="And"}},814:(v,U,x)=>{x.d(U,{cleanupTextLayer:()=>tt,renderTextLayer:()=>ut,updateTextLayer:()=>st});var n=x(292),N=x(419);const A=1e5,S=30,ot=.8,B=new Map;let F=null;function P(){if(!F){const R=document.createElement("canvas");R.className="hiddenCanvasElement",document.body.append(R),F=R.getContext("2d",{alpha:!1})}return F}function tt(){F==null||F.canvas.remove(),F=null}function j(R){const K=B.get(R);if(K)return K;const $=P(),O=$.font;$.canvas.width=$.canvas.height=S,$.font=`${S}px ${R}`;const Q=$.measureText("");let at=Q.fontBoundingBoxAscent,yt=Math.abs(Q.fontBoundingBoxDescent);if(at){const Ct=at/(at+yt);return B.set(R,Ct),$.canvas.width=$.canvas.height=0,$.font=O,Ct}$.strokeStyle="red",$.clearRect(0,0,S,S),$.strokeText("g",0,0);let Dt=$.getImageData(0,0,S,S).data;yt=0;for(let Ct=Dt.length-1-3;Ct>=0;Ct-=4)if(Dt[Ct]>0){yt=Math.ceil(Ct/4/S);break}$.clearRect(0,0,S,S),$.strokeText("A",0,S),Dt=$.getImageData(0,0,S,S).data,at=0;for(let Ct=0,Nt=Dt.length;Ct<Nt;Ct+=4)if(Dt[Ct]>0){at=S-Math.floor(Ct/4/S);break}if($.canvas.width=$.canvas.height=0,$.font=O,at){const Ct=at/(at+yt);return B.set(R,Ct),Ct}return B.set(R,ot),ot}function C(R,K,$){const O=document.createElement("span"),Q={angle:0,canvasWidth:0,hasText:K.str!=="",hasEOL:K.hasEOL,fontSize:0};R._textDivs.push(O);const at=n.Util.transform(R._transform,K.transform);let yt=Math.atan2(at[1],at[0]);const Dt=$[K.fontName];Dt.vertical&&(yt+=Math.PI/2);const Ct=R._fontInspectorEnabled&&Dt.fontSubstitution||Dt.fontFamily,Nt=Math.hypot(at[2],at[3]),wt=Nt*j(Ct);let Tt,It;yt===0?(Tt=at[4],It=at[5]-wt):(Tt=at[4]+wt*Math.sin(yt),It=at[5]-wt*Math.cos(yt));const St="calc(var(--scale-factor)*",rt=O.style;R._container===R._rootContainer?(rt.left=`${(100*Tt/R._pageWidth).toFixed(2)}%`,rt.top=`${(100*It/R._pageHeight).toFixed(2)}%`):(rt.left=`${St}${Tt.toFixed(2)}px)`,rt.top=`${St}${It.toFixed(2)}px)`),rt.fontSize=`${St}${Nt.toFixed(2)}px)`,rt.fontFamily=Ct,Q.fontSize=Nt,O.setAttribute("role","presentation"),O.textContent=K.str,O.dir=K.dir,R._fontInspectorEnabled&&(O.dataset.fontName=Dt.fontSubstitutionLoadedName||K.fontName),yt!==0&&(Q.angle=yt*(180/Math.PI));let bt=!1;if(K.str.length>1)bt=!0;else if(K.str!==" "&&K.transform[0]!==K.transform[3]){const Lt=Math.abs(K.transform[0]),Pt=Math.abs(K.transform[3]);Lt!==Pt&&Math.max(Lt,Pt)/Math.min(Lt,Pt)>1.5&&(bt=!0)}bt&&(Q.canvasWidth=Dt.vertical?K.height:K.width),R._textDivProperties.set(O,Q),R._isReadableStream&&R._layoutText(O)}function q(R){const{div:K,scale:$,properties:O,ctx:Q,prevFontSize:at,prevFontFamily:yt}=R,{style:Dt}=K;let Ct="";if(O.canvasWidth!==0&&O.hasText){const{fontFamily:Nt}=Dt,{canvasWidth:wt,fontSize:Tt}=O;(at!==Tt||yt!==Nt)&&(Q.font=`${Tt*$}px ${Nt}`,R.prevFontSize=Tt,R.prevFontFamily=Nt);const{width:It}=Q.measureText(K.textContent);It>0&&(Ct=`scaleX(${wt*$/It})`)}O.angle!==0&&(Ct=`rotate(${O.angle}deg) ${Ct}`),Ct.length>0&&(Dt.transform=Ct)}function W(R){if(R._canceled)return;const K=R._textDivs,$=R._capability;if(K.length>A){$.resolve();return}if(!R._isReadableStream)for(const O of K)R._layoutText(O);$.resolve()}class it{constructor({textContentSource:K,container:$,viewport:O,textDivs:Q,textDivProperties:at,textContentItemsStr:yt}){var Tt;this._textContentSource=K,this._isReadableStream=K instanceof ReadableStream,this._container=this._rootContainer=$,this._textDivs=Q||[],this._textContentItemsStr=yt||[],this._fontInspectorEnabled=!!((Tt=globalThis.FontInspector)!=null&&Tt.enabled),this._reader=null,this._textDivProperties=at||new WeakMap,this._canceled=!1,this._capability=Promise.withResolvers(),this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:O.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:P()};const{pageWidth:Dt,pageHeight:Ct,pageX:Nt,pageY:wt}=O.rawDims;this._transform=[1,0,0,-1,-Nt,wt+Ct],this._pageWidth=Dt,this._pageHeight=Ct,(0,N.setLayerDimensions)($,O),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(K,$){for(const O of K){if(O.str===void 0){if(O.type==="beginMarkedContentProps"||O.type==="beginMarkedContent"){const Q=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),O.id!==null&&this._container.setAttribute("id",`${O.id}`),Q.append(this._container)}else O.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(O.str),C(this,O,$)}}_layoutText(K){const $=this._layoutTextParams.properties=this._textDivProperties.get(K);if(this._layoutTextParams.div=K,q(this._layoutTextParams),$.hasText&&this._container.append(K),$.hasEOL){const O=document.createElement("br");O.setAttribute("role","presentation"),this._container.append(O)}}_render(){const{promise:K,resolve:$,reject:O}=Promise.withResolvers();let Q=Object.create(null);if(this._isReadableStream){const at=()=>{this._reader.read().then(({value:yt,done:Dt})=>{if(Dt){$();return}Object.assign(Q,yt.styles),this._processItems(yt.items,Q),at()},O)};this._reader=this._textContentSource.getReader(),at()}else if(this._textContentSource){const{items:at,styles:yt}=this._textContentSource;this._processItems(at,yt),$()}else throw new Error('No "textContentSource" parameter specified.');K.then(()=>{Q=null,W(this)},this._capability.reject)}}function ut(R){const K=new it(R);return K._render(),K}function st({container:R,viewport:K,textDivs:$,textDivProperties:O,mustRotate:Q=!0,mustRescale:at=!0}){if(Q&&(0,N.setLayerDimensions)(R,{rotation:K.rotation}),at){const yt=P(),Dt={prevFontSize:null,prevFontFamily:null,div:null,scale:K.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:yt};for(const Ct of $)Dt.properties=O.get(Ct),Dt.div=Ct,q(Dt)}}},585:(v,U,x)=>{x.d(U,{PDFDataTransportStream:()=>A});var n=x(292),N=x(419);class A{constructor(F,{disableRange:P=!1,disableStream:tt=!1}){(0,n.assert)(F,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:j,initialData:C,progressiveDone:q,contentDispositionFilename:W}=F;if(this._queuedChunks=[],this._progressiveDone=q,this._contentDispositionFilename=W,(C==null?void 0:C.length)>0){const it=C instanceof Uint8Array&&C.byteLength===C.buffer.byteLength?C.buffer:new Uint8Array(C).buffer;this._queuedChunks.push(it)}this._pdfDataRangeTransport=F,this._isStreamingSupported=!tt,this._isRangeSupported=!P,this._contentLength=j,this._fullRequestReader=null,this._rangeReaders=[],F.addRangeListener((it,ut)=>{this._onReceiveData({begin:it,chunk:ut})}),F.addProgressListener((it,ut)=>{this._onProgress({loaded:it,total:ut})}),F.addProgressiveReadListener(it=>{this._onReceiveData({chunk:it})}),F.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),F.transportReady()}_onReceiveData({begin:F,chunk:P}){const tt=P instanceof Uint8Array&&P.byteLength===P.buffer.byteLength?P.buffer:new Uint8Array(P).buffer;if(F===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(tt):this._queuedChunks.push(tt);else{const j=this._rangeReaders.some(function(C){return C._begin!==F?!1:(C._enqueue(tt),!0)});(0,n.assert)(j,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var F;return((F=this._fullRequestReader)==null?void 0:F._loaded)??0}_onProgress(F){var P,tt,j,C;F.total===void 0?(tt=(P=this._rangeReaders[0])==null?void 0:P.onProgress)==null||tt.call(P,{loaded:F.loaded}):(C=(j=this._fullRequestReader)==null?void 0:j.onProgress)==null||C.call(j,{loaded:F.loaded,total:F.total})}_onProgressiveDone(){var F;(F=this._fullRequestReader)==null||F.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(F){const P=this._rangeReaders.indexOf(F);P>=0&&this._rangeReaders.splice(P,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const F=this._queuedChunks;return this._queuedChunks=null,new S(this,F,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(F,P){if(P<=this._progressiveDataLength)return null;const tt=new ot(this,F,P);return this._pdfDataRangeTransport.requestDataRange(F,P),this._rangeReaders.push(tt),tt}cancelAllRequests(F){var P;(P=this._fullRequestReader)==null||P.cancel(F);for(const tt of this._rangeReaders.slice(0))tt.cancel(F);this._pdfDataRangeTransport.abort()}}class S{constructor(F,P,tt=!1,j=null){this._stream=F,this._done=tt||!1,this._filename=(0,N.isPdfFile)(j)?j:null,this._queuedChunks=P||[],this._loaded=0;for(const C of this._queuedChunks)this._loaded+=C.byteLength;this._requests=[],this._headersReady=Promise.resolve(),F._fullRequestReader=this,this.onProgress=null}_enqueue(F){this._done||(this._requests.length>0?this._requests.shift().resolve({value:F,done:!1}):this._queuedChunks.push(F),this._loaded+=F.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const F=Promise.withResolvers();return this._requests.push(F),F.promise}cancel(F){this._done=!0;for(const P of this._requests)P.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ot{constructor(F,P,tt){this._stream=F,this._begin=P,this._end=tt,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(F){if(!this._done){if(this._requests.length===0)this._queuedChunk=F;else{this._requests.shift().resolve({value:F,done:!1});for(const P of this._requests)P.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const P=this._queuedChunk;return this._queuedChunk=null,{value:P,done:!1}}if(this._done)return{value:void 0,done:!0};const F=Promise.withResolvers();return this._requests.push(F),F.promise}cancel(F){this._done=!0;for(const P of this._requests)P.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},164:(v,U,x)=>{var N,A;x.d(U,{GlobalWorkerOptions:()=>n});class n{static get workerPort(){return t(this,N)}static set workerPort(ot){if(!(typeof Worker<"u"&&ot instanceof Worker)&&ot!==null)throw new Error("Invalid `workerPort` type.");D(this,N,ot)}static get workerSrc(){return t(this,A)}static set workerSrc(ot){if(typeof ot!="string")throw new Error("Invalid `workerSrc` type.");D(this,A,ot)}}N=new WeakMap,A=new WeakMap,c(n,N,null),c(n,A,"")},284:(v,U,x)=>{x.d(U,{XfaLayer:()=>N});var n=x(50);class N{static setupStorage(S,ot,B,F,P){const tt=F.getValue(ot,{value:null});switch(B.name){case"textarea":if(tt.value!==null&&(S.textContent=tt.value),P==="print")break;S.addEventListener("input",j=>{F.setValue(ot,{value:j.target.value})});break;case"input":if(B.attributes.type==="radio"||B.attributes.type==="checkbox"){if(tt.value===B.attributes.xfaOn?S.setAttribute("checked",!0):tt.value===B.attributes.xfaOff&&S.removeAttribute("checked"),P==="print")break;S.addEventListener("change",j=>{F.setValue(ot,{value:j.target.checked?j.target.getAttribute("xfaOn"):j.target.getAttribute("xfaOff")})})}else{if(tt.value!==null&&S.setAttribute("value",tt.value),P==="print")break;S.addEventListener("input",j=>{F.setValue(ot,{value:j.target.value})})}break;case"select":if(tt.value!==null){S.setAttribute("value",tt.value);for(const j of B.children)j.attributes.value===tt.value?j.attributes.selected=!0:j.attributes.hasOwnProperty("selected")&&delete j.attributes.selected}S.addEventListener("input",j=>{const C=j.target.options,q=C.selectedIndex===-1?"":C[C.selectedIndex].value;F.setValue(ot,{value:q})});break}}static setAttributes({html:S,element:ot,storage:B=null,intent:F,linkService:P}){const{attributes:tt}=ot,j=S instanceof HTMLAnchorElement;tt.type==="radio"&&(tt.name=`${tt.name}-${F}`);for(const[C,q]of Object.entries(tt))if(q!=null)switch(C){case"class":q.length&&S.setAttribute(C,q.join(" "));break;case"dataId":break;case"id":S.setAttribute("data-element-id",q);break;case"style":Object.assign(S.style,q);break;case"textContent":S.textContent=q;break;default:(!j||C!=="href"&&C!=="newWindow")&&S.setAttribute(C,q)}j&&P.addLinkAttributes(S,tt.href,tt.newWindow),B&&tt.dataId&&this.setupStorage(S,tt.dataId,ot,B)}static render(S){var it,ut;const ot=S.annotationStorage,B=S.linkService,F=S.xfaHtml,P=S.intent||"display",tt=document.createElement(F.name);F.attributes&&this.setAttributes({html:tt,element:F,intent:P,linkService:B});const j=P!=="richText",C=S.div;if(C.append(tt),S.viewport){const st=`matrix(${S.viewport.transform.join(",")})`;C.style.transform=st}j&&C.setAttribute("class","xfaLayer xfaFont");const q=[];if(F.children.length===0){if(F.value){const st=document.createTextNode(F.value);tt.append(st),j&&n.XfaText.shouldBuildText(F.name)&&q.push(st)}return{textDivs:q}}const W=[[F,-1,tt]];for(;W.length>0;){const[st,R,K]=W.at(-1);if(R+1===st.children.length){W.pop();continue}const $=st.children[++W.at(-1)[1]];if($===null)continue;const{name:O}=$;if(O==="#text"){const at=document.createTextNode($.value);q.push(at),K.append(at);continue}const Q=(it=$==null?void 0:$.attributes)!=null&&it.xmlns?document.createElementNS($.attributes.xmlns,O):document.createElement(O);if(K.append(Q),$.attributes&&this.setAttributes({html:Q,element:$,storage:ot,intent:P,linkService:B}),((ut=$.children)==null?void 0:ut.length)>0)W.push([$,-1,Q]);else if($.value){const at=document.createTextNode($.value);j&&n.XfaText.shouldBuildText(O)&&q.push(at),Q.append(at)}}for(const st of C.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))st.setAttribute("readOnly",!0);return{textDivs:q}}static update(S){const ot=`matrix(${S.viewport.transform.join(",")})`;S.div.style.transform=ot,S.div.hidden=!1}}},50:(v,U,x)=>{x.d(U,{XfaText:()=>n});class n{static textContent(A){const S=[],ot={items:S,styles:Object.create(null)};function B(F){var j;if(!F)return;let P=null;const tt=F.name;if(tt==="#text")P=F.value;else if(n.shouldBuildText(tt))(j=F==null?void 0:F.attributes)!=null&&j.textContent?P=F.attributes.textContent:F.value&&(P=F.value);else return;if(P!==null&&S.push({str:P}),!!F.children)for(const C of F.children)B(C)}return B(A),ot}static shouldBuildText(A){return!(A==="textarea"||A==="input"||A==="option"||A==="select")}}},228:(v,U,x)=>{x.a(v,async(n,N)=>{try{x.d(U,{AbortException:()=>A.AbortException,AnnotationEditorLayer:()=>F.AnnotationEditorLayer,AnnotationEditorParamsType:()=>A.AnnotationEditorParamsType,AnnotationEditorType:()=>A.AnnotationEditorType,AnnotationEditorUIManager:()=>P.AnnotationEditorUIManager,AnnotationLayer:()=>tt.AnnotationLayer,AnnotationMode:()=>A.AnnotationMode,CMapCompressionType:()=>A.CMapCompressionType,ColorPicker:()=>j.ColorPicker,DOMSVGFactory:()=>ot.DOMSVGFactory,DrawLayer:()=>C.DrawLayer,FeatureTest:()=>A.FeatureTest,GlobalWorkerOptions:()=>q.GlobalWorkerOptions,ImageKind:()=>A.ImageKind,InvalidPDFException:()=>A.InvalidPDFException,MissingPDFException:()=>A.MissingPDFException,OPS:()=>A.OPS,Outliner:()=>W.Outliner,PDFDataRangeTransport:()=>S.PDFDataRangeTransport,PDFDateString:()=>ot.PDFDateString,PDFWorker:()=>S.PDFWorker,PasswordResponses:()=>A.PasswordResponses,PermissionFlag:()=>A.PermissionFlag,PixelsPerInch:()=>ot.PixelsPerInch,RenderingCancelledException:()=>ot.RenderingCancelledException,UnexpectedResponseException:()=>A.UnexpectedResponseException,Util:()=>A.Util,VerbosityLevel:()=>A.VerbosityLevel,XfaLayer:()=>it.XfaLayer,build:()=>S.build,createValidAbsoluteUrl:()=>A.createValidAbsoluteUrl,fetchData:()=>ot.fetchData,getDocument:()=>S.getDocument,getFilenameFromUrl:()=>ot.getFilenameFromUrl,getPdfFilenameFromUrl:()=>ot.getPdfFilenameFromUrl,getXfaPageViewport:()=>ot.getXfaPageViewport,isDataScheme:()=>ot.isDataScheme,isPdfFile:()=>ot.isPdfFile,noContextMenu:()=>ot.noContextMenu,normalizeUnicode:()=>A.normalizeUnicode,renderTextLayer:()=>B.renderTextLayer,setLayerDimensions:()=>ot.setLayerDimensions,shadow:()=>A.shadow,updateTextLayer:()=>B.updateTextLayer,version:()=>S.version});var A=x(292),S=x(831),ot=x(419),B=x(814),F=x(731),P=x(830),tt=x(976),j=x(259),C=x(47),q=x(164),W=x(61),it=x(284),ut=n([S]);S=(ut.then?(await ut)():ut)[0];const st="4.1.392",R="fcb76a78d";N()}catch(st){N(st)}})},178:(v,U,x)=>{var B,Za,P,to,j,gn;x.d(U,{MessageHandler:()=>ot});var n=x(292);const N={UNKNOWN:0,DATA:1,ERROR:2},A={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function S(q){switch(q instanceof Error||typeof q=="object"&&q!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),q.name){case"AbortException":return new n.AbortException(q.message);case"MissingPDFException":return new n.MissingPDFException(q.message);case"PasswordException":return new n.PasswordException(q.message,q.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(q.message,q.status);case"UnknownErrorException":return new n.UnknownErrorException(q.message,q.details);default:return new n.UnknownErrorException(q.message,q.toString())}}class ot{constructor(W,it,ut){c(this,B);c(this,P);c(this,j);this.sourceName=W,this.targetName=it,this.comObj=ut,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=st=>{const R=st.data;if(R.targetName!==this.sourceName)return;if(R.stream){I(this,P,to).call(this,R);return}if(R.callback){const $=R.callbackId,O=this.callbackCapabilities[$];if(!O)throw new Error(`Cannot resolve callback ${$}`);if(delete this.callbackCapabilities[$],R.callback===N.DATA)O.resolve(R.data);else if(R.callback===N.ERROR)O.reject(S(R.reason));else throw new Error("Unexpected callback case");return}const K=this.actionHandler[R.action];if(!K)throw new Error(`Unknown action from worker: ${R.action}`);if(R.callbackId){const $=this.sourceName,O=R.sourceName;new Promise(function(Q){Q(K(R.data))}).then(function(Q){ut.postMessage({sourceName:$,targetName:O,callback:N.DATA,callbackId:R.callbackId,data:Q})},function(Q){ut.postMessage({sourceName:$,targetName:O,callback:N.ERROR,callbackId:R.callbackId,reason:S(Q)})});return}if(R.streamId){I(this,B,Za).call(this,R);return}K(R.data)},ut.addEventListener("message",this._onComObjOnMessage)}on(W,it){const ut=this.actionHandler;if(ut[W])throw new Error(`There is already an actionName called "${W}"`);ut[W]=it}send(W,it,ut){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:W,data:it},ut)}sendWithPromise(W,it,ut){const st=this.callbackId++,R=Promise.withResolvers();this.callbackCapabilities[st]=R;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:W,callbackId:st,data:it},ut)}catch(K){R.reject(K)}return R.promise}sendWithStream(W,it,ut,st){const R=this.streamId++,K=this.sourceName,$=this.targetName,O=this.comObj;return new ReadableStream({start:Q=>{const at=Promise.withResolvers();return this.streamControllers[R]={controller:Q,startCall:at,pullCall:null,cancelCall:null,isClosed:!1},O.postMessage({sourceName:K,targetName:$,action:W,streamId:R,data:it,desiredSize:Q.desiredSize},st),at.promise},pull:Q=>{const at=Promise.withResolvers();return this.streamControllers[R].pullCall=at,O.postMessage({sourceName:K,targetName:$,stream:A.PULL,streamId:R,desiredSize:Q.desiredSize}),at.promise},cancel:Q=>{(0,n.assert)(Q instanceof Error,"cancel must have a valid reason");const at=Promise.withResolvers();return this.streamControllers[R].cancelCall=at,this.streamControllers[R].isClosed=!0,O.postMessage({sourceName:K,targetName:$,stream:A.CANCEL,streamId:R,reason:S(Q)}),at.promise}},ut)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}B=new WeakSet,Za=function(W){const it=W.streamId,ut=this.sourceName,st=W.sourceName,R=this.comObj,K=this,$=this.actionHandler[W.action],O={enqueue(Q,at=1,yt){if(this.isCancelled)return;const Dt=this.desiredSize;this.desiredSize-=at,Dt>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),R.postMessage({sourceName:ut,targetName:st,stream:A.ENQUEUE,streamId:it,chunk:Q},yt)},close(){this.isCancelled||(this.isCancelled=!0,R.postMessage({sourceName:ut,targetName:st,stream:A.CLOSE,streamId:it}),delete K.streamSinks[it])},error(Q){(0,n.assert)(Q instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,R.postMessage({sourceName:ut,targetName:st,stream:A.ERROR,streamId:it,reason:S(Q)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:W.desiredSize,ready:null};O.sinkCapability.resolve(),O.ready=O.sinkCapability.promise,this.streamSinks[it]=O,new Promise(function(Q){Q($(W.data,O))}).then(function(){R.postMessage({sourceName:ut,targetName:st,stream:A.START_COMPLETE,streamId:it,success:!0})},function(Q){R.postMessage({sourceName:ut,targetName:st,stream:A.START_COMPLETE,streamId:it,reason:S(Q)})})},P=new WeakSet,to=function(W){const it=W.streamId,ut=this.sourceName,st=W.sourceName,R=this.comObj,K=this.streamControllers[it],$=this.streamSinks[it];switch(W.stream){case A.START_COMPLETE:W.success?K.startCall.resolve():K.startCall.reject(S(W.reason));break;case A.PULL_COMPLETE:W.success?K.pullCall.resolve():K.pullCall.reject(S(W.reason));break;case A.PULL:if(!$){R.postMessage({sourceName:ut,targetName:st,stream:A.PULL_COMPLETE,streamId:it,success:!0});break}$.desiredSize<=0&&W.desiredSize>0&&$.sinkCapability.resolve(),$.desiredSize=W.desiredSize,new Promise(function(O){var Q;O((Q=$.onPull)==null?void 0:Q.call($))}).then(function(){R.postMessage({sourceName:ut,targetName:st,stream:A.PULL_COMPLETE,streamId:it,success:!0})},function(O){R.postMessage({sourceName:ut,targetName:st,stream:A.PULL_COMPLETE,streamId:it,reason:S(O)})});break;case A.ENQUEUE:if((0,n.assert)(K,"enqueue should have stream controller"),K.isClosed)break;K.controller.enqueue(W.chunk);break;case A.CLOSE:if((0,n.assert)(K,"close should have stream controller"),K.isClosed)break;K.isClosed=!0,K.controller.close(),I(this,j,gn).call(this,K,it);break;case A.ERROR:(0,n.assert)(K,"error should have stream controller"),K.controller.error(S(W.reason)),I(this,j,gn).call(this,K,it);break;case A.CANCEL_COMPLETE:W.success?K.cancelCall.resolve():K.cancelCall.reject(S(W.reason)),I(this,j,gn).call(this,K,it);break;case A.CANCEL:if(!$)break;new Promise(function(O){var Q;O((Q=$.onCancel)==null?void 0:Q.call($,S(W.reason)))}).then(function(){R.postMessage({sourceName:ut,targetName:st,stream:A.CANCEL_COMPLETE,streamId:it,success:!0})},function(O){R.postMessage({sourceName:ut,targetName:st,stream:A.CANCEL_COMPLETE,streamId:it,reason:S(O)})}),$.sinkCapability.reject(S(W.reason)),$.isCancelled=!0,delete this.streamSinks[it];break;default:throw new Error("Unexpected stream case")}},j=new WeakSet,gn=async function(W,it){var ut,st,R;await Promise.allSettled([(ut=W.startCall)==null?void 0:ut.promise,(st=W.pullCall)==null?void 0:st.promise,(R=W.cancelCall)==null?void 0:R.promise]),delete this.streamControllers[it]}},651:(v,U,x)=>{x.d(U,{MurmurHash3_64:()=>S});const n=3285377520,N=4294901760,A=65535;class S{constructor(B){this.h1=B?B&4294967295:n,this.h2=B?B&4294967295:n}update(B){let F,P;if(typeof B=="string"){F=new Uint8Array(B.length*2),P=0;for(let O=0,Q=B.length;O<Q;O++){const at=B.charCodeAt(O);at<=255?F[P++]=at:(F[P++]=at>>>8,F[P++]=at&255)}}else if(ArrayBuffer.isView(B))F=B.slice(),P=F.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const tt=P>>2,j=P-tt*4,C=new Uint32Array(F.buffer,0,tt);let q=0,W=0,it=this.h1,ut=this.h2;const st=3432918353,R=461845907,K=st&A,$=R&A;for(let O=0;O<tt;O++)O&1?(q=C[O],q=q*st&N|q*K&A,q=q<<15|q>>>17,q=q*R&N|q*$&A,it^=q,it=it<<13|it>>>19,it=it*5+3864292196):(W=C[O],W=W*st&N|W*K&A,W=W<<15|W>>>17,W=W*R&N|W*$&A,ut^=W,ut=ut<<13|ut>>>19,ut=ut*5+3864292196);switch(q=0,j){case 3:q^=F[tt*4+2]<<16;case 2:q^=F[tt*4+1]<<8;case 1:q^=F[tt*4],q=q*st&N|q*K&A,q=q<<15|q>>>17,q=q*R&N|q*$&A,tt&1?it^=q:ut^=q}this.h1=it,this.h2=ut}hexdigest(){let B=this.h1,F=this.h2;return B^=F>>>1,B=B*3981806797&N|B*36045&A,F=F*4283543511&N|((F<<16|B>>>16)*2950163797&N)>>>16,B^=F>>>1,B=B*444984403&N|B*60499&A,F=F*3301882366&N|((F<<16|B>>>16)*3120437893&N)>>>16,B^=F>>>1,(B>>>0).toString(16).padStart(8,"0")+(F>>>0).toString(16).padStart(8,"0")}}},292:(v,U,x)=>{var l,fn,b,vr;x.d(U,{AbortException:()=>re,AnnotationBorderStyleType:()=>ut,AnnotationEditorParamsType:()=>j,AnnotationEditorPrefix:()=>P,AnnotationEditorType:()=>tt,AnnotationMode:()=>F,AnnotationPrefix:()=>f,AnnotationType:()=>it,BaseException:()=>St,CMapCompressionType:()=>R,FONT_IDENTITY_MATRIX:()=>A,FeatureTest:()=>Ce,FormatError:()=>Kt,IDENTITY_MATRIX:()=>N,ImageKind:()=>W,InvalidPDFException:()=>Lt,LINE_FACTOR:()=>ot,MAX_IMAGE_SIZE_TO_CACHE:()=>S,MissingPDFException:()=>Pt,OPS:()=>K,PasswordException:()=>rt,PasswordResponses:()=>$,PermissionFlag:()=>C,RenderingIntentFlag:()=>B,TextRenderingMode:()=>q,UnexpectedResponseException:()=>qt,UnknownErrorException:()=>bt,Util:()=>Ee,VerbosityLevel:()=>st,assert:()=>Nt,bytesToString:()=>_e,createValidAbsoluteUrl:()=>Tt,getUuid:()=>d,getVerbosityLevel:()=>at,info:()=>yt,isNodeJS:()=>n,normalizeUnicode:()=>r,objectFromMap:()=>me,setVerbosityLevel:()=>Q,shadow:()=>It,string32:()=>he,stringToBytes:()=>ce,unreachable:()=>Ct,warn:()=>Dt});const n=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),N=[1,0,0,1,0,0],A=[.001,0,0,.001,0,0],S=1e7,ot=1.35,B={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},F={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},P="pdfjs_internal_editor_",tt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},j={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},C={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},q={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},W={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},it={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ut={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},st={ERRORS:0,WARNINGS:1,INFOS:5},R={NONE:0,BINARY:1},K={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},$={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let O=st.WARNINGS;function Q(u){Number.isInteger(u)&&(O=u)}function at(){return O}function yt(u){O>=st.INFOS&&console.log(`Info: ${u}`)}function Dt(u){O>=st.WARNINGS&&console.log(`Warning: ${u}`)}function Ct(u){throw new Error(u)}function Nt(u,o){u||Ct(o)}function wt(u){switch(u==null?void 0:u.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Tt(u,o=null,h=null){var s;if(!u)return null;try{if(h&&typeof u=="string"&&(h.addDefaultProtocol&&u.startsWith("www.")&&((s=u.match(/\./g))==null?void 0:s.length)>=2&&(u=`http://${u}`),h.tryConvertEncoding))try{u=ne(u)}catch{}const a=o?new URL(u,o):new URL(u);if(wt(a))return a}catch{}return null}function It(u,o,h,s=!1){return Object.defineProperty(u,o,{value:h,enumerable:!s,configurable:!0,writable:!1}),h}const St=function(){function u(o,h){this.constructor===u&&Ct("Cannot initialize BaseException."),this.message=o,this.name=h}return u.prototype=new Error,u.constructor=u,u}();class rt extends St{constructor(o,h){super(o,"PasswordException"),this.code=h}}class bt extends St{constructor(o,h){super(o,"UnknownErrorException"),this.details=h}}class Lt extends St{constructor(o){super(o,"InvalidPDFException")}}class Pt extends St{constructor(o){super(o,"MissingPDFException")}}class qt extends St{constructor(o,h){super(o,"UnexpectedResponseException"),this.status=h}}class Kt extends St{constructor(o){super(o,"FormatError")}}class re extends St{constructor(o){super(o,"AbortException")}}function _e(u){(typeof u!="object"||(u==null?void 0:u.length)===void 0)&&Ct("Invalid argument for bytesToString");const o=u.length,h=8192;if(o<h)return String.fromCharCode.apply(null,u);const s=[];for(let a=0;a<o;a+=h){const g=Math.min(a+h,o),k=u.subarray(a,g);s.push(String.fromCharCode.apply(null,k))}return s.join("")}function ce(u){typeof u!="string"&&Ct("Invalid argument for stringToBytes");const o=u.length,h=new Uint8Array(o);for(let s=0;s<o;++s)h[s]=u.charCodeAt(s)&255;return h}function he(u){return String.fromCharCode(u>>24&255,u>>16&255,u>>8&255,u&255)}function me(u){const o=Object.create(null);for(const[h,s]of u)o[h]=s;return o}function zt(){const u=new Uint8Array(4);return u[0]=1,new Uint32Array(u.buffer,0,1)[0]===1}function oe(){try{return new Function(""),!0}catch{return!1}}class Ce{static get isLittleEndian(){return It(this,"isLittleEndian",zt())}static get isEvalSupported(){return It(this,"isEvalSupported",oe())}static get isOffscreenCanvasSupported(){return It(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?It(this,"platform",{isMac:navigator.platform.includes("Mac")}):It(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var o,h;return It(this,"isCSSRoundSupported",(h=(o=globalThis.CSS)==null?void 0:o.supports)==null?void 0:h.call(o,"width: round(1.5px, 1px)"))}}const se=Array.from(Array(256).keys(),u=>u.toString(16).padStart(2,"0"));class Ee{static makeHexColor(o,h,s){return`#${se[o]}${se[h]}${se[s]}`}static scaleMinMax(o,h){let s;o[0]?(o[0]<0&&(s=h[0],h[0]=h[2],h[2]=s),h[0]*=o[0],h[2]*=o[0],o[3]<0&&(s=h[1],h[1]=h[3],h[3]=s),h[1]*=o[3],h[3]*=o[3]):(s=h[0],h[0]=h[1],h[1]=s,s=h[2],h[2]=h[3],h[3]=s,o[1]<0&&(s=h[1],h[1]=h[3],h[3]=s),h[1]*=o[1],h[3]*=o[1],o[2]<0&&(s=h[0],h[0]=h[2],h[2]=s),h[0]*=o[2],h[2]*=o[2]),h[0]+=o[4],h[1]+=o[5],h[2]+=o[4],h[3]+=o[5]}static transform(o,h){return[o[0]*h[0]+o[2]*h[1],o[1]*h[0]+o[3]*h[1],o[0]*h[2]+o[2]*h[3],o[1]*h[2]+o[3]*h[3],o[0]*h[4]+o[2]*h[5]+o[4],o[1]*h[4]+o[3]*h[5]+o[5]]}static applyTransform(o,h){const s=o[0]*h[0]+o[1]*h[2]+h[4],a=o[0]*h[1]+o[1]*h[3]+h[5];return[s,a]}static applyInverseTransform(o,h){const s=h[0]*h[3]-h[1]*h[2],a=(o[0]*h[3]-o[1]*h[2]+h[2]*h[5]-h[4]*h[3])/s,g=(-o[0]*h[1]+o[1]*h[0]+h[4]*h[1]-h[5]*h[0])/s;return[a,g]}static getAxialAlignedBoundingBox(o,h){const s=this.applyTransform(o,h),a=this.applyTransform(o.slice(2,4),h),g=this.applyTransform([o[0],o[3]],h),k=this.applyTransform([o[2],o[1]],h);return[Math.min(s[0],a[0],g[0],k[0]),Math.min(s[1],a[1],g[1],k[1]),Math.max(s[0],a[0],g[0],k[0]),Math.max(s[1],a[1],g[1],k[1])]}static inverseTransform(o){const h=o[0]*o[3]-o[1]*o[2];return[o[3]/h,-o[1]/h,-o[2]/h,o[0]/h,(o[2]*o[5]-o[4]*o[3])/h,(o[4]*o[1]-o[5]*o[0])/h]}static singularValueDecompose2dScale(o){const h=[o[0],o[2],o[1],o[3]],s=o[0]*h[0]+o[1]*h[2],a=o[0]*h[1]+o[1]*h[3],g=o[2]*h[0]+o[3]*h[2],k=o[2]*h[1]+o[3]*h[3],y=(s+k)/2,X=Math.sqrt((s+k)**2-4*(s*k-g*a))/2,Z=y+X||1,V=y-X||1;return[Math.sqrt(Z),Math.sqrt(V)]}static normalizeRect(o){const h=o.slice(0);return o[0]>o[2]&&(h[0]=o[2],h[2]=o[0]),o[1]>o[3]&&(h[1]=o[3],h[3]=o[1]),h}static intersect(o,h){const s=Math.max(Math.min(o[0],o[2]),Math.min(h[0],h[2])),a=Math.min(Math.max(o[0],o[2]),Math.max(h[0],h[2]));if(s>a)return null;const g=Math.max(Math.min(o[1],o[3]),Math.min(h[1],h[3])),k=Math.min(Math.max(o[1],o[3]),Math.max(h[1],h[3]));return g>k?null:[s,g,a,k]}static bezierBoundingBox(o,h,s,a,g,k,y,X,Z){return Z?(Z[0]=Math.min(Z[0],o,y),Z[1]=Math.min(Z[1],h,X),Z[2]=Math.max(Z[2],o,y),Z[3]=Math.max(Z[3],h,X)):Z=[Math.min(o,y),Math.min(h,X),Math.max(o,y),Math.max(h,X)],I(this,b,vr).call(this,o,s,g,y,h,a,k,X,3*(-o+3*(s-g)+y),6*(o-2*s+g),3*(s-o),Z),I(this,b,vr).call(this,o,s,g,y,h,a,k,X,3*(-h+3*(a-k)+X),6*(h-2*a+k),3*(a-h),Z),Z}}l=new WeakSet,fn=function(o,h,s,a,g,k,y,X,Z,V){if(Z<=0||Z>=1)return;const et=1-Z,p=Z*Z,M=p*Z,J=et*(et*(et*o+3*Z*h)+3*p*s)+M*a,E=et*(et*(et*g+3*Z*k)+3*p*y)+M*X;V[0]=Math.min(V[0],J),V[1]=Math.min(V[1],E),V[2]=Math.max(V[2],J),V[3]=Math.max(V[3],E)},b=new WeakSet,vr=function(o,h,s,a,g,k,y,X,Z,V,et,p){if(Math.abs(Z)<1e-12){Math.abs(V)>=1e-12&&I(this,l,fn).call(this,o,h,s,a,g,k,y,X,-et/V,p);return}const M=V**2-4*et*Z;if(M<0)return;const J=Math.sqrt(M),E=2*Z;I(this,l,fn).call(this,o,h,s,a,g,k,y,X,(-V+J)/E,p),I(this,l,fn).call(this,o,h,s,a,g,k,y,X,(-V-J)/E,p)},c(Ee,l),c(Ee,b);function ne(u){return decodeURIComponent(escape(u))}let lt=null,i=null;function r(u){return lt||(lt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,i=new Map([["\uFB05","\u017Ft"]])),u.replaceAll(lt,(o,h,s)=>h?h.normalize("NFKC"):i.get(s))}function d(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const u=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(u);else for(let o=0;o<32;o++)u[o]=Math.floor(Math.random()*255);return _e(u)}const f="pdfjs_internal_id_"}},Hr={};function Ci(v){var U=Hr[v];if(U!==void 0)return U.exports;var x=Hr[v]={exports:{}};return zo[v](x,x.exports,Ci),x.exports}(()=>{var v=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",U=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",x=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",n=A=>{A&&A.d<1&&(A.d=1,A.forEach(S=>S.r--),A.forEach(S=>S.r--?S.r++:S()))},N=A=>A.map(S=>{if(S!==null&&typeof S=="object"){if(S[v])return S;if(S.then){var ot=[];ot.d=0,S.then(P=>{B[U]=P,n(ot)},P=>{B[x]=P,n(ot)});var B={};return B[v]=P=>P(ot),B}}var F={};return F[v]=P=>{},F[U]=S,F});Ci.a=(A,S,ot)=>{var B;ot&&((B=[]).d=-1);var F=new Set,P=A.exports,tt,j,C,q=new Promise((W,it)=>{C=it,j=W});q[U]=P,q[v]=W=>(B&&W(B),F.forEach(W),q.catch(it=>{})),A.exports=q,S(W=>{tt=N(W);var it,ut=()=>tt.map(R=>{if(R[x])throw R[x];return R[U]}),st=new Promise(R=>{it=()=>R(ut),it.r=0;var K=$=>$!==B&&!F.has($)&&(F.add($),$&&!$.d&&(it.r++,$.push(it)));tt.map($=>$[v](K))});return it.r?st:ut()},W=>(W?C(q[x]=W):j(P),n(B))),B&&B.d<0&&(B.d=0)}})(),Ci.d=(v,U)=>{for(var x in U)Ci.o(U,x)&&!Ci.o(v,x)&&Object.defineProperty(v,x,{enumerable:!0,get:U[x]})},Ci.o=(v,U)=>Object.prototype.hasOwnProperty.call(v,U);var ge=Ci(228);ge=globalThis.pdfjsLib=await(globalThis.pdfjsLibPromise=ge),ge.AbortException,ge.AnnotationEditorLayer,ge.AnnotationEditorParamsType,ge.AnnotationEditorType,ge.AnnotationEditorUIManager,ge.AnnotationLayer,ge.AnnotationMode,ge.CMapCompressionType,ge.ColorPicker,ge.DOMSVGFactory,ge.DrawLayer,ge.FeatureTest;var Go=ge.GlobalWorkerOptions;ge.ImageKind,ge.InvalidPDFException,ge.MissingPDFException,ge.OPS,ge.Outliner,ge.PDFDataRangeTransport,ge.PDFDateString,ge.PDFWorker,ge.PasswordResponses,ge.PermissionFlag,ge.PixelsPerInch,ge.RenderingCancelledException,ge.UnexpectedResponseException,ge.Util,ge.VerbosityLevel,ge.XfaLayer,ge.build,ge.createValidAbsoluteUrl,ge.fetchData;var qo=ge.getDocument;ge.getFilenameFromUrl,ge.getPdfFilenameFromUrl,ge.getXfaPageViewport,ge.isDataScheme,ge.isPdfFile,ge.noContextMenu,ge.normalizeUnicode,ge.renderTextLayer,ge.setLayerDimensions,ge.shadow,ge.updateTextLayer,ge.version;var Uo={exports:{}};(function(v,U){(function(x,n){v.exports=n()})(window,function(){return function(x){var n={};function N(A){if(n[A])return n[A].exports;var S=n[A]={i:A,l:!1,exports:{}};return x[A].call(S.exports,S,S.exports,N),S.l=!0,S.exports}return N.m=x,N.c=n,N.d=function(A,S,ot){N.o(A,S)||Object.defineProperty(A,S,{enumerable:!0,get:ot})},N.r=function(A){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})},N.t=function(A,S){if(1&S&&(A=N(A)),8&S||4&S&&typeof A=="object"&&A&&A.__esModule)return A;var ot=Object.create(null);if(N.r(ot),Object.defineProperty(ot,"default",{enumerable:!0,value:A}),2&S&&typeof A!="string")for(var B in A)N.d(ot,B,(function(F){return A[F]}).bind(null,B));return ot},N.n=function(A){var S=A&&A.__esModule?function(){return A.default}:function(){return A};return N.d(S,"a",S),S},N.o=function(A,S){return Object.prototype.hasOwnProperty.call(A,S)},N.p="",N(N.s=0)}([function(x,n,N){N.r(n);var A,S="fslightbox-",ot="".concat(S,"styles"),B="".concat(S,"cursor-grabbing"),F="".concat(S,"full-dimension"),P="".concat(S,"flex-centered"),tt="".concat(S,"open"),j="".concat(S,"transform-transition"),C="".concat(S,"absoluted"),q="".concat(S,"slide-btn"),W="".concat(q,"-container"),it="".concat(S,"fade-in"),ut="".concat(S,"fade-out"),st=it+"-strong",R=ut+"-strong",K="".concat(S,"opacity-"),$="".concat(K,"1"),O="".concat(S,"source");function Q(s){return(Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(s)}function at(s){var a=s.stageIndexes,g=s.core.stageManager,k=s.props.sources.length-1;g.getPreviousSlideIndex=function(){return a.current===0?k:a.current-1},g.getNextSlideIndex=function(){return a.current===k?0:a.current+1},g.updateStageIndexes=k===0?function(){}:k===1?function(){a.current===0?(a.next=1,delete a.previous):(a.previous=0,delete a.next)}:function(){a.previous=g.getPreviousSlideIndex(),a.next=g.getNextSlideIndex()},g.i=k<=2?function(){return!0}:function(y){var X=a.current;if(X===0&&y===k||X===k&&y===0)return!0;var Z=X-y;return Z===-1||Z===0||Z===1}}(typeof document>"u"?"undefined":Q(document))==="object"&&((A=document.createElement("style")).className=ot,A.appendChild(document.createTextNode(".fslightbox-absoluted{position:absolute;top:0;left:0}.fslightbox-fade-in{animation:fslightbox-fade-in .3s cubic-bezier(0,0,.7,1)}.fslightbox-fade-out{animation:fslightbox-fade-out .3s ease}.fslightbox-fade-in-strong{animation:fslightbox-fade-in-strong .3s cubic-bezier(0,0,.7,1)}.fslightbox-fade-out-strong{animation:fslightbox-fade-out-strong .3s ease}@keyframes fslightbox-fade-in{from{opacity:.65}to{opacity:1}}@keyframes fslightbox-fade-out{from{opacity:.35}to{opacity:0}}@keyframes fslightbox-fade-in-strong{from{opacity:.3}to{opacity:1}}@keyframes fslightbox-fade-out-strong{from{opacity:1}to{opacity:0}}.fslightbox-cursor-grabbing{cursor:grabbing}.fslightbox-full-dimension{width:100%;height:100%}.fslightbox-open{overflow:hidden;height:100%}.fslightbox-flex-centered{display:flex;justify-content:center;align-items:center}.fslightbox-opacity-0{opacity:0!important}.fslightbox-opacity-1{opacity:1!important}.fslightbox-scrollbarfix{padding-right:17px}.fslightbox-transform-transition{transition:transform .3s}.fslightbox-container{font-family:Arial,sans-serif;position:fixed;top:0;left:0;background:linear-gradient(rgba(30,30,30,.9),#000 1810%);touch-action:pinch-zoom;z-index:1000000000;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.fslightbox-container *{box-sizing:border-box}.fslightbox-svg-path{transition:fill .15s ease;fill:#ddd}.fslightbox-nav{height:45px;width:100%;position:absolute;top:0;left:0}.fslightbox-slide-number-container{display:flex;justify-content:center;align-items:center;position:relative;height:100%;font-size:15px;color:#d7d7d7;z-index:0;max-width:55px;text-align:left}.fslightbox-slide-number-container .fslightbox-flex-centered{height:100%}.fslightbox-slash{display:block;margin:0 5px;width:1px;height:12px;transform:rotate(15deg);background:#fff}.fslightbox-toolbar{position:absolute;z-index:3;right:0;top:0;height:100%;display:flex;background:rgba(35,35,35,.65)}.fslightbox-toolbar-button{height:100%;width:45px;cursor:pointer}.fslightbox-toolbar-button:hover .fslightbox-svg-path{fill:#fff}.fslightbox-slide-btn-container{display:flex;align-items:center;padding:12px 12px 12px 6px;position:absolute;top:50%;cursor:pointer;z-index:3;transform:translateY(-50%)}@media (min-width:476px){.fslightbox-slide-btn-container{padding:22px 22px 22px 6px}}@media (min-width:768px){.fslightbox-slide-btn-container{padding:30px 30px 30px 6px}}.fslightbox-slide-btn-container:hover .fslightbox-svg-path{fill:#f1f1f1}.fslightbox-slide-btn{padding:9px;font-size:26px;background:rgba(35,35,35,.65)}@media (min-width:768px){.fslightbox-slide-btn{padding:10px}}@media (min-width:1600px){.fslightbox-slide-btn{padding:11px}}.fslightbox-slide-btn-container-previous{left:0}@media (max-width:475.99px){.fslightbox-slide-btn-container-previous{padding-left:3px}}.fslightbox-slide-btn-container-next{right:0;padding-left:12px;padding-right:3px}@media (min-width:476px){.fslightbox-slide-btn-container-next{padding-left:22px}}@media (min-width:768px){.fslightbox-slide-btn-container-next{padding-left:30px}}@media (min-width:476px){.fslightbox-slide-btn-container-next{padding-right:6px}}.fslightbox-down-event-detector{position:absolute;z-index:1}.fslightbox-slide-swiping-hoverer{z-index:4}.fslightbox-invalid-file-wrapper{font-size:22px;color:#eaebeb;margin:auto}.fslightbox-video{object-fit:cover}.fslightbox-youtube-iframe{border:0}.fslightboxl{display:block;margin:auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:67px;height:67px}.fslightboxl div{box-sizing:border-box;display:block;position:absolute;width:54px;height:54px;margin:6px;border:5px solid;border-color:#999 transparent transparent transparent;border-radius:50%;animation:fslightboxl 1.2s cubic-bezier(.5,0,.5,1) infinite}.fslightboxl div:nth-child(1){animation-delay:-.45s}.fslightboxl div:nth-child(2){animation-delay:-.3s}.fslightboxl div:nth-child(3){animation-delay:-.15s}@keyframes fslightboxl{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.fslightbox-source{position:relative;z-index:2;opacity:0}")),document.head.appendChild(A));function yt(s){var a,g=s.props,k=0,y={};this.getSourceTypeFromLocalStorageByUrl=function(Z){return a[Z]?a[Z]:X(Z)},this.handleReceivedSourceTypeForUrl=function(Z,V){if(y[V]===!1&&(k--,Z!=="invalid"?y[V]=Z:delete y[V],k===0)){(function(et,p){for(var M in p)et[M]=p[M]})(a,y);try{localStorage.setItem("fslightbox-types",JSON.stringify(a))}catch{}}};var X=function(Z){k++,y[Z]=!1};if(g.disableLocalStorage)this.getSourceTypeFromLocalStorageByUrl=function(){},this.handleReceivedSourceTypeForUrl=function(){};else{try{a=JSON.parse(localStorage.getItem("fslightbox-types"))}catch{}a||(a={},this.getSourceTypeFromLocalStorageByUrl=X)}}function Dt(s,a,g,k){var y=s.data,X=s.elements.sources,Z=g/k,V=0;this.adjustSize=function(){if((V=y.maxSourceWidth/Z)<y.maxSourceHeight)return g<y.maxSourceWidth&&(V=k),et();V=k>y.maxSourceHeight?y.maxSourceHeight:k,et()};var et=function(){X[a].style.width=V*Z+"px",X[a].style.height=V+"px"}}function Ct(s,a){var g=this,k=s.collections.sourceSizers,y=s.elements,X=y.sourceAnimationWrappers,Z=y.sources,V=s.isl,et=s.resolve;function p(M,J){k[a]=et(Dt,[a,M,J]),k[a].adjustSize()}this.runActions=function(M,J){V[a]=!0,Z[a].classList.add($),X[a].classList.add(st),X[a].removeChild(X[a].firstChild),p(M,J),g.runActions=p}}function Nt(s,a){var g,k=this,y=s.elements.sources,X=s.props,Z=(0,s.resolve)(Ct,[a]);this.handleImageLoad=function(V){var et=V.target,p=et.naturalWidth,M=et.naturalHeight;Z.runActions(p,M)},this.handleVideoLoad=function(V){var et=V.target,p=et.videoWidth,M=et.videoHeight;g=!0,Z.runActions(p,M)},this.handleNotMetaDatedVideoLoad=function(){g||k.handleYoutubeLoad()},this.handleYoutubeLoad=function(){var V=1920,et=1080;X.maxYoutubeDimensions&&(V=X.maxYoutubeDimensions.width,et=X.maxYoutubeDimensions.height),Z.runActions(V,et)},this.handleCustomLoad=function(){var V=y[a],et=V.offsetWidth,p=V.offsetHeight;et&&p?Z.runActions(et,p):setTimeout(k.handleCustomLoad)}}function wt(s,a,g){var k=s.elements.sources,y=s.props.customClasses,X=y[a]?y[a]:"";k[a].className=g+" "+X}function Tt(s,a){var g=s.elements.sources,k=s.props.customAttributes;for(var y in k[a])g[a].setAttribute(y,k[a][y])}function It(s,a){var g=s.collections.sourceLoadHandlers,k=s.elements,y=k.sources,X=k.sourceAnimationWrappers,Z=s.props.sources;y[a]=document.createElement("img"),wt(s,a,O),y[a].src=Z[a],y[a].onload=g[a].handleImageLoad,Tt(s,a),X[a].appendChild(y[a])}function St(s,a){var g=s.collections.sourceLoadHandlers,k=s.elements,y=k.sources,X=k.sourceAnimationWrappers,Z=s.props,V=Z.sources,et=Z.videosPosters;y[a]=document.createElement("video"),wt(s,a,O),y[a].src=V[a],y[a].onloadedmetadata=function(M){g[a].handleVideoLoad(M)},y[a].controls=!0,Tt(s,a),et[a]&&(y[a].poster=et[a]);var p=document.createElement("source");p.src=V[a],y[a].appendChild(p),setTimeout(g[a].handleNotMetaDatedVideoLoad,3e3),X[a].appendChild(y[a])}function rt(s,a){var g=s.collections.sourceLoadHandlers,k=s.elements,y=k.sources,X=k.sourceAnimationWrappers,Z=s.props.sources;y[a]=document.createElement("iframe"),wt(s,a,"".concat(O," ").concat(S,"youtube-iframe"));var V=Z[a],et=V.split("?")[1];y[a].src="https://www.youtube.com/embed/".concat(V.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/)[2],"?").concat(et||""),y[a].allowFullscreen=!0,Tt(s,a),X[a].appendChild(y[a]),g[a].handleYoutubeLoad()}function bt(s,a){var g=s.collections.sourceLoadHandlers,k=s.elements,y=k.sources,X=k.sourceAnimationWrappers,Z=s.props.sources;y[a]=Z[a],wt(s,a,"".concat(y[a].className," ").concat(O)),X[a].appendChild(y[a]),g[a].handleCustomLoad()}function Lt(s,a){var g=s.elements,k=g.sources,y=g.sourceAnimationWrappers;s.props.sources,k[a]=document.createElement("div"),k[a].className="".concat(S,"invalid-file-wrapper ").concat(P),k[a].innerHTML="Invalid source",y[a].classList.add(st),y[a].removeChild(y[a].firstChild),y[a].appendChild(k[a])}function Pt(s){var a=s.collections,g=a.sourceLoadHandlers,k=a.sourcesRenderFunctions,y=s.core.sourceDisplayFacade,X=s.resolve;this.runActionsForSourceTypeAndIndex=function(Z,V){var et;switch(Z!=="invalid"&&(g[V]=X(Nt,[V])),Z){case"image":et=It;break;case"video":et=St;break;case"youtube":et=rt;break;case"custom":et=bt;break;default:et=Lt}k[V]=function(){return et(s,V)},y.displaySourcesWhichShouldBeDisplayed()}}function qt(){var s,a,g,k={isUrlYoutubeOne:function(X){var Z=document.createElement("a");return Z.href=X,Z.hostname==="www.youtube.com"||Z.hostname==="youtu.be"},getTypeFromResponseContentType:function(X){return X.slice(0,X.indexOf("/"))}};function y(){if(g.readyState!==4){if(g.readyState===2){var X;switch(k.getTypeFromResponseContentType(g.getResponseHeader("content-type"))){case"image":X="image";break;case"video":X="video";break;default:X="invalid"}g.onreadystatechange=null,g.abort(),a(X)}}else a("invalid")}this.setUrlToCheck=function(X){s=X},this.getSourceType=function(X){if(k.isUrlYoutubeOne(s))return X("youtube");a=X,(g=new XMLHttpRequest).onreadystatechange=y,g.open("GET",s,!0),g.send()}}function Kt(s,a,g){var k=s.props,y=k.types,X=k.type,Z=k.sources,V=s.resolve;this.getTypeSetByClientForIndex=function(et){var p;return y&&y[et]?p=y[et]:X&&(p=X),p},this.retrieveTypeWithXhrForIndex=function(et){var p=V(qt);p.setUrlToCheck(Z[et]),p.getSourceType(function(M){a.handleReceivedSourceTypeForUrl(M,Z[et]),g.runActionsForSourceTypeAndIndex(M,et)})}}function re(s,a){var g=s.core.stageManager,k=s.elements,y=k.smw,X=k.sourceWrappersContainer,Z=s.props,V=0,et=document.createElement("div");function p(J){et.style.transform="translateX(".concat(J+V,"px)"),V=0}function M(){return(1+Z.slideDistance)*innerWidth}et.className="".concat(C," ").concat(F," ").concat(P),et.s=function(){et.style.display="flex"},et.h=function(){et.style.display="none"},et.a=function(){et.classList.add(j)},et.d=function(){et.classList.remove(j)},et.n=function(){et.style.removeProperty("transform")},et.v=function(J){return V=J,et},et.ne=function(){p(-M())},et.z=function(){p(0)},et.p=function(){p(M())},g.i(a)||et.h(),y[a]=et,X.appendChild(et),function(J,E){var m=J.elements,z=m.smw,Y=m.sourceAnimationWrappers,ht=document.createElement("div"),gt=document.createElement("div");gt.className="fslightboxl";for(var xt=0;xt<3;xt++){var Rt=document.createElement("div");gt.appendChild(Rt)}ht.appendChild(gt),z[E].appendChild(ht),Y[E]=ht}(s,a)}function _e(s,a,g,k){var y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.setAttributeNS(null,"width",a),y.setAttributeNS(null,"height",a),y.setAttributeNS(null,"viewBox",g);var X=document.createElementNS("http://www.w3.org/2000/svg","path");return X.setAttributeNS(null,"class","".concat(S,"svg-path")),X.setAttributeNS(null,"d",k),y.appendChild(X),s.appendChild(y),y}function ce(s,a){var g=document.createElement("div");return g.className="".concat(S,"toolbar-button ").concat(P),g.title=a,s.appendChild(g),g}function he(s,a){var g=document.createElement("div");g.className="".concat(S,"toolbar"),a.appendChild(g),function(k,y){var X=k.componentsServices,Z=k.data,V=k.fs,et="M4.5 11H3v4h4v-1.5H4.5V11zM3 7h1.5V4.5H7V3H3v4zm10.5 6.5H11V15h4v-4h-1.5v2.5zM11 3v1.5h2.5V7H15V3h-4z",p=ce(y);p.title="Enter fullscreen";var M=_e(p,"20px","0 0 18 18",et);X.ofs=function(){Z.ifs=!0,p.title="Exit fullscreen",M.setAttributeNS(null,"width","24px"),M.setAttributeNS(null,"height","24px"),M.setAttributeNS(null,"viewBox","0 0 950 1024"),M.firstChild.setAttributeNS(null,"d","M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z")},X.xfs=function(){Z.ifs=!1,p.title="Enter fullscreen",M.setAttributeNS(null,"width","20px"),M.setAttributeNS(null,"height","20px"),M.setAttributeNS(null,"viewBox","0 0 18 18"),M.firstChild.setAttributeNS(null,"d",et)},p.onclick=V.t}(s,g),function(k,y){var X=ce(y,"Close");X.onclick=k.core.lightboxCloser.closeLightbox,_e(X,"20px","0 0 24 24","M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z")}(s,g)}function me(s){var a=s.props.sources,g=s.elements.container,k=document.createElement("div");k.className="".concat(S,"nav"),g.appendChild(k),he(s,k),a.length>1&&function(y,X){var Z=y.componentsServices,V=y.props.sources,et=(y.stageIndexes,document.createElement("div"));et.className="".concat(S,"slide-number-container");var p=document.createElement("div");p.className=P;var M=document.createElement("span");Z.setSlideNumber=function(m){return M.innerHTML=m};var J=document.createElement("span");J.className="".concat(S,"slash");var E=document.createElement("div");E.innerHTML=V.length,et.appendChild(p),p.appendChild(M),p.appendChild(J),p.appendChild(E),X.appendChild(et),setTimeout(function(){p.offsetWidth>55&&(et.style.justifyContent="flex-start")})}(s,k)}function zt(s,a,g,k){var y=s.elements.container,X=g.charAt(0).toUpperCase()+g.slice(1),Z=document.createElement("div");Z.className="".concat(W," ").concat(W,"-").concat(g),Z.title="".concat(X," slide"),Z.onclick=a,function(V,et){var p=document.createElement("div");p.className="".concat(q," ").concat(P),_e(p,"20px","0 0 20 20",et),V.appendChild(p)}(Z,k),y.appendChild(Z)}function oe(s){var a=s.core,g=a.lightboxCloser,k=a.slideChangeFacade,y=s.fs;this.listener=function(X){switch(X.key){case"Escape":g.closeLightbox();break;case"ArrowLeft":k.changeToPrevious();break;case"ArrowRight":k.changeToNext();break;case"F11":X.preventDefault(),y.t()}}}function Ce(s){var a=s.elements,g=s.sourcePointerProps,k=s.stageIndexes;function y(X,Z){a.smw[X].v(g.swipedX)[Z]()}this.runActionsForEvent=function(X){var Z,V,et;a.container.contains(a.slideSwipingHoverer)||a.container.appendChild(a.slideSwipingHoverer),Z=a.container,V=B,(et=Z.classList).contains(V)||et.add(V),g.swipedX=X.screenX-g.downScreenX;var p=k.previous,M=k.next;y(k.current,"z"),p!==void 0&&g.swipedX>0?y(p,"ne"):M!==void 0&&g.swipedX<0&&y(M,"p")}}function se(s){var a=s.props.sources,g=s.resolve,k=s.sourcePointerProps,y=g(Ce);a.length===1?this.listener=function(){k.swipedX=1}:this.listener=function(X){k.isPointering&&y.runActionsForEvent(X)}}function Ee(s){var a=s.core.slideIndexChanger,g=s.elements.smw,k=s.stageIndexes,y=s.sws;function X(V){var et=g[k.current];et.a(),et[V]()}function Z(V,et){V!==void 0&&(g[V].s(),g[V][et]())}this.runPositiveSwipedXActions=function(){var V=k.previous;if(V===void 0)X("z");else{X("p");var et=k.next;a.changeTo(V);var p=k.previous;y.d(p),y.b(et),X("z"),Z(p,"ne")}},this.runNegativeSwipedXActions=function(){var V=k.next;if(V===void 0)X("z");else{X("ne");var et=k.previous;a.changeTo(V);var p=k.next;y.d(p),y.b(et),X("z"),Z(p,"p")}}}function ne(s,a){s.contains(a)&&s.removeChild(a)}function lt(s){var a=s.core.lightboxCloser,g=s.elements,k=s.resolve,y=s.sourcePointerProps,X=k(Ee);this.runNoSwipeActions=function(){ne(g.container,g.slideSwipingHoverer),y.isSourceDownEventTarget||a.closeLightbox(),y.isPointering=!1},this.runActions=function(){y.swipedX>0?X.runPositiveSwipedXActions():X.runNegativeSwipedXActions(),ne(g.container,g.slideSwipingHoverer),g.container.classList.remove(B),y.isPointering=!1}}function i(s){var a=s.resolve,g=s.sourcePointerProps,k=a(lt);this.listener=function(){g.isPointering&&(g.swipedX?k.runActions():k.runNoSwipeActions())}}function r(s){var a=this,g=s.core,k=g.eventsDispatcher,y=g.globalEventsController,X=g.scrollbarRecompensor,Z=s.data,V=s.elements,et=s.fs,p=s.props,M=s.sourcePointerProps;this.isLightboxFadingOut=!1,this.runActions=function(){a.isLightboxFadingOut=!0,V.container.classList.add(R),y.removeListeners(),p.exitFullscreenOnClose&&Z.ifs&&et.x(),setTimeout(function(){a.isLightboxFadingOut=!1,M.isPointering=!1,V.container.classList.remove(R),document.documentElement.classList.remove(tt),X.removeRecompense(),document.body.removeChild(V.container),k.dispatch("onClose")},270)}}function d(s,a){var g=s.classList;g.contains(a)&&g.remove(a)}function f(s){var a,g,k;g=(a=s).core.eventsDispatcher,k=a.props,g.dispatch=function(y){k[y]&&k[y]()},function(y){var X=y.componentsServices,Z=y.data,V=y.fs,et=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];function p(J){for(var E=0;E<et.length;E++)document[J](et[E],M)}function M(){document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement?X.ofs():X.xfs()}V.o=function(){X.ofs();var J=document.documentElement;J.requestFullscreen?J.requestFullscreen():J.mozRequestFullScreen?J.mozRequestFullScreen():J.webkitRequestFullscreen?J.webkitRequestFullscreen():J.msRequestFullscreen&&J.msRequestFullscreen()},V.x=function(){X.xfs(),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},V.t=function(){Z.ifs?V.x():V.o()},V.l=function(){p("addEventListener")},V.q=function(){p("removeEventListener")}}(s),function(y){var X=y.core,Z=X.globalEventsController,V=X.windowResizeActioner,et=y.fs,p=y.resolve,M=p(oe),J=p(se),E=p(i);Z.attachListeners=function(){document.addEventListener("pointermove",J.listener),document.addEventListener("pointerup",E.listener),addEventListener("resize",V.runActions),document.addEventListener("keydown",M.listener),et.l()},Z.removeListeners=function(){document.removeEventListener("pointermove",J.listener),document.removeEventListener("pointerup",E.listener),removeEventListener("resize",V.runActions),document.removeEventListener("keydown",M.listener),et.q()}}(s),function(y){var X=y.core.lightboxCloser,Z=(0,y.resolve)(r);X.closeLightbox=function(){Z.isLightboxFadingOut||Z.runActions()}}(s),function(y){var X=y.data,Z=y.core.scrollbarRecompensor;function V(){document.body.offsetHeight>innerHeight&&(document.body.style.marginRight=X.scrollbarWidth+"px")}Z.addRecompense=function(){document.readyState==="complete"?V():addEventListener("load",function(){V(),Z.addRecompense=V})},Z.removeRecompense=function(){document.body.style.removeProperty("margin-right")}}(s),function(y){var X=y.core,Z=X.slideChangeFacade,V=X.slideIndexChanger,et=X.stageManager;y.props.sources.length>1?(Z.changeToPrevious=function(){V.jumpTo(et.getPreviousSlideIndex())},Z.changeToNext=function(){V.jumpTo(et.getNextSlideIndex())}):(Z.changeToPrevious=function(){},Z.changeToNext=function(){})}(s),function(y){var X=y.componentsServices,Z=y.core,V=Z.slideIndexChanger,et=Z.sourceDisplayFacade,p=Z.stageManager,M=y.elements,J=M.smw,E=M.sourceAnimationWrappers,m=y.isl,z=y.stageIndexes,Y=y.sws;V.changeTo=function(ht){z.current=ht,p.updateStageIndexes(),X.setSlideNumber(ht+1),et.displaySourcesWhichShouldBeDisplayed()},V.jumpTo=function(ht){var gt=z.previous,xt=z.current,Rt=z.next,Xt=m[xt],ie=m[ht];V.changeTo(ht);for(var ee=0;ee<J.length;ee++)J[ee].d();Y.d(xt),Y.c(),requestAnimationFrame(function(){requestAnimationFrame(function(){var ye=z.previous,ve=z.next;function Le(){p.i(xt)?xt===z.previous?J[xt].ne():xt===z.next&&J[xt].p():(J[xt].h(),J[xt].n())}Xt&&E[xt].classList.add(ut),ie&&E[z.current].classList.add(it),Y.a(),ye!==void 0&&ye!==xt&&J[ye].ne(),J[z.current].n(),ve!==void 0&&ve!==xt&&J[ve].p(),Y.b(gt),Y.b(Rt),m[xt]?setTimeout(Le,260):Le()})})}}(s),function(y){var X=y.core.sourcesPointerDown,Z=y.elements,V=Z.smw,et=Z.sources,p=y.sourcePointerProps,M=y.stageIndexes;X.listener=function(J){J.target.tagName!=="VIDEO"&&J.preventDefault(),p.isPointering=!0,p.downScreenX=J.screenX,p.swipedX=0;var E=et[M.current];E&&E.contains(J.target)?p.isSourceDownEventTarget=!0:p.isSourceDownEventTarget=!1;for(var m=0;m<V.length;m++)V[m].d()}}(s),function(y){var X=y.collections.sourcesRenderFunctions,Z=y.core.sourceDisplayFacade,V=y.props,et=y.stageIndexes;function p(M){X[M]&&(X[M](),delete X[M])}Z.displaySourcesWhichShouldBeDisplayed=function(){if(V.loadOnlyCurrentSource)p(et.current);else for(var M in et)p(et[M])}}(s),function(y){var X=y.core.stageManager,Z=y.elements,V=Z.smw,et=Z.sourceAnimationWrappers,p=y.isl,M=y.stageIndexes,J=y.sws;J.a=function(){for(var E in M)V[M[E]].s()},J.b=function(E){E===void 0||X.i(E)||(V[E].h(),V[E].n())},J.c=function(){for(var E in M)J.d(M[E])},J.d=function(E){if(p[E]){var m=et[E];d(m,st),d(m,it),d(m,ut)}}}(s),function(y){var X=y.collections.sourceSizers,Z=y.core.windowResizeActioner,V=y.data,et=y.elements.smw,p=y.stageIndexes;Z.runActions=function(){innerWidth<992?V.maxSourceWidth=innerWidth:V.maxSourceWidth=.9*innerWidth,V.maxSourceHeight=.9*innerHeight;for(var M=0;M<et.length;M++)et[M].d(),X[M]&&X[M].adjustSize();var J=p.previous,E=p.next;J!==void 0&&et[J].ne(),E!==void 0&&et[E].p()}}(s)}function l(s){var a=s.componentsServices,g=s.core,k=g.eventsDispatcher,y=g.globalEventsController,X=g.scrollbarRecompensor,Z=g.sourceDisplayFacade,V=g.stageManager,et=g.windowResizeActioner,p=s.data,M=s.elements,J=(s.props,s.stageIndexes),E=s.sws;function m(){var z,Y;p.i=!0,p.scrollbarWidth=function(){var ht=document.createElement("div"),gt=ht.style,xt=document.createElement("div");gt.visibility="hidden",gt.width="100px",gt.msOverflowStyle="scrollbar",gt.overflow="scroll",xt.style.width="100%",document.body.appendChild(ht);var Rt=ht.offsetWidth;ht.appendChild(xt);var Xt=xt.offsetWidth;return document.body.removeChild(ht),Rt-Xt}(),f(s),M.container=document.createElement("div"),M.container.className="".concat(S,"container ").concat(F," ").concat(st),function(ht){var gt=ht.elements;gt.slideSwipingHoverer=document.createElement("div"),gt.slideSwipingHoverer.className="".concat(S,"slide-swiping-hoverer ").concat(F," ").concat(C)}(s),me(s),function(ht){var gt=ht.core.sourcesPointerDown,xt=ht.elements,Rt=ht.props.sources,Xt=document.createElement("div");Xt.className="".concat(C," ").concat(F),xt.container.appendChild(Xt),Xt.addEventListener("pointerdown",gt.listener),xt.sourceWrappersContainer=Xt;for(var ie=0;ie<Rt.length;ie++)re(ht,ie)}(s),s.props.sources.length>1&&(Y=(z=s).core.slideChangeFacade,zt(z,Y.changeToPrevious,"previous","M18.271,9.212H3.615l4.184-4.184c0.306-0.306,0.306-0.801,0-1.107c-0.306-0.306-0.801-0.306-1.107,0L1.21,9.403C1.194,9.417,1.174,9.421,1.158,9.437c-0.181,0.181-0.242,0.425-0.209,0.66c0.005,0.038,0.012,0.071,0.022,0.109c0.028,0.098,0.075,0.188,0.142,0.271c0.021,0.026,0.021,0.061,0.045,0.085c0.015,0.016,0.034,0.02,0.05,0.033l5.484,5.483c0.306,0.307,0.801,0.307,1.107,0c0.306-0.305,0.306-0.801,0-1.105l-4.184-4.185h14.656c0.436,0,0.788-0.353,0.788-0.788S18.707,9.212,18.271,9.212z"),zt(z,Y.changeToNext,"next","M1.729,9.212h14.656l-4.184-4.184c-0.307-0.306-0.307-0.801,0-1.107c0.305-0.306,0.801-0.306,1.106,0l5.481,5.482c0.018,0.014,0.037,0.019,0.053,0.034c0.181,0.181,0.242,0.425,0.209,0.66c-0.004,0.038-0.012,0.071-0.021,0.109c-0.028,0.098-0.075,0.188-0.143,0.271c-0.021,0.026-0.021,0.061-0.045,0.085c-0.015,0.016-0.034,0.02-0.051,0.033l-5.483,5.483c-0.306,0.307-0.802,0.307-1.106,0c-0.307-0.305-0.307-0.801,0-1.105l4.184-4.185H1.729c-0.436,0-0.788-0.353-0.788-0.788S1.293,9.212,1.729,9.212z")),function(ht){for(var gt=ht.props.sources,xt=ht.resolve,Rt=xt(yt),Xt=xt(Pt),ie=xt(Kt,[Rt,Xt]),ee=0;ee<gt.length;ee++)if(typeof gt[ee]=="string"){var ye=ie.getTypeSetByClientForIndex(ee);if(ye)Xt.runActionsForSourceTypeAndIndex(ye,ee);else{var ve=Rt.getSourceTypeFromLocalStorageByUrl(gt[ee]);ve?Xt.runActionsForSourceTypeAndIndex(ve,ee):ie.retrieveTypeWithXhrForIndex(ee)}}else Xt.runActionsForSourceTypeAndIndex("custom",ee)}(s),k.dispatch("onInit")}s.open=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Y=J.previous,ht=J.current,gt=J.next;J.current=z,p.i||at(s),V.updateStageIndexes(),p.i?(E.c(),E.a(),E.b(Y),E.b(ht),E.b(gt),k.dispatch("onShow")):m(),Z.displaySourcesWhichShouldBeDisplayed(),a.setSlideNumber(z+1),document.body.appendChild(M.container),document.documentElement.classList.add(tt),X.addRecompense(),y.attachListeners(),et.runActions(),M.smw[J.current].n(),k.dispatch("onOpen")}}function w(s,a,g){return(w=b()?Reflect.construct.bind():function(k,y,X){var Z=[null];Z.push.apply(Z,y);var V=new(Function.bind.apply(k,Z));return X&&_(V,X.prototype),V}).apply(null,arguments)}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _(s,a){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,k){return g.__proto__=k,g})(s,a)}function u(s){return function(a){if(Array.isArray(a))return o(a)}(s)||function(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}(s)||function(a,g){if(a){if(typeof a=="string")return o(a,g);var k=Object.prototype.toString.call(a).slice(8,-1);if(k==="Object"&&a.constructor&&(k=a.constructor.name),k==="Map"||k==="Set")return Array.from(a);if(k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return o(a,g)}}(s)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function o(s,a){(a==null||a>s.length)&&(a=s.length);for(var g=0,k=new Array(a);g<a;g++)k[g]=s[g];return k}function h(){for(var s=document.getElementsByTagName("a"),a=function(y){if(!s[y].hasAttribute("data-fslightbox"))return"continue";var X=s[y].hasAttribute("data-href")?s[y].getAttribute("data-href"):s[y].getAttribute("href");if(!X)return console.warn('The "data-fslightbox" attribute was set without the "href" attribute.'),"continue";var Z=s[y].getAttribute("data-fslightbox");fsLightboxInstances[Z]||(fsLightboxInstances[Z]=new FsLightbox);var V=null;X.charAt(0)==="#"?(V=document.getElementById(X.substring(1)).cloneNode(!0)).removeAttribute("id"):V=X,fsLightboxInstances[Z].props.sources.push(V),fsLightboxInstances[Z].elements.a.push(s[y]);var et=fsLightboxInstances[Z].props.sources.length-1;s[y].onclick=function(Y){Y.preventDefault(),fsLightboxInstances[Z].open(et)},z("types","data-type"),z("videosPosters","data-video-poster"),z("customClasses","data-class"),z("customClasses","data-custom-class");for(var p=["href","data-fslightbox","data-href","data-type","data-video-poster","data-class","data-custom-class"],M=s[y].attributes,J=fsLightboxInstances[Z].props.customAttributes,E=0;E<M.length;E++)if(p.indexOf(M[E].name)===-1&&M[E].name.substr(0,5)==="data-"){J[et]||(J[et]={});var m=M[E].name.substr(5);J[et][m]=M[E].value}function z(Y,ht){s[y].hasAttribute(ht)&&(fsLightboxInstances[Z].props[Y][et]=s[y].getAttribute(ht))}},g=0;g<s.length;g++)a(g);var k=Object.keys(fsLightboxInstances);window.fsLightbox=fsLightboxInstances[k[k.length-1]]}window.FsLightbox=function(){var s=this;this.props={sources:[],customAttributes:[],customClasses:[],types:[],videosPosters:[],slideDistance:.3},this.data={isFullscreenOpen:!1,maxSourceWidth:0,maxSourceHeight:0,scrollbarWidth:0},this.isl=[],this.sourcePointerProps={downScreenX:null,isPointering:!1,isSourceDownEventTarget:!1,swipedX:0},this.stageIndexes={},this.elements={a:[],container:null,slideSwipingHoverer:null,smw:[],sourceWrappersContainer:null,sources:[],sourceAnimationWrappers:[]},this.componentsServices={setSlideNumber:function(){}},this.resolve=function(a){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return g.unshift(s),w(a,u(g))},this.collections={sourceLoadHandlers:[],sourcesRenderFunctions:[],sourceSizers:[]},this.core={eventsDispatcher:{},globalEventsController:{},lightboxCloser:{},lightboxUpdater:{},scrollbarRecompensor:{},slideChangeFacade:{},slideIndexChanger:{},sourcesPointerDown:{},sourceDisplayFacade:{},stageManager:{},windowResizeActioner:{}},this.fs={},this.sws={},l(this),this.close=function(){return s.core.lightboxCloser.closeLightbox()}},window.fsLightboxInstances={},h(),window.refreshFsLightbox=function(){for(var s in fsLightboxInstances){var a=fsLightboxInstances[s].props;fsLightboxInstances[s]=new FsLightbox,fsLightboxInstances[s].props=a,fsLightboxInstances[s].props.sources=[],fsLightboxInstances[s].elements.a=[]}h()}}])})})(Uo);const $o="https://cdn.jsdelivr.net/gh/DaimlarTech/blitz-ui-demo-cdn/cdn/cmaps/",Wo="https://cdn.jsdelivr.net/gh/DaimlarTech/blitz-ui-demo-cdn/cdn/pdf.worker.mjs";class Xo{constructor(U,x=2){if(!U||!U.dataset.url)throw new Error("invalid element!");this.element=U,this.url=U.dataset.url,this.scale=x,this.data=[]}loading(U){U?this.element.classList.add("pdf-preview__loading"):this.element.classList.remove("pdf-preview__loading")}async fetchFile(){return this.loading(!0),fetch(this.url,{headers:{"Content-Type":"application/pdf"}}).then(U=>U.blob()).then(U=>this.blobtoDataUrl(U)).then(U=>this.draw(U))}blobtoDataUrl(U){return new Promise(x=>{const n=new FileReader;n.readAsDataURL(U),n.onload=()=>{x(n.result.replace("data:application/pdf;base64,",""))}})}draw(U){Go.workerSrc=Wo,qo({data:atob(U),cMapUrl:$o,cMapPacked:!0}).promise.then(async x=>{for(let n=1;n<=x.numPages;n++)await this.getPage(n,x)},x=>{console.error(x)}).then(()=>{const x=document.createElement("img");x.setAttribute("class","pdf-preview__image"),x.onload=()=>{this.element.addEventListener("click",this.display(this.data)),this.element.appendChild(x),this.loading(!1)},x.src=this.data[0]})}display(U){var x=new FsLightbox;return x.props.sources=U,refreshFsLightbox(),()=>{x.open()}}async getPage(U,x){const n=this.scale,N=this.data;return new Promise(A=>{x.getPage(U).then(function(S){var ot=S.getViewport({scale:n}),B=document.createElement("canvas"),F=B.getContext("2d");B.height=ot.height,B.width=ot.width;var P={canvasContext:F,viewport:ot},tt=S.render(P);tt.promise.then(async()=>{N.push(B.toDataURL("image/png")),A()})})})}}class Vo extends Xo{async fetchFile(){return this.loading(!0),fetch(this.url,{headers:{"Content-Type":"application/pdf"}}).then(U=>U.blob()).then(U=>{var x=new Blob([U],{type:"application/pdf"});return Ko(x)}).then(U=>this.draw(U))}}function Ko(v){return new Promise(U=>{const x=new FileReader;x.readAsDataURL(v),x.onload=()=>{U(x.result.replace("data:application/pdf;base64,",""))}})}document.querySelectorAll('[data-role="pdf-preview"]').forEach(v=>{new Vo(v).fetchFile()});const Br=document.querySelector('[data-role="zip-search_input"]'),Ps=document.querySelector('[data-role="zip-search_btn"'),Yo=document.querySelector("#prefecture"),Qo=document.querySelector("#city"),Jo=document.querySelector("#street"),Zo=document.querySelector("#js-zip_error"),tl="https://api.zipaddress.net/";var yn="",Rs="";Br&&Ps&&(Br.addEventListener("input",il),Ps.addEventListener("click",sl));async function el(){const v=`${tl}?zipcode=${yn}`;return fetch(v).then(U=>U.json()).then(U=>U.code!==200?{data:U.message,error:!0}:{data:U.data,error:!1})}function il(v){const U=v.target.value;Ps.disabled=!0,Rs="",U.length===7?(yn=U,Ps.disabled=!1):U.length!=0&&(Rs="7\u6841\u306E\u6570\u5B57\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002"),jr()}async function sl(){var v;if(yn.length===7){const U=await el();if(U.error){Rs=U.data,jr();return}Yo.value=An[v=U.data.pref]??(An[v]=""),Qo.value=U.data.city,Jo.value=U.data.town}}function jr(){Zo.textContent=Rs}const An={\u5317\u6D77\u9053:1,\u9752\u68EE\u770C:2,\u5CA9\u624B\u770C:3,\u5BAE\u57CE\u770C:4,\u79CB\u7530\u770C:5,\u5C71\u5F62\u770C:6,\u798F\u5CF6\u770C:7,\u8328\u57CE\u770C:8,\u6803\u6728\u770C:9,\u7FA4\u99AC\u770C:10,\u57FC\u7389\u770C:11,\u5343\u8449\u770C:12,\u6771\u4EAC\u90FD:13,\u795E\u5948\u5DDD\u770C:14,\u65B0\u6F5F\u770C:15,\u5BCC\u5C71\u770C:16,\u77F3\u5DDD\u770C:17,\u798F\u4E95\u770C:18,\u5C71\u68A8\u770C:19,\u9577\u91CE\u770C:20,\u5C90\u961C\u770C:21,\u9759\u5CA1\u770C:22,\u611B\u77E5\u770C:23,\u4E09\u91CD\u770C:24,\u6ECB\u8CC0\u770C:25,\u4EAC\u90FD\u5E9C:26,\u5927\u962A\u5E9C:27,\u5175\u5EAB\u770C:28,\u5948\u826F\u770C:29,\u548C\u6B4C\u5C71\u770C:30,\u9CE5\u53D6\u770C:31,\u5CF6\u6839\u770C:32,\u5CA1\u5C71\u770C:33,\u5E83\u5CF6\u770C:34,\u5C71\u53E3\u770C:35,\u5FB3\u5CF6\u770C:36,\u9999\u5DDD\u770C:37,\u611B\u5A9B\u770C:38,\u9AD8\u77E5\u770C:39,\u798F\u5CA1\u770C:40,\u4F50\u8CC0\u770C:41,\u9577\u5D0E\u770C:42,\u718A\u672C\u770C:43,\u5927\u5206\u770C:44,\u5BAE\u5D0E\u770C:45,\u9E7F\u5150\u5CF6\u770C:46,\u6C96\u7E04\u770C:47}})();
